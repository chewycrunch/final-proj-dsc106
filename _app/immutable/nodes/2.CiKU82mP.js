import{f as st,a as at,c as ws}from"../chunks/DoRUkMhY.js";import{i as De}from"../chunks/CTrH24o-.js";import{o as ze,c as Zi,a as Ji}from"../chunks/52fD4koz.js";import{C as er,w as qt,a9 as ks,ai as As,y as Ms,x as $s,g as c,Q as se,z as Ss,A as Es,B as li,D as nr,J as Ve,ac as Ns,F as ji,G as ta,I as Cs,au as ea,ag as na,i as ra,X as V,av as ui,aw as rr,M as br,a5 as ci,ax as Br,ay as Ts,az as Or,aA as fi,aB as Fs,af as Rs,aC as Is,ar as Ds,aD as zs,aa as Ps,aE as Ls,aF as qs,aG as Bs,aH as Os,aI as Hs,b as ia,L as Hr,aJ as Xs,aK as aa,a7 as Vs,K as sa,aL as Ys,p as ge,aq as Us,q as N,m as me,o as C,v as R,t as Yt,aM as it,W as L,e as ht,aN as Pe,at as It,aO as hi,aP as re,k as Xr}from"../chunks/BB7v2pX3.js";import{p as Dt,i as Et,b as In}from"../chunks/oI3_PeFi.js";import{w as Gs,b as Ws}from"../chunks/DWxYCrwD.js";import{a as Ks,l as Dn,s as ut,e as ce}from"../chunks/CmBeYHHS.js";import{s as fn,c as hn}from"../chunks/DOzdMIMB.js";function oa(t,e){return e}function Qs(t,e,n,r){for(var i=[],a=e.length,s=0;s<a;s++)Fs(e[s].e,i,!0);var o=a>0&&i.length===0&&n!==null;if(o){var l=n.parentNode;Rs(l),l.append(n),r.clear(),ie(t,e[0].prev,e[a-1].next)}Is(i,()=>{for(var u=0;u<a;u++){var h=e[u];o||(r.delete(h.k),ie(t,h.prev,h.next)),Ds(h.e,!o)}})}function la(t,e,n,r,i,a=null){var s=t,o={flags:e,items:new Map,first:null},l=(e&ea)!==0;if(l){var u=t;s=qt?er(ks(u)):u.appendChild(As())}qt&&Ms();var h=null,f=!1,d=se(()=>{var g=n();return ra(g)?g:g==null?[]:na(g)});$s(()=>{var g=c(d),x=g.length;if(f&&x===0)return;f=x===0;let k=!1;if(qt){var p=Ss(s)===Es;p!==(x===0)&&(s=li(),er(s),nr(!1),k=!0)}if(qt){for(var v=null,y,m=0;m<x;m++){if(Ve.nodeType===8&&Ve.data===Ns){s=Ve,k=!0,nr(!1);break}var w=g[m],_=r(w,m);y=ua(Ve,o,v,null,w,_,m,i,e,n),o.items.set(_,y),v=y}x>0&&er(li())}qt||Zs(g,o,s,i,e,r,n),a!==null&&(x===0?h?ji(h):h=ta(()=>a(s)):h!==null&&Cs(h,()=>{h=null})),k&&nr(!0),c(d)}),qt&&(s=Ve)}function Zs(t,e,n,r,i,a,s){var q,K,F,B;var o=(i&Ts)!==0,l=(i&(Or|Br))!==0,u=t.length,h=e.items,f=e.first,d=f,g,x=null,k,p=[],v=[],y,m,w,_;if(o)for(_=0;_<u;_+=1)y=t[_],m=a(y,_),w=h.get(m),w!==void 0&&((q=w.a)==null||q.measure(),(k??(k=new Set)).add(w));for(_=0;_<u;_+=1){if(y=t[_],m=a(y,_),w=h.get(m),w===void 0){var z=d?d.e.nodes_start:n;x=ua(z,e,x,x===null?e.first:x.next,y,m,_,r,i,s),h.set(m,x),p=[],v=[],d=x.next;continue}if(l&&Js(w,y,_,i),(w.e.f&rr)!==0&&(ji(w.e),o&&((K=w.a)==null||K.unfix(),(k??(k=new Set)).delete(w))),w!==d){if(g!==void 0&&g.has(w)){if(p.length<v.length){var E=v[0],P;x=E.prev;var S=p[0],T=p[p.length-1];for(P=0;P<p.length;P+=1)di(p[P],E,n);for(P=0;P<v.length;P+=1)g.delete(v[P]);ie(e,S.prev,T.next),ie(e,x,S),ie(e,T,E),d=E,x=T,_-=1,p=[],v=[]}else g.delete(w),di(w,d,n),ie(e,w.prev,w.next),ie(e,w,x===null?e.first:x.next),ie(e,x,w),x=w;continue}for(p=[],v=[];d!==null&&d.k!==m;)(d.e.f&rr)===0&&(g??(g=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;w=d}p.push(w),x=w,d=w.next}if(d!==null||g!==void 0){for(var b=g===void 0?[]:na(g);d!==null;)(d.e.f&rr)===0&&b.push(d),d=d.next;var A=b.length;if(A>0){var M=(i&ea)!==0&&u===0?n:null;if(o){for(_=0;_<A;_+=1)(F=b[_].a)==null||F.measure();for(_=0;_<A;_+=1)(B=b[_].a)==null||B.fix()}Qs(e,b,M,h)}}o&&br(()=>{var D;if(k!==void 0)for(w of k)(D=w.a)==null||D.apply()}),ci.first=e.first&&e.first.e,ci.last=x&&x.e}function Js(t,e,n,r){(r&Or)!==0&&fi(t.v,e),(r&Br)!==0?fi(t.i,n):t.i=n}function ua(t,e,n,r,i,a,s,o,l,u){var h=(l&Or)!==0,f=(l&zs)===0,d=h?f?V(i):ui(i):i,g=(l&Br)===0?s:ui(s),x={i:g,v:d,k:a,a:null,e:null,prev:n,next:r};try{return x.e=ta(()=>o(t,d,g,u),qt),x.e.prev=n&&n.e,x.e.next=r&&r.e,n===null?e.first=x:(n.next=x,n.e.next=x.e),r!==null&&(r.prev=x,r.e.prev=x.e),x}finally{}}function di(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var s=Ps(a);i.before(a),a=s}}function ie(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const js=Symbol("is custom element"),to=Symbol("is html");function gt(t){if(qt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;U(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;U(t,"checked",null),t.checked=i}}};t.__on_r=n,Ls(n),Ks()}}function U(t,e,n,r){var i=eo(t);qt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[qs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&no(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function eo(t){return t.__attributes??(t.__attributes={[js]:t.nodeName.includes("-"),[to]:t.namespaceURI===Bs})}var pi=new Map;function no(t){var e=pi.get(t.nodeName);if(e)return e;pi.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Hs(r);for(var a in n)n[a].set&&e.push(a);r=Os(r)}return e}const ro=()=>performance.now(),Kt={tick:t=>requestAnimationFrame(t),now:()=>ro(),tasks:new Set};function ca(){const t=Kt.now();Kt.tasks.forEach(e=>{e.c(t)||(Kt.tasks.delete(e),e.f())}),Kt.tasks.size!==0&&Kt.tick(ca)}function io(t){let e;return Kt.tasks.size===0&&Kt.tick(ca),{promise:new Promise(n=>{Kt.tasks.add(e={c:t,f:n})}),abort(){Kt.tasks.delete(e)}}}function ee(t,e,n=e){var r=Xs();Dn(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=sr(t)?or(a):a,n(a),r&&a!==(a=e())){var s=t.selectionStart,o=t.selectionEnd;t.value=a??"",o!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(o,t.value.length))}}),(qt&&t.defaultValue!==t.value||ia(e)==null&&t.value)&&n(sr(t)?or(t.value):t.value),Hr(()=>{var i=e();sr(t)&&i===or(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}const ir=new Set;function ar(t,e,n,r,i=r){var a=n.getAttribute("type")==="checkbox",s=t;let o=!1;if(e!==null)for(var l of e)s=s[l]??(s[l]=[]);s.push(n),Dn(n,"change",()=>{var u=n.__value;a&&(u=gi(s,u,n.checked)),i(u)},()=>i(a?[]:null)),Hr(()=>{var u=r();if(qt&&n.defaultChecked!==n.checked){o=!0;return}a?(u=u||[],n.checked=u.includes(n.__value)):n.checked=aa(n.__value,u)}),Vs(()=>{var u=s.indexOf(n);u!==-1&&s.splice(u,1)}),ir.has(s)||(ir.add(s),br(()=>{s.sort((u,h)=>u.compareDocumentPosition(h)===4?-1:1),ir.delete(s)})),br(()=>{if(o){var u;if(a)u=gi(s,u,n.checked);else{var h=s.find(f=>f.checked);u=h==null?void 0:h.__value}i(u)}})}function Ee(t,e,n=e){Dn(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),(qt&&t.defaultChecked!==t.checked||ia(e)==null)&&n(t.checked),Hr(()=>{var r=e();t.checked=!!r})}function gi(t,e,n){for(var r=new Set,i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function sr(t){var e=t.type;return e==="number"||e==="range"}function or(t){return t===""?null:+t}function fa(t,e,n){if(t.multiple)return e==null?void 0:ra(e)?so(t,e):Ys();for(var r of t.options){var i=Je(r);if(aa(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ao(t,e){sa(()=>{var n=new MutationObserver(()=>{var r=t.__value;fa(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function mi(t,e,n=e){var r=!0;Dn(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Je);else{var o=t.querySelector(a)??t.querySelector("option:not([disabled])");s=o&&Je(o)}n(s)}),sa(()=>{var i=e();if(fa(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Je(a),n(i))}t.__value=i,r=!1}),ao(t)}function so(t,e){for(var n of t.options)n.selected=e.includes(Je(n))}function Je(t){return"__value"in t?t.__value:t.value}var vi={},lr={},ur=34,Ye=10,cr=13;function ha(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function oo(t,e){var n=ha(t);return function(r,i){return e(n(r),i,t)}}function yi(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function St(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lo(t){return t<0?"-"+St(-t,6):t>9999?"+"+St(t,6):St(t,4)}function uo(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":lo(t.getUTCFullYear())+"-"+St(t.getUTCMonth()+1,2)+"-"+St(t.getUTCDate(),2)+(i?"T"+St(e,2)+":"+St(n,2)+":"+St(r,2)+"."+St(i,3)+"Z":r?"T"+St(e,2)+":"+St(n,2)+":"+St(r,2)+"Z":n||e?"T"+St(e,2)+":"+St(n,2)+"Z":"")}function co(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var g,x,k=i(f,function(p,v){if(g)return g(p,v-1);x=p,g=d?oo(p,d):ha(p)});return k.columns=x||[],k}function i(f,d){var g=[],x=f.length,k=0,p=0,v,y=x<=0,m=!1;f.charCodeAt(x-1)===Ye&&--x,f.charCodeAt(x-1)===cr&&--x;function w(){if(y)return lr;if(m)return m=!1,vi;var z,E=k,P;if(f.charCodeAt(E)===ur){for(;k++<x&&f.charCodeAt(k)!==ur||f.charCodeAt(++k)===ur;);return(z=k)>=x?y=!0:(P=f.charCodeAt(k++))===Ye?m=!0:P===cr&&(m=!0,f.charCodeAt(k)===Ye&&++k),f.slice(E+1,z-1).replace(/""/g,'"')}for(;k<x;){if((P=f.charCodeAt(z=k++))===Ye)m=!0;else if(P===cr)m=!0,f.charCodeAt(k)===Ye&&++k;else if(P!==n)continue;return f.slice(E,z)}return y=!0,f.slice(E,x)}for(;(v=w())!==lr;){for(var _=[];v!==vi&&v!==lr;)_.push(v),v=w();d&&(_=d(_,p++))==null||g.push(_)}return g}function a(f,d){return f.map(function(g){return d.map(function(x){return h(g[x])}).join(t)})}function s(f,d){return d==null&&(d=yi(f)),[d.map(h).join(t)].concat(a(f,d)).join(`
`)}function o(f,d){return d==null&&(d=yi(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?uo(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:o,formatRows:l,formatRow:u,formatValue:h}}var fo=co(","),ho=fo.parse;function po(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function go(t,e){return fetch(t,e).then(po)}function mo(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),go(e,n).then(function(i){return t(i,r)})}}var vo=mo(ho);function xi(t){return Object.prototype.toString.call(t)==="[object Date]"}function yo(t){return t}function xo(t){const e=t-1;return e*e*e+1}function wr(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,a)=>wr(t[a],i));return i=>r.map(a=>a(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(xi(t)&&xi(e)){const a=t.getTime(),o=e.getTime()-a;return l=>new Date(a+l*o)}const r=Object.keys(e),i={};return r.forEach(a=>{i[a]=wr(t[a],e[a])}),a=>{const s={};return r.forEach(o=>{s[o]=i[o](a)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}return()=>e}function _o(t,e={}){const n=Gs(t);let r,i=t;function a(s,o){if(i=s,t==null)return n.set(t=s),Promise.resolve();let l=r,u=!1,{delay:h=0,duration:f=400,easing:d=yo,interpolate:g=wr}={...e,...o};if(f===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const x=Kt.now()+h;let k;return r=io(p=>{if(p<x)return!0;u||(k=g(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),l&&(l.abort(),l=null);const v=p-x;return v>f?(n.set(t=s),!1):(n.set(t=k(d(v/f))),!0)}),r.promise}return{set:a,update:(s,o)=>a(s(i,t),o),subscribe:n.subscribe}}var bo=st('<div class="text-center"><h2 class="text-4xl font-extrabold tracking-tight tabular-nums svelte-19d6zus"> </h2> <p class="text-xs tracking-wide text-gray-500 uppercase"> </p></div>'),wo=st('<div class="mt-6 flex flex-wrap justify-center gap-8"></div>');function ko(t,e){ge(e,!0);let n=Dt(e,"duration",3,1200);const r=Us(()=>e.stats.map(()=>_o(0,{duration:n(),easing:xo})));ze(()=>{let a=0;e.stats.forEach(({value:s},o)=>{setTimeout(()=>c(r)[o].set(s),a),a+=n()+400})});var i=wo();la(i,21,()=>e.stats,oa,(a,s,o)=>{let l=()=>c(s).label;var u=bo(),h=C(u),f=C(h,!0);N(h);var d=R(h,2),g=C(d,!0);N(d),N(u),Yt(()=>{ut(f,e.stats[o].value),ut(g,l())}),at(a,u)}),N(i),at(t,i),me()}var kr="http://www.w3.org/1999/xhtml";const _i={svg:"http://www.w3.org/2000/svg",xhtml:kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),_i.hasOwnProperty(e)?{space:_i[e],local:t}:t}function Ao(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===kr&&e.documentElement.namespaceURI===kr?e.createElement(t):e.createElementNS(n,t)}}function Mo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function da(t){var e=zn(t);return(e.local?Mo:Ao)(e)}function $o(){}function Vr(t){return t==null?$o:function(){return this.querySelector(t)}}function So(t){typeof t!="function"&&(t=Vr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new zt(r,this._parents)}function Eo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function No(){return[]}function pa(t){return t==null?No:function(){return this.querySelectorAll(t)}}function Co(t){return function(){return Eo(t.apply(this,arguments))}}function To(t){typeof t=="function"?t=Co(t):t=pa(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new zt(r,i)}function ga(t){return function(){return this.matches(t)}}function ma(t){return function(e){return e.matches(t)}}var Fo=Array.prototype.find;function Ro(t){return function(){return Fo.call(this.children,t)}}function Io(){return this.firstElementChild}function Do(t){return this.select(t==null?Io:Ro(typeof t=="function"?t:ma(t)))}var zo=Array.prototype.filter;function Po(){return Array.from(this.children)}function Lo(t){return function(){return zo.call(this.children,t)}}function qo(t){return this.selectAll(t==null?Po:Lo(typeof t=="function"?t:ma(t)))}function Bo(t){typeof t!="function"&&(t=ga(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new zt(r,this._parents)}function va(t){return new Array(t.length)}function Oo(){return new zt(this._enter||this._groups.map(va),this._parents)}function kn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}kn.prototype={constructor:kn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ho(t){return function(){return t}}function Xo(t,e,n,r,i,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new kn(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Vo(t,e,n,r,i,a,s){var o,l,u=new Map,h=e.length,f=a.length,d=new Array(h),g;for(o=0;o<h;++o)(l=e[o])&&(d[o]=g=s.call(l,l.__data__,o,e)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<f;++o)g=s.call(t,a[o],o,a)+"",(l=u.get(g))?(r[o]=l,l.__data__=a[o],u.delete(g)):n[o]=new kn(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&u.get(d[o])===l&&(i[o]=l)}function Yo(t){return t.__data__}function Uo(t,e){if(!arguments.length)return Array.from(this,Yo);var n=e?Vo:Xo,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ho(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],d=f.length,g=Go(t.call(h,h&&h.__data__,u,r)),x=g.length,k=o[u]=new Array(x),p=s[u]=new Array(x),v=l[u]=new Array(d);n(h,f,k,p,v,g,e);for(var y=0,m=0,w,_;y<x;++y)if(w=k[y]){for(y>=m&&(m=y+1);!(_=p[m])&&++m<x;);w._next=_||null}}return s=new zt(s,r),s._enter=o,s._exit=l,s}function Go(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wo(){return new zt(this._exit||this._groups.map(va),this._parents)}function Ko(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Qo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=n[l],h=r[l],f=u.length,d=o[l]=new Array(f),g,x=0;x<f;++x)(g=u[x]||h[x])&&(d[x]=g);for(;l<i;++l)o[l]=n[l];return new zt(o,this._parents)}function Zo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Jo(t){t||(t=jo);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(l[h]=u);l.sort(e)}return new zt(i,this._parents).order()}function jo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function tl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function el(){return Array.from(this)}function nl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function rl(){let t=0;for(const e of this)++t;return t}function il(){return!this.node()}function al(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function sl(t){return function(){this.removeAttribute(t)}}function ol(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ll(t,e){return function(){this.setAttribute(t,e)}}function ul(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function cl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hl(t,e){var n=zn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ol:sl:typeof e=="function"?n.local?fl:cl:n.local?ul:ll)(n,e))}function ya(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dl(t){return function(){this.style.removeProperty(t)}}function pl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function gl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ml(t,e,n){return arguments.length>1?this.each((e==null?dl:typeof e=="function"?gl:pl)(t,e,n??"")):Te(this.node(),t)}function Te(t,e){return t.style.getPropertyValue(e)||ya(t).getComputedStyle(t,null).getPropertyValue(e)}function vl(t){return function(){delete this[t]}}function yl(t,e){return function(){this[t]=e}}function xl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function _l(t,e){return arguments.length>1?this.each((e==null?vl:typeof e=="function"?xl:yl)(t,e)):this.node()[t]}function xa(t){return t.trim().split(/^|\s+/)}function Yr(t){return t.classList||new _a(t)}function _a(t){this._node=t,this._names=xa(t.getAttribute("class")||"")}_a.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ba(t,e){for(var n=Yr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wa(t,e){for(var n=Yr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function bl(t){return function(){ba(this,t)}}function wl(t){return function(){wa(this,t)}}function kl(t,e){return function(){(e.apply(this,arguments)?ba:wa)(this,t)}}function Al(t,e){var n=xa(t+"");if(arguments.length<2){for(var r=Yr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?kl:e?bl:wl)(n,e))}function Ml(){this.textContent=""}function $l(t){return function(){this.textContent=t}}function Sl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function El(t){return arguments.length?this.each(t==null?Ml:(typeof t=="function"?Sl:$l)(t)):this.node().textContent}function Nl(){this.innerHTML=""}function Cl(t){return function(){this.innerHTML=t}}function Tl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Fl(t){return arguments.length?this.each(t==null?Nl:(typeof t=="function"?Tl:Cl)(t)):this.node().innerHTML}function Rl(){this.nextSibling&&this.parentNode.appendChild(this)}function Il(){return this.each(Rl)}function Dl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zl(){return this.each(Dl)}function Pl(t){var e=typeof t=="function"?t:da(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ll(){return null}function ql(t,e){var n=typeof t=="function"?t:da(t),r=e==null?Ll:typeof e=="function"?e:Vr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bl(){var t=this.parentNode;t&&t.removeChild(this)}function Ol(){return this.each(Bl)}function Hl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vl(t){return this.select(t?Xl:Hl)}function Yl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ul(t){return function(e){t.call(this,e,this.__data__)}}function Gl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Wl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Kl(t,e,n){return function(){var r=this.__on,i,a=Ul(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ql(t,e,n){var r=Gl(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(i=0,h=o[l];i<a;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?Kl:Wl,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function ka(t,e,n){var r=ya(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Zl(t,e){return function(){return ka(this,t,e)}}function Jl(t,e){return function(){return ka(this,t,e.apply(this,arguments))}}function jl(t,e){return this.each((typeof e=="function"?Jl:Zl)(t,e))}function*tu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Aa=[null];function zt(t,e){this._groups=t,this._parents=e}function Le(){return new zt([[document.documentElement]],Aa)}function eu(){return this}zt.prototype=Le.prototype={constructor:zt,select:So,selectAll:To,selectChild:Do,selectChildren:qo,filter:Bo,data:Uo,enter:Oo,exit:Wo,join:Ko,merge:Qo,selection:eu,order:Zo,sort:Jo,call:tl,nodes:el,node:nl,size:rl,empty:il,each:al,attr:hl,style:ml,property:_l,classed:Al,text:El,html:Fl,raise:Il,lower:zl,append:Pl,insert:ql,remove:Ol,clone:Vl,datum:Yl,on:Ql,dispatch:jl,[Symbol.iterator]:tu};function Z(t){return typeof t=="string"?new zt([[document.querySelector(t)]],[document.documentElement]):new zt([[t]],Aa)}function nu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bi(t,e){if(t=nu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ma(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $a(t){let e,n,r;t.length!==2?(e=Ne,n=(o,l)=>Ne(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ne||t===Ma?t:ru,n=t,r=t);function i(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function s(o,l,u=0,h=o.length){const f=i(o,l,u,h-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function ru(){return 0}function iu(t){return t===null?NaN:+t}function*au(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const su=$a(Ne),Sa=su.right;$a(iu).center;function ou(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function vn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Ar extends Map{constructor(e,n=cu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(wi(this,e))}has(e){return super.has(wi(this,e))}set(e,n){return super.set(lu(this,e),n)}delete(e){return super.delete(uu(this,e))}}function wi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function uu({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cu(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ea(t){return t}function fu(t,e,...n){return hu(t,Ea,e,n)}function hu(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const o=new Ar,l=r[s++];let u=-1;for(const h of a){const f=l(h,++u,a),d=o.get(f);d?d.push(h):o.set(f,[h])}for(const[h,f]of o)o.set(h,i(f,s));return e(o)}(t,0)}function du(t=Ne){if(t===Ne)return Na;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Na(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var pu=Array.prototype,gu=pu.slice;function fr(t){return()=>t}const mu=Math.sqrt(50),vu=Math.sqrt(10),yu=Math.sqrt(2);function An(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=mu?10:a>=vu?5:a>=yu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?An(t,e,n*2):[o,l,u]}function Ca(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?An(e,t,n):An(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Fe(t,e,n){return e=+e,t=+t,n=+n,An(t,e,n)[2]}function xu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Fe(e,t,n):Fe(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function _u(t,e,n){let r;for(;;){const i=Fe(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function bu(t){return Math.max(1,Math.ceil(Math.log(ou(t))/Math.LN2)+1)}function wu(){var t=Ea,e=vn,n=bu;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,o,l,u=new Array(s);for(a=0;a<s;++a)u[a]=t(i[a],a,i);var h=e(u),f=h[0],d=h[1],g=n(u,f,d);if(!Array.isArray(g)){const m=d,w=+g;if(e===vn&&([f,d]=_u(f,d,w)),g=Ca(f,d,w),g[0]<=f&&(l=Fe(f,d,w)),g[g.length-1]>=d)if(m>=d&&e===vn){const _=Fe(f,d,w);isFinite(_)&&(_>0?d=(Math.floor(d/_)+1)*_:_<0&&(d=(Math.ceil(d*-_)+1)/-_))}else g.pop()}for(var x=g.length,k=0,p=x;g[k]<=f;)++k;for(;g[p-1]>d;)--p;(k||p<x)&&(g=g.slice(k,p),x=p-k);var v=new Array(x+1),y;for(a=0;a<=x;++a)y=v[a]=[],y.x0=a>0?g[a-1]:f,y.x1=a<x?g[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[Math.min(x,Math.floor((o-f)/l))].push(i[a]);else if(l<0){for(a=0;a<s;++a)if((o=u[a])!=null&&f<=o&&o<=d){const m=Math.floor((f-o)*l);v[Math.min(x,m+(g[m]<=o))].push(i[a])}}}else for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[Sa(g,o,0,x)].push(i[a]);return v}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:fr(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:fr([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:fr(Array.isArray(i)?gu.call(i):i),r):n},r}function Qt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Mr(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ta(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Na:du(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+d)),x=Math.min(r,Math.floor(e+(l-u)*f/l+d));Ta(t,e,g,x,i)}const a=t[e];let s=n,o=r;for(Ue(t,n,e),i(t[r],a)>0&&Ue(t,n,r);s<o;){for(Ue(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Ue(t,n,o):(++o,Ue(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Ue(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function je(t,e,n){if(t=Float64Array.from(au(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Mr(t);if(e>=1)return Qt(t);var r,i=(r-1)*e,a=Math.floor(i),s=Qt(Ta(t,a).subarray(0,a+1)),o=Mr(t.subarray(a+1));return s+(o-s)*(i-a)}}function ku(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function yn(t,e){return je(t,.5,e)}function Au(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Mu(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Ur(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $u(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ki=Symbol("implicit");function Pn(){var t=new Ar,e=[],n=[],r=ki;function i(a){let s=t.get(a);if(s===void 0){if(r!==ki)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ar;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Pn(e,n).unknown(r)},Ur.apply(i,arguments),i}function Fa(){var t=Pn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,h=.5;delete t.unknown;function f(){var d=e().length,g=i<r,x=g?i:r,k=g?r:i;a=(k-x)/Math.max(1,d-l+u*2),o&&(a=Math.floor(a)),x+=(k-x-a*(d-l))*h,s=a*(1-l),o&&(x=Math.round(x),s=Math.round(s));var p=Au(d).map(function(v){return x+a*v});return n(g?p.reverse():p)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(d){return arguments.length?(o=!!d,f()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},t.copy=function(){return Fa(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(h)},Ur.apply(f(),arguments)}function Gr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ra(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rn(){}var tn=.7,Mn=1/tn,Ce="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Su=/^#([0-9a-f]{3,8})$/,Eu=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Nu=new RegExp(`^rgb\\(${Zt},${Zt},${Zt}\\)$`),Cu=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${en}\\)$`),Tu=new RegExp(`^rgba\\(${Zt},${Zt},${Zt},${en}\\)$`),Fu=new RegExp(`^hsl\\(${en},${Zt},${Zt}\\)$`),Ru=new RegExp(`^hsla\\(${en},${Zt},${Zt},${en}\\)$`),Ai={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gr(rn,he,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mi,formatHex:Mi,formatHex8:Iu,formatHsl:Du,formatRgb:$i,toString:$i});function Mi(){return this.rgb().formatHex()}function Iu(){return this.rgb().formatHex8()}function Du(){return Ia(this).formatHsl()}function $i(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Su.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Si(e):n===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?dn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?dn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Eu.exec(t))?new Ct(e[1],e[2],e[3],1):(e=Nu.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cu.exec(t))?dn(e[1],e[2],e[3],e[4]):(e=Tu.exec(t))?dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fu.exec(t))?Ci(e[1],e[2]/100,e[3]/100,1):(e=Ru.exec(t))?Ci(e[1],e[2]/100,e[3]/100,e[4]):Ai.hasOwnProperty(t)?Si(Ai[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Si(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function dn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ct(t,e,n,r)}function zu(t){return t instanceof rn||(t=he(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function $n(t,e,n,r){return arguments.length===1?zu(t):new Ct(t,e,n,r??1)}function Ct(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Gr(Ct,$n,Ra(rn,{brighter(t){return t=t==null?Mn:Math.pow(Mn,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(fe(this.r),fe(this.g),fe(this.b),Sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ei,formatHex:Ei,formatHex8:Pu,formatRgb:Ni,toString:Ni}));function Ei(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}`}function Pu(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}${ue((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ni(){const t=Sn(this.opacity);return`${t===1?"rgb(":"rgba("}${fe(this.r)}, ${fe(this.g)}, ${fe(this.b)}${t===1?")":`, ${t})`}`}function Sn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ue(t){return t=fe(t),(t<16?"0":"")+t.toString(16)}function Ci(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vt(t,e,n,r)}function Ia(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);if(t instanceof rn||(t=he(t)),!t)return new Vt;if(t instanceof Vt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Vt(s,o,l,t.opacity)}function Lu(t,e,n,r){return arguments.length===1?Ia(t):new Vt(t,e,n,r??1)}function Vt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Gr(Vt,Lu,Ra(rn,{brighter(t){return t=t==null?Mn:Math.pow(Mn,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ct(hr(t>=240?t-240:t+120,i,r),hr(t,i,r),hr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vt(Ti(this.h),pn(this.s),pn(this.l),Sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ti(this.h)}, ${pn(this.s)*100}%, ${pn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ti(t){return t=(t||0)%360,t<0?t+360:t}function pn(t){return Math.max(0,Math.min(1,t||0))}function hr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function qu(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function Bu(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return qu((n-r/e)*e,s,i,a,o)}}const Wr=t=>()=>t;function Ou(t,e){return function(n){return t+n*e}}function Hu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xu(t){return(t=+t)==1?Da:function(e,n){return n-e?Hu(e,n,t):Wr(isNaN(e)?n:e)}}function Da(t,e){var n=e-t;return n?Ou(t,n):Wr(isNaN(t)?e:t)}const En=function t(e){var n=Xu(e);function r(i,a){var s=n((i=$n(i)).r,(a=$n(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=Da(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function Vu(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=$n(e[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=t(r),i=t(i),a=t(a),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=a(l),o+""}}}var Yu=Vu(Bu);function Uu(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Gu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wu(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=an(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ku(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qu(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=an(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dr=new RegExp($r.source,"g");function Zu(t){return function(){return t}}function Ju(t){return function(e){return t(e)+""}}function za(t,e){var n=$r.lastIndex=dr.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=$r.exec(t))&&(i=dr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Xt(r,i)})),n=dr.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ju(l[0].x):Zu(e):(e=l.length,function(u){for(var h=0,f;h<e;++h)o[(f=l[h]).i]=f.x(u);return o.join("")})}function an(t,e){var n=typeof e,r;return e==null||n==="boolean"?Wr(e):(n==="number"?Xt:n==="string"?(r=he(e))?(e=r,En):za:e instanceof he?En:e instanceof Date?Ku:Gu(e)?Uu:Array.isArray(e)?Wu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qu:Xt)(t,e)}function Pa(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Fi=180/Math.PI,Sr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function La(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Fi,skewX:Math.atan(l)*Fi,scaleX:s,scaleY:o}}var gn;function ju(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Sr:La(e.a,e.b,e.c,e.d,e.e,e.f)}function tc(t){return t==null||(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",t),!(t=gn.transform.baseVal.consolidate()))?Sr:(t=t.matrix,La(t.a,t.b,t.c,t.d,t.e,t.f))}function qa(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,g,x){if(u!==f||h!==d){var k=g.push("translate(",null,e,null,n);x.push({i:k-4,x:Xt(u,f)},{i:k-2,x:Xt(h,d)})}else(f||d)&&g.push("translate("+f+e+d+n)}function s(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Xt(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function o(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Xt(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function l(u,h,f,d,g,x){if(u!==f||h!==d){var k=g.push(i(g)+"scale(",null,",",null,")");x.push({i:k-4,x:Xt(u,f)},{i:k-2,x:Xt(h,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),s(u.rotate,h.rotate,f,d),o(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(g){for(var x=-1,k=d.length,p;++x<k;)f[(p=d[x]).i]=p.x(g);return f.join("")}}}var ec=qa(ju,"px, ","px)","deg)"),nc=qa(tc,", ",")",")");function rc(t){return function(){return t}}function ic(t){return+t}var Ri=[0,1];function ae(t){return t}function Er(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rc(isNaN(e)?NaN:.5)}function ac(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function sc(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Er(i,r),a=n(s,a)):(r=Er(r,i),a=n(a,s)),function(o){return a(r(o))}}function oc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Er(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=Sa(t,o,1,r)-1;return a[l](i[l](o))}}function lc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uc(){var t=Ri,e=Ri,n=an,r,i,a,s=ae,o,l,u;function h(){var d=Math.min(t.length,e.length);return s!==ae&&(s=ac(t[0],t[d-1])),o=d>2?oc:sc,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(t.map(r),e,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=o(e,t.map(r),Xt)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,ic),h()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Pa,h()},f.clamp=function(d){return arguments.length?(s=d?!0:ae,h()):s!==ae},f.interpolate=function(d){return arguments.length?(n=d,h()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,g){return r=d,i=g,h()}}function cc(){return uc()(ae,ae)}function fc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Re(t){return t=Nn(Math.abs(t)),t?t[1]:NaN}function hc(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function dc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cn(t){if(!(e=pc.exec(t)))throw new Error("invalid format: "+t);var e;return new Kr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cn.prototype=Kr.prototype;function Kr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Kr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ba;function mc(t,e){var n=Nn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ba=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Nn(t,Math.max(0,e+a-1))[0]}function Ii(t,e){var n=Nn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Di={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ii(t*100,e),r:Ii,s:mc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zi(t){return t}var Pi=Array.prototype.map,Li=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vc(t){var e=t.grouping===void 0||t.thousands===void 0?zi:hc(Pi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?zi:dc(Pi.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Cn(f);var d=f.fill,g=f.align,x=f.sign,k=f.symbol,p=f.zero,v=f.width,y=f.comma,m=f.precision,w=f.trim,_=f.type;_==="n"?(y=!0,_="g"):Di[_]||(m===void 0&&(m=12),w=!0,_="g"),(p||d==="0"&&g==="=")&&(p=!0,d="0",g="=");var z=k==="$"?n:k==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E=k==="$"?r:/[%p]/.test(_)?s:"",P=Di[_],S=/[defgprs%]/.test(_);m=m===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function T(b){var A=z,M=E,q,K,F;if(_==="c")M=P(b)+M,b="";else{b=+b;var B=b<0||1/b<0;if(b=isNaN(b)?l:P(Math.abs(b),m),w&&(b=gc(b)),B&&+b==0&&x!=="+"&&(B=!1),A=(B?x==="("?x:o:x==="-"||x==="("?"":x)+A,M=(_==="s"?Li[8+Ba/3]:"")+M+(B&&x==="("?")":""),S){for(q=-1,K=b.length;++q<K;)if(F=b.charCodeAt(q),48>F||F>57){M=(F===46?i+b.slice(q+1):b.slice(q))+M,b=b.slice(0,q);break}}}y&&!p&&(b=e(b,1/0));var D=A.length+b.length+M.length,X=D<v?new Array(v-D+1).join(d):"";switch(y&&p&&(b=e(X+b,X.length?v-M.length:1/0),X=""),g){case"<":b=A+b+M+X;break;case"=":b=A+X+b+M;break;case"^":b=X.slice(0,D=X.length>>1)+A+b+M+X.slice(D);break;default:b=X+A+b+M;break}return a(b)}return T.toString=function(){return f+""},T}function h(f,d){var g=u((f=Cn(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Re(d)/3)))*3,k=Math.pow(10,-x),p=Li[8+x/3];return function(v){return g(k*v)+p}}return{format:u,formatPrefix:h}}var mn,Nt,Oa;yc({thousands:",",grouping:[3],currency:["$",""]});function yc(t){return mn=vc(t),Nt=mn.format,Oa=mn.formatPrefix,mn}function xc(t){return Math.max(0,-Re(Math.abs(t)))}function _c(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Re(e)/3)))*3-Re(Math.abs(t)))}function bc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Re(e)-Re(t))+1}function wc(t,e,n,r){var i=xu(t,e,n),a;switch(r=Cn(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=_c(i,s))&&(r.precision=a),Oa(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=bc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=xc(i))&&(r.precision=a-(r.type==="%")*2);break}}return Nt(r)}function Ha(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ca(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,h=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=Fe(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function de(){var t=cc();return t.copy=function(){return lc(t,de())},Ur.apply(t,arguments),Ha(t)}function kc(){var t=0,e=1,n,r,i,a,s=ae,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function h(f){return function(d){var g,x;return arguments.length?([g,x]=d,s=f(g,x),u):[s(0),s(1)]}}return u.range=h(an),u.rangeRound=h(Pa),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ac(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Xa(){var t=Ha(kc()(ae));return t.copy=function(){return Ac(t,Xa())},$u.apply(t,arguments)}function Mc(t){return t}var pr=1,gr=2,Nr=3,We=4,qi=1e-6;function $c(t){return"translate("+t+",0)"}function Sc(t){return"translate(0,"+t+")"}function Ec(t){return e=>+t(e)}function Nc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Cc(){return!this.__axis}function Va(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===pr||t===We?-1:1,h=t===We||t===gr?"x":"y",f=t===pr||t===Nr?$c:Sc;function d(g){var x=r??(e.ticks?e.ticks.apply(e,n):e.domain()),k=i??(e.tickFormat?e.tickFormat.apply(e,n):Mc),p=Math.max(a,0)+o,v=e.range(),y=+v[0]+l,m=+v[v.length-1]+l,w=(e.bandwidth?Nc:Ec)(e.copy(),l),_=g.selection?g.selection():g,z=_.selectAll(".domain").data([null]),E=_.selectAll(".tick").data(x,e).order(),P=E.exit(),S=E.enter().append("g").attr("class","tick"),T=E.select("line"),b=E.select("text");z=z.merge(z.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(S),T=T.merge(S.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),b=b.merge(S.append("text").attr("fill","currentColor").attr(h,u*p).attr("dy",t===pr?"0em":t===Nr?"0.71em":"0.32em")),g!==_&&(z=z.transition(g),E=E.transition(g),T=T.transition(g),b=b.transition(g),P=P.transition(g).attr("opacity",qi).attr("transform",function(A){return isFinite(A=w(A))?f(A+l):this.getAttribute("transform")}),S.attr("opacity",qi).attr("transform",function(A){var M=this.parentNode.__axis;return f((M&&isFinite(M=M(A))?M:w(A))+l)})),P.remove(),z.attr("d",t===We||t===gr?s?"M"+u*s+","+y+"H"+l+"V"+m+"H"+u*s:"M"+l+","+y+"V"+m:s?"M"+y+","+u*s+"V"+l+"H"+m+"V"+u*s:"M"+y+","+l+"H"+m),E.attr("opacity",1).attr("transform",function(A){return f(w(A)+l)}),T.attr(h+"2",u*a),b.attr(h,u*p).text(k),_.filter(Cc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===gr?"start":t===We?"end":"middle"),_.each(function(){this.__axis=w})}return d.scale=function(g){return arguments.length?(e=g,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),d):n.slice()},d.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),d):r&&r.slice()},d.tickFormat=function(g){return arguments.length?(i=g,d):i},d.tickSize=function(g){return arguments.length?(a=s=+g,d):a},d.tickSizeInner=function(g){return arguments.length?(a=+g,d):a},d.tickSizeOuter=function(g){return arguments.length?(s=+g,d):s},d.tickPadding=function(g){return arguments.length?(o=+g,d):o},d.offset=function(g){return arguments.length?(l=+g,d):l},d}function Ln(t){return Va(Nr,t)}function Qr(t){return Va(We,t)}function Me(t){return function(){return t}}const Cr=Math.PI,Tr=2*Cr,le=1e-6,Tc=Tr-le;function Ya(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ya;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Rc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ya:Fc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,h=s-e,f=o-n,d=h*h+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>le)if(!(Math.abs(f*l-u*h)>le)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,x=i-o,k=l*l+u*u,p=g*g+x*x,v=Math.sqrt(k),y=Math.sqrt(d),m=a*Math.tan((Cr-Math.acos((k+d-p)/(2*v*y)))/2),w=m/y,_=m/v;Math.abs(w-1)>le&&this._append`L${e+w*h},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*g>h*x)},${this._x1=e+_*l},${this._y1=n+_*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,h=n+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>le||Math.abs(this._y1-h)>le)&&this._append`L${u},${h}`,r&&(d<0&&(d=d%Tr+Tr),d>Tc?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=h}`:d>le&&this._append`A${r},${r},0,${+(d>=Cr)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ic(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Rc(e)}function Dc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ua(t){this._context=t}Ua.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zc(t){return new Ua(t)}function Pc(t){return t[0]}function Lc(t){return t[1]}function qc(t,e){var n=Me(!0),r=null,i=zc,a=null,s=Ic(o);t=typeof t=="function"?t:t===void 0?Pc:Me(t),e=typeof e=="function"?e:e===void 0?Lc:Me(e);function o(l){var u,h=(l=Dc(l)).length,f,d=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=h;++u)!(u<h&&n(f=l[u],u,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Me(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Me(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Me(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}var Bc={value:()=>{}};function Zr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xn(n)}function xn(t){this._=t}function Oc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xn.prototype=Zr.prototype={constructor:xn,on:function(t,e){var n=this._,r=Oc(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Hc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Bi(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Bi(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new xn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Hc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Bi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Fr={capture:!0,passive:!1};function Rr(t){t.preventDefault(),t.stopImmediatePropagation()}function Xc(t){var e=t.document.documentElement,n=Z(t).on("dragstart.drag",Rr,Fr);"onselectstart"in e?n.on("selectstart.drag",Rr,Fr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Vc(t,e){var n=t.document.documentElement,r=Z(t).on("dragstart.drag",null);e&&(r.on("click.drag",Rr,Fr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ie=0,Ke=0,Ge=0,Ga=1e3,Tn,Qe,Fn=0,pe=0,qn=0,nn=typeof performance=="object"&&performance.now?performance:Date,Wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jr(){return pe||(Wa(Yc),pe=nn.now()+qn)}function Yc(){pe=0}function Rn(){this._call=this._time=this._next=null}Rn.prototype=Ka.prototype={constructor:Rn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Jr():+n)+(e==null?0:+e),!this._next&&Qe!==this&&(Qe?Qe._next=this:Tn=this,Qe=this),this._call=t,this._time=n,Ir()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ir())}};function Ka(t,e,n){var r=new Rn;return r.restart(t,e,n),r}function Uc(){Jr(),++Ie;for(var t=Tn,e;t;)(e=pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ie}function Oi(){pe=(Fn=nn.now())+qn,Ie=Ke=0;try{Uc()}finally{Ie=0,Wc(),pe=0}}function Gc(){var t=nn.now(),e=t-Fn;e>Ga&&(qn-=e,Fn=t)}function Wc(){for(var t,e=Tn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Tn=n);Qe=t,Ir(r)}function Ir(t){if(!Ie){Ke&&(Ke=clearTimeout(Ke));var e=t-pe;e>24?(t<1/0&&(Ke=setTimeout(Oi,t-nn.now()-qn)),Ge&&(Ge=clearInterval(Ge))):(Ge||(Fn=nn.now(),Ge=setInterval(Gc,Ga)),Ie=1,Wa(Oi))}}function Hi(t,e,n){var r=new Rn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Kc=Zr("start","end","cancel","interrupt"),Qc=[],Qa=0,Xi=1,Dr=2,_n=3,Vi=4,zr=5,bn=6;function Bn(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Zc(t,n,{name:e,index:r,group:i,on:Kc,tween:Qc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Qa})}function jr(t,e){var n=Ut(t,e);if(n.state>Qa)throw new Error("too late; already scheduled");return n}function Jt(t,e){var n=Ut(t,e);if(n.state>_n)throw new Error("too late; already running");return n}function Ut(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ka(a,0,n.time);function a(u){n.state=Xi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,f,d,g;if(n.state!==Xi)return l();for(h in r)if(g=r[h],g.name===n.name){if(g.state===_n)return Hi(s);g.state===Vi?(g.state=bn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=bn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(Hi(function(){n.state===_n&&(n.state=Vi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Dr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Dr){for(n.state=_n,i=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=zr,1),f=-1,d=i.length;++f<d;)i[f].call(t,h);n.state===zr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=bn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Pr(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>Dr&&r.state<zr,r.state=bn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Jc(t){return this.each(function(){Pr(this,t)})}function jc(t,e){var n,r;return function(){var i=Jt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function tf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Jt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function ef(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ut(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?jc:tf)(n,t,e))}function ti(t,e,n){var r=t._id;return t.each(function(){var i=Jt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ut(i,r).value[e]}}function Za(t,e){var n;return(typeof e=="number"?Xt:e instanceof he?En:(n=he(e))?(e=n,En):za)(t,e)}function nf(t){return function(){this.removeAttribute(t)}}function rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function af(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function sf(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function of(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function lf(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function uf(t,e){var n=zn(t),r=n==="transform"?nc:Za;return this.attrTween(t,typeof e=="function"?(n.local?lf:of)(n,r,ti(this,"attr."+t,e)):e==null?(n.local?rf:nf)(n):(n.local?sf:af)(n,r,e))}function cf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ff(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ff(t,a)),n}return i._value=e,i}function df(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cf(t,a)),n}return i._value=e,i}function pf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=zn(t);return this.tween(n,(r.local?hf:df)(r,e))}function gf(t,e){return function(){jr(this,t).delay=+e.apply(this,arguments)}}function mf(t,e){return e=+e,function(){jr(this,t).delay=e}}function vf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gf:mf)(e,t)):Ut(this.node(),e).delay}function yf(t,e){return function(){Jt(this,t).duration=+e.apply(this,arguments)}}function xf(t,e){return e=+e,function(){Jt(this,t).duration=e}}function _f(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yf:xf)(e,t)):Ut(this.node(),e).duration}function bf(t,e){if(typeof e!="function")throw new Error;return function(){Jt(this,t).ease=e}}function wf(t){var e=this._id;return arguments.length?this.each(bf(e,t)):Ut(this.node(),e).ease}function kf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Jt(this,t).ease=n}}function Af(t){if(typeof t!="function")throw new Error;return this.each(kf(this._id,t))}function Mf(t){typeof t!="function"&&(t=ga(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new ne(r,this._parents,this._name,this._id)}function $f(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],h=l.length,f=s[o]=new Array(h),d,g=0;g<h;++g)(d=l[g]||u[g])&&(f[g]=d);for(;o<r;++o)s[o]=e[o];return new ne(s,this._parents,this._name,this._id)}function Sf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ef(t,e,n){var r,i,a=Sf(e)?jr:Jt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Nf(t,e){var n=this._id;return arguments.length<2?Ut(this.node(),n).on.on(t):this.each(Ef(n,t,e))}function Cf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Tf(){return this.on("end.remove",Cf(this._id))}function Ff(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Vr(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),h,f,d=0;d<l;++d)(h=o[d])&&(f=t.call(h,h.__data__,d,o))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,Bn(u[d],e,n,d,u,Ut(h,n)));return new ne(a,this._parents,e,n)}function Rf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pa(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=t.call(h,h.__data__,f,l),g,x=Ut(h,n),k=0,p=d.length;k<p;++k)(g=d[k])&&Bn(g,e,n,k,d,x);a.push(d),s.push(h)}return new ne(a,s,e,n)}var If=Le.prototype.constructor;function Df(){return new If(this._groups,this._parents)}function zf(t,e){var n,r,i;return function(){var a=Te(this,t),s=(this.style.removeProperty(t),Te(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Ja(t){return function(){this.style.removeProperty(t)}}function Pf(t,e,n){var r,i=n+"",a;return function(){var s=Te(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Lf(t,e,n){var r,i,a;return function(){var s=Te(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Te(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function qf(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=Jt(this,t),u=l.on,h=l.value[a]==null?o||(o=Ja(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(s,i=h),l.on=r}}function Bf(t,e,n){var r=(t+="")=="transform"?ec:Za;return e==null?this.styleTween(t,zf(t,r)).on("end.style."+t,Ja(t)):typeof e=="function"?this.styleTween(t,Lf(t,r,ti(this,"style."+t,e))).each(qf(this._id,t)):this.styleTween(t,Pf(t,r,e),n).on("end.style."+t,null)}function Of(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Hf(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Of(t,s,n)),r}return a._value=e,a}function Xf(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hf(t,e,n??""))}function Vf(t){return function(){this.textContent=t}}function Yf(t){return function(){var e=t(this);this.textContent=e??""}}function Uf(t){return this.tween("text",typeof t=="function"?Yf(ti(this,"text",t)):Vf(t==null?"":t+""))}function Gf(t){return function(e){this.textContent=t.call(this,e)}}function Wf(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Gf(i)),e}return r._value=t,r}function Kf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wf(t))}function Qf(){for(var t=this._name,e=this._id,n=ja(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var h=Ut(l,e);Bn(l,t,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ne(r,this._parents,t,n)}function Zf(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=Jt(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&a()})}var Jf=0;function ne(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Lr(t){return Le().transition(t)}function ja(){return++Jf}var jt=Le.prototype;ne.prototype=Lr.prototype={constructor:ne,select:Ff,selectAll:Rf,selectChild:jt.selectChild,selectChildren:jt.selectChildren,filter:Mf,merge:$f,selection:Df,transition:Qf,call:jt.call,nodes:jt.nodes,node:jt.node,size:jt.size,empty:jt.empty,each:jt.each,on:Nf,attr:uf,attrTween:pf,style:Bf,styleTween:Xf,text:Uf,textTween:Kf,remove:Tf,tween:ef,delay:vf,duration:_f,ease:wf,easeVarying:Af,end:Zf,[Symbol.iterator]:jt[Symbol.iterator]};function jf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var th={time:null,delay:0,duration:250,ease:jf};function eh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nh(t){var e,n;t instanceof ne?(e=t._id,t=t._name):(e=ja(),(n=th).time=Jr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&Bn(l,t,e,u,s,n||eh(l,e));return new ne(r,this._parents,t,e)}Le.prototype.interrupt=Jc;Le.prototype.transition=nh;const mr=t=>()=>t;function rh(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ih(t){t.stopImmediatePropagation()}function vr(t){t.preventDefault(),t.stopImmediatePropagation()}var Yi={name:"drag"},yr={name:"space"},$e={name:"handle"},Se={name:"center"};const{abs:Ui,max:bt,min:wt}=Math;function Gi(t){return[+t[0],+t[1]]}function Wi(t){return[Gi(t[0]),Gi(t[1])]}var wn={name:"x",handles:["w","e"].map(qr),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},xr={},te={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ki={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ah={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function qr(t){return{type:t}}function oh(t){return!t.ctrlKey&&!t.button}function lh(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function _r(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ch(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function fh(){return hh(wn)}function hh(t){var e=lh,n=oh,r=uh,i=!0,a=Zr("start","brush","end"),s=6,o;function l(p){var v=p.property("__brush",k).selectAll(".overlay").data([qr("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",te.overlay).merge(v).each(function(){var m=_r(this).extent;Z(this).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1])}),p.selectAll(".selection").data([qr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",te.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=p.selectAll(".handle").data(t.handles,function(m){return m.type});y.exit().remove(),y.enter().append("rect").attr("class",function(m){return"handle handle--"+m.type}).attr("cursor",function(m){return te[m.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(p,v,y){p.tween?p.on("start.brush",function(m){h(this,arguments).beforestart().start(m)}).on("interrupt.brush end.brush",function(m){h(this,arguments).end(m)}).tween("brush",function(){var m=this,w=m.__brush,_=h(m,arguments),z=w.selection,E=t.input(typeof v=="function"?v.apply(this,arguments):v,w.extent),P=an(z,E);function S(T){w.selection=T===1&&E===null?null:P(T),u.call(m),_.brush()}return z!==null&&E!==null?S:S(1)}):p.each(function(){var m=this,w=arguments,_=m.__brush,z=t.input(typeof v=="function"?v.apply(m,w):v,_.extent),E=h(m,w).beforestart();Pr(m),_.selection=z===null?null:z,u.call(m),E.start(y).brush(y).end(y)})},l.clear=function(p,v){l.move(p,null,v)};function u(){var p=Z(this),v=_r(this).selection;v?(p.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?v[1][0]-s/2:v[0][0]-s/2}).attr("y",function(y){return y.type[0]==="s"?v[1][1]-s/2:v[0][1]-s/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?v[1][0]-v[0][0]+s:s}).attr("height",function(y){return y.type==="e"||y.type==="w"?v[1][1]-v[0][1]+s:s})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(p,v,y){var m=p.__brush.emitter;return m&&(!y||!m.clean)?m:new f(p,v,y)}function f(p,v,y){this.that=p,this.args=v,this.state=p.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,v){return this.starting?(this.starting=!1,this.emit("start",p,v)):this.emit("brush",p),this},brush:function(p,v){return this.emit("brush",p,v),this},end:function(p,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,v)),this},emit:function(p,v,y){var m=Z(this.that).datum();a.call(p,this.that,new rh(p,{sourceEvent:v,target:l,selection:t.output(this.state.selection),mode:y,dispatch:a}),m)}};function d(p){if(o&&!p.touches||!n.apply(this,arguments))return;var v=this,y=p.target.__data__.type,m=(i&&p.metaKey?y="overlay":y)==="selection"?Yi:i&&p.altKey?Se:$e,w=t===xr?null:ah[y],_=t===wn?null:sh[y],z=_r(v),E=z.extent,P=z.selection,S=E[0][0],T,b,A=E[0][1],M,q,K=E[1][0],F,B,D=E[1][1],X,Y,I=0,H=0,vt,lt=w&&_&&i&&p.shiftKey,dt,ct,et=Array.from(p.touches||[p],$=>{const J=$.identifier;return $=bi($,v),$.point0=$.slice(),$.identifier=J,$});Pr(v);var mt=h(v,arguments,!0).beforestart();if(y==="overlay"){P&&(vt=!0);const $=[et[0],et[1]||et[0]];z.selection=P=[[T=t===xr?S:wt($[0][0],$[1][0]),M=t===wn?A:wt($[0][1],$[1][1])],[F=t===xr?K:bt($[0][0],$[1][0]),X=t===wn?D:bt($[0][1],$[1][1])]],et.length>1&&j(p)}else T=P[0][0],M=P[0][1],F=P[1][0],X=P[1][1];b=T,q=M,B=F,Y=X;var Gt=Z(v).attr("pointer-events","none"),yt=Gt.selectAll(".overlay").attr("cursor",te[y]);if(p.touches)mt.moved=xt,mt.ended=Bt;else{var $t=Z(p.view).on("mousemove.brush",xt,!0).on("mouseup.brush",Bt,!0);i&&$t.on("keydown.brush",Pt,!0).on("keyup.brush",Ot,!0),Xc(p.view)}u.call(v),mt.start(p,m.name);function xt($){for(const J of $.changedTouches||[$])for(const rt of et)rt.identifier===J.identifier&&(rt.cur=bi(J,v));if(lt&&!dt&&!ct&&et.length===1){const J=et[0];Ui(J.cur[0]-J[0])>Ui(J.cur[1]-J[1])?ct=!0:dt=!0}for(const J of et)J.cur&&(J[0]=J.cur[0],J[1]=J.cur[1]);vt=!0,vr($),j($)}function j($){const J=et[0],rt=J.point0;var Q;switch(I=J[0]-rt[0],H=J[1]-rt[1],m){case yr:case Yi:{w&&(I=bt(S-T,wt(K-F,I)),b=T+I,B=F+I),_&&(H=bt(A-M,wt(D-X,H)),q=M+H,Y=X+H);break}case $e:{et[1]?(w&&(b=bt(S,wt(K,et[0][0])),B=bt(S,wt(K,et[1][0])),w=1),_&&(q=bt(A,wt(D,et[0][1])),Y=bt(A,wt(D,et[1][1])),_=1)):(w<0?(I=bt(S-T,wt(K-T,I)),b=T+I,B=F):w>0&&(I=bt(S-F,wt(K-F,I)),b=T,B=F+I),_<0?(H=bt(A-M,wt(D-M,H)),q=M+H,Y=X):_>0&&(H=bt(A-X,wt(D-X,H)),q=M,Y=X+H));break}case Se:{w&&(b=bt(S,wt(K,T-I*w)),B=bt(S,wt(K,F+I*w))),_&&(q=bt(A,wt(D,M-H*_)),Y=bt(A,wt(D,X+H*_)));break}}B<b&&(w*=-1,Q=T,T=F,F=Q,Q=b,b=B,B=Q,y in Ki&&yt.attr("cursor",te[y=Ki[y]])),Y<q&&(_*=-1,Q=M,M=X,X=Q,Q=q,q=Y,Y=Q,y in Qi&&yt.attr("cursor",te[y=Qi[y]])),z.selection&&(P=z.selection),dt&&(b=P[0][0],B=P[1][0]),ct&&(q=P[0][1],Y=P[1][1]),(P[0][0]!==b||P[0][1]!==q||P[1][0]!==B||P[1][1]!==Y)&&(z.selection=[[b,q],[B,Y]],u.call(v),mt.brush($,m.name))}function Bt($){if(ih($),$.touches){if($.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Vc($.view,vt),$t.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Gt.attr("pointer-events","all"),yt.attr("cursor",te.overlay),z.selection&&(P=z.selection),ch(P)&&(z.selection=null,u.call(v)),mt.end($,m.name)}function Pt($){switch($.keyCode){case 16:{lt=w&&_;break}case 18:{m===$e&&(w&&(F=B-I*w,T=b+I*w),_&&(X=Y-H*_,M=q+H*_),m=Se,j($));break}case 32:{(m===$e||m===Se)&&(w<0?F=B-I:w>0&&(T=b-I),_<0?X=Y-H:_>0&&(M=q-H),m=yr,yt.attr("cursor",te.selection),j($));break}default:return}vr($)}function Ot($){switch($.keyCode){case 16:{lt&&(dt=ct=lt=!1,j($));break}case 18:{m===Se&&(w<0?F=B:w>0&&(T=b),_<0?X=Y:_>0&&(M=q),m=$e,j($));break}case 32:{m===yr&&($.altKey?(w&&(F=B-I*w,T=b+I*w),_&&(X=Y-H*_,M=q+H*_),m=Se):(w<0?F=B:w>0&&(T=b),_<0?X=Y:_>0&&(M=q),m=$e),yt.attr("cursor",te[y]),j($));break}default:return}vr($)}}function g(p){h(this,arguments).moved(p)}function x(p){h(this,arguments).ended(p)}function k(){var p=this.__brush||{selection:null};return p.extent=Wi(e.apply(this,arguments)),p.dim=t,p}return l.extent=function(p){return arguments.length?(e=typeof p=="function"?p:mr(Wi(p)),l):e},l.filter=function(p){return arguments.length?(n=typeof p=="function"?p:mr(!!p),l):n},l.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:mr(!!p),l):r},l.handleSize=function(p){return arguments.length?(s=+p,l):s},l.keyModifiers=function(p){return arguments.length?(i=!!p,l):i},l.on=function(){var p=a.on.apply(a,arguments);return p===a?l:p},l}var dh=st('<div class="age-range svelte-740scl"><span> </span> <button class="clear-btn svelte-740scl">Clear filter</button></div>'),ph=st('<span class="hint svelte-740scl">Up through the 40-to-50 age range, female cases slightly outnumber males—likely reflecting a higher volume of elective and gynecologic‐related procedures in middle-aged women. After age 60, male surgical cases begin to exceed female, which may be driven by increased cardiovascular and oncologic interventions in older men.</span>'),gh=st('<div class="age-distribution svelte-740scl"><div class="controls svelte-740scl"><label class="svelte-740scl"><input type="checkbox"/> Split by sex</label> <label class="svelte-740scl"><input type="checkbox"/> Show percentages</label> <!> <p class="scale-note svelte-740scl"><i>Tip: Click and drag on this chart to filter by age range. You can also click on department bars in the chart below to filter by department.</i></p></div> <div class="chart"><svg class="h-auto w-full"></svg></div> <div class="insights svelte-740scl"><p class="insight-text svelte-740scl"> <!></p></div></div>');function mh(t,e){ge(e,!1);const n=V(),r=V();let i=Dt(e,"data",24,()=>[]),a=Dt(e,"showPercentage",12,!1),s=V(),o=V(!0),l=V([null,null]);const u=Zi();function h(b){const A=[...b].sort((B,D)=>B-D),M=yn(A)||0,q=je(A,.25)||0,K=je(A,.75)||0,F=K-q;return{median:M,q1:q,q3:K,iqr:F}}function f(){if(!i().length)return;Z(c(s)).selectAll("*").remove();const b={top:30,right:30,bottom:60,left:50},A=600-b.left-b.right,M=350-b.top-b.bottom,q=c(n).filter($=>$.age!==void 0&&!isNaN($.age)),K=q.map($=>$.age),F=h(K),B=i().filter($=>$.age!==void 0&&!isNaN($.age)).map($=>$.age),D=de().domain(vn(B)).nice().range([0,A]),X=wu().domain(D.domain()).thresholds(D.ticks(20));let Y,I;const H=X(K),vt=q.length,lt=$=>a()?$.length/vt*100:$.length,dt=Qt(H,$=>lt($))||0,ct=q.filter($=>$.sex==="M").map($=>$.age),et=q.filter($=>$.sex==="F").map($=>$.age),mt=X(ct),Gt=X(et),yt=Math.max(Qt(mt,$=>lt($))||0,Qt(Gt,$=>lt($))||0),$t=Math.max(dt,yt);c(o)?Y={male:mt,female:Gt}:Y=H,I=$t;const xt=de().domain([0,I*1.1]).range([M,0]);Z("body").selectAll(".age-tooltip").data([0]).enter().append("div").attr("class","age-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","12px").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)");const j=Z(c(s)).attr("viewBox",`0 0 ${A+b.left+b.right} ${M+b.top+b.bottom}`).append("g").attr("transform",`translate(${b.left},${b.top})`);if(c(o)){const $=Pn().domain(["Male","Female"]).range(["#4682b4","#db7093"]),J=Y,rt=Lr().duration(500),Q=j.append("g").selectAll(".bar-male").data(J.male).enter().append("rect").attr("class","bar-male").attr("x",W=>D(W.x0)).attr("width",W=>Math.max(0,D(W.x1)-D(W.x0)-1)).attr("y",M).attr("height",0).attr("fill",$("Male")).attr("opacity",.7).attr("stroke",$("Male")).attr("stroke-width",1);Q.transition(rt).attr("y",W=>xt(lt(W))).attr("height",W=>M-xt(lt(W)));const G=Z("body").select(".age-tooltip");Q.on("mouseover",function(W,_t){const Lt=_t.length,ve=(Lt/ct.length*100).toFixed(1),qe=`${_t.x0}-${_t.x1}`;G.transition().duration(200).style("opacity",.9),G.html(`
                            <strong>Age: ${qe}</strong><br/>
                            <strong>Male</strong><br/>
                            Count: ${Lt}<br/>
                            Percentage: ${ve}%
                        `).style("left",W.pageX+10+"px").style("top",W.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){G.transition().duration(500).style("opacity",0),Z(this).attr("stroke",$("Male")).attr("stroke-width",1)});const ft=j.append("g").selectAll(".bar-female").data(J.female).enter().append("rect").attr("class","bar-female").attr("x",W=>D(W.x0)).attr("width",W=>Math.max(0,D(W.x1)-D(W.x0)-1)).attr("y",M).attr("height",0).attr("fill",$("Female")).attr("opacity",.7).attr("stroke",$("Female")).attr("stroke-width",1);ft.transition(rt).attr("y",W=>xt(lt(W))).attr("height",W=>M-xt(lt(W))),ft.on("mouseover",function(W,_t){const Lt=_t.length,ve=(Lt/et.length*100).toFixed(1),qe=`${_t.x0}-${_t.x1}`;G.transition().duration(200).style("opacity",.9),G.html(`
                            <strong>Age: ${qe}</strong><br/>
                            <strong>Female</strong><br/>
                            Count: ${Lt}<br/>
                            Percentage: ${ve}%
                        `).style("left",W.pageX+10+"px").style("top",W.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){G.transition().duration(500).style("opacity",0),Z(this).attr("stroke",$("Female")).attr("stroke-width",1)});const kt=j.append("g").attr("class","legend").attr("transform",`translate(${A-100}, 10)`);["Male","Female"].forEach((W,_t)=>{kt.append("rect").attr("x",0).attr("y",_t*20).attr("width",15).attr("height",15).attr("fill",$(W)),kt.append("text").attr("x",20).attr("y",_t*20+12).text(W).style("font-size","12px")})}else{const $=Lr().duration(500),J=j.append("g").selectAll("rect").data(Y).enter().append("rect").attr("x",Q=>D(Q.x0)).attr("width",Q=>Math.max(0,D(Q.x1)-D(Q.x0)-1)).attr("y",M).attr("height",0).attr("fill","steelblue").attr("stroke","white").attr("stroke-width",.5);J.transition($).attr("y",Q=>xt(lt(Q))).attr("height",Q=>M-xt(lt(Q)));const rt=Z("body").select(".age-tooltip");J.on("mouseover",function(Q,G){const ft=G.length,kt=(ft/vt*100).toFixed(1),W=`${G.x0}-${G.x1}`;rt.transition().duration(200).style("opacity",.9),rt.html(`
                        <strong>Age: ${W}</strong><br/>
                        Count: ${ft}<br/>
                        Percentage: ${kt}%
                    `).style("left",Q.pageX+10+"px").style("top",Q.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){rt.transition().duration(500).style("opacity",0),Z(this).attr("stroke","white").attr("stroke-width",.5)})}j.append("g").attr("transform",`translate(0,${M})`).call(Ln(D).tickFormat($=>`${$}`)).style("font-size","12px"),j.append("g").call(Qr(xt)).style("font-size","12px"),j.append("text").attr("x",A/2).attr("y",M+40).attr("text-anchor","middle").text(c(o)?"Age (years)":"Number of Cases").style("font-size","14px"),j.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-35).attr("text-anchor","middle").text(a()?"Percentage of Cases (%)":"Number of Cases").style("font-size","14px"),j.append("text").attr("x",A/2).attr("y",-10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Age Distribution of Surgical Cases");const Bt=D(F.median);j.append("line").attr("x1",Bt).attr("x2",Bt).attr("y1",M).attr("y2",10).attr("stroke","red").attr("stroke-width",2).attr("stroke-dasharray","5,5"),j.append("rect").attr("x",D(F.q1)).attr("width",D(F.q3)-D(F.q1)).attr("y",M+5).attr("height",10).attr("fill","rgba(255,0,0,0.3)"),j.append("text").attr("x",Bt).attr("y",5).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(`Median: ${Nt(".1f")(F.median)}`),j.append("text").attr("x",(D(F.q1)+D(F.q3))/2).attr("y",M+25).attr("text-anchor","middle").style("font-size","12px").text(`IQR: ${Nt(".1f")(F.q1)} - ${Nt(".1f")(F.q3)}`),F.median>60&&j.append("text").attr("x",A*.75).attr("y",M*.25).attr("text-anchor","middle").style("font-size","13px").style("font-style","italic").style("fill","#555").text("Aging patient population");const Pt=fh().extent([[0,0],[A,M]]).on("start brush",$=>{var J,rt;if($.selection){const[Q,G]=$.selection.map(kt=>Math.round(D.invert(kt))),ft=Z("body").select(".age-tooltip");ft.transition().duration(0).style("opacity",.9),ft.html(`
                        <strong>Selecting Ages: ${Q} - ${G}</strong>
                    `).style("left",((J=$.sourceEvent)==null?void 0:J.pageX)+10+"px").style("top",((rt=$.sourceEvent)==null?void 0:rt.pageY)-28+"px")}}).on("end",$=>{if(Z("body").select(".age-tooltip").style("opacity",0),!$.selection){c(l)[0]!==null&&(L(l,[null,null]),setTimeout(()=>f(),0));return}const[J,rt]=$.selection.map(G=>D.invert(G)),Q=[Math.round(J),Math.round(rt)];(c(l)[0]!==Q[0]||c(l)[1]!==Q[1])&&(L(l,Q),setTimeout(()=>f(),0))}),Ot=j.append("g").attr("class","brush").call(Pt);c(l)[0]!==null&&c(l)[1]!==null&&Ot.call(Pt.move,[D(c(l)[0]),D(c(l)[1])])}ze(()=>(f(),()=>{Z("body").selectAll(".age-tooltip").remove()})),Ji(f),it(()=>(c(l),ht(i())),()=>{L(n,c(l)[0]!==null&&c(l)[1]!==null?i().filter(b=>b.age!==void 0&&b.age>=c(l)[0]&&b.age<=c(l)[1]):i())}),it(()=>(c(n),yn),()=>{L(r,c(n).length&&yn(c(n).filter(b=>b.age!==void 0&&!isNaN(b.age)).map(b=>b.age))||0)}),it(()=>(c(l),c(n),ht(i())),()=>{c(l)[0]!==null?u("filter",{ageRange:c(l),data:c(n)}):c(n)===i()&&c(l)[0]===null&&u("filter",{ageRange:null,data:i()})}),Pe(),De();var d=gh(),g=C(d),x=C(g),k=C(x);gt(k),It(),N(x);var p=R(x,2),v=C(p);gt(v),It(),N(p);var y=R(p,2);{var m=b=>{var A=dh(),M=C(A),q=C(M);N(M);var K=R(M,2);N(A),Yt(()=>ut(q,`Age range: ${c(l)[0]??""}–${c(l)[1]??""}`)),ce("click",K,()=>{Z("body").select(".age-tooltip").style("opacity",0),L(l,[null,null]),setTimeout(()=>f(),0)}),at(b,A)};Et(y,b=>{c(l)[0]!==null&&b(m)})}It(2),N(g);var w=R(g,2),_=C(w);In(_,b=>L(s,b),()=>c(s)),N(w);var z=R(w,2),E=C(z),P=C(E),S=R(P);{var T=b=>{var A=ph();at(b,A)};Et(S,b=>{c(o)&&b(T)})}N(E),N(z),N(d),Yt(b=>ut(P,`Our surgical cases span six decades of life. The median age of ${b??""}
            suggests an aging population, with implications for surgical risk and recovery considerations. `),[()=>c(r).toFixed(1)],se),Ee(k,()=>c(o),b=>L(o,b)),ce("change",k,()=>{Z("body").select(".age-tooltip").style("opacity",0),f()}),Ee(v,a),ce("change",v,()=>{Z("body").select(".age-tooltip").style("opacity",0),u("percentageChange",{showPercentage:a()}),f()}),at(t,d),me()}var vh=st('<div class="filter-notice svelte-10z3lo5"><p class="svelte-10z3lo5"><span class="filter-badge svelte-10z3lo5">Filtered</span> Viewing <strong> </strong> cases only <button class="clear-filter svelte-10z3lo5">Clear filter ×</button></p></div>'),yh=st('<div class="insight-box svelte-10z3lo5"><p class="insight-text svelte-10z3lo5">Our patients span six decades, but <strong>95% of them cluster in just two surgical departments</strong>, setting the stage for wildly different baseline risks.</p></div>'),xh=st('<div class="department-distribution svelte-10z3lo5"><svg class="h-auto w-full"></svg> <!></div>');function _h(t,e){ge(e,!1);let n=Dt(e,"data",24,()=>[]),r=Dt(e,"filteredDepartment",12,null),i=Dt(e,"showPercentage",8,!1),a=V(),s="Department Distribution of Surgical Cases";const o=Zi();function l(){if(!n().length)return;Z(c(a)).selectAll("*").remove();const k={top:30,right:30,bottom:90,left:60},p=600-k.left-k.right,v=350-k.top-k.bottom,y=fu(n(),A=>A.length,A=>A.department),m=Array.from(y,([A,M])=>({key:A,value:M})).sort((A,M)=>Ma(A.value,M.value)),w=Mu(m,A=>A.value),_=m.map(A=>({...A,percent:A.value/w*100})),z=_.slice(0,2);z.reduce((A,M)=>A+M.percent,0);const E=Fa().domain(m.map(A=>A.key)).range([0,p]).padding(.2),P=de().domain([0,i()?Qt(_,A=>A.percent):Qt(m,A=>A.value)]).nice().range([v,0]),S=Z(c(a)).attr("viewBox",`0 0 ${p+k.left+k.right} ${v+k.top+k.bottom}`).append("g").attr("transform",`translate(${k.left},${k.top})`);S.append("text").attr("x",p/2).attr("y",-15).attr("text-anchor","middle").attr("class","chart-title").style("font-size","16px").style("font-weight","bold").text(s);const T=new Map;m.forEach(A=>{const M=n().filter(H=>H.department===A.key),q=M.filter(H=>H.sex==="M").length,K=M.filter(H=>H.sex==="F").length,F=q/A.value*100,B=K/A.value*100,D=M.filter(H=>H.age!==void 0&&!isNaN(H.age)).map(H=>H.age),X=D.length&&yn(D)||0,Y=D.length&&je(D,.25)||0,I=D.length&&je(D,.75)||0;T.set(A.key,{maleCount:q,femaleCount:K,malePercent:F,femalePercent:B,medianAge:X,q1:Y,q3:I})});const b=Z("body").selectAll(".dept-tooltip").data([0]).enter().append("div").attr("class","dept-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("border-radius","5px").style("padding","10px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("pointer-events","none").style("font-size","12px").style("z-index","10");S.append("g").selectAll("rect").data(_).enter().append("rect").attr("x",A=>E(A.key)).attr("y",A=>i()?P(A.percent):P(A.value)).attr("width",E.bandwidth()).attr("height",A=>i()?v-P(A.percent):v-P(A.value)).attr("fill",A=>r()===A.key?"#ff7f50":z.includes(A)?"#2a6d7c":"#5eb1c6").attr("stroke","#fff").attr("stroke-width",1).attr("class","dept-bar").style("cursor","pointer").on("mouseover",function(A,M){Z(this).transition().duration(200).attr("fill","#ff7f50");const q=T.get(M.key);b.html(`
					<div style="font-weight: bold; margin-bottom: 5px; color: #2a6d7c;">${M.key}</div>
					<div>Total cases: <b>${M.value}</b> (${Nt(".1f")(M.percent)}% of all)</div>
					${i()?`<div style="font-weight: bold; color: #2a6d7c; margin-top: 3px;">
							Showing as percentage: ${Nt(".1f")(M.percent)}%
						</div>`:""}
					<div style="margin-top: 5px;">
						<div>Sex ratio: <b>${Nt(".0f")(q.malePercent)}% M / ${Nt(".0f")(q.femalePercent)}% F</b></div>
						<div>Median age: <b>${Nt(".1f")(q.medianAge)}</b> years</div>
						<div>IQR: <b>${Nt(".1f")(q.q1)} - ${Nt(".1f")(q.q3)}</b></div>
					</div>
					<div style="margin-top: 5px; font-size: 10px; color: #666;">Click to filter dashboard by department</div>
				`).style("visibility","visible").style("left",A.pageX+15+"px").style("top",A.pageY-10+"px")}).on("mousemove",function(A){b.style("left",A.pageX+15+"px").style("top",A.pageY-10+"px")}).on("mouseout",function(){const A=Z(this).datum();Z(this).transition().duration(200).attr("fill",r()===A.key?"#ff7f50":z.includes(A)?"#2a6d7c":"#5eb1c6"),b.style("visibility","hidden")}).on("click",function(A,M){A.stopPropagation();const q=r()===M.key?null:M.key;o("filter",{department:q,name:M.key}),Z(c(a)).selectAll(".dept-bar").transition().duration(300).attr("fill",K=>K.key===q?"#ff7f50":z.includes(K)?"#2a6d7c":"#5eb1c6"),r(q)}),S.append("g").attr("transform",`translate(0,${v})`).call(Ln(E)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").style("font-size","12px"),S.append("g").call(Qr(P).tickFormat(A=>i()?Nt(".1f")(A)+"%":Nt(",.0f")(A))).style("font-size","12px"),S.append("text").attr("x",p/2).attr("y",v+75).attr("text-anchor","middle").style("font-size","14px").text("Surgical Department"),S.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-50).attr("text-anchor","middle").style("font-size","14px").text(i()?"Percentage of Cases":"Number of Cases")}function u(){r()&&(r(null),o("filter",{department:null}),l())}ze(()=>{l();const k=c(a);return k&&k.addEventListener("click",u),()=>{k&&k.removeEventListener("click",u),Z("body").selectAll(".dept-tooltip").remove()}}),Ji(l),it(()=>c(a),()=>{c(a)&&l()}),it(()=>(c(a),ht(n())),()=>{c(a)&&n()&&l()}),Pe(),De();var h=xh(),f=C(h);In(f,k=>L(a,k),()=>c(a));var d=R(f,2);{var g=k=>{var p=vh(),v=C(p),y=R(C(v),2),m=C(y,!0);N(y);var w=R(y,2);N(v),N(p),Yt(()=>ut(m,r())),ce("click",w,u),at(k,p)},x=k=>{var p=yh();at(k,p)};Et(d,k=>{r()?k(g):k(x,!1)})}N(h),at(t,h),me()}function bh(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const wh=t=>Yu(t[t.length-1]);var kh=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(bh);const Ah=wh(kh);function Ze(t,e,n){this.k=t,this.x=e,this.y=n}Ze.prototype={constructor:Ze,scale:function(t){return t===1?this:new Ze(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ze(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ze.prototype;var Mh=st("<option> </option>"),$h=st('<div class="no-data-message svelte-1nsvb8e">No cases match the selected criteria.</div>'),Sh=st('<div class="timeline-container svelte-1nsvb8e"><div class="filter-controls svelte-1nsvb8e"><div class="filter-group svelte-1nsvb8e"><label for="group-select" class="svelte-1nsvb8e">Group By:</label> <select id="group-select" class="svelte-1nsvb8e"><option>Surgery Type</option><option>Department</option></select></div> <div class="filter-group svelte-1nsvb8e"><label for="group-value" class="svelte-1nsvb8e">Filter Value:</label> <select id="group-value" class="svelte-1nsvb8e"><option>All</option><!></select></div> <div class="filter-group svelte-1nsvb8e"><label class="svelte-1nsvb8e">Age Range:</label> <div class="age-inputs svelte-1nsvb8e"><input type="number" min="0" max="120" class="svelte-1nsvb8e"/> <span>to</span> <input type="number" min="0" max="120" class="svelte-1nsvb8e"/></div></div></div> <div class="timeline-visualization svelte-1nsvb8e"></div> <!></div>');function Eh(t,e){ge(e,!1);const n=V();let r=Dt(e,"cases",24,()=>[]),i=Dt(e,"groupBy",12,"optype"),a=Dt(e,"ageRange",28,()=>[0,120]),s=Dt(e,"selectedDepartment",8,null),o=V(null),l=V(),u=V([]);const h=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function f(F){return F.length?h.map(({label:B,key:D})=>{const X=D,Y=F.map(ct=>{const et=ct[X],mt=ct.casestart;return typeof et=="number"&&typeof mt=="number"?et-mt:NaN}).filter(ct=>!isNaN(ct));if(!Y.length)return{label:B,key:D,mean:null,min:null,max:null};const I=365*24*60*60,H=Y.filter(ct=>Math.abs(ct)<I);if(H.length===0)return{label:B,key:D,mean:null,min:null,max:null};const vt=ku(H),lt=Mr(H),dt=Qt(H);return{label:B,key:D,mean:vt,min:lt,max:dt}}):h.map(({label:B,key:D})=>({label:B,key:D,mean:null,min:null,max:null}))}let d=V([]),g=V(!1);function x(){if(!c(l)||(re(l,c(l).innerHTML=""),!c(d).length))return;const F=c(l).clientWidth||800,B=280,D=200,X=30,Y=c(d).filter(G=>G.mean!==null),I=Y.map(G=>G.mean),H=Math.min(...I),vt=Math.max(...I),lt=10,dt=Math.floor(H/60)-lt,ct=Math.ceil(vt/60)+lt,et=[dt,ct],mt=(ct-dt)/7,Gt=Array.from({length:8},(G,ft)=>Math.round((dt+ft*mt)/5)*5),yt=de().domain(et).range([D+X,F-X]),$t=Z(c(l)).append("svg").attr("width","100%").attr("height",B).attr("viewBox",`0 0 ${F} ${B}`),xt=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],j=Pn().domain(h.map(G=>G.label)).range(xt),Bt=Ln(yt).tickValues(Gt).tickFormat(G=>`${Math.round(G)} min`),Pt=$t.append("g").attr("transform",`translate(0,${B/2})`).call(Bt);Pt.selectAll("text").style("font-size","12px").attr("transform",null).style("text-anchor","middle"),Pt.selectAll(".tick line").remove(),Pt.select(".domain").attr("x1",D+X),Pt.selectAll(".tick").append("line").attr("y1",0).attr("y2",-280/2).attr("stroke","#eee").attr("stroke-dasharray","2,2");const Ot=Z(c(l)).append("div").attr("class","timeline-tooltip").style("position","absolute").style("padding","8px 12px").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);$t.selectAll(".event-group").data(Y).enter().append("g").attr("class","event-group").each(function(G){const ft=Z(this),kt=yt(G.mean/60);ft.append("line").attr("x1",()=>kt).attr("x2",()=>kt).attr("y1",()=>B/2-20).attr("y2",()=>B/2+20).attr("stroke",()=>j(G.label)).attr("stroke-width",2),ft.append("line").attr("x1",()=>{const W=yt(G.min/60),_t=D+X;return Math.max(W,_t)}).attr("x2",()=>{const W=yt(G.max/60),_t=F-X;return Math.min(W,_t)}).attr("y1",()=>B/2).attr("y2",()=>B/2).attr("stroke",()=>"#000").attr("stroke-width",1),ft.append("circle").attr("cx",()=>kt).attr("cy",()=>B/2).attr("r",6).attr("fill",()=>j(G.label)).on("mouseover",W=>{Ot.transition().duration(200).style("opacity",1),Ot.html(`
							<strong>${G.label}</strong><br>
							Mean: ${(G.mean/60).toFixed(1)} min<br>
							Range: ${(G.min/60).toFixed(1)} - ${(G.max/60).toFixed(1)} min
						`)}).on("mousemove",W=>{Ot.style("left",`${W.pageX+10}px`).style("top",`${W.pageY-30}px`)}).on("mouseout",()=>{Ot.transition().duration(200).style("opacity",0)})}),$t.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(h).enter().append("g").attr("transform",(G,ft)=>`translate(0, ${ft*25})`).each(function(G){const ft=Z(this);ft.append("circle").attr("r",6).attr("cy",0).attr("fill",()=>j(G.label)),ft.append("text").attr("x",16).attr("y",4).attr("font-size",13).attr("fill","#222").text(G.label)});let rt="";c(o)&&(rt+=`${i()==="optype"?"Surgery Type":"Department"}: ${c(o)}`),s()&&(rt+=rt?`, Department: ${s()}`:`Department: ${s()}`),(a()[0]>0||a()[1]<120)&&(rt+=rt?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),rt&&$t.append("text").attr("x",D+X).attr("y",20).attr("font-size",12).attr("fill","#666").text(rt),$t.append("text").attr("x",F-X).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${c(n).length} cases`);const Q=et[1]-et[0];$t.append("text").attr("x",F-X).attr("y",B-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(Q)} min`)}ze(()=>{c(l)&&x()}),it(()=>(ht(r()),c(o),ht(i()),ht(s()),ht(a())),()=>{L(n,r().filter(F=>(!c(o)||F[i()]===c(o))&&(!s()||F.department===s())&&F.age>=a()[0]&&F.age<=a()[1]))}),it(()=>(ht(r()),ht(i())),()=>{L(u,Array.from(new Set(r().map(F=>F[i()]))).filter(Boolean))}),it(()=>c(n),()=>{c(n)&&(L(d,f(c(n))),L(g,!0))}),it(()=>(c(g),c(l)),()=>{c(g)&&c(l)&&(x(),L(g,!1))}),Pe(),De();var k=Sh(),p=C(k),v=C(p),y=R(C(v),2);Yt(()=>{i(),hi(()=>{})});var m=C(y);m.value=m.__value="optype";var w=R(m);w.value=w.__value="department",N(y),N(v);var _=R(v,2),z=R(C(_),2);Yt(()=>{c(o),hi(()=>{c(u)})});var E=C(z);E.value=(E.__value=null)??"";var P=R(E);la(P,1,()=>c(u),oa,(F,B)=>{var D=Mh(),X={},Y=C(D,!0);N(D),Yt(()=>{X!==(X=c(B))&&(D.value=(D.__value=c(B))??""),ut(Y,c(B))}),at(F,D)}),N(z),N(_);var S=R(_,2),T=R(C(S),2),b=C(T);gt(b);var A=R(b,4);gt(A),N(T),N(S),N(p);var M=R(p,2);In(M,F=>L(l,F),()=>c(l));var q=R(M,2);{var K=F=>{var B=$h();at(F,B)};Et(q,F=>{c(n).length===0&&F(K)})}N(k),mi(y,i),mi(z,()=>c(o),F=>L(o,F)),ee(b,()=>a()[0],F=>a(a()[0]=F,!0)),ee(A,()=>a()[1],F=>a(a()[1]=F,!0)),at(t,k),me()}function Nh(t,e){return Ch(t)||Th(t,e)||Fh()}function Ch(t){if(Array.isArray(t))return t}function Th(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}function Fh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ts(t,e,n,r){for(var i=0,a=0,s=t.length;a<s;a++){var o=t[a],l=+e(o,a,t),u=+n(o,a,t);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&r(l,u,i++)}}function Rh(t,e,n,r,i){var a=0,s=0;return ts(t,e,n,function(o,l){var u=l-i(o),h=l-r;a+=u*u,s+=h*h}),1-a/s}function Ih(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,s=e-a*t;return[s,a]}function Dh(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,s=0,o=0,l=0,u=0,h=n?+n[0]:1/0,f=n?+n[1]:-1/0;ts(i,t,e,function(y,m){++a,s+=(y-s)/a,o+=(m-o)/a,l+=(y*m-l)/a,u+=(y*y-u)/a,n||(y<h&&(h=y),y>f&&(f=y))});var d=Ih(s,o,l,u),g=Nh(d,2),x=g[0],k=g[1],p=function(m){return k*m+x},v=[[h,p(h)],[f,p(f)]];return v.a=k,v.b=x,v.predict=p,v.rSquared=Rh(i,t,e,o,p),v}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var zh=st('<div class="mb-4 flex gap-6 text-sm"><label><input type="radio"/> <span class="ml-1">Elective</span></label> <label><input type="radio"/> <span class="ml-1">Emergency</span></label> <label><input type="radio"/> <span class="ml-1">All</span></label></div> <svg style="width: 100%; height: auto;" class="svelte-1pqg8op"></svg>',1);function Ph(t,e){ge(e,!1);const n=[];let r=Dt(e,"patients",24,()=>[]),i=V("elective"),a=V([]),s=V();const o=640,l=320,u=48,h=Xa(Ah).domain([5,0]);function f(_){if(!c(s))return;const z=Z(c(s)).attr("viewBox",`0 0 ${o} ${l}`).html("");if(!_.length){z.append("text").attr("x",o/2).attr("y",l/2).attr("text-anchor","middle").attr("fill","#888").attr("font-size","16px").text("No cases with albumin in this view");return}const E=[..._].sort((I,H)=>+I.preop_alb-+H.preop_alb),P=[];for(let I=0;I<E.length;I+=5){const H=E.slice(I,I+5);if(H.length>0){const vt=H.reduce((dt,ct)=>dt+ +ct.preop_alb,0)/H.length,lt=H.reduce((dt,ct)=>dt+(ct.icu_days||0),0)/H.length;P.push({albumin:vt,icuDays:lt,count:H.length,cases:H})}}const S=de().domain([2,Qt(P,I=>I.albumin)||6]).nice().range([u,o-u]),T=de().domain([0,Qt(P,I=>I.icuDays)||5]).nice().range([l-u,u]),b=z.append("g");T.ticks(5).forEach(I=>{b.append("line").attr("x1",u).attr("x2",o-u).attr("y1",T(I)).attr("y2",T(I)).attr("stroke","#e5e7eb").attr("stroke-width",1)}),S.ticks(6).forEach(I=>{b.append("line").attr("x1",S(I)).attr("x2",S(I)).attr("y1",u).attr("y2",l-u).attr("stroke","#e5e7eb").attr("stroke-width",1)}),b.append("line").attr("x1",S(3.5)).attr("x2",S(3.5)).attr("y1",u).attr("y2",l-u).attr("stroke","#ef4444").attr("stroke-width",2).attr("stroke-dasharray","4,4"),b.append("text").attr("x",S(3.5)).attr("y",u+16).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#ef4444").attr("font-weight","500").text("Albumin Cliff (3.5 g/dL)");const A=Dh().x(I=>I.albumin).y(I=>I.icuDays).domain(S.domain())(P),M=qc().x(I=>S(I[0])).y(I=>T(I[1]));z.append("path").datum(A).attr("fill","none").attr("stroke","#4b5563").attr("stroke-width",2).attr("d",I=>M(I)),z.append("g").selectAll("circle").data(P).enter().append("circle").attr("cx",I=>S(I.albumin)).attr("cy",I=>T(I.icuDays)).attr("r",I=>Math.sqrt(I.count)*2).attr("fill",I=>h(Math.min(I.icuDays,5))).attr("stroke","#374151").attr("stroke-opacity",.15).append("title").text(I=>`Average Albumin: ${I.albumin.toFixed(2)} g/dL
Average ICU Stay: ${I.icuDays.toFixed(1)} days
Number of Cases: ${I.count}`);const q=Ln(S).ticks(6).tickFormat(I=>I+" g/dL");z.append("g").attr("transform",`translate(0, ${l-u})`).call(q).selectAll("text").attr("font-size","13px").attr("fill","#374151");const K=Qr(T).ticks(5).tickFormat(I=>I+" days");z.append("g").attr("transform",`translate(${u}, 0)`).call(K).selectAll("text").attr("font-size","13px").attr("fill","#374151"),z.append("text").attr("x",o/2).attr("y",l-u+36).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Pre-operative Albumin (g/dL)"),z.append("text").attr("transform",`translate(${u-36}, ${l/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Average ICU Stay (days)"),z.append("text").attr("x",o/2).attr("y",u-16).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","600").attr("fill","#1f2937").text("Hidden Risk Factor — The Albumin Cliff");const F=o-u-120,B=u,D=z.append("g").attr("transform",`translate(${F}, ${B})`),X=[0,1,2,3,4,5],Y=15;D.selectAll("rect").data(X).enter().append("rect").attr("x",(I,H)=>H*(Y+2)).attr("y",0).attr("width",Y).attr("height",10).attr("fill",I=>h(I)),D.append("text").attr("x",0).attr("y",24).attr("font-size","12px").attr("fill","#374151").text("ICU ≥ 5d"),D.append("text").attr("x",(Y+2)*5+4).attr("y",24).attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text("0–1d")}ze(()=>{c(s)&&f(c(a))}),it(()=>(ht(r()),c(i)),()=>{r()?L(a,r().filter(_=>{const z=+_.preop_alb;return!Number.isFinite(z)||z<=0?!1:c(i)==="elective"?_.emop===0&&_.ane_type==="General":c(i)==="emergency"?_.emop===1:!0})):L(a,[])}),it(()=>(c(s),c(a)),()=>{c(s)&&f(c(a))}),Pe(),De();var d=zh(),g=Xr(d),x=C(g),k=C(x);gt(k),k.value=k.__value="elective",It(2),N(x);var p=R(x,2),v=C(p);gt(v),v.value=v.__value="emergency",It(2),N(p);var y=R(p,2),m=C(y);gt(m),m.value=m.__value="all",It(2),N(y),N(g);var w=R(g,2);In(w,_=>L(s,_),()=>c(s)),ar(n,[],k,()=>c(i),_=>L(i,_)),ar(n,[],v,()=>c(i),_=>L(i,_)),ar(n,[],m,()=>c(i),_=>L(i,_)),at(t,d),me()}var Lh=st(`<div class="mt-4 rounded bg-red-100 p-4 text-red-800"><h4 class="font-bold mb-2">⚠️ No Matching Cases Found</h4> <p>There are no historical cases that match your current patient profile. Consider:</p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some of your filters</li> <li>Adjusting the patient's characteristics to more common values</li> <li>Using a broader range for age, BMI, or ASA score</li></ul></div>`),qh=st('<div class="mt-4 rounded bg-yellow-100 p-4 text-yellow-800"><h4 class="font-bold mb-2">⚠️ Limited Data Available</h4> <p> </p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some filters to get more comparable cases</li> <li>Adjusting the patient profile to match more common characteristics</li></ul></div>'),Bh=st('<button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Make a Guess</button>'),Oh=st('<button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600">Back</button>'),Hh=st('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold">Make Your Predictions</h3> <div class="grid gap-4"><div><label class="block text-sm text-gray-600">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="mt-1 w-full rounded border p-2"/></div></div></div>'),Xh=st(`<p class="mt-2 text-red-600">Your predictions were quite far from the actual outcomes. Consider reviewing the patient's risk factors more carefully.</p>`),Vh=st('<p class="mt-2 text-orange-600">Your predictions were somewhat off. Try to consider how different factors might interact to affect outcomes.</p>'),Yh=st(`<p class="mt-2 text-yellow-600">Good predictions! You're getting better at understanding how patient characteristics influence outcomes.</p>`),Uh=st('<p class="mt-2 text-green-600">Excellent predictions! You have a strong understanding of how patient factors correlate with surgical outcomes.</p>'),Gh=st('<div class="mt-4 rounded bg-yellow-50 p-3 text-sm text-yellow-800"> <!></div>'),Wh=st('<h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <div class="h-2 w-full rounded-full" style="background: linear-gradient(to right, #22c55e, #ef4444)"></div> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <!>',1),Kh=st('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><div class="flex gap-8"><div class="flex-1 space-y-6"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold">Adjust Patient Profile</h3> <div class="flex items-center gap-2 text-sm text-gray-600"><span> </span></div></div> <div class="grid grid-cols-2 gap-4"><label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Age Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Height Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">BMI Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">ASA Filter</span></label></div> <div class="space-y-6"><div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" step="0.1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" min="1" max="5" step="1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div></div></div> <div class="flex flex-1 items-center justify-center"><svg class="h-full w-full" style="min-height: 350px; max-height: 500px;"><circle cx="100" cy="30" r="20"></circle><line x1="100" y1="50" x2="100"></line><ellipse cx="100"></ellipse><line x1="100" y1="80"></line><line x1="100" y1="80"></line><line x1="100" x2="70"></line><line x1="100" x2="130"></line><path d="M80,20 Q100,0 120,20" fill="none"></path></svg></div></div> <div class="mt-4 rounded bg-blue-50 p-3 text-sm text-blue-800"> </div> <!> <div class="mt-4 flex space-x-4"><!> <button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600"> </button></div> <!> <!></div>');function Qh(t,e){ge(e,!1);const n=V(),r=V(),i=V(),a=V(),s=V(),o=V(),l=V(),u=V(),h=V(),f=V(),d=V(),g=V(),x=V(),k=V();let p=Dt(e,"predictors",12),v=Dt(e,"cases",24,()=>[]),y=V(!1),m=V({icuDays:0,mortality:0,bloodLoss:0}),w=V(!1),_=V(0),z=V(!1),E=V({age:!0,height:!0,bmi:!0,asa:!0});function P(O){const tt=O/2.54,At=Math.floor(tt/12),pt=Math.round(tt%12);return{feet:At,inches:pt}}function S(O,tt){return Math.round((O*12+tt)*2.54)}const T={min:{feet:4,inches:5},max:{feet:7,inches:5}};let b=V(0),A=V(0),M=V(0),q=V(0),K=V({q1:0,q3:0}),F=V({q1:0,q3:0});function B(O,tt,At){if(tt===0&&O===0)return 1;if(tt===0||O===0)return 0;const pt=Math.abs(O-tt)/Math.max(tt,1);return Math.exp(-pt)}function D(){L(y,!0),L(w,!1),L(z,!1),L(m,{icuDays:0,mortality:0,bloodLoss:0})}const X={1:"#22c55e",2:"#a3e635",3:"#eab308",4:"#f97316",5:"#ef4444"};it(()=>{},()=>{L(n,{min:S(T.min.feet,T.min.inches),max:S(T.max.feet,T.max.inches)})}),it(()=>ht(v()),()=>{L(r,v().length>0?{min:Math.min(...v().map(O=>O.age)),max:Math.max(...v().map(O=>O.age))}:{min:0,max:0})}),it(()=>ht(v()),()=>{L(i,v().length>0?{min:Math.min(...v().map(O=>O.bmi)),max:Math.max(...v().map(O=>O.bmi))}:{min:0,max:0})}),it(()=>ht(v()),()=>{L(a,v().length>0?[...new Set(v().map(O=>O.asa))].sort():[])}),it(()=>(ht(v()),c(E),ht(p()),c(b),c(A),c(M),c(y),c(w),c(m)),()=>{if(v().length>0){const O=c(E).age?v().filter(ot=>Math.abs(ot.age-p().age)<=5):v(),tt=c(E).bmi?v().filter(ot=>Math.abs(ot.bmi-p().bmi)<=5):v(),At=c(E).height?v().filter(ot=>Math.abs(ot.height-p().height)<=5.08):v(),pt=c(E).asa?v().filter(ot=>Math.abs(ot.asa-p().asa)<=2):v(),Mt=O.filter(ot=>tt.includes(ot)).filter(ot=>At.includes(ot)).filter(ot=>pt.includes(ot));if(L(q,Mt.length),Mt.length>0){const ot=Mt.map(nt=>Number(nt.icu_days)).filter(nt=>!isNaN(nt)).sort((nt,Rt)=>nt-Rt);L(b,ot.reduce((nt,Rt)=>nt+Rt,0)/ot.length),L(K,{q1:ot[Math.floor(ot.length*.25)],q3:ot[Math.floor(ot.length*.75)]}),L(A,Mt.reduce((nt,Rt)=>nt+(Rt.death_inhosp||0),0)/Mt.length);const Ft=Mt.map(nt=>Number(nt.intraop_ebl)).filter(nt=>!isNaN(nt)).sort((nt,Rt)=>nt-Rt);if(L(M,Ft.reduce((nt,Rt)=>nt+Rt,0)/Ft.length),L(F,{q1:Ft[Math.floor(Ft.length*.25)],q3:Ft[Math.floor(Ft.length*.75)]}),c(y)&&c(w)){const nt=B(c(m).icuDays,c(b)),Rt=B(c(m).mortality,c(A)*100,Mt.map(Oe=>Oe.death_inhosp*100)),un=B(c(m).bloodLoss,c(M));L(_,nt*.4+Rt*.3+un*.3)}}else L(b,0),L(A,0),L(M,0),L(K,{q1:0,q3:0}),L(F,{q1:0,q3:0})}}),it(()=>(ht(p()),c(n)),()=>{L(s,(p().height-c(n).min)/(c(n).max-c(n).min))}),it(()=>c(s),()=>{L(o,250+c(s)*150)}),it(()=>(ht(p()),c(i)),()=>{L(l,2+(p().bmi-c(i).min)/(c(i).max-c(i).min)*4)}),it(()=>(ht(p()),c(i)),()=>{L(u,(p().bmi-c(i).min)/(c(i).max-c(i).min))}),it(()=>c(u),()=>{L(h,10+c(u)*25)}),it(()=>c(o),()=>{L(f,c(o)*.2)}),it(()=>(ht(p()),c(r)),()=>{L(d,`rgb(${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255})`)}),it(()=>ht(p()),()=>{L(g,X[p().asa]||X[1])}),it(()=>c(E),()=>{L(x,Object.values(c(E)).filter(Boolean).length)}),it(()=>c(x),()=>{L(k,c(x)===4?"all filters":`${c(x)} filter${c(x)===1?"":"s"}`)}),Pe(),De();var Y=Kh(),I=C(Y),H=C(I),vt=C(H),lt=R(C(vt),2),dt=C(lt),ct=C(dt);N(dt),N(lt),N(vt);var et=R(vt,2),mt=C(et),Gt=C(mt);gt(Gt),It(2),N(mt);var yt=R(mt,2),$t=C(yt);gt($t),It(2),N(yt);var xt=R(yt,2),j=C(xt);gt(j),It(2),N(xt);var Bt=R(xt,2),Pt=C(Bt);gt(Pt),It(2),N(Bt),N(et);var Ot=R(et,2),$=C(Ot),J=C($),rt=C(J);N(J);var Q=R(J,2);gt(Q);var G=R(Q,2),ft=C(G);N(G),N($);var kt=R($,2),W=C(kt),_t=C(W);N(W);var Lt=R(W,2);gt(Lt);var ve=R(Lt,2),qe=C(ve);N(ve),N(kt);var sn=R(kt,2),On=C(sn),es=C(On);N(On);var ye=R(On,2);gt(ye);var ei=R(ye,2),ns=C(ei);N(ei),N(sn);var Hn=R(sn,2),Xn=C(Hn),rs=C(Xn);N(Xn);var on=R(Xn,2);gt(on);var ni=R(on,2),is=C(ni);N(ni),N(Hn),N(Ot),N(H);var ri=R(H,2),Vn=C(ri),ln=C(Vn),Be=R(ln),oe=R(Be),xe=R(oe),_e=R(xe),be=R(_e),we=R(be),Yn=R(we);N(Vn),N(ri),N(I);var Un=R(I,2),as=C(Un);N(Un);var ii=R(Un,2);{var ss=O=>{var tt=Lh();at(O,tt)},os=(O,tt)=>{{var At=pt=>{var Tt=qh(),Ht=R(C(Tt),2),Mt=C(Ht);N(Ht),It(2),N(Tt),Yt(()=>ut(Mt,`Only ${c(q)??""} cases match your current filters. The predictions may not be reliable. Consider:`)),at(pt,Tt)};Et(O,pt=>{c(q)<10&&pt(At)},tt)}};Et(ii,O=>{c(q)===0?O(ss):O(os,!1)})}var Gn=R(ii,2),ai=C(Gn);{var ls=O=>{var tt=Bh();ce("click",tt,D),at(O,tt)},us=O=>{var tt=Oh();ce("click",tt,()=>{L(y,!1),L(w,!1),L(z,!1)}),at(O,tt)};Et(ai,O=>{c(y)?O(us,!1):O(ls)})}var Wn=R(ai,2),cs=C(Wn,!0);N(Wn),N(Gn);var si=R(Gn,2);{var fs=O=>{var tt=Hh(),At=R(C(tt),2),pt=C(At),Tt=R(C(pt),2);gt(Tt),N(pt);var Ht=R(pt,2),Mt=R(C(Ht),2);gt(Mt),N(Ht);var ot=R(Ht,2),Ft=R(C(ot),2);gt(Ft),N(ot),N(At),N(tt),ee(Tt,()=>c(m).icuDays,nt=>re(m,c(m).icuDays=nt)),ee(Mt,()=>c(m).mortality,nt=>re(m,c(m).mortality=nt)),ee(Ft,()=>c(m).bloodLoss,nt=>re(m,c(m).bloodLoss=nt)),at(O,tt)};Et(si,O=>{c(y)&&O(fs)})}var hs=R(si,2);{var ds=O=>{var tt=Wh(),At=R(Xr(tt),2),pt=C(At),Tt=R(C(pt),2),Ht=C(Tt);N(Tt);var Mt=R(Tt,2),ot=C(Mt);N(Mt),N(pt);var Ft=R(pt,2),nt=R(C(Ft),4),Rt=C(nt);N(nt),N(Ft);var un=R(Ft,2),Oe=R(C(un),2),ps=C(Oe);N(Oe);var oi=R(Oe,2),gs=C(oi);N(oi),N(un),N(At);var ms=R(At,2);{var vs=He=>{var Xe=Gh(),cn=C(Xe),Kn=R(cn);{var Qn=Wt=>{var Jn=Xh();at(Wt,Jn)},Zn=(Wt,Jn)=>{{var ys=ke=>{var jn=Vh();at(ke,jn)},xs=(ke,jn)=>{{var _s=Ae=>{var tr=Yh();at(Ae,tr)},bs=Ae=>{var tr=Uh();at(Ae,tr)};Et(ke,Ae=>{c(_)<=.75?Ae(_s):Ae(bs,!1)},jn)}};Et(Wt,ke=>{c(_)<=.5?ke(ys):ke(xs,!1)},Jn)}};Et(Kn,Wt=>{c(_)<=.25?Wt(Qn):Wt(Zn,!1)})}N(Xe),Yt(Wt=>ut(cn,`Your guess was ${Wt??""}% accurate! `),[()=>(c(_)*100).toFixed(1)],se),at(He,Xe)};Et(ms,He=>{c(y)&&c(w)&&He(vs)})}Yt((He,Xe,cn,Kn,Qn,Zn,Wt)=>{ut(Ht,`${He??""} days`),ut(ot,`IQR: ${Xe??""} - ${cn??""} days`),ut(Rt,`${Kn??""}%`),ut(ps,`${Qn??""} mL`),ut(gs,`IQR: ${Zn??""} - ${Wt??""} mL`)},[()=>c(b).toFixed(1),()=>c(K).q1.toFixed(1),()=>c(K).q3.toFixed(1),()=>(c(A)*100).toFixed(1),()=>c(M).toFixed(0),()=>c(F).q1.toFixed(0),()=>c(F).q3.toFixed(0)],se),at(O,tt)};Et(hs,O=>{(!c(y)||c(w))&&c(z)&&O(ds)})}N(Y),Yt((O,tt,At,pt,Tt,Ht)=>{ut(ct,`Active: ${c(k)??""}`),fn($,1,hn(c(E).age?"":"opacity-50")),ut(rt,`Age: ${p().age??""} years`),U(Q,"min",c(r).min),U(Q,"max",c(r).max),Q.disabled=!c(E).age,ut(ft,`Range: ${c(r).min??""} - ${c(r).max??""} years`),fn(kt,1,hn(c(E).height?"":"opacity-50")),ut(_t,`Height: ${O??""}' ${tt??""}"`),U(Lt,"min",c(n).min),U(Lt,"max",c(n).max),Lt.disabled=!c(E).height,ut(qe,`Range: ${T.min.feet}'${T.min.inches}" - ${T.max.feet}'${T.max.inches}"`),fn(sn,1,hn(c(E).bmi?"":"opacity-50")),ut(es,`BMI: ${p().bmi??""}`),U(ye,"min",c(i).min),U(ye,"max",c(i).max),ye.disabled=!c(E).bmi,ut(ns,`Range: ${At??""} - ${pt??""}`),fn(Hn,1,hn(c(E).asa?"":"opacity-50")),ut(rs,`ASA Score: ${p().asa??""}`),on.disabled=!c(E).asa,ut(is,`ASA ${p().asa??""}: ${p().asa===1?"Healthy patient":p().asa===2?"Mild systemic disease":p().asa===3?"Severe systemic disease":p().asa===4?"Severe systemic disease that is a constant threat to life":"Moribund patient not expected to survive without the operation"}`),U(Vn,"viewBox",`0 0 200 ${c(o)??""}`),U(ln,"fill",c(g)),U(ln,"stroke-width",c(l)),U(ln,"opacity",c(E).asa?1:.5),U(Be,"y2",c(o)*.6),U(Be,"stroke",c(g)),U(Be,"stroke-width",c(l)),U(Be,"opacity",c(E).asa?1:.5),U(oe,"cy",c(o)*.45),U(oe,"rx",c(h)),U(oe,"ry",c(f)),U(oe,"fill",c(g)),U(oe,"stroke-width",c(l)),U(oe,"opacity",c(E).bmi?1:.5),U(xe,"x2",Tt),U(xe,"y2",c(o)*.4),U(xe,"stroke",c(g)),U(xe,"stroke-width",c(l)),U(xe,"opacity",c(E).asa?1:.5),U(_e,"x2",Ht),U(_e,"y2",c(o)*.4),U(_e,"stroke",c(g)),U(_e,"stroke-width",c(l)),U(_e,"opacity",c(E).asa?1:.5),U(be,"y1",c(o)*.6),U(be,"y2",c(o)*.9),U(be,"stroke",c(g)),U(be,"stroke-width",c(l)),U(be,"opacity",c(E).asa?1:.5),U(we,"y1",c(o)*.6),U(we,"y2",c(o)*.9),U(we,"stroke",c(g)),U(we,"stroke-width",c(l)),U(we,"opacity",c(E).asa?1:.5),U(Yn,"stroke",c(d)),U(Yn,"stroke-width",c(l)*1.5),U(Yn,"opacity",c(E).age?1:.5),ut(as,`Found ${c(q)??""} historical patients with similar characteristics`),ut(cs,c(z)?"Hide Outcomes":"Show Outcomes")},[()=>P(p().height).feet,()=>P(p().height).inches,()=>c(i).min.toFixed(1),()=>c(i).max.toFixed(1),()=>60-Math.max(0,c(h)-20),()=>140+Math.max(0,c(h)-20)],se),Ee(Gt,()=>c(E).age,O=>re(E,c(E).age=O)),Ee($t,()=>c(E).height,O=>re(E,c(E).height=O)),Ee(j,()=>c(E).bmi,O=>re(E,c(E).bmi=O)),Ee(Pt,()=>c(E).asa,O=>re(E,c(E).asa=O)),ee(Q,()=>p().age,O=>p(p().age=O,!0)),ee(Lt,()=>p().height,O=>p(p().height=O,!0)),ee(ye,()=>p().bmi,O=>p(p().bmi=O,!0)),ee(on,()=>p().asa,O=>p(p().asa=O,!0)),ce("click",Wn,()=>{L(z,!c(z)),c(y)&&L(w,!0)}),at(t,Y),me()}var Zh=st('<p class="py-16 text-center text-lg">Loading VitalDB dataset …</p>'),Jh=st(`<article class="prose mx-auto space-y-20 py-10"><section class="space-y-6 text-center"><h1 class="text-4xl leading-tight font-semibold md:text-5xl">Vitals&nbsp;Unveiled:<br/> <span class="text-indigo-600">Why Some "Routine" Surgeries Aren't</span></h1> <p class="mx-auto max-w-2xl text-lg md:text-xl">Every morning an OR schedule hums like clockwork. <strong>6 388</strong> patients arrive,
				expecting a smooth ride through anesthesia and stitched-up certainty. Yet buried in those
				charts are <em>blood-loss spikes, surprise ICU transfers, and silent tragedies</em> that no checklist
				predicted. What separates the happy recoveries from the heart-stopping detours?</p> <p class="mx-auto max-w-2xl text-lg md:text-xl">Scroll on 👇 as we crack open the VitalDB dataset to follow every heartbeat, incision, and
				lab value—then build <strong>interactive risk profiles</strong> that may one day warn us before
				routine turns to critical.</p> <!></section> <section><h2>Who Steps Into the OR?</h2> <p class="mb-4 max-w-xl">Let's start by meeting our patients. The charts below reveal a striking pattern: while our
				patients span six decades, <strong>70% cluster in just two surgical departments</strong>. This concentration—combined
				with age and sex differences—creates wildly different baseline risks before the first
				incision. Click any department bar or select an age range to filter the dashboard and see how demographics shift
				across specialties.</p> <div class="grid gap-8 md:grid-cols-2"><!> <!></div></section> <section><h2 class="text-center text-3xl font-bold mb-1 pb-4">Time on the Table</h2> <p class="mb-4 text-center max-w-5xl mx-auto">Each dot marks a key moment in surgery. The visualization shows <strong>mean, min, and max durations</strong> across our 6,388 cases. 
				Try the filters above—switch between department and surgery type to see how <strong>different procedures have their own rhythm</strong>. 
				For instance, breast surgeries average just <strong>34 minutes</strong> from anesthesia to incision, while transplantations take nearly twice as long, <strong>at 70 minutes</strong>. 
				This pre-incision time matters, as longer anesthesia exposure before surgery increases risk of complications. If you're facing surgery, 
				use these filters to see typical timing patterns for your procedure—knowledge that can help you understand and prepare for your own surgical journey. 
				Hover over dots for exact timing stats.</p> <div><!></div></section> <section><h2>Hidden Risk Factor — The Albumin Cliff</h2> <p>Albumin is a blood protein that reflects nutritional reserve and overall physiological
				resilience. In the pre-operative setting, low albumin levels often signal that a patient’s
				body may struggle to recover. By highlighting albumin, we remind viewers that a seemingly
				“routine” lab value—often checked before surgery—can quietly predict who sails through the
				OR and who may end up in the ICU. It’s the kind of hidden detail that turns “routine” into
				“unexpected” when no one is watching.</p> <br/> <p><strong>x-axis</strong> = pre-operative albumin (g/dL). <strong>Dot colour</strong> = post-op ICU stay (<span style="color:#a50026">red ≈ ≥ 3 days</span>, <span style="color:#3288bd">deep-blue ≈ 0–1 day</span>). Use the radio buttons to flip
				between routine <b>elective</b>, urgent <b>emergency</b>, or <b>all</b> cases. Below a certain threshold, the
				risk of prolonged ICU stay climbs sharply—our so-called “Albumin Cliff.”</p> <br/> <!> <h3>What we actually see</h3> <ul class="list-inside list-disc space-y-1"><li><strong>In elective cases, a pronounced shift appears near 3 g/dL.</strong> Patients with
					albumin just under 3 g/dL begin to light up orange and red, whereas above 3 g/dL most stay
					deep-blue. <span class="font-semibold">Median ICU stay below 3 g/dL is about 2.1 days (IQR 1–4),</span> compared to <span class="font-semibold">0.7 days (IQR 0–1) above 3 g/dL</span>. A few low-albumin blue
					outliers exist, but long-stayers (amber & red) become nearly three times more common once
					you cross that cliff.</li> <li><strong>In emergencies, the “cliff” shifts upward to around 3.5 g/dL.</strong> Because
					urgent cases already carry extra risk, the median albumin threshold where ICU stays spike
					is higher. Below ~3.5 g/dL, <span class="font-semibold">the chance of ≥ 3-day ICU stay more than doubles</span> compared
					to those with albumin above 3.5 g/dL. The spread of dots is wider, but the colour gradient
					still tilts toward red as albumin drops.</li> <li>High-albumin (> 4 g/dL) patients rarely linger, anchoring the schedule “clockwork” we saw
					in the opening hook.</li></ul> <p><b>Take-away&nbsp;→</b> Albumin isn’t a guarantee of trouble, but a <em>silent gravity well</em>: the lower it drops, the harder it is to climb off the ICU
				track. Even in apparently routine electives, nutrition can tip the balance from day-case
				discharge to days of critical care.</p></section>   <section><h2>Interactive Risk Builder</h2> <p class="mb-4 max-w-xl">Now it's your turn. Build a patient profile using the sliders below. Watch how tiny shifts—a
				single ASA notch or clicking 'Emergency'—can triple the mortality risk instantly. We'll show
				you how many similar historical cases we found, so you can trust the predictions. Try the
				"Make a Guess" mode to test your intuition against the data.</p> <!></section> <section class="text-center"><div class="mx-auto max-w-2xl rounded-lg bg-indigo-50 p-8"><h2 class="mb-4 text-2xl font-semibold text-indigo-900">The Takeaway</h2> <p class="text-lg text-indigo-800">The data reveals three critical insights: First, pre-op albumin levels—easily measured and
					often correctable—strongly predict ICU stays. Second, emergency status and ASA score
					interact in ways that standard checklists miss. And third, while we can't change age, we
					can optimize timing, prepare blood products, and adjust recovery expectations based on
					these risk factors. The data tells us where to look—before the knife ever touches skin.</p></div></section></article>`);function od(t,e){ge(e,!1);let n=V([]),r=V(!0),i=V([]),a=V(null),s=V(null),o=V(!1);function l(y){const{department:m}=y.detail;L(a,m),f()}function u(y){L(o,y.detail.showPercentage)}function h(y){const{ageRange:m}=y.detail;L(s,m),f()}function f(){let y=[...c(n)];c(a)&&(y=y.filter(m=>m.department===c(a))),c(s)&&(y=y.filter(m=>m.age!==void 0&&m.age>=c(s)[0]&&m.age<=c(s)[1])),L(i,y)}function d(y){return y==null||y.trim()===""?"":/^[+\-]?\d+(\.\d+)?$/.test(y)?+y:y}ze(async()=>{const y=`${Ws}/cases.csv`;L(n,await vo(y,m=>{const w={};for(const _ in m)w[_]=d(m[_]);return w})),L(r,!1)});let g=V({age:60,bmi:25,asa:2,emergency:0});it(()=>c(n),()=>{if(c(n).length>0){let P=function(S,T){const b=S.avgWait;S.count++,S.avgWait=(b*(S.count-1)+T)/S.count,S.stdDev=Math.sqrt(((S.count-2)*S.stdDev*S.stdDev+(T-b)*(T-S.avgWait))/(S.count-1))};const y=c(n).filter(S=>S.emop===1&&(S.preop_alb??0)<3),m=c(n).filter(S=>S.emop===0&&(S.preop_alb??0)>3.5),w=y.length>0?y.reduce((S,T)=>S+(T.death_inhosp??0),0)/y.length:0,_=m.length>0?m.reduce((S,T)=>S+(T.death_inhosp??0),0)/m.length:0;console.log("Emergency Low Alb Mortality:",(w*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",(_*100).toFixed(1)+"%"),console.log("Ratio:",(w/(_||.001)).toFixed(1)+"x");const z=new Map,E=new Map;c(n).forEach(S=>{if(S.department&&S.optype&&S.anestart&&S.opstart){const T=(S.opstart-S.anestart)/60;z.has(S.department)||z.set(S.department,{count:0,avgWait:0,stdDev:0}),P(z.get(S.department),T),E.has(S.optype)||E.set(S.optype,{count:0,avgWait:0,stdDev:0}),P(E.get(S.optype),T)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(z.entries()).sort((S,T)=>T[1].count-S[1].count).forEach(([S,T])=>{console.log(`${S}: ${T.count} cases, avg wait ${T.avgWait.toFixed(1)} ± ${T.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(E.entries()).sort((S,T)=>T[1].count-S[1].count).slice(0,10).forEach(([S,T])=>{console.log(`${S}: ${T.count} cases, avg wait ${T.avgWait.toFixed(1)} ± ${T.stdDev.toFixed(1)} min`)})}}),Pe(),De();var x=ws(),k=Xr(x);{var p=y=>{var m=Zh();at(y,m)},v=y=>{var m=Jh(),w=C(m),_=R(C(w),6);const z=se(()=>[{label:"Total Surgeries",value:c(n).length},{label:"ICU Transfers",value:c(n).filter(Y=>(Y.icu_days??0)>0).length},{label:"In-hospital Deaths",value:c(n).filter(Y=>Y.death_inhosp==1).length}]);ko(_,{get stats(){return c(z)}}),N(w);var E=R(w,2),P=R(C(E),4),S=C(P);const T=se(()=>c(a)?c(i):c(n));mh(S,{get data(){return c(T)},get showPercentage(){return c(o)},set showPercentage(Y){L(o,Y)},$$events:{percentageChange:u,filter:h},$$legacy:!0});var b=R(S,2);const A=se(()=>c(s)?c(i):c(n));_h(b,{get data(){return c(A)},get filteredDepartment(){return c(a)},get showPercentage(){return c(o)},$$events:{filter:l}}),N(P),N(E);var M=R(E,2),q=R(C(M),4),K=C(q);Eh(K,{get cases(){return c(n)}}),N(q),N(M);var F=R(M,2),B=R(C(F),10);Ph(B,{get patients(){return c(n)}}),It(6),N(F);var D=R(F,2),X=R(C(D),4);Qh(X,{get cases(){return c(n)},get predictors(){return c(g)},set predictors(Y){L(g,Y)},$$legacy:!0}),N(D),It(2),N(m),at(y,m)};Et(k,y=>{c(r)?y(p):y(v,!1)})}at(t,x),me()}export{od as component};
