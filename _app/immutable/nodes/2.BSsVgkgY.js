import{f as rt,a as j,c as ui}from"../chunks/BAvE5Nsf.js";import{i as De}from"../chunks/Bn6WZLOg.js";import{o as oe,c as ta,a as ea}from"../chunks/mTgM1uVP.js";import{D as nr,y as Tt,ab as As,ak as Ms,z as $s,x as Ss,g as c,R as se,A as Cs,B as Ns,C as ci,F as rr,K as Xe,ae as Es,G as na,I as ra,J as Ts,au as ia,ai as aa,i as sa,Y,av as fi,aw as ir,N as wr,a7 as hi,ax as Or,ay as Rs,az as Hr,aA as di,aB as Is,ah as Fs,aC as Ds,ap as zs,aD as Ps,ac as Ls,aE as qs,aF as Bs,aG as Os,aH as Hs,aI as Xs,b as oa,M as Xr,aJ as Us,aK as la,a9 as Vs,L as ua,aL as Ys,p as ge,at as Ws,q as E,m as me,o as R,v as F,t as Rt,aM as ht,e as vt,aN as ze,X as z,aO as pi,aP as ne,k as re,w as Bt,aQ as gi,n as Gs}from"../chunks/DJq3ArZa.js";import{a as Ks,l as Dn,s as mt,e as te}from"../chunks/rEyLtLaZ.js";import{p as It,b as zn,i as Ct}from"../chunks/9yfd6q5g.js";import{t as Qs,a as We,c as fn,C as Zs,s as Js}from"../chunks/5-t9oCxd.js";import{w as js,b as to}from"../chunks/2dkBNidS.js";function wn(t,e){return e}function eo(t,e,n,r){for(var i=[],a=e.length,s=0;s<a;s++)Is(e[s].e,i,!0);var o=a>0&&i.length===0&&n!==null;if(o){var l=n.parentNode;Fs(l),l.append(n),r.clear(),ie(t,e[0].prev,e[a-1].next)}Ds(i,()=>{for(var u=0;u<a;u++){var d=e[u];o||(r.delete(d.k),ie(t,d.prev,d.next)),zs(d.e,!o)}})}function kn(t,e,n,r,i,a=null){var s=t,o={flags:e,items:new Map,first:null},l=(e&ia)!==0;if(l){var u=t;s=Tt?nr(As(u)):u.appendChild(Ms())}Tt&&$s();var d=null,f=!1,h=se(()=>{var g=n();return sa(g)?g:g==null?[]:aa(g)});Ss(()=>{var g=c(h),y=g.length;if(f&&y===0)return;f=y===0;let C=!1;if(Tt){var p=Cs(s)===Ns;p!==(y===0)&&(s=ci(),nr(s),rr(!1),C=!0)}if(Tt){for(var m=null,_,v=0;v<y;v++){if(Xe.nodeType===8&&Xe.data===Es){s=Xe,C=!0,rr(!1);break}var w=g[v],b=r(w,v);_=ca(Xe,o,m,null,w,b,v,i,e,n),o.items.set(b,_),m=_}y>0&&nr(ci())}Tt||no(g,o,s,i,e,r,n),a!==null&&(y===0?d?na(d):d=ra(()=>a(s)):d!==null&&Ts(d,()=>{d=null})),C&&rr(!0),c(h)}),Tt&&(s=Xe)}function no(t,e,n,r,i,a,s){var q,Z,D,k;var o=(i&Rs)!==0,l=(i&(Hr|Or))!==0,u=t.length,d=e.items,f=e.first,h=f,g,y=null,C,p=[],m=[],_,v,w,b;if(o)for(b=0;b<u;b+=1)_=t[b],v=a(_,b),w=d.get(v),w!==void 0&&((q=w.a)==null||q.measure(),(C??(C=new Set)).add(w));for(b=0;b<u;b+=1){if(_=t[b],v=a(_,b),w=d.get(v),w===void 0){var M=h?h.e.nodes_start:n;y=ca(M,e,y,y===null?e.first:y.next,_,v,b,r,i,s),d.set(v,y),p=[],m=[],h=y.next;continue}if(l&&ro(w,_,b,i),(w.e.f&ir)!==0&&(na(w.e),o&&((Z=w.a)==null||Z.unfix(),(C??(C=new Set)).delete(w))),w!==h){if(g!==void 0&&g.has(w)){if(p.length<m.length){var A=m[0],I;y=A.prev;var H=p[0],P=p[p.length-1];for(I=0;I<p.length;I+=1)mi(p[I],A,n);for(I=0;I<m.length;I+=1)g.delete(m[I]);ie(e,H.prev,P.next),ie(e,y,H),ie(e,P,A),h=A,y=P,b-=1,p=[],m=[]}else g.delete(w),mi(w,h,n),ie(e,w.prev,w.next),ie(e,w,y===null?e.first:y.next),ie(e,y,w),y=w;continue}for(p=[],m=[];h!==null&&h.k!==v;)(h.e.f&ir)===0&&(g??(g=new Set)).add(h),m.push(h),h=h.next;if(h===null)continue;w=h}p.push(w),y=w,h=w.next}if(h!==null||g!==void 0){for(var $=g===void 0?[]:aa(g);h!==null;)(h.e.f&ir)===0&&$.push(h),h=h.next;var W=$.length;if(W>0){var x=(i&ia)!==0&&u===0?n:null;if(o){for(b=0;b<W;b+=1)(D=$[b].a)==null||D.measure();for(b=0;b<W;b+=1)(k=$[b].a)==null||k.fix()}eo(e,$,x,d)}}o&&wr(()=>{var T;if(C!==void 0)for(w of C)(T=w.a)==null||T.apply()}),hi.first=e.first&&e.first.e,hi.last=y&&y.e}function ro(t,e,n,r){(r&Hr)!==0&&di(t.v,e),(r&Or)!==0?di(t.i,n):t.i=n}function ca(t,e,n,r,i,a,s,o,l,u){var d=(l&Hr)!==0,f=(l&Ps)===0,h=d?f?Y(i):fi(i):i,g=(l&Or)===0?s:fi(s),y={i:g,v:h,k:a,a:null,e:null,prev:n,next:r};try{return y.e=ra(()=>o(t,h,g,u),Tt),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?e.first=y:(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function mi(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var s=Ls(a);i.before(a),a=s}}function ie(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function io(t,e,n,r){var i=t.__style;if(Tt||i!==e){var a=Qs(e);(!Tt||a!==t.getAttribute("style"))&&(a==null?t.removeAttribute("style"):t.style.cssText=a),t.__style=e}return r}const ao=Symbol("is custom element"),so=Symbol("is html");function bt(t){if(Tt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;Q(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;Q(t,"checked",null),t.checked=i}}};t.__on_r=n,qs(n),Ks()}}function Q(t,e,n,r){var i=oo(t);Tt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[Bs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&lo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function oo(t){return t.__attributes??(t.__attributes={[ao]:t.nodeName.includes("-"),[so]:t.namespaceURI===Os})}var vi=new Map;function lo(t){var e=vi.get(t.nodeName);if(e)return e;vi.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Xs(r);for(var a in n)n[a].set&&e.push(a);r=Hs(r)}return e}const uo=()=>performance.now(),Wt={tick:t=>requestAnimationFrame(t),now:()=>uo(),tasks:new Set};function fa(){const t=Wt.now();Wt.tasks.forEach(e=>{e.c(t)||(Wt.tasks.delete(e),e.f())}),Wt.tasks.size!==0&&Wt.tick(fa)}function co(t){let e;return Wt.tasks.size===0&&Wt.tick(fa),{promise:new Promise(n=>{Wt.tasks.add(e={c:t,f:n})}),abort(){Wt.tasks.delete(e)}}}function jt(t,e,n=e){var r=Us();Dn(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=or(t)?lr(a):a,n(a),r&&a!==(a=e())){var s=t.selectionStart,o=t.selectionEnd;t.value=a??"",o!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(o,t.value.length))}}),(Tt&&t.defaultValue!==t.value||oa(e)==null&&t.value)&&n(or(t)?lr(t.value):t.value),Xr(()=>{var i=e();or(t)&&i===lr(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}const ar=new Set;function sr(t,e,n,r,i=r){var a=n.getAttribute("type")==="checkbox",s=t;let o=!1;if(e!==null)for(var l of e)s=s[l]??(s[l]=[]);s.push(n),Dn(n,"change",()=>{var u=n.__value;a&&(u=yi(s,u,n.checked)),i(u)},()=>i(a?[]:null)),Xr(()=>{var u=r();if(Tt&&n.defaultChecked!==n.checked){o=!0;return}a?(u=u||[],n.checked=u.includes(n.__value)):n.checked=la(n.__value,u)}),Vs(()=>{var u=s.indexOf(n);u!==-1&&s.splice(u,1)}),ar.has(s)||(ar.add(s),wr(()=>{s.sort((u,d)=>u.compareDocumentPosition(d)===4?-1:1),ar.delete(s)})),wr(()=>{if(o){var u;if(a)u=yi(s,u,n.checked);else{var d=s.find(f=>f.checked);u=d==null?void 0:d.__value}i(u)}})}function Ce(t,e,n=e){Dn(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),(Tt&&t.defaultChecked!==t.checked||oa(e)==null)&&n(t.checked),Xr(()=>{var r=e();t.checked=!!r})}function yi(t,e,n){for(var r=new Set,i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function or(t){var e=t.type;return e==="number"||e==="range"}function lr(t){return t===""?null:+t}function ha(t,e,n){if(t.multiple)return e==null?void 0:sa(e)?ho(t,e):Ys();for(var r of t.options){var i=Je(r);if(la(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function fo(t,e){ua(()=>{var n=new MutationObserver(()=>{var r=t.__value;ha(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function xi(t,e,n=e){var r=!0;Dn(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Je);else{var o=t.querySelector(a)??t.querySelector("option:not([disabled])");s=o&&Je(o)}n(s)}),ua(()=>{var i=e();if(ha(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Je(a),n(i))}t.__value=i,r=!1}),fo(t)}function ho(t,e){for(var n of t.options)n.selected=e.includes(Je(n))}function Je(t){return"__value"in t?t.__value:t.value}var bi={},ur={},cr=34,Ue=10,fr=13;function da(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function po(t,e){var n=da(t);return function(r,i){return e(n(r),i,t)}}function _i(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Nt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function go(t){return t<0?"-"+Nt(-t,6):t>9999?"+"+Nt(t,6):Nt(t,4)}function mo(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":go(t.getUTCFullYear())+"-"+Nt(t.getUTCMonth()+1,2)+"-"+Nt(t.getUTCDate(),2)+(i?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(r,2)+"."+Nt(i,3)+"Z":r?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(r,2)+"Z":n||e?"T"+Nt(e,2)+":"+Nt(n,2)+"Z":"")}function vo(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var g,y,C=i(f,function(p,m){if(g)return g(p,m-1);y=p,g=h?po(p,h):da(p)});return C.columns=y||[],C}function i(f,h){var g=[],y=f.length,C=0,p=0,m,_=y<=0,v=!1;f.charCodeAt(y-1)===Ue&&--y,f.charCodeAt(y-1)===fr&&--y;function w(){if(_)return ur;if(v)return v=!1,bi;var M,A=C,I;if(f.charCodeAt(A)===cr){for(;C++<y&&f.charCodeAt(C)!==cr||f.charCodeAt(++C)===cr;);return(M=C)>=y?_=!0:(I=f.charCodeAt(C++))===Ue?v=!0:I===fr&&(v=!0,f.charCodeAt(C)===Ue&&++C),f.slice(A+1,M-1).replace(/""/g,'"')}for(;C<y;){if((I=f.charCodeAt(M=C++))===Ue)v=!0;else if(I===fr)v=!0,f.charCodeAt(C)===Ue&&++C;else if(I!==n)continue;return f.slice(A,M)}return _=!0,f.slice(A,y)}for(;(m=w())!==ur;){for(var b=[];m!==bi&&m!==ur;)b.push(m),m=w();h&&(b=h(b,p++))==null||g.push(b)}return g}function a(f,h){return f.map(function(g){return h.map(function(y){return d(g[y])}).join(t)})}function s(f,h){return h==null&&(h=_i(f)),[h.map(d).join(t)].concat(a(f,h)).join(`
`)}function o(f,h){return h==null&&(h=_i(f)),a(f,h).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(d).join(t)}function d(f){return f==null?"":f instanceof Date?mo(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:o,formatRows:l,formatRow:u,formatValue:d}}var yo=vo(","),xo=yo.parse;function bo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function _o(t,e){return fetch(t,e).then(bo)}function wo(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),_o(e,n).then(function(i){return t(i,r)})}}var ko=wo(xo);function wi(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ao(t){return t}function Mo(t){const e=t-1;return e*e*e+1}function kr(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,a)=>kr(t[a],i));return i=>r.map(a=>a(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(wi(t)&&wi(e)){const a=t.getTime(),o=e.getTime()-a;return l=>new Date(a+l*o)}const r=Object.keys(e),i={};return r.forEach(a=>{i[a]=kr(t[a],e[a])}),a=>{const s={};return r.forEach(o=>{s[o]=i[o](a)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}return()=>e}function $o(t,e={}){const n=js(t);let r,i=t;function a(s,o){if(i=s,t==null)return n.set(t=s),Promise.resolve();let l=r,u=!1,{delay:d=0,duration:f=400,easing:h=Ao,interpolate:g=kr}={...e,...o};if(f===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const y=Wt.now()+d;let C;return r=co(p=>{if(p<y)return!0;u||(C=g(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),l&&(l.abort(),l=null);const m=p-y;return m>f?(n.set(t=s),!1):(n.set(t=C(h(m/f))),!0)}),r.promise}return{set:a,update:(s,o)=>a(s(i,t),o),subscribe:n.subscribe}}var So=rt('<div class="text-center"><h2 class="text-4xl font-extrabold tracking-tight tabular-nums svelte-19d6zus"> </h2> <p class="text-xs tracking-wide text-gray-500 uppercase"> </p></div>'),Co=rt('<div class="mt-6 flex flex-wrap justify-center gap-8"></div>');function No(t,e){ge(e,!0);let n=It(e,"duration",3,1200);const r=Ws(()=>e.stats.map(()=>$o(0,{duration:n(),easing:Mo})));oe(()=>{let a=0;e.stats.forEach(({value:s},o)=>{setTimeout(()=>c(r)[o].set(s),a),a+=n()+400})});var i=Co();kn(i,21,()=>e.stats,wn,(a,s,o)=>{let l=()=>c(s).label;var u=So(),d=R(u),f=R(d,!0);E(d);var h=F(d,2),g=R(h,!0);E(h),E(u),Rt(()=>{mt(f,e.stats[o].value),mt(g,l())}),j(a,u)}),E(i),j(t,i),me()}var Ar="http://www.w3.org/1999/xhtml";const ki={svg:"http://www.w3.org/2000/svg",xhtml:Ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ki.hasOwnProperty(e)?{space:ki[e],local:t}:t}function Eo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ar&&e.documentElement.namespaceURI===Ar?e.createElement(t):e.createElementNS(n,t)}}function To(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pa(t){var e=Pn(t);return(e.local?To:Eo)(e)}function Ro(){}function Ur(t){return t==null?Ro:function(){return this.querySelector(t)}}function Io(t){typeof t!="function"&&(t=Ur(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,u,d=0;d<s;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new Lt(r,this._parents)}function Fo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Do(){return[]}function ga(t){return t==null?Do:function(){return this.querySelectorAll(t)}}function zo(t){return function(){return Fo(t.apply(this,arguments))}}function Po(t){typeof t=="function"?t=zo(t):t=ga(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new Lt(r,i)}function ma(t){return function(){return this.matches(t)}}function va(t){return function(e){return e.matches(t)}}var Lo=Array.prototype.find;function qo(t){return function(){return Lo.call(this.children,t)}}function Bo(){return this.firstElementChild}function Oo(t){return this.select(t==null?Bo:qo(typeof t=="function"?t:va(t)))}var Ho=Array.prototype.filter;function Xo(){return Array.from(this.children)}function Uo(t){return function(){return Ho.call(this.children,t)}}function Vo(t){return this.selectAll(t==null?Xo:Uo(typeof t=="function"?t:va(t)))}function Yo(t){typeof t!="function"&&(t=ma(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new Lt(r,this._parents)}function ya(t){return new Array(t.length)}function Wo(){return new Lt(this._enter||this._groups.map(ya),this._parents)}function An(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}An.prototype={constructor:An,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Go(t){return function(){return t}}function Ko(t,e,n,r,i,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new An(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Qo(t,e,n,r,i,a,s){var o,l,u=new Map,d=e.length,f=a.length,h=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(h[o]=g=s.call(l,l.__data__,o,e)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<f;++o)g=s.call(t,a[o],o,a)+"",(l=u.get(g))?(r[o]=l,l.__data__=a[o],u.delete(g)):n[o]=new An(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(h[o])===l&&(i[o]=l)}function Zo(t){return t.__data__}function Jo(t,e){if(!arguments.length)return Array.from(this,Zo);var n=e?Qo:Ko,r=this._parents,i=this._groups;typeof t!="function"&&(t=Go(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=r[u],f=i[u],h=f.length,g=jo(t.call(d,d&&d.__data__,u,r)),y=g.length,C=o[u]=new Array(y),p=s[u]=new Array(y),m=l[u]=new Array(h);n(d,f,C,p,m,g,e);for(var _=0,v=0,w,b;_<y;++_)if(w=C[_]){for(_>=v&&(v=_+1);!(b=p[v])&&++v<y;);w._next=b||null}}return s=new Lt(s,r),s._enter=o,s._exit=l,s}function jo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tl(){return new Lt(this._exit||this._groups.map(ya),this._parents)}function el(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function nl(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=n[l],d=r[l],f=u.length,h=o[l]=new Array(f),g,y=0;y<f;++y)(g=u[y]||d[y])&&(h[y]=g);for(;l<i;++l)o[l]=n[l];return new Lt(o,this._parents)}function rl(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function il(t){t||(t=al);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),u,d=0;d<o;++d)(u=s[d])&&(l[d]=u);l.sort(e)}return new Lt(i,this._parents).order()}function al(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ol(){return Array.from(this)}function ll(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ul(){let t=0;for(const e of this)++t;return t}function cl(){return!this.node()}function fl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function hl(t){return function(){this.removeAttribute(t)}}function dl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pl(t,e){return function(){this.setAttribute(t,e)}}function gl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ml(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function vl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yl(t,e){var n=Pn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?dl:hl:typeof e=="function"?n.local?vl:ml:n.local?gl:pl)(n,e))}function xa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xl(t){return function(){this.style.removeProperty(t)}}function bl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _l(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wl(t,e,n){return arguments.length>1?this.each((e==null?xl:typeof e=="function"?_l:bl)(t,e,n??"")):Te(this.node(),t)}function Te(t,e){return t.style.getPropertyValue(e)||xa(t).getComputedStyle(t,null).getPropertyValue(e)}function kl(t){return function(){delete this[t]}}function Al(t,e){return function(){this[t]=e}}function Ml(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $l(t,e){return arguments.length>1?this.each((e==null?kl:typeof e=="function"?Ml:Al)(t,e)):this.node()[t]}function ba(t){return t.trim().split(/^|\s+/)}function Vr(t){return t.classList||new _a(t)}function _a(t){this._node=t,this._names=ba(t.getAttribute("class")||"")}_a.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function wa(t,e){for(var n=Vr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ka(t,e){for(var n=Vr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Sl(t){return function(){wa(this,t)}}function Cl(t){return function(){ka(this,t)}}function Nl(t,e){return function(){(e.apply(this,arguments)?wa:ka)(this,t)}}function El(t,e){var n=ba(t+"");if(arguments.length<2){for(var r=Vr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Nl:e?Sl:Cl)(n,e))}function Tl(){this.textContent=""}function Rl(t){return function(){this.textContent=t}}function Il(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fl(t){return arguments.length?this.each(t==null?Tl:(typeof t=="function"?Il:Rl)(t)):this.node().textContent}function Dl(){this.innerHTML=""}function zl(t){return function(){this.innerHTML=t}}function Pl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ll(t){return arguments.length?this.each(t==null?Dl:(typeof t=="function"?Pl:zl)(t)):this.node().innerHTML}function ql(){this.nextSibling&&this.parentNode.appendChild(this)}function Bl(){return this.each(ql)}function Ol(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hl(){return this.each(Ol)}function Xl(t){var e=typeof t=="function"?t:pa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ul(){return null}function Vl(t,e){var n=typeof t=="function"?t:pa(t),r=e==null?Ul:typeof e=="function"?e:Ur(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yl(){var t=this.parentNode;t&&t.removeChild(this)}function Wl(){return this.each(Yl)}function Gl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ql(t){return this.select(t?Kl:Gl)}function Zl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Jl(t){return function(e){t.call(this,e,this.__data__)}}function jl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function tu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function eu(t,e,n){return function(){var r=this.__on,i,a=Jl(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function nu(t,e,n){var r=jl(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(i=0,d=o[l];i<a;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(o=e?eu:tu,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function Aa(t,e,n){var r=xa(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ru(t,e){return function(){return Aa(this,t,e)}}function iu(t,e){return function(){return Aa(this,t,e.apply(this,arguments))}}function au(t,e){return this.each((typeof e=="function"?iu:ru)(t,e))}function*su(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Ma=[null];function Lt(t,e){this._groups=t,this._parents=e}function Pe(){return new Lt([[document.documentElement]],Ma)}function ou(){return this}Lt.prototype=Pe.prototype={constructor:Lt,select:Io,selectAll:Po,selectChild:Oo,selectChildren:Vo,filter:Yo,data:Jo,enter:Wo,exit:tl,join:el,merge:nl,selection:ou,order:rl,sort:il,call:sl,nodes:ol,node:ll,size:ul,empty:cl,each:fl,attr:yl,style:wl,property:$l,classed:El,text:Fl,html:Ll,raise:Bl,lower:Hl,append:Xl,insert:Vl,remove:Wl,clone:Ql,datum:Zl,on:nu,dispatch:au,[Symbol.iterator]:su};function J(t){return typeof t=="string"?new Lt([[document.querySelector(t)]],[document.documentElement]):new Lt([[t]],Ma)}function lu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ai(t,e){if(t=lu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $a(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sa(t){let e,n,r;t.length!==2?(e=Ne,n=(o,l)=>Ne(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ne||t===$a?t:uu,n=t,r=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function uu(){return 0}function cu(t){return t===null?NaN:+t}function*fu(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const hu=Sa(Ne),Ca=hu.right;Sa(cu).center;function du(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function mn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Mr extends Map{constructor(e,n=mu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Mi(this,e))}has(e){return super.has(Mi(this,e))}set(e,n){return super.set(pu(this,e),n)}delete(e){return super.delete(gu(this,e))}}function Mi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gu({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function mu(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Na(t){return t}function vu(t,e,...n){return yu(t,Na,e,n)}function yu(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const o=new Mr,l=r[s++];let u=-1;for(const d of a){const f=l(d,++u,a),h=o.get(f);h?h.push(d):o.set(f,[d])}for(const[d,f]of o)o.set(d,i(f,s));return e(o)}(t,0)}function xu(t=Ne){if(t===Ne)return Ea;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ea(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var bu=Array.prototype,_u=bu.slice;function hr(t){return()=>t}const wu=Math.sqrt(50),ku=Math.sqrt(10),Au=Math.sqrt(2);function Mn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=wu?10:a>=ku?5:a>=Au?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?Mn(t,e,n*2):[o,l,u]}function Ta(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Mn(e,t,n):Mn(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Re(t,e,n){return e=+e,t=+t,n=+n,Mn(t,e,n)[2]}function Mu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Re(e,t,n):Re(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function $u(t,e,n){let r;for(;;){const i=Re(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Su(t){return Math.max(1,Math.ceil(Math.log(du(t))/Math.LN2)+1)}function Cu(){var t=Na,e=mn,n=Su;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,o,l,u=new Array(s);for(a=0;a<s;++a)u[a]=t(i[a],a,i);var d=e(u),f=d[0],h=d[1],g=n(u,f,h);if(!Array.isArray(g)){const v=h,w=+g;if(e===mn&&([f,h]=$u(f,h,w)),g=Ta(f,h,w),g[0]<=f&&(l=Re(f,h,w)),g[g.length-1]>=h)if(v>=h&&e===mn){const b=Re(f,h,w);isFinite(b)&&(b>0?h=(Math.floor(h/b)+1)*b:b<0&&(h=(Math.ceil(h*-b)+1)/-b))}else g.pop()}for(var y=g.length,C=0,p=y;g[C]<=f;)++C;for(;g[p-1]>h;)--p;(C||p<y)&&(g=g.slice(C,p),y=p-C);var m=new Array(y+1),_;for(a=0;a<=y;++a)_=m[a]=[],_.x0=a>0?g[a-1]:f,_.x1=a<y?g[a]:h;if(isFinite(l)){if(l>0)for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=h&&m[Math.min(y,Math.floor((o-f)/l))].push(i[a]);else if(l<0){for(a=0;a<s;++a)if((o=u[a])!=null&&f<=o&&o<=h){const v=Math.floor((f-o)*l);m[Math.min(y,v+(g[v]<=o))].push(i[a])}}}else for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=h&&m[Ca(g,o,0,y)].push(i[a]);return m}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:hr(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:hr([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:hr(Array.isArray(i)?_u.call(i):i),r):n},r}function Gt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $r(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ra(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Ea:xu(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+h)),y=Math.min(r,Math.floor(e+(l-u)*f/l+h));Ra(t,e,g,y,i)}const a=t[e];let s=n,o=r;for(Ve(t,n,e),i(t[r],a)>0&&Ve(t,n,r);s<o;){for(Ve(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Ve(t,n,o):(++o,Ve(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Ve(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function je(t,e,n){if(t=Float64Array.from(fu(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return $r(t);if(e>=1)return Gt(t);var r,i=(r-1)*e,a=Math.floor(i),s=Gt(Ra(t,a).subarray(0,a+1)),o=$r(t.subarray(a+1));return s+(o-s)*(i-a)}}function Nu(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function vn(t,e){return je(t,.5,e)}function Eu(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Tu(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Yr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ru(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const $i=Symbol("implicit");function Ln(){var t=new Mr,e=[],n=[],r=$i;function i(a){let s=t.get(a);if(s===void 0){if(r!==$i)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Mr;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ln(e,n).unknown(r)},Yr.apply(i,arguments),i}function Ia(){var t=Ln().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,g=i<r,y=g?i:r,C=g?r:i;a=(C-y)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),y+=(C-y-a*(h-l))*d,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var p=Eu(h).map(function(m){return y+a*m});return n(g?p.reverse():p)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return Ia(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},Yr.apply(f(),arguments)}function Wr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fa(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rn(){}var tn=.7,$n=1/tn,Ee="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iu=/^#([0-9a-f]{3,8})$/,Fu=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Du=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),zu=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${en}\\)$`),Pu=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${en}\\)$`),Lu=new RegExp(`^hsl\\(${en},${Kt},${Kt}\\)$`),qu=new RegExp(`^hsla\\(${en},${Kt},${Kt},${en}\\)$`),Si={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wr(rn,he,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ci,formatHex:Ci,formatHex8:Bu,formatHsl:Ou,formatRgb:Ni,toString:Ni});function Ci(){return this.rgb().formatHex()}function Bu(){return this.rgb().formatHex8()}function Ou(){return Da(this).formatHsl()}function Ni(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Iu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ei(e):n===3?new Ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Fu.exec(t))?new Ft(e[1],e[2],e[3],1):(e=Du.exec(t))?new Ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zu.exec(t))?hn(e[1],e[2],e[3],e[4]):(e=Pu.exec(t))?hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lu.exec(t))?Ii(e[1],e[2]/100,e[3]/100,1):(e=qu.exec(t))?Ii(e[1],e[2]/100,e[3]/100,e[4]):Si.hasOwnProperty(t)?Ei(Si[t]):t==="transparent"?new Ft(NaN,NaN,NaN,0):null}function Ei(t){return new Ft(t>>16&255,t>>8&255,t&255,1)}function hn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ft(t,e,n,r)}function Hu(t){return t instanceof rn||(t=he(t)),t?(t=t.rgb(),new Ft(t.r,t.g,t.b,t.opacity)):new Ft}function Sn(t,e,n,r){return arguments.length===1?Hu(t):new Ft(t,e,n,r??1)}function Ft(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Wr(Ft,Sn,Fa(rn,{brighter(t){return t=t==null?$n:Math.pow($n,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ft(fe(this.r),fe(this.g),fe(this.b),Cn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ti,formatHex:Ti,formatHex8:Xu,formatRgb:Ri,toString:Ri}));function Ti(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}`}function Xu(){return`#${ce(this.r)}${ce(this.g)}${ce(this.b)}${ce((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ri(){const t=Cn(this.opacity);return`${t===1?"rgb(":"rgba("}${fe(this.r)}, ${fe(this.g)}, ${fe(this.b)}${t===1?")":`, ${t})`}`}function Cn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ce(t){return t=fe(t),(t<16?"0":"")+t.toString(16)}function Ii(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ut(t,e,n,r)}function Da(t){if(t instanceof Ut)return new Ut(t.h,t.s,t.l,t.opacity);if(t instanceof rn||(t=he(t)),!t)return new Ut;if(t instanceof Ut)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Ut(s,o,l,t.opacity)}function Uu(t,e,n,r){return arguments.length===1?Da(t):new Ut(t,e,n,r??1)}function Ut(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Wr(Ut,Uu,Fa(rn,{brighter(t){return t=t==null?$n:Math.pow($n,t),new Ut(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Ut(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ft(dr(t>=240?t-240:t+120,i,r),dr(t,i,r),dr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ut(Fi(this.h),dn(this.s),dn(this.l),Cn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cn(this.opacity);return`${t===1?"hsl(":"hsla("}${Fi(this.h)}, ${dn(this.s)*100}%, ${dn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Fi(t){return t=(t||0)%360,t<0?t+360:t}function dn(t){return Math.max(0,Math.min(1,t||0))}function dr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Vu(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function Yu(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return Vu((n-r/e)*e,s,i,a,o)}}const Gr=t=>()=>t;function Wu(t,e){return function(n){return t+n*e}}function Gu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ku(t){return(t=+t)==1?za:function(e,n){return n-e?Gu(e,n,t):Gr(isNaN(e)?n:e)}}function za(t,e){var n=e-t;return n?Wu(t,n):Gr(isNaN(t)?e:t)}const Nn=function t(e){var n=Ku(e);function r(i,a){var s=n((i=Sn(i)).r,(a=Sn(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=za(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Qu(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=Sn(e[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=t(r),i=t(i),a=t(a),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=a(l),o+""}}}var Zu=Qu(Yu);function Ju(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ju(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=an(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function ec(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nc(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=an(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pr=new RegExp(Sr.source,"g");function rc(t){return function(){return t}}function ic(t){return function(e){return t(e)+""}}function Pa(t,e){var n=Sr.lastIndex=pr.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Sr.exec(t))&&(i=pr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Xt(r,i)})),n=pr.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?ic(l[0].x):rc(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function an(t,e){var n=typeof e,r;return e==null||n==="boolean"?Gr(e):(n==="number"?Xt:n==="string"?(r=he(e))?(e=r,Nn):Pa:e instanceof he?Nn:e instanceof Date?ec:ju(e)?Ju:Array.isArray(e)?tc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nc:Xt)(t,e)}function La(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Di=180/Math.PI,Cr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qa(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Di,skewX:Math.atan(l)*Di,scaleX:s,scaleY:o}}var pn;function ac(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cr:qa(e.a,e.b,e.c,e.d,e.e,e.f)}function sc(t){return t==null||(pn||(pn=document.createElementNS("http://www.w3.org/2000/svg","g")),pn.setAttribute("transform",t),!(t=pn.transform.baseVal.consolidate()))?Cr:(t=t.matrix,qa(t.a,t.b,t.c,t.d,t.e,t.f))}function Ba(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,d,f,h,g,y){if(u!==f||d!==h){var C=g.push("translate(",null,e,null,n);y.push({i:C-4,x:Xt(u,f)},{i:C-2,x:Xt(d,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function s(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Xt(u,d)})):d&&f.push(i(f)+"rotate("+d+r)}function o(u,d,f,h){u!==d?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Xt(u,d)}):d&&f.push(i(f)+"skewX("+d+r)}function l(u,d,f,h,g,y){if(u!==f||d!==h){var C=g.push(i(g)+"scale(",null,",",null,")");y.push({i:C-4,x:Xt(u,f)},{i:C-2,x:Xt(d,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,f,h),s(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(g){for(var y=-1,C=h.length,p;++y<C;)f[(p=h[y]).i]=p.x(g);return f.join("")}}}var oc=Ba(ac,"px, ","px)","deg)"),lc=Ba(sc,", ",")",")");function uc(t){return function(){return t}}function cc(t){return+t}var zi=[0,1];function ae(t){return t}function Nr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:uc(isNaN(e)?NaN:.5)}function fc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function hc(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Nr(i,r),a=n(s,a)):(r=Nr(r,i),a=n(a,s)),function(o){return a(r(o))}}function dc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Nr(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=Ca(t,o,1,r)-1;return a[l](i[l](o))}}function pc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gc(){var t=zi,e=zi,n=an,r,i,a,s=ae,o,l,u;function d(){var h=Math.min(t.length,e.length);return s!==ae&&(s=fc(t[0],t[h-1])),o=h>2?dc:hc,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((u||(u=o(e,t.map(r),Xt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,cc),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=La,d()},f.clamp=function(h){return arguments.length?(s=h?!0:ae,d()):s!==ae},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return r=h,i=g,d()}}function mc(){return gc()(ae,ae)}function vc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function En(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ie(t){return t=En(Math.abs(t)),t?t[1]:NaN}function yc(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function xc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var bc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tn(t){if(!(e=bc.exec(t)))throw new Error("invalid format: "+t);var e;return new Kr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Tn.prototype=Kr.prototype;function Kr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Kr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _c(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Oa;function wc(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Oa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+En(t,Math.max(0,e+a-1))[0]}function Pi(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Li={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:vc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Pi(t*100,e),r:Pi,s:wc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qi(t){return t}var Bi=Array.prototype.map,Oi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kc(t){var e=t.grouping===void 0||t.thousands===void 0?qi:yc(Bi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?qi:xc(Bi.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Tn(f);var h=f.fill,g=f.align,y=f.sign,C=f.symbol,p=f.zero,m=f.width,_=f.comma,v=f.precision,w=f.trim,b=f.type;b==="n"?(_=!0,b="g"):Li[b]||(v===void 0&&(v=12),w=!0,b="g"),(p||h==="0"&&g==="=")&&(p=!0,h="0",g="=");var M=C==="$"?n:C==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=C==="$"?r:/[%p]/.test(b)?s:"",I=Li[b],H=/[defgprs%]/.test(b);v=v===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function P($){var W=M,x=A,q,Z,D;if(b==="c")x=I($)+x,$="";else{$=+$;var k=$<0||1/$<0;if($=isNaN($)?l:I(Math.abs($),v),w&&($=_c($)),k&&+$==0&&y!=="+"&&(k=!1),W=(k?y==="("?y:o:y==="-"||y==="("?"":y)+W,x=(b==="s"?Oi[8+Oa/3]:"")+x+(k&&y==="("?")":""),H){for(q=-1,Z=$.length;++q<Z;)if(D=$.charCodeAt(q),48>D||D>57){x=(D===46?i+$.slice(q+1):$.slice(q))+x,$=$.slice(0,q);break}}}_&&!p&&($=e($,1/0));var T=W.length+$.length+x.length,N=T<m?new Array(m-T+1).join(h):"";switch(_&&p&&($=e(N+$,N.length?m-x.length:1/0),N=""),g){case"<":$=W+$+x+N;break;case"=":$=W+N+$+x;break;case"^":$=N.slice(0,T=N.length>>1)+W+$+x+N.slice(T);break;default:$=N+W+$+x;break}return a($)}return P.toString=function(){return f+""},P}function d(f,h){var g=u((f=Tn(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Ie(h)/3)))*3,C=Math.pow(10,-y),p=Oi[8+y/3];return function(m){return g(C*m)+p}}return{format:u,formatPrefix:d}}var gn,Et,Ha;Ac({thousands:",",grouping:[3],currency:["$",""]});function Ac(t){return gn=kc(t),Et=gn.format,Ha=gn.formatPrefix,gn}function Mc(t){return Math.max(0,-Ie(Math.abs(t)))}function $c(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ie(e)/3)))*3-Ie(Math.abs(t)))}function Sc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ie(e)-Ie(t))+1}function Cc(t,e,n,r){var i=Mu(t,e,n),a;switch(r=Tn(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=$c(i,s))&&(r.precision=a),Ha(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Sc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Mc(i))&&(r.precision=a-(r.type==="%")*2);break}}return Et(r)}function Xa(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ta(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Cc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=Re(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function de(){var t=mc();return t.copy=function(){return pc(t,de())},Yr.apply(t,arguments),Xa(t)}function Nc(){var t=0,e=1,n,r,i,a,s=ae,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var g,y;return arguments.length?([g,y]=h,s=f(g,y),u):[s(0),s(1)]}}return u.range=d(an),u.rangeRound=d(La),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ec(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ua(){var t=Xa(Nc()(ae));return t.copy=function(){return Ec(t,Ua())},Ru.apply(t,arguments)}function Tc(t){return t}var gr=1,mr=2,Er=3,Ge=4,Hi=1e-6;function Rc(t){return"translate("+t+",0)"}function Ic(t){return"translate(0,"+t+")"}function Fc(t){return e=>+t(e)}function Dc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function zc(){return!this.__axis}function Va(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===gr||t===Ge?-1:1,d=t===Ge||t===mr?"x":"y",f=t===gr||t===Er?Rc:Ic;function h(g){var y=r??(e.ticks?e.ticks.apply(e,n):e.domain()),C=i??(e.tickFormat?e.tickFormat.apply(e,n):Tc),p=Math.max(a,0)+o,m=e.range(),_=+m[0]+l,v=+m[m.length-1]+l,w=(e.bandwidth?Dc:Fc)(e.copy(),l),b=g.selection?g.selection():g,M=b.selectAll(".domain").data([null]),A=b.selectAll(".tick").data(y,e).order(),I=A.exit(),H=A.enter().append("g").attr("class","tick"),P=A.select("line"),$=A.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(H),P=P.merge(H.append("line").attr("stroke","currentColor").attr(d+"2",u*a)),$=$.merge(H.append("text").attr("fill","currentColor").attr(d,u*p).attr("dy",t===gr?"0em":t===Er?"0.71em":"0.32em")),g!==b&&(M=M.transition(g),A=A.transition(g),P=P.transition(g),$=$.transition(g),I=I.transition(g).attr("opacity",Hi).attr("transform",function(W){return isFinite(W=w(W))?f(W+l):this.getAttribute("transform")}),H.attr("opacity",Hi).attr("transform",function(W){var x=this.parentNode.__axis;return f((x&&isFinite(x=x(W))?x:w(W))+l)})),I.remove(),M.attr("d",t===Ge||t===mr?s?"M"+u*s+","+_+"H"+l+"V"+v+"H"+u*s:"M"+l+","+_+"V"+v:s?"M"+_+","+u*s+"V"+l+"H"+v+"V"+u*s:"M"+_+","+l+"H"+v),A.attr("opacity",1).attr("transform",function(W){return f(w(W)+l)}),P.attr(d+"2",u*a),$.attr(d,u*p).text(C),b.filter(zc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===mr?"start":t===Ge?"end":"middle"),b.each(function(){this.__axis=w})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(a=s=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(o=+g,h):o},h.offset=function(g){return arguments.length?(l=+g,h):l},h}function qn(t){return Va(Er,t)}function Qr(t){return Va(Ge,t)}function Me(t){return function(){return t}}const Tr=Math.PI,Rr=2*Tr,ue=1e-6,Pc=Rr-ue;function Ya(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Lc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ya;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class qc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ya:Lc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,d=s-e,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ue)if(!(Math.abs(f*l-u*d)>ue)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,y=i-o,C=l*l+u*u,p=g*g+y*y,m=Math.sqrt(C),_=Math.sqrt(h),v=a*Math.tan((Tr-Math.acos((C+h-p)/(2*m*_)))/2),w=v/_,b=v/m;Math.abs(w-1)>ue&&this._append`L${e+w*d},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*g>d*y)},${this._x1=e+b*l},${this._y1=n+b*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,d=n+l,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ue||Math.abs(this._y1-d)>ue)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%Rr+Rr),h>Pc?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>ue&&this._append`A${r},${r},0,${+(h>=Tr)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Bc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new qc(e)}function Oc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wa(t){this._context=t}Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hc(t){return new Wa(t)}function Xc(t){return t[0]}function Uc(t){return t[1]}function Vc(t,e){var n=Me(!0),r=null,i=Hc,a=null,s=Bc(o);t=typeof t=="function"?t:t===void 0?Xc:Me(t),e=typeof e=="function"?e:e===void 0?Uc:Me(e);function o(l){var u,d=(l=Oc(l)).length,f,h=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Me(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Me(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Me(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}var Yc={value:()=>{}};function Zr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new yn(n)}function yn(t){this._=t}function Wc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}yn.prototype=Zr.prototype={constructor:yn,on:function(t,e){var n=this._,r=Wc(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Gc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Xi(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Xi(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Gc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Xi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Yc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Ir={capture:!0,passive:!1};function Fr(t){t.preventDefault(),t.stopImmediatePropagation()}function Kc(t){var e=t.document.documentElement,n=J(t).on("dragstart.drag",Fr,Ir);"onselectstart"in e?n.on("selectstart.drag",Fr,Ir):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qc(t,e){var n=t.document.documentElement,r=J(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fr,Ir),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Fe=0,Ke=0,Ye=0,Ga=1e3,Rn,Qe,In=0,pe=0,Bn=0,nn=typeof performance=="object"&&performance.now?performance:Date,Ka=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jr(){return pe||(Ka(Zc),pe=nn.now()+Bn)}function Zc(){pe=0}function Fn(){this._call=this._time=this._next=null}Fn.prototype=Qa.prototype={constructor:Fn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Jr():+n)+(e==null?0:+e),!this._next&&Qe!==this&&(Qe?Qe._next=this:Rn=this,Qe=this),this._call=t,this._time=n,Dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dr())}};function Qa(t,e,n){var r=new Fn;return r.restart(t,e,n),r}function Jc(){Jr(),++Fe;for(var t=Rn,e;t;)(e=pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fe}function Ui(){pe=(In=nn.now())+Bn,Fe=Ke=0;try{Jc()}finally{Fe=0,tf(),pe=0}}function jc(){var t=nn.now(),e=t-In;e>Ga&&(Bn-=e,In=t)}function tf(){for(var t,e=Rn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Rn=n);Qe=t,Dr(r)}function Dr(t){if(!Fe){Ke&&(Ke=clearTimeout(Ke));var e=t-pe;e>24?(t<1/0&&(Ke=setTimeout(Ui,t-nn.now()-Bn)),Ye&&(Ye=clearInterval(Ye))):(Ye||(In=nn.now(),Ye=setInterval(jc,Ga)),Fe=1,Ka(Ui))}}function Vi(t,e,n){var r=new Fn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ef=Zr("start","end","cancel","interrupt"),nf=[],Za=0,Yi=1,zr=2,xn=3,Wi=4,Pr=5,bn=6;function On(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;rf(t,n,{name:e,index:r,group:i,on:ef,tween:nf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Za})}function jr(t,e){var n=Vt(t,e);if(n.state>Za)throw new Error("too late; already scheduled");return n}function Qt(t,e){var n=Vt(t,e);if(n.state>xn)throw new Error("too late; already running");return n}function Vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function rf(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Qa(a,0,n.time);function a(u){n.state=Yi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,f,h,g;if(n.state!==Yi)return l();for(d in r)if(g=r[d],g.name===n.name){if(g.state===xn)return Vi(s);g.state===Wi?(g.state=bn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[d]):+d<e&&(g.state=bn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[d])}if(Vi(function(){n.state===xn&&(n.state=Wi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=zr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===zr){for(n.state=xn,i=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(g=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Pr,1),f=-1,h=i.length;++f<h;)i[f].call(t,d);n.state===Pr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=bn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Lr(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>zr&&r.state<Pr,r.state=bn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function af(t){return this.each(function(){Lr(this,t)})}function sf(t,e){var n,r;return function(){var i=Qt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function of(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Qt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function lf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Vt(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?sf:of)(n,t,e))}function ti(t,e,n){var r=t._id;return t.each(function(){var i=Qt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Vt(i,r).value[e]}}function Ja(t,e){var n;return(typeof e=="number"?Xt:e instanceof he?Nn:(n=he(e))?(e=n,Nn):Pa)(t,e)}function uf(t){return function(){this.removeAttribute(t)}}function cf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ff(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function hf(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function df(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function pf(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function gf(t,e){var n=Pn(t),r=n==="transform"?lc:Ja;return this.attrTween(t,typeof e=="function"?(n.local?pf:df)(n,r,ti(this,"attr."+t,e)):e==null?(n.local?cf:uf)(n):(n.local?hf:ff)(n,r,e))}function mf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function vf(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function yf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&vf(t,a)),n}return i._value=e,i}function xf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&mf(t,a)),n}return i._value=e,i}function bf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Pn(t);return this.tween(n,(r.local?yf:xf)(r,e))}function _f(t,e){return function(){jr(this,t).delay=+e.apply(this,arguments)}}function wf(t,e){return e=+e,function(){jr(this,t).delay=e}}function kf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_f:wf)(e,t)):Vt(this.node(),e).delay}function Af(t,e){return function(){Qt(this,t).duration=+e.apply(this,arguments)}}function Mf(t,e){return e=+e,function(){Qt(this,t).duration=e}}function $f(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Af:Mf)(e,t)):Vt(this.node(),e).duration}function Sf(t,e){if(typeof e!="function")throw new Error;return function(){Qt(this,t).ease=e}}function Cf(t){var e=this._id;return arguments.length?this.each(Sf(e,t)):Vt(this.node(),e).ease}function Nf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,t).ease=n}}function Ef(t){if(typeof t!="function")throw new Error;return this.each(Nf(this._id,t))}function Tf(t){typeof t!="function"&&(t=ma(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new ee(r,this._parents,this._name,this._id)}function Rf(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],d=l.length,f=s[o]=new Array(d),h,g=0;g<d;++g)(h=l[g]||u[g])&&(f[g]=h);for(;o<r;++o)s[o]=e[o];return new ee(s,this._parents,this._name,this._id)}function If(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ff(t,e,n){var r,i,a=If(e)?jr:Qt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Df(t,e){var n=this._id;return arguments.length<2?Vt(this.node(),n).on.on(t):this.each(Ff(n,t,e))}function zf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Pf(){return this.on("end.remove",zf(this._id))}function Lf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ur(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),d,f,h=0;h<l;++h)(d=o[h])&&(f=t.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,On(u[h],e,n,h,u,Vt(d,n)));return new ee(a,this._parents,e,n)}function qf(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ga(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,d,f=0;f<u;++f)if(d=l[f]){for(var h=t.call(d,d.__data__,f,l),g,y=Vt(d,n),C=0,p=h.length;C<p;++C)(g=h[C])&&On(g,e,n,C,h,y);a.push(h),s.push(d)}return new ee(a,s,e,n)}var Bf=Pe.prototype.constructor;function Of(){return new Bf(this._groups,this._parents)}function Hf(t,e){var n,r,i;return function(){var a=Te(this,t),s=(this.style.removeProperty(t),Te(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function ja(t){return function(){this.style.removeProperty(t)}}function Xf(t,e,n){var r,i=n+"",a;return function(){var s=Te(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Uf(t,e,n){var r,i,a;return function(){var s=Te(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Te(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function Vf(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=Qt(this,t),u=l.on,d=l.value[a]==null?o||(o=ja(e)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(s,i=d),l.on=r}}function Yf(t,e,n){var r=(t+="")=="transform"?oc:Ja;return e==null?this.styleTween(t,Hf(t,r)).on("end.style."+t,ja(t)):typeof e=="function"?this.styleTween(t,Uf(t,r,ti(this,"style."+t,e))).each(Vf(this._id,t)):this.styleTween(t,Xf(t,r,e),n).on("end.style."+t,null)}function Wf(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Gf(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Wf(t,s,n)),r}return a._value=e,a}function Kf(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Gf(t,e,n??""))}function Qf(t){return function(){this.textContent=t}}function Zf(t){return function(){var e=t(this);this.textContent=e??""}}function Jf(t){return this.tween("text",typeof t=="function"?Zf(ti(this,"text",t)):Qf(t==null?"":t+""))}function jf(t){return function(e){this.textContent=t.call(this,e)}}function th(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&jf(i)),e}return r._value=t,r}function eh(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,th(t))}function nh(){for(var t=this._name,e=this._id,n=ts(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var d=Vt(l,e);On(l,t,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ee(r,this._parents,t,n)}function rh(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=Qt(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&a()})}var ih=0;function ee(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function qr(t){return Pe().transition(t)}function ts(){return++ih}var Zt=Pe.prototype;ee.prototype=qr.prototype={constructor:ee,select:Lf,selectAll:qf,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:Tf,merge:Rf,selection:Of,transition:nh,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:Df,attr:gf,attrTween:bf,style:Yf,styleTween:Kf,text:Jf,textTween:eh,remove:Pf,tween:lf,delay:kf,duration:$f,ease:Cf,easeVarying:Ef,end:rh,[Symbol.iterator]:Zt[Symbol.iterator]};function ah(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var sh={time:null,delay:0,duration:250,ease:ah};function oh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function lh(t){var e,n;t instanceof ee?(e=t._id,t=t._name):(e=ts(),(n=sh).time=Jr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&On(l,t,e,u,s,n||oh(l,e));return new ee(r,this._parents,t,e)}Pe.prototype.interrupt=af;Pe.prototype.transition=lh;const vr=t=>()=>t;function uh(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ch(t){t.stopImmediatePropagation()}function yr(t){t.preventDefault(),t.stopImmediatePropagation()}var Gi={name:"drag"},xr={name:"space"},$e={name:"handle"},Se={name:"center"};const{abs:Ki,max:At,min:Mt}=Math;function Qi(t){return[+t[0],+t[1]]}function Zi(t){return[Qi(t[0]),Qi(t[1])]}var _n={name:"x",handles:["w","e"].map(Br),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},br={},Jt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ji={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ji={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Br(t){return{type:t}}function dh(t){return!t.ctrlKey&&!t.button}function ph(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function gh(){return navigator.maxTouchPoints||"ontouchstart"in this}function _r(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function mh(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function vh(){return yh(_n)}function yh(t){var e=ph,n=dh,r=gh,i=!0,a=Zr("start","brush","end"),s=6,o;function l(p){var m=p.property("__brush",C).selectAll(".overlay").data([Br("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jt.overlay).merge(m).each(function(){var v=_r(this).extent;J(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),p.selectAll(".selection").data([Br("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=p.selectAll(".handle").data(t.handles,function(v){return v.type});_.exit().remove(),_.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Jt[v.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(p,m,_){p.tween?p.on("start.brush",function(v){d(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){d(this,arguments).end(v)}).tween("brush",function(){var v=this,w=v.__brush,b=d(v,arguments),M=w.selection,A=t.input(typeof m=="function"?m.apply(this,arguments):m,w.extent),I=an(M,A);function H(P){w.selection=P===1&&A===null?null:I(P),u.call(v),b.brush()}return M!==null&&A!==null?H:H(1)}):p.each(function(){var v=this,w=arguments,b=v.__brush,M=t.input(typeof m=="function"?m.apply(v,w):m,b.extent),A=d(v,w).beforestart();Lr(v),b.selection=M===null?null:M,u.call(v),A.start(_).brush(_).end(_)})},l.clear=function(p,m){l.move(p,null,m)};function u(){var p=J(this),m=_r(this).selection;m?(p.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?m[1][0]-s/2:m[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?m[1][1]-s/2:m[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?m[1][0]-m[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?m[1][1]-m[0][1]+s:s})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(p,m,_){var v=p.__brush.emitter;return v&&(!_||!v.clean)?v:new f(p,m,_)}function f(p,m,_){this.that=p,this.args=m,this.state=p.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,m){return this.starting?(this.starting=!1,this.emit("start",p,m)):this.emit("brush",p),this},brush:function(p,m){return this.emit("brush",p,m),this},end:function(p,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,m)),this},emit:function(p,m,_){var v=J(this.that).datum();a.call(p,this.that,new uh(p,{sourceEvent:m,target:l,selection:t.output(this.state.selection),mode:_,dispatch:a}),v)}};function h(p){if(o&&!p.touches||!n.apply(this,arguments))return;var m=this,_=p.target.__data__.type,v=(i&&p.metaKey?_="overlay":_)==="selection"?Gi:i&&p.altKey?Se:$e,w=t===br?null:fh[_],b=t===_n?null:hh[_],M=_r(m),A=M.extent,I=M.selection,H=A[0][0],P,$,W=A[0][1],x,q,Z=A[1][0],D,k,T=A[1][1],N,X,S=0,B=0,tt,L=w&&b&&i&&p.shiftKey,G,nt,et=Array.from(p.touches||[p],V=>{const at=V.identifier;return V=Ai(V,m),V.point0=V.slice(),V.identifier=at,V});Lr(m);var it=d(m,arguments,!0).beforestart();if(_==="overlay"){I&&(tt=!0);const V=[et[0],et[1]||et[0]];M.selection=I=[[P=t===br?H:Mt(V[0][0],V[1][0]),x=t===_n?W:Mt(V[0][1],V[1][1])],[D=t===br?Z:At(V[0][0],V[1][0]),N=t===_n?T:At(V[0][1],V[1][1])]],et.length>1&&pt(p)}else P=I[0][0],x=I[0][1],D=I[1][0],N=I[1][1];$=P,q=x,k=D,X=N;var _t=J(m).attr("pointer-events","none"),ot=_t.selectAll(".overlay").attr("cursor",Jt[_]);if(p.touches)it.moved=U,it.ended=xt;else{var wt=J(p.view).on("mousemove.brush",U,!0).on("mouseup.brush",xt,!0);i&&wt.on("keydown.brush",lt,!0).on("keyup.brush",dt,!0),Kc(p.view)}u.call(m),it.start(p,v.name);function U(V){for(const at of V.changedTouches||[V])for(const K of et)K.identifier===at.identifier&&(K.cur=Ai(at,m));if(L&&!G&&!nt&&et.length===1){const at=et[0];Ki(at.cur[0]-at[0])>Ki(at.cur[1]-at[1])?nt=!0:G=!0}for(const at of et)at.cur&&(at[0]=at.cur[0],at[1]=at.cur[1]);tt=!0,yr(V),pt(V)}function pt(V){const at=et[0],K=at.point0;var ut;switch(S=at[0]-K[0],B=at[1]-K[1],v){case xr:case Gi:{w&&(S=At(H-P,Mt(Z-D,S)),$=P+S,k=D+S),b&&(B=At(W-x,Mt(T-N,B)),q=x+B,X=N+B);break}case $e:{et[1]?(w&&($=At(H,Mt(Z,et[0][0])),k=At(H,Mt(Z,et[1][0])),w=1),b&&(q=At(W,Mt(T,et[0][1])),X=At(W,Mt(T,et[1][1])),b=1)):(w<0?(S=At(H-P,Mt(Z-P,S)),$=P+S,k=D):w>0&&(S=At(H-D,Mt(Z-D,S)),$=P,k=D+S),b<0?(B=At(W-x,Mt(T-x,B)),q=x+B,X=N):b>0&&(B=At(W-N,Mt(T-N,B)),q=x,X=N+B));break}case Se:{w&&($=At(H,Mt(Z,P-S*w)),k=At(H,Mt(Z,D+S*w))),b&&(q=At(W,Mt(T,x-B*b)),X=At(W,Mt(T,N+B*b)));break}}k<$&&(w*=-1,ut=P,P=D,D=ut,ut=$,$=k,k=ut,_ in Ji&&ot.attr("cursor",Jt[_=Ji[_]])),X<q&&(b*=-1,ut=x,x=N,N=ut,ut=q,q=X,X=ut,_ in ji&&ot.attr("cursor",Jt[_=ji[_]])),M.selection&&(I=M.selection),G&&($=I[0][0],k=I[1][0]),nt&&(q=I[0][1],X=I[1][1]),(I[0][0]!==$||I[0][1]!==q||I[1][0]!==k||I[1][1]!==X)&&(M.selection=[[$,q],[k,X]],u.call(m),it.brush(V,v.name))}function xt(V){if(ch(V),V.touches){if(V.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Qc(V.view,tt),wt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);_t.attr("pointer-events","all"),ot.attr("cursor",Jt.overlay),M.selection&&(I=M.selection),mh(I)&&(M.selection=null,u.call(m)),it.end(V,v.name)}function lt(V){switch(V.keyCode){case 16:{L=w&&b;break}case 18:{v===$e&&(w&&(D=k-S*w,P=$+S*w),b&&(N=X-B*b,x=q+B*b),v=Se,pt(V));break}case 32:{(v===$e||v===Se)&&(w<0?D=k-S:w>0&&(P=$-S),b<0?N=X-B:b>0&&(x=q-B),v=xr,ot.attr("cursor",Jt.selection),pt(V));break}default:return}yr(V)}function dt(V){switch(V.keyCode){case 16:{L&&(G=nt=L=!1,pt(V));break}case 18:{v===Se&&(w<0?D=k:w>0&&(P=$),b<0?N=X:b>0&&(x=q),v=$e,pt(V));break}case 32:{v===xr&&(V.altKey?(w&&(D=k-S*w,P=$+S*w),b&&(N=X-B*b,x=q+B*b),v=Se):(w<0?D=k:w>0&&(P=$),b<0?N=X:b>0&&(x=q),v=$e),ot.attr("cursor",Jt[_]),pt(V));break}default:return}yr(V)}}function g(p){d(this,arguments).moved(p)}function y(p){d(this,arguments).ended(p)}function C(){var p=this.__brush||{selection:null};return p.extent=Zi(e.apply(this,arguments)),p.dim=t,p}return l.extent=function(p){return arguments.length?(e=typeof p=="function"?p:vr(Zi(p)),l):e},l.filter=function(p){return arguments.length?(n=typeof p=="function"?p:vr(!!p),l):n},l.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:vr(!!p),l):r},l.handleSize=function(p){return arguments.length?(s=+p,l):s},l.keyModifiers=function(p){return arguments.length?(i=!!p,l):i},l.on=function(){var p=a.on.apply(a,arguments);return p===a?l:p},l}var xh=rt('<div class="age-range-indicator svelte-1rr46o8"><span> </span> <button class="clear-btn svelte-1rr46o8">Clear filter</button></div>'),bh=rt('<span class="hint svelte-1rr46o8">Up through the 40-to-50 age range, female cases slightly outnumber males—likely reflecting a higher volume of elective and gynecologic‐related procedures in middle-aged women. After age 60, male surgical cases begin to exceed female, which may be driven by increased cardiovascular and oncologic interventions in older men.</span>'),_h=rt('<div class="age-distribution svelte-1rr46o8"><div class="chart svelte-1rr46o8"><svg class="h-auto w-full"></svg></div> <!> <div class="insights svelte-1rr46o8"><p class="insight-text svelte-1rr46o8"> <!></p></div></div>');function wh(t,e){ge(e,!1);const n=Y(),r=Y();let i=It(e,"data",24,()=>[]),a=It(e,"showPercentage",8,!1),s=It(e,"showBySex",8,!0),o=Y(),l=Y([null,null]);const u=ta();function d(M){const A=[...M].sort((W,x)=>W-x),I=vn(A)||0,H=je(A,.25)||0,P=je(A,.75)||0,$=P-H;return{median:I,q1:H,q3:P,iqr:$}}function f(){if(!i().length)return;J(c(o)).selectAll("*").remove();const M={top:30,right:30,bottom:60,left:60},A=600-M.left-M.right,I=350-M.top-M.bottom,H=c(n).filter(U=>U.age!==void 0&&!isNaN(U.age)),P=H.map(U=>U.age),$=d(P),W=i().filter(U=>U.age!==void 0&&!isNaN(U.age)).map(U=>U.age),x=de().domain(mn(W)).nice().range([0,A]),q=Cu().domain(x.domain()).thresholds(x.ticks(20));let Z,D;const k=q(P),T=H.length,N=U=>a()?U.length/T*100:U.length,X=Gt(k,U=>N(U))||0,S=H.filter(U=>U.sex==="M").map(U=>U.age),B=H.filter(U=>U.sex==="F").map(U=>U.age),tt=q(S),L=q(B),G=Math.max(Gt(tt,U=>N(U))||0,Gt(L,U=>N(U))||0),nt=Math.max(X,G);s()?Z={male:tt,female:L}:Z=k,D=nt;const et=de().domain([0,D*1.1]).range([I,0]);J("body").selectAll(".age-tooltip").data([0]).enter().append("div").attr("class","age-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","12px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("text-align","center").style("z-index","10");const it=J(c(o)).attr("viewBox",`0 0 ${A+M.left+M.right} ${I+M.top+M.bottom}`).append("g").attr("transform",`translate(${M.left},${M.top})`);if(s()){const U=Ln().domain(["Male","Female"]).range(["#4682b4","#db7093"]),pt=Z,xt=qr().duration(500),lt=it.append("g").selectAll(".bar-male").data(pt.male).enter().append("rect").attr("class","bar-male").attr("x",K=>x(K.x0)).attr("width",K=>Math.max(0,x(K.x1)-x(K.x0)-1)).attr("y",I).attr("height",0).attr("fill",U("Male")).attr("opacity",.7).attr("stroke",U("Male")).attr("stroke-width",1);lt.transition(xt).attr("y",K=>et(N(K))).attr("height",K=>I-et(N(K)));const dt=J("body").select(".age-tooltip");lt.on("mouseover",function(K,ut){const st=ut.length,kt=(st/S.length*100).toFixed(1),qt=`${ut.x0}-${ut.x1}`;dt.transition().duration(200).style("opacity",.9),dt.html(`
                            <strong>Age: ${qt}</strong><br/>
                            <strong>Male</strong><br/>
                            Count: ${st}<br/>
                            Percentage: ${kt}%
                        `).style("left",K.pageX+10+"px").style("top",K.pageY-28+"px"),J(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){dt.transition().duration(500).style("opacity",0),J(this).attr("stroke",U("Male")).attr("stroke-width",1)});const V=it.append("g").selectAll(".bar-female").data(pt.female).enter().append("rect").attr("class","bar-female").attr("x",K=>x(K.x0)).attr("width",K=>Math.max(0,x(K.x1)-x(K.x0)-1)).attr("y",I).attr("height",0).attr("fill",U("Female")).attr("opacity",.7).attr("stroke",U("Female")).attr("stroke-width",1);V.transition(xt).attr("y",K=>et(N(K))).attr("height",K=>I-et(N(K))),V.on("mouseover",function(K,ut){const st=ut.length,kt=(st/B.length*100).toFixed(1),qt=`${ut.x0}-${ut.x1}`;dt.transition().duration(200).style("opacity",.9),dt.html(`
                            <strong>Age: ${qt}</strong><br/>
                            <strong>Female</strong><br/>
                            Count: ${st}<br/>
                            Percentage: ${kt}%
                        `).style("left",K.pageX+10+"px").style("top",K.pageY-28+"px"),J(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){dt.transition().duration(500).style("opacity",0),J(this).attr("stroke",U("Female")).attr("stroke-width",1)});const at=it.append("g").attr("class","legend").attr("transform",`translate(${A-100}, 10)`);["Male","Female"].forEach((K,ut)=>{at.append("rect").attr("x",0).attr("y",ut*20).attr("width",15).attr("height",15).attr("fill",U(K)),at.append("text").attr("x",20).attr("y",ut*20+12).text(K).style("font-size","12px")})}else{const U=qr().duration(500),pt=it.append("g").selectAll("rect").data(Z).enter().append("rect").attr("x",lt=>x(lt.x0)).attr("width",lt=>Math.max(0,x(lt.x1)-x(lt.x0)-1)).attr("y",I).attr("height",0).attr("fill","steelblue").attr("stroke","white").attr("stroke-width",.5);pt.transition(U).attr("y",lt=>et(N(lt))).attr("height",lt=>I-et(N(lt)));const xt=J("body").select(".age-tooltip");pt.on("mouseover",function(lt,dt){const V=dt.length,at=(V/T*100).toFixed(1),K=`${dt.x0}-${dt.x1}`;xt.transition().duration(200).style("opacity",.9),xt.html(`
                        <strong>Age: ${K}</strong><br/>
                        Count: ${V}<br/>
                        Percentage: ${at}%
                    `).style("left",lt.pageX+10+"px").style("top",lt.pageY-28+"px"),J(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){xt.transition().duration(500).style("opacity",0),J(this).attr("stroke","white").attr("stroke-width",.5)})}it.append("g").attr("transform",`translate(0,${I})`).call(qn(x).tickFormat(U=>`${U}`)).style("font-size","12px"),it.append("g").call(Qr(et)).style("font-size","12px"),it.append("text").attr("x",A/2).attr("y",I+40).attr("text-anchor","middle").text("Age (years)").style("font-size","14px"),it.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-35).attr("text-anchor","middle").text(a()?"Percentage of Cases (%)":"Number of Cases").style("font-size","14px"),it.append("text").attr("x",A/2).attr("y",-10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Age Distribution of Surgical Cases");const _t=x($.median);it.append("line").attr("x1",_t).attr("x2",_t).attr("y1",I).attr("y2",10).attr("stroke","red").attr("stroke-width",2).attr("stroke-dasharray","5,5"),it.append("rect").attr("x",x($.q1)).attr("width",x($.q3)-x($.q1)).attr("y",I+5).attr("height",10).attr("fill","rgba(255,0,0,0.3)"),it.append("text").attr("x",_t).attr("y",5).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(`Median: ${Et(".1f")($.median)}`),it.append("text").attr("x",(x($.q1)+x($.q3))/2).attr("y",I+25).attr("text-anchor","middle").style("font-size","12px").text(`IQR: ${Et(".1f")($.q1)} - ${Et(".1f")($.q3)}`),$.median>60&&it.append("text").attr("x",A*.75).attr("y",I*.25).attr("text-anchor","middle").style("font-size","13px").style("font-style","italic").style("fill","#555").text("Aging patient population"),J("body").selectAll(".age-brush-tooltip").data([0]).enter().append("div").attr("class","age-brush-tooltip").style("opacity",0).style("position","fixed").style("background-color","rgba(70, 130, 180, 0.9)").style("color","white").style("border-radius","4px").style("padding","6px 12px").style("pointer-events","none").style("font-size","13px").style("font-weight","bold").style("text-align","center").style("z-index","20").style("transform","translateX(-50%)").style("box-shadow","0 2px 5px rgba(0,0,0,0.3)").style("border","1px solid rgba(255,255,255,0.2)");const ot=vh().extent([[0,0],[A,I]]).on("start brush",U=>{if(U.selection){const[pt,xt]=U.selection.map(ut=>Math.round(x.invert(ut))),lt=J("body").select(".age-brush-tooltip"),dt=c(o).getBoundingClientRect(),V=`Selecting Ages: ${pt} - ${xt} years`,at=dt.left+dt.width/2,K=dt.bottom-20;lt.html(V).style("left",at+"px").style("top",K+"px").style("opacity",1)}}).on("end",U=>{if(setTimeout(()=>{J("body").select(".age-brush-tooltip").style("opacity",0)},500),!U.selection){c(l)[0]!==null&&(z(l,[null,null]),setTimeout(()=>f(),0));return}const[pt,xt]=U.selection.map(dt=>x.invert(dt)),lt=[Math.round(pt),Math.round(xt)];(c(l)[0]!==lt[0]||c(l)[1]!==lt[1])&&(z(l,lt),setTimeout(()=>f(),0))}),wt=it.append("g").attr("class","brush").call(ot);c(l)[0]!==null&&c(l)[1]!==null&&wt.call(ot.move,[x(c(l)[0]),x(c(l)[1])])}oe(()=>(f(),()=>{J("body").selectAll(".age-tooltip").remove()})),ea(f),oe(()=>()=>{J("body").selectAll(".age-tooltip").remove(),J("body").selectAll(".age-brush-tooltip").remove()}),ht(()=>(c(l),vt(i())),()=>{z(n,c(l)[0]!==null&&c(l)[1]!==null?i().filter(M=>M.age!==void 0&&M.age>=c(l)[0]&&M.age<=c(l)[1]):i())}),ht(()=>(c(n),vn),()=>{z(r,c(n).length&&vn(c(n).filter(M=>M.age!==void 0&&!isNaN(M.age)).map(M=>M.age))||0)}),ht(()=>(c(l),c(n),vt(i())),()=>{c(l)[0]!==null?u("filter",{ageRange:c(l),data:c(n)}):c(n)===i()&&c(l)[0]===null&&u("filter",{ageRange:null,data:i()})}),ht(()=>(vt(a()),vt(s()),c(o),J),()=>{(a()!==void 0||s()!==void 0)&&c(o)&&(J("body").select(".age-tooltip").style("opacity",0),f())}),ze(),De();var h=_h(),g=R(h),y=R(g);zn(y,M=>z(o,M),()=>c(o)),E(g);var C=F(g,2);{var p=M=>{var A=xh(),I=R(A),H=R(I);E(I);var P=F(I,2);E(A),Rt(()=>mt(H,`Age range: ${c(l)[0]??""}–${c(l)[1]??""}`)),te("click",P,()=>{J("body").select(".age-tooltip").style("opacity",0),z(l,[null,null]),setTimeout(()=>f(),0)}),j(M,A)};Ct(C,M=>{c(l)[0]!==null&&M(p)})}var m=F(C,2),_=R(m),v=R(_),w=F(v);{var b=M=>{var A=bh();j(M,A)};Ct(w,M=>{s()&&M(b)})}E(_),E(m),E(h),Rt(M=>mt(v,`Our surgical cases span six decades of life. The median age of ${M??""}
            suggests an aging population, with implications for surgical risk and recovery considerations. `),[()=>c(r).toFixed(1)],se),j(t,h),me()}var kh=rt('<div class="filter-notice svelte-nv535v"><p class="svelte-nv535v"><span class="filter-badge svelte-nv535v">Filtered</span> Viewing <strong> </strong> cases only <button class="clear-filter svelte-nv535v">Clear filter ×</button></p></div>'),Ah=rt('<div class="insight-box svelte-nv535v"><p class="insight-text svelte-nv535v">Our patients span six decades, but <strong>95% of them cluster in just two surgical departments</strong>, setting the stage for wildly different baseline risks.</p></div>'),Mh=rt('<div class="department-distribution svelte-nv535v"><div class="chart svelte-nv535v"><svg class="h-auto w-full"></svg></div> <!></div>');function $h(t,e){ge(e,!1);let n=It(e,"data",24,()=>[]),r=It(e,"filteredDepartment",12,null),i=It(e,"showPercentage",8,!1),a=Y(),s="Department Distribution of Surgical Cases";const o=ta();function l(){if(!n().length)return;J(c(a)).selectAll("*").remove();const p={top:30,right:30,bottom:90,left:60},m=600-p.left-p.right,_=350-p.top-p.bottom,v=vu(n(),x=>x.length,x=>x.department),w=Array.from(v,([x,q])=>({key:x,value:q})).sort((x,q)=>$a(x.value,q.value)),b=Tu(w,x=>x.value),M=w.map(x=>({...x,percent:x.value/b*100})),A=M.slice(0,2);A.reduce((x,q)=>x+q.percent,0);const I=Ia().domain(w.map(x=>x.key)).range([0,m]).padding(.2),H=de().domain([0,i()?Gt(M,x=>x.percent):Gt(w,x=>x.value)]).nice().range([_,0]),P=J(c(a)).attr("viewBox",`0 0 ${m+p.left+p.right} ${_+p.top+p.bottom}`).append("g").attr("transform",`translate(${p.left},${p.top})`);P.append("text").attr("x",m/2).attr("y",-15).attr("text-anchor","middle").attr("class","chart-title").style("font-size","16px").style("font-weight","bold").text(s);const $=new Map;w.forEach(x=>{const q=n().filter(tt=>tt.department===x.key),Z=q.filter(tt=>tt.sex==="M").length,D=q.filter(tt=>tt.sex==="F").length,k=Z/x.value*100,T=D/x.value*100,N=q.filter(tt=>tt.age!==void 0&&!isNaN(tt.age)).map(tt=>tt.age),X=N.length&&vn(N)||0,S=N.length&&je(N,.25)||0,B=N.length&&je(N,.75)||0;$.set(x.key,{maleCount:Z,femaleCount:D,malePercent:k,femalePercent:T,medianAge:X,q1:S,q3:B})});const W=J("body").selectAll(".dept-tooltip").data([0]).enter().append("div").attr("class","dept-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("border-radius","5px").style("padding","10px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("pointer-events","none").style("font-size","12px").style("z-index","10");P.append("g").selectAll("rect").data(M).enter().append("rect").attr("x",x=>I(x.key)).attr("y",x=>i()?H(x.percent):H(x.value)).attr("width",I.bandwidth()).attr("height",x=>i()?_-H(x.percent):_-H(x.value)).attr("fill",x=>r()===x.key?"#ff7f50":A.includes(x)?"#2a6d7c":"#5eb1c6").attr("stroke","#fff").attr("stroke-width",1).attr("class","dept-bar").style("cursor","pointer").on("mouseover",function(x,q){J(this).transition().duration(200).attr("fill","#ff7f50");const Z=$.get(q.key);W.html(`
					<div style="font-weight: bold; margin-bottom: 5px; color: #2a6d7c;">${q.key}</div>
					<div>Total cases: <b>${q.value}</b> (${Et(".1f")(q.percent)}% of all)</div>
					${i()?`<div style="font-weight: bold; color: #2a6d7c; margin-top: 3px;">
							Showing as percentage: ${Et(".1f")(q.percent)}%
						</div>`:""}
					<div style="margin-top: 5px;">
						<div>Sex ratio: <b>${Et(".0f")(Z.malePercent)}% M / ${Et(".0f")(Z.femalePercent)}% F</b></div>
						<div>Median age: <b>${Et(".1f")(Z.medianAge)}</b> years</div>
						<div>IQR: <b>${Et(".1f")(Z.q1)} - ${Et(".1f")(Z.q3)}</b></div>
					</div>
					<div style="margin-top: 5px; font-size: 10px; color: #666;">Click to filter dashboard by department</div>
				`).style("visibility","visible").style("left",x.pageX+15+"px").style("top",x.pageY-10+"px")}).on("mousemove",function(x){W.style("left",x.pageX+15+"px").style("top",x.pageY-10+"px")}).on("mouseout",function(){const x=J(this).datum();J(this).transition().duration(200).attr("fill",r()===x.key?"#ff7f50":A.includes(x)?"#2a6d7c":"#5eb1c6"),W.style("visibility","hidden")}).on("click",function(x,q){x.stopPropagation();const Z=r()===q.key?null:q.key;o("filter",{department:Z,name:q.key}),J(c(a)).selectAll(".dept-bar").transition().duration(300).attr("fill",D=>D.key===Z?"#ff7f50":A.includes(D)?"#2a6d7c":"#5eb1c6"),r(Z)}),P.append("g").attr("transform",`translate(0,${_})`).call(qn(I)).selectAll("text").attr("transform","rotate(-35)").attr("text-anchor","end").attr("dy","0.5em").attr("dx","-0.8em").style("font-size","12px"),P.append("g").call(Qr(H).tickFormat(x=>i()?Et(".1f")(x)+"%":Et(",.0f")(x))).style("font-size","12px"),P.append("text").attr("x",m/2).attr("y",_+65).attr("text-anchor","middle").style("font-size","14px").text("Surgical Department"),P.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-50).attr("text-anchor","middle").style("font-size","14px").text(i()?"Percentage of Cases (%)":"Number of Cases")}function u(){r()&&(r(null),o("filter",{department:null}),l())}oe(()=>{l();const p=c(a);return p&&p.addEventListener("click",u),()=>{p&&p.removeEventListener("click",u),J("body").selectAll(".dept-tooltip").remove()}}),ea(l),ht(()=>(vt(i()),c(a),J),()=>{i()!==void 0&&c(a)&&(J("body").selectAll(".dept-tooltip").style("visibility","hidden"),l())}),ht(()=>(c(a),vt(n())),()=>{c(a)&&n()&&l()}),ze(),De();var d=Mh(),f=R(d),h=R(f);zn(h,p=>z(a,p),()=>c(a)),E(f);var g=F(f,2);{var y=p=>{var m=kh(),_=R(m),v=F(R(_),2),w=R(v,!0);E(v);var b=F(v,2);E(_),E(m),Rt(()=>mt(w,r())),te("click",b,u),j(p,m)},C=p=>{var m=Ah();j(p,m)};Ct(g,p=>{r()?p(y):p(C,!1)})}E(d),j(t,d),me()}function Sh(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Ch=t=>Zu(t[t.length-1]);var Nh=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Sh);const Eh=Ch(Nh);function Ze(t,e,n){this.k=t,this.x=e,this.y=n}Ze.prototype={constructor:Ze,scale:function(t){return t===1?this:new Ze(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ze(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ze.prototype;var Th=rt("<option> </option>"),Rh=rt('<div class="no-data-message svelte-1nsvb8e">No cases match the selected criteria.</div>'),Ih=rt('<div class="timeline-container svelte-1nsvb8e"><div class="filter-controls svelte-1nsvb8e"><div class="filter-group svelte-1nsvb8e"><label for="group-select" class="svelte-1nsvb8e">Group By:</label> <select id="group-select" class="svelte-1nsvb8e"><option>Surgery Type</option><option>Department</option></select></div> <div class="filter-group svelte-1nsvb8e"><label for="group-value" class="svelte-1nsvb8e">Filter Value:</label> <select id="group-value" class="svelte-1nsvb8e"><option>All</option><!></select></div> <div class="filter-group svelte-1nsvb8e"><label class="svelte-1nsvb8e">Age Range:</label> <div class="age-inputs svelte-1nsvb8e"><input type="number" min="0" max="120" class="svelte-1nsvb8e"/> <span>to</span> <input type="number" min="0" max="120" class="svelte-1nsvb8e"/></div></div></div> <div class="timeline-visualization svelte-1nsvb8e"></div> <!></div>');function Fh(t,e){ge(e,!1);const n=Y();let r=It(e,"cases",24,()=>[]),i=It(e,"groupBy",12,"optype"),a=It(e,"ageRange",28,()=>[0,120]),s=It(e,"selectedDepartment",8,null),o=Y(null),l=Y(),u=Y([]);const d=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function f(D){return D.length?d.map(({label:k,key:T})=>{const N=T,X=D.map(nt=>{const et=nt[N],it=nt.casestart;return typeof et=="number"&&typeof it=="number"?et-it:NaN}).filter(nt=>!isNaN(nt));if(!X.length)return{label:k,key:T,mean:null,min:null,max:null};const S=365*24*60*60,B=X.filter(nt=>Math.abs(nt)<S);if(B.length===0)return{label:k,key:T,mean:null,min:null,max:null};const tt=Nu(B),L=$r(B),G=Gt(B);return{label:k,key:T,mean:tt,min:L,max:G}}):d.map(({label:k,key:T})=>({label:k,key:T,mean:null,min:null,max:null}))}let h=Y([]),g=Y(!1);function y(){if(!c(l)||(ne(l,c(l).innerHTML=""),!c(h).length))return;const D=c(l).clientWidth||800,k=280,T=200,N=30,X=c(h).filter(st=>st.mean!==null),S=X.map(st=>st.mean),B=Math.min(...S),tt=Math.max(...S),L=10,G=Math.floor(B/60)-L,nt=Math.ceil(tt/60)+L,et=[G,nt],it=(nt-G)/7,_t=Array.from({length:8},(st,kt)=>Math.round((G+kt*it)/5)*5),ot=de().domain(et).range([T+N,D-N]),wt=J(c(l)).append("svg").attr("width","100%").attr("height",k).attr("viewBox",`0 0 ${D} ${k}`),U=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],pt=Ln().domain(d.map(st=>st.label)).range(U),xt=qn(ot).tickValues(_t).tickFormat(st=>`${Math.round(st)} min`),lt=wt.append("g").attr("transform",`translate(0,${k/2})`).call(xt);lt.selectAll("text").style("font-size","12px").attr("transform",null).style("text-anchor","middle"),lt.selectAll(".tick line").remove(),lt.select(".domain").attr("x1",T+N),lt.selectAll(".tick").append("line").attr("y1",0).attr("y2",-280/2).attr("stroke","#eee").attr("stroke-dasharray","2,2");const dt=J(c(l)).append("div").attr("class","timeline-tooltip").style("position","absolute").style("padding","8px 12px").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);wt.selectAll(".event-group").data(X).enter().append("g").attr("class","event-group").each(function(st){const kt=J(this),qt=ot(st.mean/60);kt.append("line").attr("x1",()=>qt).attr("x2",()=>qt).attr("y1",()=>k/2-20).attr("y2",()=>k/2+20).attr("stroke",()=>pt(st.label)).attr("stroke-width",2),kt.append("line").attr("x1",()=>{const Ot=ot(st.min/60),Le=T+N;return Math.max(Ot,Le)}).attr("x2",()=>{const Ot=ot(st.max/60),Le=D-N;return Math.min(Ot,Le)}).attr("y1",()=>k/2).attr("y2",()=>k/2).attr("stroke",()=>"#000").attr("stroke-width",1),kt.append("circle").attr("cx",()=>qt).attr("cy",()=>k/2).attr("r",6).attr("fill",()=>pt(st.label)).on("mouseover",Ot=>{dt.transition().duration(200).style("opacity",1),dt.html(`
							<strong>${st.label}</strong><br>
							Mean: ${(st.mean/60).toFixed(1)} min<br>
							Range: ${(st.min/60).toFixed(1)} - ${(st.max/60).toFixed(1)} min
						`)}).on("mousemove",Ot=>{dt.style("left",`${Ot.pageX+10}px`).style("top",`${Ot.pageY-30}px`)}).on("mouseout",()=>{dt.transition().duration(200).style("opacity",0)})}),wt.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(d).enter().append("g").attr("transform",(st,kt)=>`translate(0, ${kt*25})`).each(function(st){const kt=J(this);kt.append("circle").attr("r",6).attr("cy",0).attr("fill",()=>pt(st.label)),kt.append("text").attr("x",16).attr("y",4).attr("font-size",13).attr("fill","#222").text(st.label)});let K="";c(o)&&(K+=`${i()==="optype"?"Surgery Type":"Department"}: ${c(o)}`),s()&&(K+=K?`, Department: ${s()}`:`Department: ${s()}`),(a()[0]>0||a()[1]<120)&&(K+=K?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),K&&wt.append("text").attr("x",T+N).attr("y",20).attr("font-size",12).attr("fill","#666").text(K),wt.append("text").attr("x",D-N).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${c(n).length} cases`);const ut=et[1]-et[0];wt.append("text").attr("x",D-N).attr("y",k-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(ut)} min`)}oe(()=>{c(l)&&y()}),ht(()=>(vt(r()),c(o),vt(i()),vt(s()),vt(a())),()=>{z(n,r().filter(D=>(!c(o)||D[i()]===c(o))&&(!s()||D.department===s())&&D.age>=a()[0]&&D.age<=a()[1]))}),ht(()=>(vt(r()),vt(i())),()=>{z(u,Array.from(new Set(r().map(D=>D[i()]))).filter(Boolean))}),ht(()=>c(n),()=>{c(n)&&(z(h,f(c(n))),z(g,!0))}),ht(()=>(c(g),c(l)),()=>{c(g)&&c(l)&&(y(),z(g,!1))}),ze(),De();var C=Ih(),p=R(C),m=R(p),_=F(R(m),2);Rt(()=>{i(),pi(()=>{})});var v=R(_);v.value=v.__value="optype";var w=F(v);w.value=w.__value="department",E(_),E(m);var b=F(m,2),M=F(R(b),2);Rt(()=>{c(o),pi(()=>{c(u)})});var A=R(M);A.value=(A.__value=null)??"";var I=F(A);kn(I,1,()=>c(u),wn,(D,k)=>{var T=Th(),N={},X=R(T,!0);E(T),Rt(()=>{N!==(N=c(k))&&(T.value=(T.__value=c(k))??""),mt(X,c(k))}),j(D,T)}),E(M),E(b);var H=F(b,2),P=F(R(H),2),$=R(P);bt($);var W=F($,4);bt(W),E(P),E(H),E(p);var x=F(p,2);zn(x,D=>z(l,D),()=>c(l));var q=F(x,2);{var Z=D=>{var k=Rh();j(D,k)};Ct(q,D=>{c(n).length===0&&D(Z)})}E(C),xi(_,i),xi(M,()=>c(o),D=>z(o,D)),jt($,()=>a()[0],D=>a(a()[0]=D,!0)),jt(W,()=>a()[1],D=>a(a()[1]=D,!0)),j(t,C),me()}function Dh(t,e){return zh(t)||Ph(t,e)||Lh()}function zh(t){if(Array.isArray(t))return t}function Ph(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}function Lh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function es(t,e,n,r){for(var i=0,a=0,s=t.length;a<s;a++){var o=t[a],l=+e(o,a,t),u=+n(o,a,t);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&r(l,u,i++)}}function qh(t,e,n,r,i){var a=0,s=0;return es(t,e,n,function(o,l){var u=l-i(o),d=l-r;a+=u*u,s+=d*d}),1-a/s}function Bh(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,s=e-a*t;return[s,a]}function Oh(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,s=0,o=0,l=0,u=0,d=n?+n[0]:1/0,f=n?+n[1]:-1/0;es(i,t,e,function(_,v){++a,s+=(_-s)/a,o+=(v-o)/a,l+=(_*v-l)/a,u+=(_*_-u)/a,n||(_<d&&(d=_),_>f&&(f=_))});var h=Bh(s,o,l,u),g=Dh(h,2),y=g[0],C=g[1],p=function(v){return C*v+y},m=[[d,p(d)],[f,p(f)]];return m.a=C,m.b=y,m.predict=p,m.rSquared=qh(i,t,e,o,p),m}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var Hh=rt('<div class="mb-4 flex gap-6 text-sm"><label><input type="radio"/> <span class="ml-1">Elective</span></label> <label><input type="radio"/> <span class="ml-1">Emergency</span></label> <label><input type="radio"/> <span class="ml-1">All</span></label></div> <svg style="width: 100%; height: auto;" class="svelte-1pqg8op"></svg>',1);function Xh(t,e){ge(e,!1);const n=[];let r=It(e,"patients",24,()=>[]),i=Y("elective"),a=Y([]),s=Y();const o=640,l=320,u=48,d=Ua(Eh).domain([5,0]);function f(b){if(!c(s))return;const M=J(c(s)).attr("viewBox",`0 0 ${o} ${l}`).html("");if(!b.length){M.append("text").attr("x",o/2).attr("y",l/2).attr("text-anchor","middle").attr("fill","#888").attr("font-size","16px").text("No cases with albumin in this view");return}const A=[...b].sort((S,B)=>+S.preop_alb-+B.preop_alb),I=[];for(let S=0;S<A.length;S+=5){const B=A.slice(S,S+5);if(B.length>0){const tt=B.reduce((G,nt)=>G+ +nt.preop_alb,0)/B.length,L=B.reduce((G,nt)=>G+(nt.icu_days||0),0)/B.length;I.push({albumin:tt,icuDays:L,count:B.length,cases:B})}}const H=de().domain([2,Gt(I,S=>S.albumin)||6]).nice().range([u,o-u]),P=de().domain([0,Gt(I,S=>S.icuDays)||5]).nice().range([l-u,u]),$=M.append("g");P.ticks(5).forEach(S=>{$.append("line").attr("x1",u).attr("x2",o-u).attr("y1",P(S)).attr("y2",P(S)).attr("stroke","#e5e7eb").attr("stroke-width",1)}),H.ticks(6).forEach(S=>{$.append("line").attr("x1",H(S)).attr("x2",H(S)).attr("y1",u).attr("y2",l-u).attr("stroke","#e5e7eb").attr("stroke-width",1)}),$.append("line").attr("x1",H(3.5)).attr("x2",H(3.5)).attr("y1",u).attr("y2",l-u).attr("stroke","#ef4444").attr("stroke-width",2).attr("stroke-dasharray","4,4"),$.append("text").attr("x",H(3.5)).attr("y",u+16).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#ef4444").attr("font-weight","500").text("Albumin Cliff (3.5 g/dL)");const W=Oh().x(S=>S.albumin).y(S=>S.icuDays).domain(H.domain())(I),x=Vc().x(S=>H(S[0])).y(S=>P(S[1]));M.append("path").datum(W).attr("fill","none").attr("stroke","#4b5563").attr("stroke-width",2).attr("d",S=>x(S)),M.append("g").selectAll("circle").data(I).enter().append("circle").attr("cx",S=>H(S.albumin)).attr("cy",S=>P(S.icuDays)).attr("r",S=>Math.sqrt(S.count)*2).attr("fill",S=>d(Math.min(S.icuDays,5))).attr("stroke","#374151").attr("stroke-opacity",.15).append("title").text(S=>`Average Albumin: ${S.albumin.toFixed(2)} g/dL
Average ICU Stay: ${S.icuDays.toFixed(1)} days
Number of Cases: ${S.count}`);const q=qn(H).ticks(6).tickFormat(S=>S+" g/dL");M.append("g").attr("transform",`translate(0, ${l-u})`).call(q).selectAll("text").attr("font-size","13px").attr("fill","#374151");const Z=Qr(P).ticks(5).tickFormat(S=>S+" days");M.append("g").attr("transform",`translate(${u}, 0)`).call(Z).selectAll("text").attr("font-size","13px").attr("fill","#374151"),M.append("text").attr("x",o/2).attr("y",l-u+36).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Pre-operative Albumin (g/dL)"),M.append("text").attr("transform",`translate(${u-36}, ${l/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Average ICU Stay (days)"),M.append("text").attr("x",o/2).attr("y",u-16).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","600").attr("fill","#1f2937").text("Hidden Risk Factor — The Albumin Cliff");const D=o-u-120,k=u,T=M.append("g").attr("transform",`translate(${D}, ${k})`),N=[0,1,2,3,4,5],X=15;T.selectAll("rect").data(N).enter().append("rect").attr("x",(S,B)=>B*(X+2)).attr("y",0).attr("width",X).attr("height",10).attr("fill",S=>d(S)),T.append("text").attr("x",0).attr("y",24).attr("font-size","12px").attr("fill","#374151").text("ICU ≥ 5d"),T.append("text").attr("x",(X+2)*5+4).attr("y",24).attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text("0–1d")}oe(()=>{c(s)&&f(c(a))}),ht(()=>(vt(r()),c(i)),()=>{r()?z(a,r().filter(b=>{const M=+b.preop_alb;return!Number.isFinite(M)||M<=0?!1:c(i)==="elective"?b.emop===0&&b.ane_type==="General":c(i)==="emergency"?b.emop===1:!0})):z(a,[])}),ht(()=>(c(s),c(a)),()=>{c(s)&&f(c(a))}),ze(),De();var h=Hh(),g=re(h),y=R(g),C=R(y);bt(C),C.value=C.__value="elective",Bt(2),E(y);var p=F(y,2),m=R(p);bt(m),m.value=m.__value="emergency",Bt(2),E(p);var _=F(p,2),v=R(_);bt(v),v.value=v.__value="all",Bt(2),E(_),E(g);var w=F(g,2);zn(w,b=>z(s,b),()=>c(s)),sr(n,[],C,()=>c(i),b=>z(i,b)),sr(n,[],m,()=>c(i),b=>z(i,b)),sr(n,[],v,()=>c(i),b=>z(i,b)),j(t,h),me()}var Uh=rt(`<div class="mt-4 rounded bg-red-100 p-4 text-red-800"><h4 class="font-bold mb-2">⚠️ No Matching Cases Found</h4> <p>There are no historical cases that match your current patient profile. Consider:</p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some of your filters</li> <li>Adjusting the patient's characteristics to more common values</li> <li>Using a broader range for age, BMI, or ASA score</li></ul></div>`),Vh=rt('<div class="mt-4 rounded bg-yellow-100 p-4 text-yellow-800"><h4 class="font-bold mb-2">⚠️ Limited Data Available</h4> <p> </p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some filters to get more comparable cases</li> <li>Adjusting the patient profile to match more common characteristics</li></ul></div>'),Yh=rt('<button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Make a Guess</button>'),Wh=rt('<button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600">Back</button>'),Gh=rt('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold">Make Your Predictions</h3> <div class="grid gap-4"><div><label class="block text-sm text-gray-600">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="mt-1 w-full rounded border p-2"/></div></div></div>'),Kh=rt(`<p class="mt-2 text-red-600">Your predictions were quite far from the actual outcomes. Consider reviewing the patient's risk factors more carefully.</p>`),Qh=rt('<p class="mt-2 text-orange-600">Your predictions were somewhat off. Try to consider how different factors might interact to affect outcomes.</p>'),Zh=rt(`<p class="mt-2 text-yellow-600">Good predictions! You're getting better at understanding how patient characteristics influence outcomes.</p>`),Jh=rt('<p class="mt-2 text-green-600">Excellent predictions! You have a strong understanding of how patient factors correlate with surgical outcomes.</p>'),jh=rt('<div class="mt-4 rounded bg-yellow-50 p-3 text-sm text-yellow-800"> <!></div>'),td=rt('<h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <div class="h-2 w-full rounded-full" style="background: linear-gradient(to right, #22c55e, #ef4444)"></div> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <!>',1),ed=rt('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><div class="flex gap-8"><div class="flex-1 space-y-6"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold">Adjust Patient Profile</h3> <div class="flex items-center gap-2 text-sm text-gray-600"><span> </span></div></div> <div class="grid grid-cols-2 gap-4"><label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Age Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Height Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">BMI Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">ASA Filter</span></label></div> <div class="space-y-6"><div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" step="0.1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" min="1" max="5" step="1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div></div></div> <div class="flex flex-1 items-center justify-center"><svg class="h-full w-full" style="min-height: 350px; max-height: 500px;"><circle cx="100" cy="30" r="20"></circle><line x1="100" y1="50" x2="100"></line><ellipse cx="100"></ellipse><line x1="100" y1="80"></line><line x1="100" y1="80"></line><line x1="100" x2="70"></line><line x1="100" x2="130"></line><path d="M80,20 Q100,0 120,20" fill="none"></path></svg></div></div> <div class="mt-4 rounded bg-blue-50 p-3 text-sm text-blue-800"> </div> <!> <div class="mt-4 flex space-x-4"><!> <button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600"> </button></div> <!> <!></div>');function nd(t,e){ge(e,!1);const n=Y(),r=Y(),i=Y(),a=Y(),s=Y(),o=Y(),l=Y(),u=Y(),d=Y(),f=Y(),h=Y(),g=Y(),y=Y(),C=Y();let p=It(e,"predictors",12),m=It(e,"cases",24,()=>[]),_=Y(!1),v=Y({icuDays:0,mortality:0,bloodLoss:0}),w=Y(!1),b=Y(0),M=Y(!1),A=Y({age:!0,height:!0,bmi:!0,asa:!0});function I(O){const ct=O/2.54,$t=Math.floor(ct/12),yt=Math.round(ct%12);return{feet:$t,inches:yt}}function H(O,ct){return Math.round((O*12+ct)*2.54)}const P={min:{feet:4,inches:5},max:{feet:7,inches:5}};let $=Y(0),W=Y(0),x=Y(0),q=Y(0),Z=Y({q1:0,q3:0}),D=Y({q1:0,q3:0});function k(O,ct,$t){if(ct===0&&O===0)return 1;if(ct===0||O===0)return 0;const yt=Math.abs(O-ct)/Math.max(ct,1);return Math.exp(-yt)}function T(){z(_,!0),z(w,!1),z(M,!1),z(v,{icuDays:0,mortality:0,bloodLoss:0})}const N={1:"#22c55e",2:"#a3e635",3:"#eab308",4:"#f97316",5:"#ef4444"};ht(()=>{},()=>{z(n,{min:H(P.min.feet,P.min.inches),max:H(P.max.feet,P.max.inches)})}),ht(()=>vt(m()),()=>{z(r,m().length>0?{min:Math.min(...m().map(O=>O.age)),max:Math.max(...m().map(O=>O.age))}:{min:0,max:0})}),ht(()=>vt(m()),()=>{z(i,m().length>0?{min:Math.min(...m().map(O=>O.bmi)),max:Math.max(...m().map(O=>O.bmi))}:{min:0,max:0})}),ht(()=>vt(m()),()=>{z(a,m().length>0?[...new Set(m().map(O=>O.asa))].sort():[])}),ht(()=>(vt(m()),c(A),vt(p()),c($),c(W),c(x),c(_),c(w),c(v)),()=>{if(m().length>0){const O=c(A).age?m().filter(gt=>Math.abs(gt.age-p().age)<=5):m(),ct=c(A).bmi?m().filter(gt=>Math.abs(gt.bmi-p().bmi)<=5):m(),$t=c(A).height?m().filter(gt=>Math.abs(gt.height-p().height)<=5.08):m(),yt=c(A).asa?m().filter(gt=>Math.abs(gt.asa-p().asa)<=2):m(),St=O.filter(gt=>ct.includes(gt)).filter(gt=>$t.includes(gt)).filter(gt=>yt.includes(gt));if(z(q,St.length),St.length>0){const gt=St.map(ft=>Number(ft.icu_days)).filter(ft=>!isNaN(ft)).sort((ft,Pt)=>ft-Pt);z($,gt.reduce((ft,Pt)=>ft+Pt,0)/gt.length),z(Z,{q1:gt[Math.floor(gt.length*.25)],q3:gt[Math.floor(gt.length*.75)]}),z(W,St.reduce((ft,Pt)=>ft+(Pt.death_inhosp||0),0)/St.length);const zt=St.map(ft=>Number(ft.intraop_ebl)).filter(ft=>!isNaN(ft)).sort((ft,Pt)=>ft-Pt);if(z(x,zt.reduce((ft,Pt)=>ft+Pt,0)/zt.length),z(D,{q1:zt[Math.floor(zt.length*.25)],q3:zt[Math.floor(zt.length*.75)]}),c(_)&&c(w)){const ft=k(c(v).icuDays,c($)),Pt=k(c(v).mortality,c(W)*100,St.map(Be=>Be.death_inhosp*100)),un=k(c(v).bloodLoss,c(x));z(b,ft*.4+Pt*.3+un*.3)}}else z($,0),z(W,0),z(x,0),z(Z,{q1:0,q3:0}),z(D,{q1:0,q3:0})}}),ht(()=>(vt(p()),c(n)),()=>{z(s,(p().height-c(n).min)/(c(n).max-c(n).min))}),ht(()=>c(s),()=>{z(o,250+c(s)*150)}),ht(()=>(vt(p()),c(i)),()=>{z(l,2+(p().bmi-c(i).min)/(c(i).max-c(i).min)*4)}),ht(()=>(vt(p()),c(i)),()=>{z(u,(p().bmi-c(i).min)/(c(i).max-c(i).min))}),ht(()=>c(u),()=>{z(d,10+c(u)*25)}),ht(()=>c(o),()=>{z(f,c(o)*.2)}),ht(()=>(vt(p()),c(r)),()=>{z(h,`rgb(${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255})`)}),ht(()=>vt(p()),()=>{z(g,N[p().asa]||N[1])}),ht(()=>c(A),()=>{z(y,Object.values(c(A)).filter(Boolean).length)}),ht(()=>c(y),()=>{z(C,c(y)===4?"all filters":`${c(y)} filter${c(y)===1?"":"s"}`)}),ze(),De();var X=ed(),S=R(X),B=R(S),tt=R(B),L=F(R(tt),2),G=R(L),nt=R(G);E(G),E(L),E(tt);var et=F(tt,2),it=R(et),_t=R(it);bt(_t),Bt(2),E(it);var ot=F(it,2),wt=R(ot);bt(wt),Bt(2),E(ot);var U=F(ot,2),pt=R(U);bt(pt),Bt(2),E(U);var xt=F(U,2),lt=R(xt);bt(lt),Bt(2),E(xt),E(et);var dt=F(et,2),V=R(dt),at=R(V),K=R(at);E(at);var ut=F(at,2);bt(ut);var st=F(ut,2),kt=R(st);E(st),E(V);var qt=F(V,2),Ot=R(qt),Le=R(Ot);E(Ot);var ve=F(Ot,2);bt(ve);var ei=F(ve,2),ns=R(ei);E(ei),E(qt);var sn=F(qt,2),Hn=R(sn),rs=R(Hn);E(Hn);var ye=F(Hn,2);bt(ye);var ni=F(ye,2),is=R(ni);E(ni),E(sn);var Xn=F(sn,2),Un=R(Xn),as=R(Un);E(Un);var on=F(Un,2);bt(on);var ri=F(on,2),ss=R(ri);E(ri),E(Xn),E(dt),E(B);var ii=F(B,2),Vn=R(ii),ln=R(Vn),qe=F(ln),le=F(qe),xe=F(le),be=F(xe),_e=F(be),we=F(_e),Yn=F(we);E(Vn),E(ii),E(S);var Wn=F(S,2),os=R(Wn);E(Wn);var ai=F(Wn,2);{var ls=O=>{var ct=Uh();j(O,ct)},us=(O,ct)=>{{var $t=yt=>{var Dt=Vh(),Ht=F(R(Dt),2),St=R(Ht);E(Ht),Bt(2),E(Dt),Rt(()=>mt(St,`Only ${c(q)??""} cases match your current filters. The predictions may not be reliable. Consider:`)),j(yt,Dt)};Ct(O,yt=>{c(q)<10&&yt($t)},ct)}};Ct(ai,O=>{c(q)===0?O(ls):O(us,!1)})}var Gn=F(ai,2),si=R(Gn);{var cs=O=>{var ct=Yh();te("click",ct,T),j(O,ct)},fs=O=>{var ct=Wh();te("click",ct,()=>{z(_,!1),z(w,!1),z(M,!1)}),j(O,ct)};Ct(si,O=>{c(_)?O(fs,!1):O(cs)})}var Kn=F(si,2),hs=R(Kn,!0);E(Kn),E(Gn);var oi=F(Gn,2);{var ds=O=>{var ct=Gh(),$t=F(R(ct),2),yt=R($t),Dt=F(R(yt),2);bt(Dt),E(yt);var Ht=F(yt,2),St=F(R(Ht),2);bt(St),E(Ht);var gt=F(Ht,2),zt=F(R(gt),2);bt(zt),E(gt),E($t),E(ct),jt(Dt,()=>c(v).icuDays,ft=>ne(v,c(v).icuDays=ft)),jt(St,()=>c(v).mortality,ft=>ne(v,c(v).mortality=ft)),jt(zt,()=>c(v).bloodLoss,ft=>ne(v,c(v).bloodLoss=ft)),j(O,ct)};Ct(oi,O=>{c(_)&&O(ds)})}var ps=F(oi,2);{var gs=O=>{var ct=td(),$t=F(re(ct),2),yt=R($t),Dt=F(R(yt),2),Ht=R(Dt);E(Dt);var St=F(Dt,2),gt=R(St);E(St),E(yt);var zt=F(yt,2),ft=F(R(zt),4),Pt=R(ft);E(ft),E(zt);var un=F(zt,2),Be=F(R(un),2),ms=R(Be);E(Be);var li=F(Be,2),vs=R(li);E(li),E(un),E($t);var ys=F($t,2);{var xs=Oe=>{var He=jh(),cn=R(He),Qn=F(cn);{var Zn=Yt=>{var jn=Kh();j(Yt,jn)},Jn=(Yt,jn)=>{{var bs=ke=>{var tr=Qh();j(ke,tr)},_s=(ke,tr)=>{{var ws=Ae=>{var er=Zh();j(Ae,er)},ks=Ae=>{var er=Jh();j(Ae,er)};Ct(ke,Ae=>{c(b)<=.75?Ae(ws):Ae(ks,!1)},tr)}};Ct(Yt,ke=>{c(b)<=.5?ke(bs):ke(_s,!1)},jn)}};Ct(Qn,Yt=>{c(b)<=.25?Yt(Zn):Yt(Jn,!1)})}E(He),Rt(Yt=>mt(cn,`Your guess was ${Yt??""}% accurate! `),[()=>(c(b)*100).toFixed(1)],se),j(Oe,He)};Ct(ys,Oe=>{c(_)&&c(w)&&Oe(xs)})}Rt((Oe,He,cn,Qn,Zn,Jn,Yt)=>{mt(Ht,`${Oe??""} days`),mt(gt,`IQR: ${He??""} - ${cn??""} days`),mt(Pt,`${Qn??""}%`),mt(ms,`${Zn??""} mL`),mt(vs,`IQR: ${Jn??""} - ${Yt??""} mL`)},[()=>c($).toFixed(1),()=>c(Z).q1.toFixed(1),()=>c(Z).q3.toFixed(1),()=>(c(W)*100).toFixed(1),()=>c(x).toFixed(0),()=>c(D).q1.toFixed(0),()=>c(D).q3.toFixed(0)],se),j(O,ct)};Ct(ps,O=>{(!c(_)||c(w))&&c(M)&&O(gs)})}E(X),Rt((O,ct,$t,yt,Dt,Ht)=>{mt(nt,`Active: ${c(C)??""}`),We(V,1,fn(c(A).age?"":"opacity-50")),mt(K,`Age: ${p().age??""} years`),Q(ut,"min",c(r).min),Q(ut,"max",c(r).max),ut.disabled=!c(A).age,mt(kt,`Range: ${c(r).min??""} - ${c(r).max??""} years`),We(qt,1,fn(c(A).height?"":"opacity-50")),mt(Le,`Height: ${O??""}' ${ct??""}"`),Q(ve,"min",c(n).min),Q(ve,"max",c(n).max),ve.disabled=!c(A).height,mt(ns,`Range: ${P.min.feet}'${P.min.inches}" - ${P.max.feet}'${P.max.inches}"`),We(sn,1,fn(c(A).bmi?"":"opacity-50")),mt(rs,`BMI: ${p().bmi??""}`),Q(ye,"min",c(i).min),Q(ye,"max",c(i).max),ye.disabled=!c(A).bmi,mt(is,`Range: ${$t??""} - ${yt??""}`),We(Xn,1,fn(c(A).asa?"":"opacity-50")),mt(as,`ASA Score: ${p().asa??""}`),on.disabled=!c(A).asa,mt(ss,`ASA ${p().asa??""}: ${p().asa===1?"Healthy patient":p().asa===2?"Mild systemic disease":p().asa===3?"Severe systemic disease":p().asa===4?"Severe systemic disease that is a constant threat to life":"Moribund patient not expected to survive without the operation"}`),Q(Vn,"viewBox",`0 0 200 ${c(o)??""}`),Q(ln,"fill",c(g)),Q(ln,"stroke-width",c(l)),Q(ln,"opacity",c(A).asa?1:.5),Q(qe,"y2",c(o)*.6),Q(qe,"stroke",c(g)),Q(qe,"stroke-width",c(l)),Q(qe,"opacity",c(A).asa?1:.5),Q(le,"cy",c(o)*.45),Q(le,"rx",c(d)),Q(le,"ry",c(f)),Q(le,"fill",c(g)),Q(le,"stroke-width",c(l)),Q(le,"opacity",c(A).bmi?1:.5),Q(xe,"x2",Dt),Q(xe,"y2",c(o)*.4),Q(xe,"stroke",c(g)),Q(xe,"stroke-width",c(l)),Q(xe,"opacity",c(A).asa?1:.5),Q(be,"x2",Ht),Q(be,"y2",c(o)*.4),Q(be,"stroke",c(g)),Q(be,"stroke-width",c(l)),Q(be,"opacity",c(A).asa?1:.5),Q(_e,"y1",c(o)*.6),Q(_e,"y2",c(o)*.9),Q(_e,"stroke",c(g)),Q(_e,"stroke-width",c(l)),Q(_e,"opacity",c(A).asa?1:.5),Q(we,"y1",c(o)*.6),Q(we,"y2",c(o)*.9),Q(we,"stroke",c(g)),Q(we,"stroke-width",c(l)),Q(we,"opacity",c(A).asa?1:.5),Q(Yn,"stroke",c(h)),Q(Yn,"stroke-width",c(l)*1.5),Q(Yn,"opacity",c(A).age?1:.5),mt(os,`Found ${c(q)??""} historical patients with similar characteristics`),mt(hs,c(M)?"Hide Outcomes":"Show Outcomes")},[()=>I(p().height).feet,()=>I(p().height).inches,()=>c(i).min.toFixed(1),()=>c(i).max.toFixed(1),()=>60-Math.max(0,c(d)-20),()=>140+Math.max(0,c(d)-20)],se),Ce(_t,()=>c(A).age,O=>ne(A,c(A).age=O)),Ce(wt,()=>c(A).height,O=>ne(A,c(A).height=O)),Ce(pt,()=>c(A).bmi,O=>ne(A,c(A).bmi=O)),Ce(lt,()=>c(A).asa,O=>ne(A,c(A).asa=O)),jt(ut,()=>p().age,O=>p(p().age=O,!0)),jt(ve,()=>p().height,O=>p(p().height=O,!0)),jt(ye,()=>p().bmi,O=>p(p().bmi=O,!0)),jt(on,()=>p().asa,O=>p(p().asa=O,!0)),te("click",Kn,()=>{z(M,!c(M)),c(_)&&z(w,!0)}),j(t,X),me()}const rd=t=>{var e=fd();j(t,e)},id=t=>{var e=hd();j(t,e)},ad=(t,e=Gs)=>{var n=dd(),r=R(n);Js(r,()=>e().content),E(n),j(t,n)};var sd=rt(`<div class="space-y-6 text-center"><h1 class="text-4xl leading-tight font-semibold md:text-5xl">Vitals&nbsp;Unveiled:<br/> <span class="text-indigo-600">Why Some "Routine" Surgeries Aren't</span></h1> <p class="mx-auto max-w-2xl text-lg md:text-xl">Every morning an OR schedule hums like clockwork. <strong>6 388</strong> patients arrive, expecting a smooth ride through anesthesia and stitched-up certainty. Yet buried
			in those charts are <em>blood-loss spikes, surprise ICU transfers, and silent tragedies</em> that no checklist predicted.
			What separates the happy recoveries from the heart-stopping detours?</p> <p class="mx-auto max-w-2xl text-lg md:text-xl">Scroll on 👇 as we crack open the VitalDB dataset to follow every heartbeat, incision, and lab
			value—then build <strong>interactive risk profiles</strong> that may one day warn us before routine
			turns to critical.</p> <!></div>`),od=rt(`<h2>Who Steps Into the OR?</h2> <p class="mb-4 max-w-xl">Let's start by meeting our patients. The charts below reveal a striking pattern: while our
		patients span six decades, <strong>95% cluster in just two surgical departments</strong>. This concentration—combined with
		age and sex differences—creates wildly different baseline risks before the first incision. Click
		any department bar or select an age range to filter the dashboard and see how demographics shift
		across specialties.</p> <div class="controls-container mb-4"><div class="flex flex-wrap gap-4"><label class="flex cursor-pointer items-center gap-2"><input type="checkbox"/> Show percentages</label> <label class="flex cursor-pointer items-center gap-2"><input type="checkbox"/> Split by sex</label> <p class="text-xs text-gray-600 italic"><i>Tip: Click and drag on the age chart to filter by age range. Click on department bars to
					filter by department.</i></p></div></div> <div class="visualization-grid grid gap-8 md:grid-cols-2"><!> <!></div>`,1),ld=rt(`<h2 class="mb-1 pb-2 text-left text-3xl font-bold">Time on the Table</h2> <p class="max-w-9xl mx-auto mb-4">Each dot marks a key moment in surgery. The visualization shows <strong>mean, min, and max durations</strong> across our 6,388 cases. Try the filters above—switch between department and surgery type to see how <strong>different procedures have their own rhythm</strong>. For instance, breast surgeries
		average just <strong>34 minutes</strong> from anesthesia to incision, while transplantations
		take nearly twice as long, <strong>at 70 minutes</strong>. This pre-incision time matters, as longer anesthesia exposure
		before surgery increases risk of complications. If you're facing surgery, use these filters to
		see typical timing patterns for your procedure—knowledge that can help you understand and
		prepare for your own surgical journey. Hover over dots for exact timing stats.</p> <div><!></div>`,1),ud=rt(`<h2>Hidden Risk Factor — The Albumin Cliff</h2> <p>Albumin is a blood protein that reflects nutritional reserve and overall physiological
		resilience. In the pre-operative setting, low albumin levels often signal that a patient's body
		may struggle to recover. By highlighting albumin, we remind viewers that a seemingly "routine"
		lab value—often checked before surgery—can quietly predict who sails through the OR and who may
		end up in the ICU. It's the kind of hidden detail that turns "routine" into "unexpected" when no
		one is watching.</p> <br/> <p><strong>x-axis</strong> = pre-operative albumin (g/dL). <strong>Dot colour</strong> = post-op ICU stay (<span style="color:#a50026">red ≈ ≥ 3 days</span>, <span style="color:#3288bd">deep-blue ≈ 0–1 day</span>). Use the radio buttons to flip between
		routine <b>elective</b>, urgent <b>emergency</b>, or <b>all</b> cases. Below a certain threshold,
		the risk of prolonged ICU stay climbs sharply—our so-called "Albumin Cliff."</p> <br/> <!> <h3>What we actually see</h3> <ul class="list-inside list-disc space-y-1"><li><strong>In elective cases, a pronounced shift appears near 3 g/dL.</strong> Patients with albumin just under 3 g/dL begin to light up orange and red, whereas above 3 g/dL
			most stay deep-blue. <span class="font-semibold">Median ICU stay below 3 g/dL is about 2.1 days (IQR 1–4),</span> compared to <span class="font-semibold">0.7 days (IQR 0–1) above 3 g/dL</span>. A few low-albumin blue
			outliers exist, but long-stayers (amber & red) become nearly three times more common once you
			cross that cliff.</li> <li><strong>In emergencies, the "cliff" shifts upward to around 3.5 g/dL.</strong> Because urgent cases already carry extra risk, the median albumin threshold where ICU stays spike
			is higher. Below ~3.5 g/dL, <span class="font-semibold">the chance of ≥ 3-day ICU stay more than doubles</span> compared to those with albumin above 3.5 g/dL. The spread of dots is wider, but the colour gradient
			still tilts toward red as albumin drops.</li> <li>High-albumin (> 4 g/dL) patients rarely linger, anchoring the schedule "clockwork" we saw in
			the opening hook.</li></ul> <p><b>Take-away&nbsp;→</b> Albumin isn't a guarantee of trouble, but a <em>silent gravity well</em>: the lower it drops, the harder it is to climb off the ICU track.
		Even in apparently routine electives, nutrition can tip the balance from day-case discharge to
		days of critical care.</p>`,1),cd=rt(`<h2>Interactive Risk Builder</h2> <p class="mb-4 max-w-xl">Now it's your turn. Build a patient profile using the sliders below. Watch how tiny shifts—a
		single ASA notch or clicking 'Emergency'—can triple the mortality risk instantly. We'll show you
		how many similar historical cases we found, so you can trust the predictions. Try the "Make a
		Guess" mode to test your intuition against the data.</p> <!>`,1),fd=rt(`<div class="mx-auto max-w-2xl rounded-lg bg-indigo-50 p-8"><h2 class="mb-4 text-2xl font-semibold text-indigo-900">The Takeaway</h2> <p class="text-lg text-indigo-800">The data reveals three critical insights: First, pre-op albumin levels—easily measured and
			often correctable—strongly predict ICU stays. Second, emergency status and ASA score interact
			in ways that standard checklists miss. And third, while we can't change age, we can optimize
			timing, prepare blood products, and adjust recovery expectations based on these risk factors.
			The data tells us where to look—before the knife ever touches skin.</p></div>`),hd=rt(`<div>1. What have you done so far? So far, we’ve built a comprehensive exploratory analysis of our
		surgical patient population to lay the groundwork for outcome-based modeling. We began by
		visualizing age distribution, revealing a wide range of patients from their twenties to their
		eighties. This range emphasizes the variation in baseline risk and physiological resilience
		across the cohort. We then created a department-wise breakdown of surgical cases, showing that
		general surgery dominates in volume, with notable contributions from thoracic surgery and
		urology. <br/>In addition to demographic insights, we constructed a line chart to compare the average
		duration of each surgical phase (anesthesia, surgery, and recovery) across departments. This
		helps contextualize how time and resource demands vary by specialty. We also explored risk
		stratification through a radar chart comparing median outcomes for high- and low-risk cohorts.
		Metrics like mortality, ICU stay, and blood loss were visualized, clearly showing that
		pre-operative risk factors correlate with worse outcomes. Finally, we built an interactive tool
		that allows users to manipulate variables like age, ASA status, and emergency status to simulate
		predicted risks, making the data both accessible and actionable. <br/><br/>2. What will be the most challenging part of your project to design and why? The
		most challenging component of the project will likely be the design and refinement of the “Build
		Your Own Patient” predictive interface. While the tool currently visualizes model output based
		on user-selected inputs, accurately modeling risk for ICU stay and in-hospital mortality from
		such a small set of parameters introduces complexity. Capturing the nuances of surgical
		risk—especially interactions between variables like age and ASA score—requires both careful
		feature engineering and robust validation against clinical outcomes. <br/>Additionally, designing an interface that is intuitive yet scientifically accurate
		presents a UI/UX challenge. Users must understand the sensitivity of predictions without
		misinterpreting them as deterministic. Balancing simplicity with explanatory power, and ensuring
		the tool reflects real-world risk distributions without bias, will require tight integration
		between the front-end experience and the underlying model logic. Finally, scaling the model for
		more granular or department-specific predictions while maintaining speed and clarity will
		require thoughtful architectural decisions as the project evolves.</div>`),dd=rt('<div class="py-10"><!></div>'),pd=rt('<p class="py-16 text-center text-lg">Loading VitalDB dataset …</p>'),gd=rt("<button></button>"),md=rt('<div class="absolute inset-0 overflow-y-auto transition-opacity duration-300 svelte-14xl2ue"><!></div>'),vd=rt('<div class="fixed inset-0 overflow-hidden"><button class="absolute top-1/2 left-4 z-50 -translate-y-1/2 rounded-full bg-white/80 p-2 shadow-lg hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <button class="absolute top-1/2 right-4 z-50 -translate-y-1/2 rounded-full bg-white/80 p-2 shadow-lg hover:bg-white"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button> <div class="absolute bottom-4 left-1/2 z-50 flex -translate-x-1/2 gap-2"></div> <div class="relative h-full"></div></div>');function $d(t,e){ge(e,!1);const n=k=>{var T=sd(),N=F(R(T),6);const X=se(()=>[{label:"Total Surgeries",value:c(o).length},{label:"ICU Transfers",value:c(o).filter(S=>(S.icu_days??0)>0).length},{label:"In-hospital Deaths",value:c(o).filter(S=>S.death_inhosp==1).length}]);No(N,{get stats(){return c(X)}}),E(T),j(k,T)},r=k=>{var T=od(),N=F(re(T),4),X=R(N),S=R(X),B=R(S);bt(B),Bt(),E(S);var tt=F(S,2),L=R(tt);bt(L),Bt(),E(tt),Bt(2),E(X),E(N);var G=F(N,2),nt=R(G);const et=se(()=>c(d)?c(u):c(o));wh(nt,{get data(){return c(et)},get showPercentage(){return c(h)},set showPercentage(ot){z(h,ot)},get showBySex(){return c(g)},set showBySex(ot){z(g,ot)},$$events:{percentageChange:H,filter:P},$$legacy:!0});var it=F(nt,2);const _t=se(()=>c(f)?c(u):c(o));$h(it,{get data(){return c(_t)},get filteredDepartment(){return c(d)},get showPercentage(){return c(h)},$$events:{filter:I}}),E(G),Ce(B,()=>c(h),ot=>z(h,ot)),te("change",B,()=>{H({detail:{showPercentage:c(h)}})}),Ce(L,()=>c(g),ot=>z(g,ot)),j(k,T)},i=k=>{var T=ld(),N=F(re(T),4),X=R(N);Fh(X,{get cases(){return c(o)}}),E(N),j(k,T)},a=k=>{var T=ud(),N=F(re(T),10);Xh(N,{get patients(){return c(o)}}),Bt(6),j(k,T)},s=k=>{var T=cd(),N=F(re(T),4);nd(N,{get cases(){return c(o)},get predictors(){return c(y)},set predictors(X){z(y,X)},$$legacy:!0}),j(k,T)};let o=Y([]),l=Y(!0),u=Y([]),d=Y(null),f=Y(null),h=Y(!1),g=Y(!0),y=Y({age:60,bmi:25,asa:2,emergency:0}),C=Y(0),p=Y(!1);const m=300,_=[{id:"hook",content:n},{id:"demographics",content:r},{id:"timeline",content:i},{id:"albumin",content:a},{id:"buildPatient",content:s},{id:"takeaway",content:rd},{id:"writeup",content:id}],v=_.length;function w(){c(C)<v-1&&!c(p)&&(z(p,!0),gi(C),setTimeout(()=>{z(p,!1)},m))}function b(){c(C)>0&&!c(p)&&(z(p,!0),gi(C,-1),setTimeout(()=>{z(p,!1)},m))}function M(k){k>=0&&k<v&&!c(p)&&(z(p,!0),z(C,k),setTimeout(()=>{z(p,!1)},m))}function A(k){k.key==="ArrowRight"||k.key==="ArrowDown"?w():(k.key==="ArrowLeft"||k.key==="ArrowUp")&&b()}oe(()=>(window.addEventListener("keydown",A),()=>{window.removeEventListener("keydown",A)}));function I(k){const{department:T}=k.detail;z(d,T),$()}function H(k){z(h,k.detail.showPercentage)}function P(k){const{ageRange:T}=k.detail;z(f,T),$()}function $(){let k=[...c(o)];c(d)&&(k=k.filter(T=>T.department===c(d))),c(f)&&(k=k.filter(T=>T.age!==void 0&&T.age>=c(f)[0]&&T.age<=c(f)[1])),z(u,k)}function W(k){return k==null||k.trim()===""?"":/^[+\-]?\d+(\.\d+)?$/.test(k)?+k:k}oe(async()=>{const k=`${to}/cases.csv`;z(o,await ko(k,T=>{const N={};for(const X in T)N[X]=W(T[X]);return N})),z(l,!1)}),ht(()=>c(o),()=>{if(c(o).length>0){let tt=function(L,G){const nt=L.avgWait;L.count++,L.avgWait=(nt*(L.count-1)+G)/L.count,L.stdDev=Math.sqrt(((L.count-2)*L.stdDev*L.stdDev+(G-nt)*(G-L.avgWait))/(L.count-1))};const k=c(o).filter(L=>L.emop===1&&(L.preop_alb??0)<3),T=c(o).filter(L=>L.emop===0&&(L.preop_alb??0)>3.5),N=k.length>0?k.reduce((L,G)=>L+(G.death_inhosp??0),0)/k.length:0,X=T.length>0?T.reduce((L,G)=>L+(G.death_inhosp??0),0)/T.length:0;console.log("Emergency Low Alb Mortality:",(N*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",(X*100).toFixed(1)+"%"),console.log("Ratio:",(N/(X||.001)).toFixed(1)+"x");const S=new Map,B=new Map;c(o).forEach(L=>{if(L.department&&L.optype&&L.anestart&&L.opstart){const G=(L.opstart-L.anestart)/60;S.has(L.department)||S.set(L.department,{count:0,avgWait:0,stdDev:0}),tt(S.get(L.department),G),B.has(L.optype)||B.set(L.optype,{count:0,avgWait:0,stdDev:0}),tt(B.get(L.optype),G)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(S.entries()).sort((L,G)=>G[1].count-L[1].count).forEach(([L,G])=>{console.log(`${L}: ${G.count} cases, avg wait ${G.avgWait.toFixed(1)} ± ${G.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(B.entries()).sort((L,G)=>G[1].count-L[1].count).slice(0,10).forEach(([L,G])=>{console.log(`${L}: ${G.count} cases, avg wait ${G.avgWait.toFixed(1)} ± ${G.stdDev.toFixed(1)} min`)})}}),ze(),De();var x=ui(),q=re(x);{var Z=k=>{var T=pd();j(k,T)},D=k=>{var T=vd(),N=R(T),X=F(N,2),S=F(X,2);kn(S,5,()=>_,wn,(tt,L,G)=>{var nt=gd();Rt(()=>{We(nt,1,`h-3 w-3 rounded-full transition-all duration-300 ${c(C)===G?"bg-indigo-600":"bg-gray-300 hover:bg-gray-400"}`),nt.disabled=c(p)}),te("click",nt,()=>M(G)),j(tt,nt)}),E(S);var B=F(S,2);kn(B,5,()=>_,wn,(tt,L,G)=>{var nt=ui(),et=re(nt);{var it=_t=>{var ot=md(),wt=R(ot);Zs(wt,{children:(U,pt)=>{ad(U,()=>c(L))}}),E(ot),Rt(()=>io(ot,`opacity: ${c(p)?0:1}`)),j(_t,ot)};Ct(et,_t=>{c(C)===G&&_t(it)})}j(tt,nt)}),E(B),E(T),Rt(()=>{N.disabled=c(C)===0||c(p),X.disabled=c(C)===v-1||c(p)}),te("click",N,b),te("click",X,w),j(k,T)};Ct(q,k=>{c(l)?k(Z):k(D,!1)})}j(t,x),me()}export{$d as component};
