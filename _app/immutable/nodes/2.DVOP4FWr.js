import{d as tr,a as lt,f as wt}from"../chunks/bPvJk30M.js";import{i as zt}from"../chunks/Bzh-Jt6d.js";import{o as se,a as an}from"../chunks/DnaeXIsx.js";import{o as ni,q as pt,v as ri,g as v,N as er,w as ii,x as ai,y as yn,z as xn,A as Re,F as Yt,aa as oi,B as nr,C as rr,D as si,at as Ie,ae as ir,a2 as wn,au as li,Y as q,av as bn,a5 as ar,aw as ui,ax as fi,ad as ci,ay as hi,aq as di,az as pi,aA as gi,a8 as mi,aB as vi,aC as _i,aD as yi,aE as xi,b as wi,I as bi,G as or,aF as Mi,aG as Ai,p as Vt,k as Ut,R as O,aH as xt,aI as sr,t as $t,m as M,s as b,e as nt,aJ as Fe,n as A,aK as gt,j as lr,as as Mn}from"../chunks/DRqU9nQu.js";import{a as ki,l as ur,s as X,e as $i}from"../chunks/BkolBn-3.js";import{p as ut,b as ne,i as fr}from"../chunks/BAi1eWQ2.js";import{b as Ni}from"../chunks/CG2-iy8m.js";function An(t,e){return e}function Si(t,e,n,r){for(var i=[],a=e.length,o=0;o<a;o++)fi(e[o].e,i,!0);var s=a>0&&i.length===0&&n!==null;if(s){var l=n.parentNode;ci(l),l.append(n),r.clear(),yt(t,e[0].prev,e[a-1].next)}hi(i,()=>{for(var u=0;u<a;u++){var f=e[u];s||(r.delete(f.k),yt(t,f.prev,f.next)),di(f.e,!s)}})}function kn(t,e,n,r,i,a=null){var o=t,s={flags:e,items:new Map,first:null};pt&&ri();var l=null,u=!1,f=er(()=>{var h=n();return ar(h)?h:h==null?[]:ir(h)});ni(()=>{var h=v(f),c=h.length;if(u&&c===0)return;u=c===0;let d=!1;if(pt){var p=ii(o)===ai;p!==(c===0)&&(o=yn(),xn(o),Re(!1),d=!0)}if(pt){for(var g=null,y,_=0;_<c;_++){if(Yt.nodeType===8&&Yt.data===oi){o=Yt,d=!0,Re(!1);break}var k=h[_],x=r(k,_);y=cr(Yt,s,g,null,k,x,_,i,e,n),s.items.set(x,y),g=y}c>0&&xn(yn())}pt||Ei(h,s,o,i,e,r,n),a!==null&&(c===0?l?nr(l):l=rr(()=>a(o)):l!==null&&si(l,()=>{l=null})),d&&Re(!0),v(f)}),pt&&(o=Yt)}function Ei(t,e,n,r,i,a,o){var s=t.length,l=e.items,u=e.first,f=u,h,c=null,d=[],p=[],g,y,_,k;for(k=0;k<s;k+=1){if(g=t[k],y=a(g,k),_=l.get(y),_===void 0){var x=f?f.e.nodes_start:n;c=cr(x,e,c,c===null?e.first:c.next,g,y,k,r,i,o),l.set(y,c),d=[],p=[],f=c.next;continue}if(Ci(_,g,k),(_.e.f&Ie)!==0&&nr(_.e),_!==f){if(h!==void 0&&h.has(_)){if(d.length<p.length){var S=p[0],m;c=S.prev;var R=d[0],E=d[d.length-1];for(m=0;m<d.length;m+=1)$n(d[m],S,n);for(m=0;m<p.length;m+=1)h.delete(p[m]);yt(e,R.prev,E.next),yt(e,c,R),yt(e,E,S),f=S,c=E,k-=1,d=[],p=[]}else h.delete(_),$n(_,f,n),yt(e,_.prev,_.next),yt(e,_,c===null?e.first:c.next),yt(e,c,_),c=_;continue}for(d=[],p=[];f!==null&&f.k!==y;)(f.e.f&Ie)===0&&(h??(h=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;_=f}d.push(_),c=_,f=_.next}if(f!==null||h!==void 0){for(var C=h===void 0?[]:ir(h);f!==null;)(f.e.f&Ie)===0&&C.push(f),f=f.next;var D=C.length;if(D>0){var z=null;Si(e,C,z,l)}}wn.first=e.first&&e.first.e,wn.last=c&&c.e}function Ci(t,e,n,r){li(t.v,e),t.i=n}function cr(t,e,n,r,i,a,o,s,l,u){var f=(l&pi)!==0,h=(l&gi)===0,c=f?h?q(i):bn(i):i,d=(l&ui)===0?o:bn(o),p={i:d,v:c,k:a,a:null,e:null,prev:n,next:r};try{return p.e=rr(()=>s(t,c,d,u),pt),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?e.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function $n(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var o=mi(a);i.before(a),a=o}}function yt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const Ti=Symbol("is custom element"),Ri=Symbol("is html");function Dt(t){if(pt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;Nn(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;Nn(t,"checked",null),t.checked=i}}};t.__on_r=n,vi(n),ki()}}function Ii(t,e){var n=hr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Nn(t,e,n,r){var i=hr(t);pt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[_i]=n),t.removeAttribute(e))}function hr(t){return t.__attributes??(t.__attributes={[Ti]:t.nodeName.includes("-"),[Ri]:t.namespaceURI===yi})}function jt(t,e,n=e){var r=xi();ur(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=De(t)?Le(a):a,n(a),r&&a!==(a=e())){var o=t.selectionStart,s=t.selectionEnd;t.value=a??"",s!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(s,t.value.length))}}),(pt&&t.defaultValue!==t.value||wi(e)==null&&t.value)&&n(De(t)?Le(t.value):t.value),bi(()=>{var i=e();De(t)&&i===Le(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function De(t){var e=t.type;return e==="number"||e==="range"}function Le(t){return t===""?null:+t}function dr(t,e,n){if(t.multiple)return e==null?void 0:ar(e)?Di(t,e):Mi();for(var r of t.options){var i=te(r);if(Ai(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fi(t,e){or(()=>{var n=new MutationObserver(()=>{var r=t.__value;dr(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Pe(t,e,n=e){var r=!0;ur(t,"change",i=>{var a=i?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),te);else{var s=t.querySelector(a)??t.querySelector("option:not([disabled])");o=s&&te(s)}n(o)}),or(()=>{var i=e();if(dr(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=te(a),n(i))}t.__value=i,r=!1}),Fi(t)}function Di(t,e){for(var n of t.options)n.selected=e.includes(te(n))}function te(t){return"__value"in t?t.__value:t.value}var Sn={},Be={},Oe=34,Gt=10,He=13;function pr(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Li(t,e){var n=pr(t);return function(r,i){return e(n(r),i,t)}}function En(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Z(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Pi(t){return t<0?"-"+Z(-t,6):t>9999?"+"+Z(t,6):Z(t,4)}function Bi(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Pi(t.getUTCFullYear())+"-"+Z(t.getUTCMonth()+1,2)+"-"+Z(t.getUTCDate(),2)+(i?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"."+Z(i,3)+"Z":r?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"Z":n||e?"T"+Z(e,2)+":"+Z(n,2)+"Z":"")}function Oi(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(h,c){var d,p,g=i(h,function(y,_){if(d)return d(y,_-1);p=y,d=c?Li(y,c):pr(y)});return g.columns=p||[],g}function i(h,c){var d=[],p=h.length,g=0,y=0,_,k=p<=0,x=!1;h.charCodeAt(p-1)===Gt&&--p,h.charCodeAt(p-1)===He&&--p;function S(){if(k)return Be;if(x)return x=!1,Sn;var R,E=g,C;if(h.charCodeAt(E)===Oe){for(;g++<p&&h.charCodeAt(g)!==Oe||h.charCodeAt(++g)===Oe;);return(R=g)>=p?k=!0:(C=h.charCodeAt(g++))===Gt?x=!0:C===He&&(x=!0,h.charCodeAt(g)===Gt&&++g),h.slice(E+1,R-1).replace(/""/g,'"')}for(;g<p;){if((C=h.charCodeAt(R=g++))===Gt)x=!0;else if(C===He)x=!0,h.charCodeAt(g)===Gt&&++g;else if(C!==n)continue;return h.slice(E,R)}return k=!0,h.slice(E,p)}for(;(_=S())!==Be;){for(var m=[];_!==Sn&&_!==Be;)m.push(_),_=S();c&&(m=c(m,y++))==null||d.push(m)}return d}function a(h,c){return h.map(function(d){return c.map(function(p){return f(d[p])}).join(t)})}function o(h,c){return c==null&&(c=En(h)),[c.map(f).join(t)].concat(a(h,c)).join(`
`)}function s(h,c){return c==null&&(c=En(h)),a(h,c).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(t)}function f(h){return h==null?"":h instanceof Date?Bi(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}var Hi=Oi(","),qi=Hi.parse;function zi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Vi(t,e){return fetch(t,e).then(zi)}function Ui(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Vi(e,n).then(function(i){return t(i,r)})}}var Xi=Ui(qi),Ye="http://www.w3.org/1999/xhtml";const Cn={svg:"http://www.w3.org/2000/svg",xhtml:Ye,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ee(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Cn.hasOwnProperty(e)?{space:Cn[e],local:t}:t}function Yi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ye&&e.documentElement.namespaceURI===Ye?e.createElement(t):e.createElementNS(n,t)}}function Gi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function gr(t){var e=Ee(t);return(e.local?Gi:Yi)(e)}function Wi(){}function on(t){return t==null?Wi:function(){return this.querySelector(t)}}function Zi(t){typeof t!="function"&&(t=on(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,f=0;f<o;++f)(l=a[f])&&(u=t.call(l,l.__data__,f,a))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new et(r,this._parents)}function Ki(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ji(){return[]}function mr(t){return t==null?Ji:function(){return this.querySelectorAll(t)}}function Qi(t){return function(){return Ki(t.apply(this,arguments))}}function ji(t){typeof t=="function"?t=Qi(t):t=mr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new et(r,i)}function vr(t){return function(){return this.matches(t)}}function _r(t){return function(e){return e.matches(t)}}var ta=Array.prototype.find;function ea(t){return function(){return ta.call(this.children,t)}}function na(){return this.firstElementChild}function ra(t){return this.select(t==null?na:ea(typeof t=="function"?t:_r(t)))}var ia=Array.prototype.filter;function aa(){return Array.from(this.children)}function oa(t){return function(){return ia.call(this.children,t)}}function sa(t){return this.selectAll(t==null?aa:oa(typeof t=="function"?t:_r(t)))}function la(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new et(r,this._parents)}function yr(t){return new Array(t.length)}function ua(){return new et(this._enter||this._groups.map(yr),this._parents)}function ye(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ye.prototype={constructor:ye,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fa(t){return function(){return t}}function ca(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new ye(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function ha(t,e,n,r,i,a,o){var s,l,u=new Map,f=e.length,h=a.length,c=new Array(f),d;for(s=0;s<f;++s)(l=e[s])&&(c[s]=d=o.call(l,l.__data__,s,e)+"",u.has(d)?i[s]=l:u.set(d,l));for(s=0;s<h;++s)d=o.call(t,a[s],s,a)+"",(l=u.get(d))?(r[s]=l,l.__data__=a[s],u.delete(d)):n[s]=new ye(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(c[s])===l&&(i[s]=l)}function da(t){return t.__data__}function pa(t,e){if(!arguments.length)return Array.from(this,da);var n=e?ha:ca,r=this._parents,i=this._groups;typeof t!="function"&&(t=fa(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var f=r[u],h=i[u],c=h.length,d=ga(t.call(f,f&&f.__data__,u,r)),p=d.length,g=s[u]=new Array(p),y=o[u]=new Array(p),_=l[u]=new Array(c);n(f,h,g,y,_,d,e);for(var k=0,x=0,S,m;k<p;++k)if(S=g[k]){for(k>=x&&(x=k+1);!(m=y[x])&&++x<p;);S._next=m||null}}return o=new et(o,r),o._enter=s,o._exit=l,o}function ga(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ma(){return new et(this._exit||this._groups.map(yr),this._parents)}function va(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function _a(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],f=r[l],h=u.length,c=s[l]=new Array(h),d,p=0;p<h;++p)(d=u[p]||f[p])&&(c[p]=d);for(;l<i;++l)s[l]=n[l];return new et(s,this._parents)}function ya(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function xa(t){t||(t=wa);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(l[f]=u);l.sort(e)}return new et(i,this._parents).order()}function wa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ba(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ma(){return Array.from(this)}function Aa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ka(){let t=0;for(const e of this)++t;return t}function $a(){return!this.node()}function Na(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Sa(t){return function(){this.removeAttribute(t)}}function Ea(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ca(t,e){return function(){this.setAttribute(t,e)}}function Ta(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ra(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ia(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fa(t,e){var n=Ee(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ea:Sa:typeof e=="function"?n.local?Ia:Ra:n.local?Ta:Ca)(n,e))}function xr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Da(t){return function(){this.style.removeProperty(t)}}function La(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ba(t,e,n){return arguments.length>1?this.each((e==null?Da:typeof e=="function"?Pa:La)(t,e,n??"")):Bt(this.node(),t)}function Bt(t,e){return t.style.getPropertyValue(e)||xr(t).getComputedStyle(t,null).getPropertyValue(e)}function Oa(t){return function(){delete this[t]}}function Ha(t,e){return function(){this[t]=e}}function qa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function za(t,e){return arguments.length>1?this.each((e==null?Oa:typeof e=="function"?qa:Ha)(t,e)):this.node()[t]}function wr(t){return t.trim().split(/^|\s+/)}function sn(t){return t.classList||new br(t)}function br(t){this._node=t,this._names=wr(t.getAttribute("class")||"")}br.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mr(t,e){for(var n=sn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ar(t,e){for(var n=sn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Va(t){return function(){Mr(this,t)}}function Ua(t){return function(){Ar(this,t)}}function Xa(t,e){return function(){(e.apply(this,arguments)?Mr:Ar)(this,t)}}function Ya(t,e){var n=wr(t+"");if(arguments.length<2){for(var r=sn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Xa:e?Va:Ua)(n,e))}function Ga(){this.textContent=""}function Wa(t){return function(){this.textContent=t}}function Za(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ka(t){return arguments.length?this.each(t==null?Ga:(typeof t=="function"?Za:Wa)(t)):this.node().textContent}function Ja(){this.innerHTML=""}function Qa(t){return function(){this.innerHTML=t}}function ja(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function to(t){return arguments.length?this.each(t==null?Ja:(typeof t=="function"?ja:Qa)(t)):this.node().innerHTML}function eo(){this.nextSibling&&this.parentNode.appendChild(this)}function no(){return this.each(eo)}function ro(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function io(){return this.each(ro)}function ao(t){var e=typeof t=="function"?t:gr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function oo(){return null}function so(t,e){var n=typeof t=="function"?t:gr(t),r=e==null?oo:typeof e=="function"?e:on(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lo(){var t=this.parentNode;t&&t.removeChild(this)}function uo(){return this.each(lo)}function fo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function co(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ho(t){return this.select(t?co:fo)}function po(t){return arguments.length?this.property("__data__",t):this.node().__data__}function go(t){return function(e){t.call(this,e,this.__data__)}}function mo(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function vo(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function _o(t,e,n){return function(){var r=this.__on,i,a=go(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function yo(t,e,n){var r=mo(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?_o:vo,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function kr(t,e,n){var r=xr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function xo(t,e){return function(){return kr(this,t,e)}}function wo(t,e){return function(){return kr(this,t,e.apply(this,arguments))}}function bo(t,e){return this.each((typeof e=="function"?wo:xo)(t,e))}function*Mo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var $r=[null];function et(t,e){this._groups=t,this._parents=e}function le(){return new et([[document.documentElement]],$r)}function Ao(){return this}et.prototype=le.prototype={constructor:et,select:Zi,selectAll:ji,selectChild:ra,selectChildren:sa,filter:la,data:pa,enter:ua,exit:ma,join:va,merge:_a,selection:Ao,order:ya,sort:xa,call:ba,nodes:Ma,node:Aa,size:ka,empty:$a,each:Na,attr:Fa,style:Ba,property:za,classed:Ya,text:Ka,html:to,raise:no,lower:io,append:ao,insert:so,remove:uo,clone:ho,datum:po,on:yo,dispatch:bo,[Symbol.iterator]:Mo};function mt(t){return typeof t=="string"?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],$r)}function ge(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ko(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Nr(t){let e,n,r;t.length!==2?(e=ge,n=(s,l)=>ge(t(s),l),r=(s,l)=>t(s)-l):(e=t===ge||t===ko?t:$o,n=t,r=t);function i(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){const h=i(s,l,u,f-1);return h>u&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:o,right:a}}function $o(){return 0}function No(t){return t===null?NaN:+t}const So=Nr(ge),Sr=So.right;Nr(No).center;function Eo(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function ee(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Ge extends Map{constructor(e,n=Ro){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Tn(this,e))}has(e){return super.has(Tn(this,e))}set(e,n){return super.set(Co(this,e),n)}delete(e){return super.delete(To(this,e))}}function Tn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Co({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function To({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ro(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Er(t){return t}function Io(t,e,...n){return Fo(t,Er,e,n)}function Fo(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Ge,l=r[o++];let u=-1;for(const f of a){const h=l(f,++u,a),c=s.get(h);c?c.push(f):s.set(h,[f])}for(const[f,h]of s)s.set(f,i(h,o));return e(s)}(t,0)}var Do=Array.prototype,Lo=Do.slice;function qe(t){return()=>t}const Po=Math.sqrt(50),Bo=Math.sqrt(10),Oo=Math.sqrt(2);function xe(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Po?10:a>=Bo?5:a>=Oo?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?xe(t,e,n*2):[s,l,u]}function Cr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?xe(e,t,n):xe(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function Ot(t,e,n){return e=+e,t=+t,n=+n,xe(t,e,n)[2]}function Ho(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ot(e,t,n):Ot(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qo(t,e,n){let r;for(;;){const i=Ot(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function zo(t){return Math.max(1,Math.ceil(Math.log(Eo(t))/Math.LN2)+1)}function Vo(){var t=Er,e=ee,n=zo;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var f=e(u),h=f[0],c=f[1],d=n(u,h,c);if(!Array.isArray(d)){const x=c,S=+d;if(e===ee&&([h,c]=qo(h,c,S)),d=Cr(h,c,S),d[0]<=h&&(l=Ot(h,c,S)),d[d.length-1]>=c)if(x>=c&&e===ee){const m=Ot(h,c,S);isFinite(m)&&(m>0?c=(Math.floor(c/m)+1)*m:m<0&&(c=(Math.ceil(c*-m)+1)/-m))}else d.pop()}for(var p=d.length,g=0,y=p;d[g]<=h;)++g;for(;d[y-1]>c;)--y;(g||y<p)&&(d=d.slice(g,y),p=y-g);var _=new Array(p+1),k;for(a=0;a<=p;++a)k=_[a]=[],k.x0=a>0?d[a-1]:h,k.x1=a<p?d[a]:c;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&h<=s&&s<=c&&_[Math.min(p,Math.floor((s-h)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&h<=s&&s<=c){const x=Math.floor((h-s)*l);_[Math.min(p,x+(d[x]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&h<=s&&s<=c&&_[Sr(d,s,0,p)].push(i[a]);return _}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:qe(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:qe([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:qe(Array.isArray(i)?Lo.call(i):i),r):n},r}function ln(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Uo(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Xo(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function Yo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function un(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Rn=Symbol("implicit");function fn(){var t=new Ge,e=[],n=[],r=Rn;function i(a){let o=t.get(a);if(o===void 0){if(r!==Rn)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ge;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return fn(e,n).unknown(r)},un.apply(i,arguments),i}function Tr(){var t=fn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var c=e().length,d=i<r,p=d?i:r,g=d?r:i;a=(g-p)/Math.max(1,c-l+u*2),s&&(a=Math.floor(a)),p+=(g-p-a*(c-l))*f,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var y=Yo(c).map(function(_){return p+a*_});return n(d?y.reverse():y)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return Tr(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},un.apply(h(),arguments)}function cn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Rr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ue(){}var re=.7,we=1/re,Pt="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Go=/^#([0-9a-f]{3,8})$/,Wo=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),Zo=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),Ko=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${ie}\\)$`),Jo=new RegExp(`^rgba\\(${ft},${ft},${ft},${ie}\\)$`),Qo=new RegExp(`^hsl\\(${ie},${ft},${ft}\\)$`),jo=new RegExp(`^hsla\\(${ie},${ft},${ft},${ie}\\)$`),In={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cn(ue,Et,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fn,formatHex:Fn,formatHex8:ts,formatHsl:es,formatRgb:Dn,toString:Dn});function Fn(){return this.rgb().formatHex()}function ts(){return this.rgb().formatHex8()}function es(){return Ir(this).formatHsl()}function Dn(){return this.rgb().formatRgb()}function Et(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Go.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ln(e):n===3?new K(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ce(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ce(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Wo.exec(t))?new K(e[1],e[2],e[3],1):(e=Zo.exec(t))?new K(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ko.exec(t))?ce(e[1],e[2],e[3],e[4]):(e=Jo.exec(t))?ce(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qo.exec(t))?On(e[1],e[2]/100,e[3]/100,1):(e=jo.exec(t))?On(e[1],e[2]/100,e[3]/100,e[4]):In.hasOwnProperty(t)?Ln(In[t]):t==="transparent"?new K(NaN,NaN,NaN,0):null}function Ln(t){return new K(t>>16&255,t>>8&255,t&255,1)}function ce(t,e,n,r){return r<=0&&(t=e=n=NaN),new K(t,e,n,r)}function ns(t){return t instanceof ue||(t=Et(t)),t?(t=t.rgb(),new K(t.r,t.g,t.b,t.opacity)):new K}function We(t,e,n,r){return arguments.length===1?ns(t):new K(t,e,n,r??1)}function K(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cn(K,We,Rr(ue,{brighter(t){return t=t==null?we:Math.pow(we,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new K(St(this.r),St(this.g),St(this.b),be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:rs,formatRgb:Bn,toString:Bn}));function Pn(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}`}function rs(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}${Nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bn(){const t=be(this.opacity);return`${t===1?"rgb(":"rgba("}${St(this.r)}, ${St(this.g)}, ${St(this.b)}${t===1?")":`, ${t})`}`}function be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function St(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nt(t){return t=St(t),(t<16?"0":"")+t.toString(16)}function On(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new at(t,e,n,r)}function Ir(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);if(t instanceof ue||(t=Et(t)),!t)return new at;if(t instanceof at)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new at(o,s,l,t.opacity)}function is(t,e,n,r){return arguments.length===1?Ir(t):new at(t,e,n,r??1)}function at(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cn(at,is,Rr(ue,{brighter(t){return t=t==null?we:Math.pow(we,t),new at(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new K(ze(t>=240?t-240:t+120,i,r),ze(t,i,r),ze(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new at(Hn(this.h),he(this.s),he(this.l),be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=be(this.opacity);return`${t===1?"hsl(":"hsla("}${Hn(this.h)}, ${he(this.s)*100}%, ${he(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Hn(t){return t=(t||0)%360,t<0?t+360:t}function he(t){return Math.max(0,Math.min(1,t||0))}function ze(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hn=t=>()=>t;function as(t,e){return function(n){return t+n*e}}function os(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ss(t){return(t=+t)==1?Fr:function(e,n){return n-e?os(e,n,t):hn(isNaN(e)?n:e)}}function Fr(t,e){var n=e-t;return n?as(t,n):hn(isNaN(t)?e:t)}const Me=function t(e){var n=ss(e);function r(i,a){var o=n((i=We(i)).r,(a=We(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Fr(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function ls(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function us(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fs(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=dn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function cs(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function it(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hs(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=dn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(Ze.source,"g");function ds(t){return function(){return t}}function ps(t){return function(e){return t(e)+""}}function Dr(t,e){var n=Ze.lastIndex=Ve.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Ze.exec(t))&&(i=Ve.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:it(r,i)})),n=Ve.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?ps(l[0].x):ds(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function dn(t,e){var n=typeof e,r;return e==null||n==="boolean"?hn(e):(n==="number"?it:n==="string"?(r=Et(e))?(e=r,Me):Dr:e instanceof Et?Me:e instanceof Date?cs:us(e)?ls:Array.isArray(e)?fs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hs:it)(t,e)}function gs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var qn=180/Math.PI,Ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lr(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*qn,skewX:Math.atan(l)*qn,scaleX:o,scaleY:s}}var de;function ms(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ke:Lr(e.a,e.b,e.c,e.d,e.e,e.f)}function vs(t){return t==null||(de||(de=document.createElementNS("http://www.w3.org/2000/svg","g")),de.setAttribute("transform",t),!(t=de.transform.baseVal.consolidate()))?Ke:(t=t.matrix,Lr(t.a,t.b,t.c,t.d,t.e,t.f))}function Pr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,c,d,p){if(u!==h||f!==c){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:it(u,h)},{i:g-2,x:it(f,c)})}else(h||c)&&d.push("translate("+h+e+c+n)}function o(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:it(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:it(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(u,f,h,c,d,p){if(u!==h||f!==c){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:it(u,h)},{i:g-2,x:it(f,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,c),o(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(d){for(var p=-1,g=c.length,y;++p<g;)h[(y=c[p]).i]=y.x(d);return h.join("")}}}var _s=Pr(ms,"px, ","px)","deg)"),ys=Pr(vs,", ",")",")");function xs(t){return function(){return t}}function ws(t){return+t}var zn=[0,1];function Lt(t){return t}function Je(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:xs(isNaN(e)?NaN:.5)}function bs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ms(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Je(i,r),a=n(o,a)):(r=Je(r,i),a=n(a,o)),function(s){return a(r(s))}}function As(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Je(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Sr(t,s,1,r)-1;return a[l](i[l](s))}}function ks(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $s(){var t=zn,e=zn,n=dn,r,i,a,o=Lt,s,l,u;function f(){var c=Math.min(t.length,e.length);return o!==Lt&&(o=bs(t[0],t[c-1])),s=c>2?As:Ms,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?a:(l||(l=s(t.map(r),e,n)))(r(o(c)))}return h.invert=function(c){return o(i((u||(u=s(e,t.map(r),it)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,ws),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=gs,f()},h.clamp=function(c){return arguments.length?(o=c?!0:Lt,f()):o!==Lt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(a=c,h):a},function(c,d){return r=c,i=d,f()}}function Ns(){return $s()(Lt,Lt)}function Ss(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ae(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ht(t){return t=Ae(Math.abs(t)),t?t[1]:NaN}function Es(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Cs(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ts=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ke(t){if(!(e=Ts.exec(t)))throw new Error("invalid format: "+t);var e;return new pn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ke.prototype=pn.prototype;function pn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rs(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Br;function Is(t,e){var n=Ae(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Br=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ae(t,Math.max(0,e+a-1))[0]}function Vn(t,e){var n=Ae(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Un={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ss,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vn(t*100,e),r:Vn,s:Is,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xn(t){return t}var Yn=Array.prototype.map,Gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fs(t){var e=t.grouping===void 0||t.thousands===void 0?Xn:Es(Yn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Xn:Cs(Yn.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ke(h);var c=h.fill,d=h.align,p=h.sign,g=h.symbol,y=h.zero,_=h.width,k=h.comma,x=h.precision,S=h.trim,m=h.type;m==="n"?(k=!0,m="g"):Un[m]||(x===void 0&&(x=12),S=!0,m="g"),(y||c==="0"&&d==="=")&&(y=!0,c="0",d="=");var R=g==="$"?n:g==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",E=g==="$"?r:/[%p]/.test(m)?o:"",C=Un[m],D=/[defgprs%]/.test(m);x=x===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function z(w){var B=R,L=E,Y,st,$;if(m==="c")L=C(w)+L,w="";else{w=+w;var T=w<0||1/w<0;if(w=isNaN(w)?l:C(Math.abs(w),x),S&&(w=Rs(w)),T&&+w==0&&p!=="+"&&(T=!1),B=(T?p==="("?p:s:p==="-"||p==="("?"":p)+B,L=(m==="s"?Gn[8+Br/3]:"")+L+(T&&p==="("?")":""),D){for(Y=-1,st=w.length;++Y<st;)if($=w.charCodeAt(Y),48>$||$>57){L=($===46?i+w.slice(Y+1):w.slice(Y))+L,w=w.slice(0,Y);break}}}k&&!y&&(w=e(w,1/0));var I=B.length+w.length+L.length,F=I<_?new Array(_-I+1).join(c):"";switch(k&&y&&(w=e(F+w,F.length?_-L.length:1/0),F=""),d){case"<":w=B+w+L+F;break;case"=":w=B+F+w+L;break;case"^":w=F.slice(0,I=F.length>>1)+B+w+L+F.slice(I);break;default:w=F+B+w+L;break}return a(w)}return z.toString=function(){return h+""},z}function f(h,c){var d=u((h=ke(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Ht(c)/3)))*3,g=Math.pow(10,-p),y=Gn[8+p/3];return function(_){return d(g*_)+y}}return{format:u,formatPrefix:f}}var pe,Or,Hr;Ds({thousands:",",grouping:[3],currency:["$",""]});function Ds(t){return pe=Fs(t),Or=pe.format,Hr=pe.formatPrefix,pe}function Ls(t){return Math.max(0,-Ht(Math.abs(t)))}function Ps(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ht(e)/3)))*3-Ht(Math.abs(t)))}function Bs(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ht(e)-Ht(t))+1}function Os(t,e,n,r){var i=Ho(t,e,n),a;switch(r=ke(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ps(i,o))&&(r.precision=a),Hr(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Bs(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ls(i))&&(r.precision=a-(r.type==="%")*2);break}}return Or(r)}function Hs(t){var e=t.domain;return t.ticks=function(n){var r=e();return Cr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Os(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);f-- >0;){if(u=Ot(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function ae(){var t=Ns();return t.copy=function(){return ks(t,ae())},un.apply(t,arguments),Hs(t)}function qs(t){return t}var Ue=1,Xe=2,Qe=3,Zt=4,Wn=1e-6;function zs(t){return"translate("+t+",0)"}function Vs(t){return"translate(0,"+t+")"}function Us(t){return e=>+t(e)}function Xs(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ys(){return!this.__axis}function qr(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Ue||t===Zt?-1:1,f=t===Zt||t===Xe?"x":"y",h=t===Ue||t===Qe?zs:Vs;function c(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):qs),y=Math.max(a,0)+s,_=e.range(),k=+_[0]+l,x=+_[_.length-1]+l,S=(e.bandwidth?Xs:Us)(e.copy(),l),m=d.selection?d.selection():d,R=m.selectAll(".domain").data([null]),E=m.selectAll(".tick").data(p,e).order(),C=E.exit(),D=E.enter().append("g").attr("class","tick"),z=E.select("line"),w=E.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(D),z=z.merge(D.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),w=w.merge(D.append("text").attr("fill","currentColor").attr(f,u*y).attr("dy",t===Ue?"0em":t===Qe?"0.71em":"0.32em")),d!==m&&(R=R.transition(d),E=E.transition(d),z=z.transition(d),w=w.transition(d),C=C.transition(d).attr("opacity",Wn).attr("transform",function(B){return isFinite(B=S(B))?h(B+l):this.getAttribute("transform")}),D.attr("opacity",Wn).attr("transform",function(B){var L=this.parentNode.__axis;return h((L&&isFinite(L=L(B))?L:S(B))+l)})),C.remove(),R.attr("d",t===Zt||t===Xe?o?"M"+u*o+","+k+"H"+l+"V"+x+"H"+u*o:"M"+l+","+k+"V"+x:o?"M"+k+","+u*o+"V"+l+"H"+x+"V"+u*o:"M"+k+","+l+"H"+x),E.attr("opacity",1).attr("transform",function(B){return h(S(B)+l)}),z.attr(f+"2",u*a),w.attr(f,u*y).text(g),m.filter(Ys).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Xe?"start":t===Zt?"end":"middle"),m.each(function(){this.__axis=S})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(a=o=+d,c):a},c.tickSizeInner=function(d){return arguments.length?(a=+d,c):a},c.tickSizeOuter=function(d){return arguments.length?(o=+d,c):o},c.tickPadding=function(d){return arguments.length?(s=+d,c):s},c.offset=function(d){return arguments.length?(l=+d,c):l},c}function gn(t){return qr(Qe,t)}function zr(t){return qr(Zt,t)}var Gs=tr('<svg class="h-auto w-full"></svg>');function Ws(t,e){Vt(e,!1);let n=ut(e,"data",24,()=>[]),r=q();function i(){if(!n().length)return;mt(v(r)).selectAll("*").remove();const o={top:20,right:20,bottom:50,left:40},s=600-o.left-o.right,l=300-o.top-o.bottom,u=n().map(p=>p.age),f=ae().domain(ee(u)).nice().range([0,s]),h=Vo().domain(f.domain()).thresholds(f.ticks(20))(u),c=ae().domain([0,ln(h,p=>p.length)]).range([l,0]),d=mt(v(r)).attr("viewBox",`0 0 ${s+o.left+o.right} ${l+o.top+o.bottom}`).append("g").attr("transform",`translate(${o.left},${o.top})`);d.append("g").selectAll("rect").data(h).enter().append("rect").attr("x",p=>f(p.x0)).attr("y",p=>c(p.length)).attr("width",p=>f(p.x1)-f(p.x0)-1).attr("height",p=>l-c(p.length)).attr("fill","steelblue"),d.append("g").attr("transform",`translate(0,${l})`).call(gn(f)),d.append("g").call(zr(c)),d.append("text").attr("x",s/2).attr("y",l+35).attr("text-anchor","middle").text("Age (years)"),d.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-35).attr("text-anchor","middle").text("Count")}se(i),an(i),zt();var a=Gs();ne(a,o=>O(r,o),()=>v(r)),lt(t,a),Ut()}var Zs=tr('<svg class="h-auto w-full"></svg>');function Ks(t,e){Vt(e,!1);let n=ut(e,"data",24,()=>[]),r=q();function i(){if(!n().length)return;mt(v(r)).selectAll("*").remove();const o={top:20,right:20,bottom:100,left:40},s=600-o.left-o.right,l=300-o.top-o.bottom,u=Io(n(),p=>p.length,p=>p.department),f=Array.from(u,([p,g])=>({key:p,value:g})),h=Tr().domain(f.map(p=>p.key)).range([0,s]).padding(.2),c=ae().domain([0,ln(f,p=>p.value)]).nice().range([l,0]),d=mt(v(r)).attr("viewBox",`0 0 ${s+o.left+o.right} ${l+o.top+o.bottom}`).append("g").attr("transform",`translate(${o.left},${o.top})`);d.append("g").selectAll("rect").data(f).enter().append("rect").attr("x",p=>h(p.key)).attr("y",p=>c(p.value)).attr("width",h.bandwidth()).attr("height",p=>l-c(p.value)).attr("fill","teal"),d.append("g").attr("transform",`translate(0,${l})`).call(gn(h)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end"),d.append("g").call(zr(c)),d.append("text").attr("x",s/2).attr("y",l+80).attr("text-anchor","middle").text("Surgical Department"),d.append("text").attr("transform","rotate(-90)").attr("x",-180/2).attr("y",-35).attr("text-anchor","middle").text("Number of Cases")}se(i),an(i),zt();var a=Zs();ne(a,o=>O(r,o),()=>v(r)),lt(t,a),Ut()}var Js={value:()=>{}};function Vr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new me(n)}function me(t){this._=t}function Qs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}me.prototype=Vr.prototype={constructor:me,on:function(t,e){var n=this._,r=Qs(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=js(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Zn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Zn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new me(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function js(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Zn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Js,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var qt=0,Kt=0,Wt=0,Ur=1e3,$e,Jt,Ne=0,Ct=0,Ce=0,oe=typeof performance=="object"&&performance.now?performance:Date,Xr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mn(){return Ct||(Xr(tl),Ct=oe.now()+Ce)}function tl(){Ct=0}function Se(){this._call=this._time=this._next=null}Se.prototype=Yr.prototype={constructor:Se,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?mn():+n)+(e==null?0:+e),!this._next&&Jt!==this&&(Jt?Jt._next=this:$e=this,Jt=this),this._call=t,this._time=n,je()},stop:function(){this._call&&(this._call=null,this._time=1/0,je())}};function Yr(t,e,n){var r=new Se;return r.restart(t,e,n),r}function el(){mn(),++qt;for(var t=$e,e;t;)(e=Ct-t._time)>=0&&t._call.call(void 0,e),t=t._next;--qt}function Kn(){Ct=(Ne=oe.now())+Ce,qt=Kt=0;try{el()}finally{qt=0,rl(),Ct=0}}function nl(){var t=oe.now(),e=t-Ne;e>Ur&&(Ce-=e,Ne=t)}function rl(){for(var t,e=$e,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$e=n);Jt=t,je(r)}function je(t){if(!qt){Kt&&(Kt=clearTimeout(Kt));var e=t-Ct;e>24?(t<1/0&&(Kt=setTimeout(Kn,t-oe.now()-Ce)),Wt&&(Wt=clearInterval(Wt))):(Wt||(Ne=oe.now(),Wt=setInterval(nl,Ur)),qt=1,Xr(Kn))}}function Jn(t,e,n){var r=new Se;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var il=Vr("start","end","cancel","interrupt"),al=[],Gr=0,Qn=1,tn=2,ve=3,jn=4,en=5,_e=6;function Te(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;ol(t,n,{name:e,index:r,group:i,on:il,tween:al,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Gr})}function vn(t,e){var n=ot(t,e);if(n.state>Gr)throw new Error("too late; already scheduled");return n}function ct(t,e){var n=ot(t,e);if(n.state>ve)throw new Error("too late; already running");return n}function ot(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ol(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Yr(a,0,n.time);function a(u){n.state=Qn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,h,c,d;if(n.state!==Qn)return l();for(f in r)if(d=r[f],d.name===n.name){if(d.state===ve)return Jn(o);d.state===jn?(d.state=_e,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<e&&(d.state=_e,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if(Jn(function(){n.state===ve&&(n.state=jn,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=tn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===tn){for(n.state=ve,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=en,1),h=-1,c=i.length;++h<c;)i[h].call(t,f);n.state===en&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=_e,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function sl(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>tn&&r.state<en,r.state=_e,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function ll(t){return this.each(function(){sl(this,t)})}function ul(t,e){var n,r;return function(){var i=ct(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function fl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ct(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function cl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ot(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?ul:fl)(n,t,e))}function _n(t,e,n){var r=t._id;return t.each(function(){var i=ct(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ot(i,r).value[e]}}function Wr(t,e){var n;return(typeof e=="number"?it:e instanceof Et?Me:(n=Et(e))?(e=n,Me):Dr)(t,e)}function hl(t){return function(){this.removeAttribute(t)}}function dl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pl(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function gl(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function ml(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function vl(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function _l(t,e){var n=Ee(t),r=n==="transform"?ys:Wr;return this.attrTween(t,typeof e=="function"?(n.local?vl:ml)(n,r,_n(this,"attr."+t,e)):e==null?(n.local?dl:hl)(n):(n.local?gl:pl)(n,r,e))}function yl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wl(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&xl(t,a)),n}return i._value=e,i}function bl(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&yl(t,a)),n}return i._value=e,i}function Ml(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ee(t);return this.tween(n,(r.local?wl:bl)(r,e))}function Al(t,e){return function(){vn(this,t).delay=+e.apply(this,arguments)}}function kl(t,e){return e=+e,function(){vn(this,t).delay=e}}function $l(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Al:kl)(e,t)):ot(this.node(),e).delay}function Nl(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function Sl(t,e){return e=+e,function(){ct(this,t).duration=e}}function El(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Nl:Sl)(e,t)):ot(this.node(),e).duration}function Cl(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function Tl(t){var e=this._id;return arguments.length?this.each(Cl(e,t)):ot(this.node(),e).ease}function Rl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ct(this,t).ease=n}}function Il(t){if(typeof t!="function")throw new Error;return this.each(Rl(this._id,t))}function Fl(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new vt(r,this._parents,this._name,this._id)}function Dl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],f=l.length,h=o[s]=new Array(f),c,d=0;d<f;++d)(c=l[d]||u[d])&&(h[d]=c);for(;s<r;++s)o[s]=e[s];return new vt(o,this._parents,this._name,this._id)}function Ll(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Pl(t,e,n){var r,i,a=Ll(e)?vn:ct;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function Bl(t,e){var n=this._id;return arguments.length<2?ot(this.node(),n).on.on(t):this.each(Pl(n,t,e))}function Ol(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hl(){return this.on("end.remove",Ol(this._id))}function ql(t){var e=this._name,n=this._id;typeof t!="function"&&(t=on(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Te(u[c],e,n,c,u,ot(f,n)));return new vt(a,this._parents,e,n)}function zl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mr(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=t.call(f,f.__data__,h,l),d,p=ot(f,n),g=0,y=c.length;g<y;++g)(d=c[g])&&Te(d,e,n,g,c,p);a.push(c),o.push(f)}return new vt(a,o,e,n)}var Vl=le.prototype.constructor;function Ul(){return new Vl(this._groups,this._parents)}function Xl(t,e){var n,r,i;return function(){var a=Bt(this,t),o=(this.style.removeProperty(t),Bt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Zr(t){return function(){this.style.removeProperty(t)}}function Yl(t,e,n){var r,i=n+"",a;return function(){var o=Bt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Gl(t,e,n){var r,i,a;return function(){var o=Bt(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Bt(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function Wl(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=ct(this,t),u=l.on,f=l.value[a]==null?s||(s=Zr(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(o,i=f),l.on=r}}function Zl(t,e,n){var r=(t+="")=="transform"?_s:Wr;return e==null?this.styleTween(t,Xl(t,r)).on("end.style."+t,Zr(t)):typeof e=="function"?this.styleTween(t,Gl(t,r,_n(this,"style."+t,e))).each(Wl(this._id,t)):this.styleTween(t,Yl(t,r,e),n).on("end.style."+t,null)}function Kl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Jl(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Kl(t,o,n)),r}return a._value=e,a}function Ql(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Jl(t,e,n??""))}function jl(t){return function(){this.textContent=t}}function tu(t){return function(){var e=t(this);this.textContent=e??""}}function eu(t){return this.tween("text",typeof t=="function"?tu(_n(this,"text",t)):jl(t==null?"":t+""))}function nu(t){return function(e){this.textContent=t.call(this,e)}}function ru(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&nu(i)),e}return r._value=t,r}function iu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ru(t))}function au(){for(var t=this._name,e=this._id,n=Kr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var f=ot(l,e);Te(l,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new vt(r,this._parents,t,n)}function ou(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=ct(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var su=0;function vt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Kr(){return++su}var dt=le.prototype;vt.prototype={constructor:vt,select:ql,selectAll:zl,selectChild:dt.selectChild,selectChildren:dt.selectChildren,filter:Fl,merge:Dl,selection:Ul,transition:au,call:dt.call,nodes:dt.nodes,node:dt.node,size:dt.size,empty:dt.empty,each:dt.each,on:Bl,attr:_l,attrTween:Ml,style:Zl,styleTween:Ql,text:eu,textTween:iu,remove:Hl,tween:cl,delay:$l,duration:El,ease:Tl,easeVarying:Il,end:ou,[Symbol.iterator]:dt[Symbol.iterator]};function lu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uu={time:null,delay:0,duration:250,ease:lu};function fu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function cu(t){var e,n;t instanceof vt?(e=t._id,t=t._name):(e=Kr(),(n=uu).time=mn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Te(l,t,e,u,o,n||fu(l,e));return new vt(r,this._parents,t,e)}le.prototype.interrupt=ll;le.prototype.transition=cu;const nn=Math.PI,rn=2*nn,kt=1e-6,hu=rn-kt;function Jr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function du(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Jr;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class pu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Jr:du(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,f=o-e,h=s-n,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>kt)if(!(Math.abs(h*l-u*f)>kt)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-s,g=l*l+u*u,y=d*d+p*p,_=Math.sqrt(g),k=Math.sqrt(c),x=a*Math.tan((nn-Math.acos((g+c-y)/(2*_*k)))/2),S=x/k,m=x/_;Math.abs(S-1)>kt&&this._append`L${e+S*f},${n+S*h}`,this._append`A${a},${a},0,0,${+(h*d>f*p)},${this._x1=e+m*l},${this._y1=n+m*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,f=n+l,h=1^o,c=o?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>kt||Math.abs(this._y1-f)>kt)&&this._append`L${u},${f}`,r&&(c<0&&(c=c%rn+rn),c>hu?this._append`A${r},${r},0,1,${h},${e-s},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:c>kt&&this._append`A${r},${r},0,${+(c>=nn)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ft(t){return function(){return t}}function gu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new pu(e)}function mu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qr(t){this._context=t}Qr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function jr(t){return new Qr(t)}function vu(t){return t[0]}function _u(t){return t[1]}function yu(t,e){var n=Ft(!0),r=null,i=jr,a=null,o=gu(s);t=typeof t=="function"?t:t===void 0?vu:Ft(t),e=typeof e=="function"?e:e===void 0?_u:Ft(e);function s(l){var u,f=(l=mu(l)).length,h,c=!1,d;for(r==null&&(a=i(d=o())),u=0;u<=f;++u)!(u<f&&n(h=l[u],u,l))===c&&((c=!c)?a.lineStart():a.lineEnd()),c&&a.point(+t(h,u,l),+e(h,u,l));if(d)return a=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ft(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ft(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Ft(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}var xu=ei(jr);function ti(t){this._curve=t}ti.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function ei(t){function e(n){return new ti(t(n))}return e._curve=t,e}function wu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(ei(n)):e()._curve},t}function bu(){return wu(yu().curve(xu))}function Qt(t,e,n){this.k=t,this.x=e,this.y=n}Qt.prototype={constructor:Qt,scale:function(t){return t===1?this:new Qt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Qt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Qt.prototype;var Mu=wt("<option> </option>"),Au=wt("<option> </option>"),ku=wt('<div style="color: #ef4444; padding: 1rem; text-align: center;">No patients match the selected criteria.</div>'),$u=wt('<div><div class="filter-controls svelte-i1wti4" style="margin-bottom: 1.5rem;"><label for="group-select" style="font-weight:600;">Group By:</label> <select id="group-select" style="margin:0 1rem 0.5rem 0;"><option>Surgery Type</option><option>Department</option></select> <label for="group-value" style="font-weight:600;">Filter Value:</label> <select id="group-value" style="margin:0 1rem 0.5rem 0;"><option>All</option><!></select> <label for="department" style="font-weight:600;">Department:</label> <select id="department" style="margin:0 1rem 0.5rem 0;"><option>All</option><!></select> <div style="margin-top: 0.5rem;"><label style="font-weight:600;">Age Range:</label> <input type="number" min="0" max="120" style="width:60px; margin:0 0.5rem;"/> <span>to</span> <input type="number" min="0" max="120" style="width:60px; margin:0 0.5rem;"/></div></div> <div></div> <!></div>');function Nu(t,e){Vt(e,!1);const n=q();let r=ut(e,"patients",24,()=>[]),i=ut(e,"groupBy",12,"optype"),a=ut(e,"ageRange",28,()=>[0,120]),o=ut(e,"selectedDepartment",12,null),s=q(null),l=q(),u=q([]);const f=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function h($,T){return typeof $[T]=="number"?$[T]:null}function c($){return $.length?f.map(({label:T,key:I})=>{const F=$.map(N=>h(N,I)).filter(N=>N!==null);if(!F.length)return{label:T,key:I,mean:null,min:null,max:null};const J=7*24*60*60,Q=F.filter(N=>Math.abs(N)<J);if(Q.length===0||Q.length<F.length*.1&&Q.length<5)return console.warn(`Outlier filtering removed all or most data for ${T}. Original: ${F.length}, Filtered: ${Q.length}`),{label:T,key:I,mean:null,min:null,max:null};const P=Xo(Q),G=Uo(Q),j=ln(Q);return{label:T,key:I,mean:P,min:G,max:j}}):f.map(({label:T,key:I})=>({label:T,key:I,mean:null,min:null,max:null}))}let d=q([]);function p(){if(!v(l)||(gt(l,v(l).innerHTML=""),!v(d).length))return;const $=800,T=280,I=160,F=v(d).filter(H=>H.mean!==null),J=F.map(H=>H.mean),Q=ee(J);let[P,G]=Q;P===G&&(P-=60,G+=60);const j=P/60,N=G/60,W=(N-j)*.05,ht=j>=0&&j<W&&P>=0?0:j-W,Tt=N+W,_t=mt(v(l)).append("svg").attr("width",$).attr("height",T),V=f.map(H=>H.label),Xt=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],Rt=fn().domain(V).range(Xt),It=ae().domain([ht,Tt]).range([I+40,$-60]).nice(),fe=gn(It).ticks(Math.min(F.length+1,10));_t.append("g").attr("transform",`translate(0,${T/2})`).call(fe.tickFormat(H=>`${Math.round(H)} min`)).selectAll("text").style("font-size","12px");const bt=mt(v(l)).append("div").attr("class","tooltip").style("position","absolute").style("padding","6px 10px").style("background","#333").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);_t.selectAll("circle.event-marker").data(F).enter().append("circle").attr("class","event-marker").attr("cx",H=>It(H.mean/60)).attr("cy",T/2).attr("r",10).attr("fill",H=>Rt(H.label)).on("mouseover",(H,At)=>{bt.transition().duration(200).style("opacity",1),bt.html(`<strong>${At.label}</strong><br>${(At.mean/60).toFixed(1)} min`)}).on("mousemove",H=>{bt.style("left",`${H.pageX+10}px`).style("top",`${H.pageY-30}px`)}).on("mouseout",()=>{bt.transition().duration(200).style("opacity",0)}),_t.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(f).enter().append("g").attr("transform",(H,At)=>`translate(0, ${At*25})`).each(function(H){const At=mt(this);At.append("circle").attr("r",8).attr("cy",0).attr("fill",Rt(H.label)),At.append("text").attr("x",16).attr("y",5).attr("font-size",13).attr("fill","#222").text(H.label)}),_t.append("text").attr("x",$-60).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${v(n).length} patients`);let tt="";v(s)&&(tt+=`${i()==="optype"?"Surgery Type":"Department"}: ${v(s)}`),o()&&(tt+=tt?`, Department: ${o()}`:`Department: ${o()}`),(a()[0]>0||a()[1]<120)&&(tt+=tt?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),tt&&_t.append("text").attr("x",100).attr("y",20).attr("font-size",12).attr("fill","#666").text(tt);const Mt=Tt-ht;_t.append("text").attr("x",$-60).attr("y",T-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(Mt)} min`)}se(()=>{v(l)&&p()}),xt(()=>(nt(r()),v(s),nt(i()),nt(o()),nt(a())),()=>{O(n,r().filter($=>(!v(s)||$[i()]===v(s))&&(!o()||$.department===o())&&$.age>=a()[0]&&$.age<=a()[1]))}),xt(()=>(nt(r()),nt(i())),()=>{O(u,Array.from(new Set(r().map($=>$[i()]))).filter(Boolean))}),xt(()=>(v(n),v(l)),()=>{O(d,c(v(n))),v(l)&&p()}),sr(),zt();var g=$u(),y=M(g),_=b(M(y),2);$t(()=>{i(),Fe(()=>{})});var k=M(_);k.value=k.__value="optype";var x=b(k);x.value=x.__value="department",A(_);var S=b(_,4);$t(()=>{v(s),Fe(()=>{v(u)})});var m=M(S);m.value=(m.__value=null)??"";var R=b(m);kn(R,1,()=>v(u),An,($,T)=>{var I=Mu(),F={},J=M(I,!0);A(I),$t(()=>{F!==(F=v(T))&&(I.value=(I.__value=v(T))??""),X(J,v(T))}),lt($,I)}),A(S);var E=b(S,4);$t(()=>{o(),Fe(()=>{r()})});var C=M(E);C.value=(C.__value=null)??"";var D=b(C);kn(D,1,()=>Array.from(new Set(r().map($=>$.department))).filter(Boolean),An,($,T)=>{var I=Au(),F={},J=M(I,!0);A(I),$t(()=>{F!==(F=v(T))&&(I.value=(I.__value=v(T))??""),X(J,v(T))}),lt($,I)}),A(E);var z=b(E,2),w=b(M(z),2);Dt(w);var B=b(w,4);Dt(B),A(z),A(y);var L=b(y,2);ne(L,$=>O(l,$),()=>v(l));var Y=b(L,2);{var st=$=>{var T=ku();lt($,T)};fr(Y,$=>{v(n).length===0&&$(st)})}A(g),Pe(_,i),Pe(S,()=>v(s),$=>O(s,$)),Pe(E,o),jt(w,()=>a()[0],$=>a(a()[0]=$,!0)),jt(B,()=>a()[1],$=>a(a()[1]=$,!0)),lt(t,g),Ut()}var Su=wt('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><h3 class="text-lg font-semibold">Current Filters</h3> <div class="grid grid-cols-2 gap-4"><div><p class="text-sm text-gray-600">Age</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">BMI</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">ASA Score</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Emergency Case</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p></div></div> <div class="mt-4 text-sm text-gray-600"> </div></div>');function Eu(t,e){Vt(e,!1);const n=q(),r=q(),i=q(),a=q();let o=ut(e,"predictors",8),s=ut(e,"cases",24,()=>[]),l=q(0),u=q(0),f=q(0),h=q(0);xt(()=>nt(s()),()=>{O(n,s().length>0?{min:Math.min(...s().map(V=>V.age)),max:Math.max(...s().map(V=>V.age))}:{min:0,max:0})}),xt(()=>nt(s()),()=>{O(r,s().length>0?{min:Math.min(...s().map(V=>V.bmi)),max:Math.max(...s().map(V=>V.bmi))}:{min:0,max:0})}),xt(()=>nt(s()),()=>{O(i,s().length>0?[...new Set(s().map(V=>V.asa))].sort():[])}),xt(()=>nt(s()),()=>{O(a,s().length>0?[...new Set(s().map(V=>V.emergency).filter(V=>!isNaN(V)))].sort():[])}),xt(()=>(nt(s()),nt(o())),()=>{if(s().length>0){const V=s().filter(U=>Math.abs(U.age-o().age)<=10),Xt=s().filter(U=>Math.abs(U.bmi-o().bmi)<=5),Rt=s().filter(U=>U.asa===o().asa),It=s().filter(U=>!isNaN(U.emergency)&&U.emergency===o().emergency),rt=V.filter(U=>Xt.includes(U)).filter(U=>Rt.includes(U)).filter(U=>It.includes(U));if(O(h,rt.length),rt.length>0){const U=rt.reduce((tt,Mt)=>{const H=Number(Mt.icu_days);return tt+(isNaN(H)?0:H)},0);O(l,Math.max(0,U/rt.length)),O(u,Math.max(0,rt.reduce((tt,Mt)=>tt+(Mt.death_inhosp||0),0)/rt.length)),O(f,Math.max(0,rt.reduce((tt,Mt)=>tt+(Mt.intraop_ebl||0),0)/rt.length))}else O(l,0),O(u,0),O(f,0)}}),sr(),zt();var c=Su(),d=b(M(c),2),p=M(d),g=b(M(p),2),y=M(g);A(g);var _=b(g,2),k=M(_);A(_),A(p);var x=b(p,2),S=b(M(x),2),m=M(S,!0);A(S);var R=b(S,2),E=M(R);A(R),A(x);var C=b(x,2),D=b(M(C),2),z=M(D,!0);A(D);var w=b(D,2),B=M(w);A(w),A(C);var L=b(C,2),Y=b(M(L),2),st=M(Y,!0);A(Y);var $=b(Y,2),T=M($);A($),A(L),A(d);var I=b(d,4),F=M(I),J=b(M(F),2),Q=M(J);A(J),A(F);var P=b(F,2),G=b(M(P),2),j=M(G);A(G),A(P);var N=b(P,2),W=b(M(N),2),ht=M(W);A(W),A(N),A(I);var Tt=b(I,2),_t=M(Tt);A(Tt),A(c),$t((V,Xt,Rt,It,fe,bt,rt)=>{X(y,`${o().age??""} years`),X(k,`Range in data: ${v(n).min??""} - ${v(n).max??""}`),X(m,o().bmi),X(E,`Range in data: ${V??""} - ${Xt??""}`),X(z,o().asa),X(B,`Available values: ${Rt??""}`),X(st,o().emergency===1?"Yes":"No"),X(T,`Available values: ${It??""}`),X(Q,`${fe??""} days`),X(j,`${bt??""}%`),X(ht,`${rt??""} mL`),X(_t,`Based on ${v(h)??""} similar cases in our database`)},[()=>v(r).min.toFixed(1),()=>v(r).max.toFixed(1),()=>v(i).join(", "),()=>v(a).join(", "),()=>v(l).toFixed(1),()=>(v(u)*100).toFixed(1),()=>v(f).toFixed(0)],er),lt(t,c),Ut()}var Cu=wt('<svg class="mx-auto w-full max-w-md"></svg> <div class="radar-tip svelte-qgx6cs"></div>',1);function Tu(t,e){Vt(e,!1);let n=ut(e,"high",8),r=ut(e,"low",8);const i=[{key:"death_inhosp",label:"Mortality (%)"},{key:"icu_days",label:"ICU Stay (days)"},{key:"intraop_ebl",label:"Blood Loss (mL)"}];let a=q(),o=q();const s=140,l=d=>Math.PI*2/i.length*d;function u(){if(!n()||!r())return;mt(v(a)).attr("viewBox","-240 -180 470 360").selectAll("*").remove();const d=i.map((m,R)=>{const E=+n()[m.key]||0,C=+r()[m.key]||0,D=Math.max(E,C)||1;return{a:m,hi:E,lo:C,hiN:E/D,loN:C/D}}),p=bu().radius(m=>m*s).angle((m,R)=>l(R)),g=mt(v(a)).append("g");for(let m=1;m<=4;m++)g.append("circle").attr("r",s*m/4).attr("fill","none").attr("stroke","#bbb").attr("stroke-dasharray","3 3");d.forEach((m,R)=>{const E=Math.sin(l(R))*s,C=-Math.cos(l(R))*s;g.append("line").attr("x1",0).attr("y1",0).attr("x2",E).attr("y2",C).attr("stroke","#888"),g.append("text").attr("x",E*1.13).attr("y",C*1.13).attr("text-anchor",E>=0?"start":"end").attr("alignment-baseline","middle").attr("font-size",12).text(m.a.label)});const y="#1f77b4",_="#d62728",k=d.map(m=>m.hiN).concat(d[0].hiN),x=d.map(m=>m.loN).concat(d[0].loN);g.append("path").datum(x).attr("d",p).attr("fill",y).attr("fill-opacity",.35).attr("stroke",y).attr("stroke-width",2),g.append("path").datum(k).attr("d",p).attr("fill",_).attr("fill-opacity",.35).attr("stroke",_).attr("stroke-width",2);const S=(m,R,E)=>{g.selectAll(".dot-"+m).data(d).enter().append("circle").attr("class","dot-"+m).attr("r",4).attr("cx",(C,D)=>Math.sin(l(D))*C[m]*s).attr("cy",(C,D)=>-Math.cos(l(D))*C[m]*s).attr("fill",E).on("mouseover",(C,D)=>{gt(o,v(o).style.opacity="1"),gt(o,v(o).textContent=`${D.a.label}: ${D[R]}`)}).on("mousemove",C=>gt(o,v(o).style.transform=`translate(${C.pageX+12}px,${C.pageY-24}px)`)).on("mouseout",()=>gt(o,v(o).style.opacity="0"))};S("hiN","hi",_),S("loN","lo",y),g.append("rect").attr("x",-50).attr("y",s+22).attr("width",12).attr("height",12).attr("fill",_),g.append("text").attr("x",-30).attr("y",s+32).text("High-risk").attr("font-size",12),g.append("rect").attr("x",60).attr("y",s+22).attr("width",12).attr("height",12).attr("fill",y),g.append("text").attr("x",80).attr("y",s+32).text("Low-risk").attr("font-size",12)}se(u),an(u),zt();var f=Cu(),h=lr(f);ne(h,d=>O(a,d),()=>v(a));var c=b(h,2);ne(c,d=>O(o,d),()=>v(o)),lt(t,f),Ut()}var Ru=wt('<div class="flex justify-center"><!></div>'),Iu=wt(`<h1>Title here</h1> <section><h2>Explore Patient Demographics</h2> <div class="flex flex-col items-center gap-8 md:flex-row"><div class="space-y-4 md:w-1/2"><p>Before diving into outcomes, it's critical to understand who our patients are. Here we plot
				the age distribution of all surgical cases alongside a breakdown of procedure types by
				department. The age histogram reveals the full span of adult patients—ranging from young
				adults in their twenties to seniors in their eighties—highlighting that risk profiles may
				vary substantially across that range.</p> <p>The department bar chart then shows which specialties contribute most to our dataset.
				General surgery leads by volume, but thoracic and urologic procedures also form significant
				cohorts. By surfacing these basic patterns, we equip viewers with the demographic and
				procedural context needed to interpret subsequent analyses of risk and outcomes.</p></div> <div class="space-y-8 md:w-1/2"><!> <!></div></div></section> <section><h2>Average Phase Durations Over Departments</h2> <p class="mb-4">For each surgical department, this line chart shows the average minutes spent in 1) Anesthesia
		(from anesthesia start to operation start), 2) Surgery (operation start to end), and 3) Recovery
		(operation end to discharge).</p> <div class="mx-auto w-full md:w-4/5"><!></div></section> <h1>The Tension</h1> <section class="space-y-6"><h2 id="dynamic-comparison">Dynamic Comparison — Median Outcomes for High-Risk vs Low-Risk Cohorts</h2> <p>We summarise the <strong>highest-risk cohort&nbsp;(A)</strong> (worst composite score) and the <strong>lowest-risk decile&nbsp;(B)</strong>. The radar chart shows median values for <em>mortality&nbsp;(%)</em>, <em>ICU-stay&nbsp;(days)</em>, and <em>blood loss&nbsp;(mL)</em>. A vertex farther from the centre signals a worse outcome.</p> <!> <h3>What the chart reveals</h3> <ul class="list-inside list-disc space-y-1"><li><strong>Mortality</strong> — cohort&nbsp;A shows a non-zero median mortality, whereas cohort&nbsp;B’s
			median is 0&nbsp;%; hover the red and blue vertices to see exact percentages.</li> <li><strong>ICU-stay</strong> — high-risk patients spend roughly <span class="font-semibold">4× longer</span> in the ICU.</li> <li><strong>Blood loss</strong> — median intra-operative blood loss is markedly higher for cohort&nbsp;A.</li></ul> <p>The outward-bulging red polygon demonstrates how pre-operative factors magnify surgical risk
		across <em>all</em> major outcomes. Hover any point to inspect the underlying medians.</p></section> <section><h2>Build Your Own Patient</h2> <div class="flex flex-col items-center gap-8 md:flex-row-reverse"><div class="space-y-4 md:w-1/2"><p>What if you could dial in exactly the characteristics of a patient and instantly preview
				their risks? Use the sliders below to set age, BMI, ASA physical status, and toggle
				emergency status. These inputs feed a simple predictive model that estimates both ICU stay
				duration and in-hospital mortality percentage.</p> <p>This interactive "risk profile" tool brings theory into practice: you'll see how even a
				single-point change in ASA score or marking the case as emergency can shift predicted ICU
				days by several hours or double mortality probability. Experiment freely to build intuition
				about how each factor compounds overall risk.</p> <div><label class="block font-medium"> </label> <input type="range" min="0" max="100" class="w-full"/></div> <div><label class="block font-medium"> </label> <input type="range" min="10" max="50" step="1" class="w-full"/></div> <div><label class="block font-medium"> </label> <input type="range" min="1" max="5" class="w-full"/></div> <div class="flex items-center space-x-2"><input type="checkbox"/> <label>Emergency Case</label></div></div> <div class="md:w-1/2"><!></div></div></section>`,1);function qu(t,e){Vt(e,!1);let n=q([]),r=q(null),i=q(null),a=q({age:65,bmi:28,asa:3,emergency:0});const o=P=>P===""||P==null?NaN:+P;se(async()=>{const P=`${Ni}/cases.csv`;O(n,await Xi(P,N=>{const W=N.emergency?Number(N.emergency):0;isNaN(W)&&console.warn("Invalid emergency value:",N.emergency,"defaulting to 0");const ht=N.icu_days?Number(N.icu_days):0;return isNaN(ht)&&console.warn("Invalid ICU stay value:",N.icu_days,"defaulting to 0"),{caseid:N.caseid,age:+N.age,sex:N.sex??"M",bmi:+N.bmi,department:N.department,asa:+N.asa,emergency:W,casestart:+N.casestart,anestart:+N.anestart,opstart:+N.opstart,opend:+N.opend,dis:+N.dis,icu_days:ht,intraop_ebl:+N.intraop_ebl,death_inhosp:+N.death_inhosp,preop_htn:o(N.preop_htn),preop_dm:o(N.preop_dm)}}));const G=N=>[N.icu_days,N.intraop_ebl,N.death_inhosp].every(W=>!isNaN(W)&&W>0),j=N=>N.death_inhosp*100+N.icu_days+N.intraop_ebl/500;if(v(n).length){const N=v(n).filter(G).sort((W,ht)=>j(ht)-j(W));O(r,N[0]??null),O(i,N[Math.floor(N.length*.1)]??null)}}),zt();var s=Iu(),l=b(lr(s),2),u=b(M(l),2),f=b(M(u),2),h=M(f);Ws(h,{get data(){return v(n)}});var c=b(h,2);Ks(c,{get data(){return v(n)}}),A(f),A(u),A(l);var d=b(l,2),p=b(M(d),4),g=M(p);Nu(g,{get patients(){return v(n)}}),A(p),A(d);var y=b(d,4),_=b(M(y),4);{var k=P=>{var G=Ru(),j=M(G);Tu(j,{get high(){return v(r)},get low(){return v(i)}}),A(G),lt(P,G)};fr(_,P=>{v(r)&&v(i)&&P(k)})}Mn(6),A(y);var x=b(y,2),S=b(M(x),2),m=M(S),R=b(M(m),4),E=M(R),C=M(E);A(E);var D=b(E,2);Dt(D),A(R);var z=b(R,2),w=M(z),B=M(w);A(w);var L=b(w,2);Dt(L),A(z);var Y=b(z,2),st=M(Y),$=M(st);A(st);var T=b(st,2);Dt(T),A(Y);var I=b(Y,2),F=M(I);Dt(F),Mn(2),A(I),A(m);var J=b(m,2),Q=M(J);Eu(Q,{get predictors(){return v(a)},get cases(){return v(n)}}),A(J),A(S),A(x),$t(()=>{X(C,`Age: ${v(a).age??""}`),X(B,`BMI: ${v(a).bmi??""}`),X($,`ASA Score: ${v(a).asa??""}`),Ii(F,v(a).emergency===1)}),jt(D,()=>v(a).age,P=>gt(a,v(a).age=P)),jt(L,()=>v(a).bmi,P=>gt(a,v(a).bmi=P)),jt(T,()=>v(a).asa,P=>gt(a,v(a).asa=P)),$i("change",F,()=>gt(a,v(a).emergency=v(a).emergency===1?0:1)),lt(t,s),Ut()}export{qu as component};
