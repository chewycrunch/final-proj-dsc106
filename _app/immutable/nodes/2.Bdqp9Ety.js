import{f as ut,a as ot,c as ws}from"../chunks/DoRUkMhY.js";import{i as Re}from"../chunks/CTrH24o-.js";import{o as ue,c as Qi,a as Zi}from"../chunks/52fD4koz.js";import{C as tr,w as Lt,a9 as ks,ai as As,y as Ms,x as $s,g as c,Q as ie,z as Ss,A as Es,B as oi,D as er,J as He,ac as Ns,F as Ji,G as ji,I as Cs,au as ta,ag as ea,i as na,X as U,av as li,aw as nr,M as br,a5 as ui,ax as qr,ay as Ts,az as Br,aA as ci,aB as Is,af as Fs,aC as Rs,ar as Ds,aD as zs,aa as Ps,aE as Ls,aF as qs,aG as Bs,aH as Os,aI as Hs,aJ as Xs,b as ra,L as Or,aK as ia,a7 as Us,K as aa,aL as Vs,p as de,aq as Ys,q as E,m as pe,o as C,v as I,t as Ut,aM as st,W as R,e as pt,aN as De,aO as fi,aP as ee,k as _n,at as Ct}from"../chunks/BB7v2pX3.js";import{a as Ws,l as Fn,s as dt,e as Se}from"../chunks/CmBeYHHS.js";import{p as Tt,b as Rn,i as Et}from"../chunks/oI3_PeFi.js";import{w as Gs,b as Ks}from"../chunks/BVml9c8X.js";import{s as un,c as cn}from"../chunks/DOzdMIMB.js";function sa(t,e){return e}function Qs(t,e,n,r){for(var i=[],a=e.length,s=0;s<a;s++)Is(e[s].e,i,!0);var o=a>0&&i.length===0&&n!==null;if(o){var l=n.parentNode;Fs(l),l.append(n),r.clear(),ne(t,e[0].prev,e[a-1].next)}Rs(i,()=>{for(var u=0;u<a;u++){var h=e[u];o||(r.delete(h.k),ne(t,h.prev,h.next)),Ds(h.e,!o)}})}function oa(t,e,n,r,i,a=null){var s=t,o={flags:e,items:new Map,first:null},l=(e&ta)!==0;if(l){var u=t;s=Lt?tr(ks(u)):u.appendChild(As())}Lt&&Ms();var h=null,f=!1,d=ie(()=>{var g=n();return na(g)?g:g==null?[]:ea(g)});$s(()=>{var g=c(d),y=g.length;if(f&&y===0)return;f=y===0;let S=!1;if(Lt){var p=Ss(s)===Es;p!==(y===0)&&(s=oi(),tr(s),er(!1),S=!0)}if(Lt){for(var v=null,k,m=0;m<y;m++){if(He.nodeType===8&&He.data===Ns){s=He,S=!0,er(!1);break}var b=g[m],x=r(b,m);k=la(He,o,v,null,b,x,m,i,e,n),o.items.set(x,k),v=k}y>0&&tr(oi())}Lt||Zs(g,o,s,i,e,r,n),a!==null&&(y===0?h?Ji(h):h=ji(()=>a(s)):h!==null&&Cs(h,()=>{h=null})),S&&er(!0),c(d)}),Lt&&(s=He)}function Zs(t,e,n,r,i,a,s){var z,G,F,L;var o=(i&Ts)!==0,l=(i&(Br|qr))!==0,u=t.length,h=e.items,f=e.first,d=f,g,y=null,S,p=[],v=[],k,m,b,x;if(o)for(x=0;x<u;x+=1)k=t[x],m=a(k,x),b=h.get(m),b!==void 0&&((z=b.a)==null||z.measure(),(S??(S=new Set)).add(b));for(x=0;x<u;x+=1){if(k=t[x],m=a(k,x),b=h.get(m),b===void 0){var $=d?d.e.nodes_start:n;y=la($,e,y,y===null?e.first:y.next,k,m,x,r,i,s),h.set(m,y),p=[],v=[],d=y.next;continue}if(l&&Js(b,k,x,i),(b.e.f&nr)!==0&&(Ji(b.e),o&&((G=b.a)==null||G.unfix(),(S??(S=new Set)).delete(b))),b!==d){if(g!==void 0&&g.has(b)){if(p.length<v.length){var M=v[0],N;y=M.prev;var P=p[0],A=p[p.length-1];for(N=0;N<p.length;N+=1)hi(p[N],M,n);for(N=0;N<v.length;N+=1)g.delete(v[N]);ne(e,P.prev,A.next),ne(e,y,P),ne(e,A,M),d=M,y=A,x-=1,p=[],v=[]}else g.delete(b),hi(b,d,n),ne(e,b.prev,b.next),ne(e,b,y===null?e.first:y.next),ne(e,y,b),y=b;continue}for(p=[],v=[];d!==null&&d.k!==m;)(d.e.f&nr)===0&&(g??(g=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;b=d}p.push(b),y=b,d=b.next}if(d!==null||g!==void 0){for(var w=g===void 0?[]:ea(g);d!==null;)(d.e.f&nr)===0&&w.push(d),d=d.next;var B=w.length;if(B>0){var _=(i&ta)!==0&&u===0?n:null;if(o){for(x=0;x<B;x+=1)(F=w[x].a)==null||F.measure();for(x=0;x<B;x+=1)(L=w[x].a)==null||L.fix()}Qs(e,w,_,h)}}o&&br(()=>{var V;if(S!==void 0)for(b of S)(V=b.a)==null||V.apply()}),ui.first=e.first&&e.first.e,ui.last=y&&y.e}function Js(t,e,n,r){(r&Br)!==0&&ci(t.v,e),(r&qr)!==0?ci(t.i,n):t.i=n}function la(t,e,n,r,i,a,s,o,l,u){var h=(l&Br)!==0,f=(l&zs)===0,d=h?f?U(i):li(i):i,g=(l&qr)===0?s:li(s),y={i:g,v:d,k:a,a:null,e:null,prev:n,next:r};try{return y.e=ji(()=>o(t,d,g,u),Lt),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?e.first=y:(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function hi(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var s=Ps(a);i.before(a),a=s}}function ne(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const js=Symbol("is custom element"),to=Symbol("is html");function xt(t){if(Lt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;W(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;W(t,"checked",null),t.checked=i}}};t.__on_r=n,Ls(n),Ws()}}function W(t,e,n,r){var i=eo(t);Lt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[qs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&no(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function eo(t){return t.__attributes??(t.__attributes={[js]:t.nodeName.includes("-"),[to]:t.namespaceURI===Bs})}var di=new Map;function no(t){var e=di.get(t.nodeName);if(e)return e;di.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Hs(r);for(var a in n)n[a].set&&e.push(a);r=Os(r)}return e}const ro=()=>performance.now(),Wt={tick:t=>requestAnimationFrame(t),now:()=>ro(),tasks:new Set};function ua(){const t=Wt.now();Wt.tasks.forEach(e=>{e.c(t)||(Wt.tasks.delete(e),e.f())}),Wt.tasks.size!==0&&Wt.tick(ua)}function io(t){let e;return Wt.tasks.size===0&&Wt.tick(ua),{promise:new Promise(n=>{Wt.tasks.add(e={c:t,f:n})}),abort(){Wt.tasks.delete(e)}}}function jt(t,e,n=e){var r=Xs();Fn(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=ar(t)?sr(a):a,n(a),r&&a!==(a=e())){var s=t.selectionStart,o=t.selectionEnd;t.value=a??"",o!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(o,t.value.length))}}),(Lt&&t.defaultValue!==t.value||ra(e)==null&&t.value)&&n(ar(t)?sr(t.value):t.value),Or(()=>{var i=e();ar(t)&&i===sr(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}const rr=new Set;function ir(t,e,n,r,i=r){var a=n.getAttribute("type")==="checkbox",s=t;let o=!1;if(e!==null)for(var l of e)s=s[l]??(s[l]=[]);s.push(n),Fn(n,"change",()=>{var u=n.__value;a&&(u=pi(s,u,n.checked)),i(u)},()=>i(a?[]:null)),Or(()=>{var u=r();if(Lt&&n.defaultChecked!==n.checked){o=!0;return}a?(u=u||[],n.checked=u.includes(n.__value)):n.checked=ia(n.__value,u)}),Us(()=>{var u=s.indexOf(n);u!==-1&&s.splice(u,1)}),rr.has(s)||(rr.add(s),br(()=>{s.sort((u,h)=>u.compareDocumentPosition(h)===4?-1:1),rr.delete(s)})),br(()=>{if(o){var u;if(a)u=pi(s,u,n.checked);else{var h=s.find(f=>f.checked);u=h==null?void 0:h.__value}i(u)}})}function $e(t,e,n=e){Fn(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),(Lt&&t.defaultChecked!==t.checked||ra(e)==null)&&n(t.checked),Or(()=>{var r=e();t.checked=!!r})}function pi(t,e,n){for(var r=new Set,i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function ar(t){var e=t.type;return e==="number"||e==="range"}function sr(t){return t===""?null:+t}function ca(t,e,n){if(t.multiple)return e==null?void 0:na(e)?so(t,e):Vs();for(var r of t.options){var i=Qe(r);if(ia(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ao(t,e){aa(()=>{var n=new MutationObserver(()=>{var r=t.__value;ca(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function gi(t,e,n=e){var r=!0;Fn(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Qe);else{var o=t.querySelector(a)??t.querySelector("option:not([disabled])");s=o&&Qe(o)}n(s)}),aa(()=>{var i=e();if(ca(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Qe(a),n(i))}t.__value=i,r=!1}),ao(t)}function so(t,e){for(var n of t.options)n.selected=e.includes(Qe(n))}function Qe(t){return"__value"in t?t.__value:t.value}var mi={},or={},lr=34,Xe=10,ur=13;function fa(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function oo(t,e){var n=fa(t);return function(r,i){return e(n(r),i,t)}}function vi(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function St(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lo(t){return t<0?"-"+St(-t,6):t>9999?"+"+St(t,6):St(t,4)}function uo(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":lo(t.getUTCFullYear())+"-"+St(t.getUTCMonth()+1,2)+"-"+St(t.getUTCDate(),2)+(i?"T"+St(e,2)+":"+St(n,2)+":"+St(r,2)+"."+St(i,3)+"Z":r?"T"+St(e,2)+":"+St(n,2)+":"+St(r,2)+"Z":n||e?"T"+St(e,2)+":"+St(n,2)+"Z":"")}function co(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var g,y,S=i(f,function(p,v){if(g)return g(p,v-1);y=p,g=d?oo(p,d):fa(p)});return S.columns=y||[],S}function i(f,d){var g=[],y=f.length,S=0,p=0,v,k=y<=0,m=!1;f.charCodeAt(y-1)===Xe&&--y,f.charCodeAt(y-1)===ur&&--y;function b(){if(k)return or;if(m)return m=!1,mi;var $,M=S,N;if(f.charCodeAt(M)===lr){for(;S++<y&&f.charCodeAt(S)!==lr||f.charCodeAt(++S)===lr;);return($=S)>=y?k=!0:(N=f.charCodeAt(S++))===Xe?m=!0:N===ur&&(m=!0,f.charCodeAt(S)===Xe&&++S),f.slice(M+1,$-1).replace(/""/g,'"')}for(;S<y;){if((N=f.charCodeAt($=S++))===Xe)m=!0;else if(N===ur)m=!0,f.charCodeAt(S)===Xe&&++S;else if(N!==n)continue;return f.slice(M,$)}return k=!0,f.slice(M,y)}for(;(v=b())!==or;){for(var x=[];v!==mi&&v!==or;)x.push(v),v=b();d&&(x=d(x,p++))==null||g.push(x)}return g}function a(f,d){return f.map(function(g){return d.map(function(y){return h(g[y])}).join(t)})}function s(f,d){return d==null&&(d=vi(f)),[d.map(h).join(t)].concat(a(f,d)).join(`
`)}function o(f,d){return d==null&&(d=vi(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?uo(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:o,formatRows:l,formatRow:u,formatValue:h}}var fo=co(","),ho=fo.parse;function po(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function go(t,e){return fetch(t,e).then(po)}function mo(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),go(e,n).then(function(i){return t(i,r)})}}var vo=mo(ho);function yi(t){return Object.prototype.toString.call(t)==="[object Date]"}function yo(t){return t}function xo(t){const e=t-1;return e*e*e+1}function _r(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,a)=>_r(t[a],i));return i=>r.map(a=>a(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(yi(t)&&yi(e)){const a=t.getTime(),o=e.getTime()-a;return l=>new Date(a+l*o)}const r=Object.keys(e),i={};return r.forEach(a=>{i[a]=_r(t[a],e[a])}),a=>{const s={};return r.forEach(o=>{s[o]=i[o](a)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}return()=>e}function bo(t,e={}){const n=Gs(t);let r,i=t;function a(s,o){if(i=s,t==null)return n.set(t=s),Promise.resolve();let l=r,u=!1,{delay:h=0,duration:f=400,easing:d=yo,interpolate:g=_r}={...e,...o};if(f===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const y=Wt.now()+h;let S;return r=io(p=>{if(p<y)return!0;u||(S=g(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),l&&(l.abort(),l=null);const v=p-y;return v>f?(n.set(t=s),!1):(n.set(t=S(d(v/f))),!0)}),r.promise}return{set:a,update:(s,o)=>a(s(i,t),o),subscribe:n.subscribe}}var _o=ut('<div class="text-center"><h2 class="text-4xl font-extrabold tracking-tight tabular-nums svelte-19d6zus"> </h2> <p class="text-xs tracking-wide text-gray-500 uppercase"> </p></div>'),wo=ut('<div class="mt-6 flex flex-wrap justify-center gap-8"></div>');function ko(t,e){de(e,!0);let n=Tt(e,"duration",3,1200);const r=Ys(()=>e.stats.map(()=>bo(0,{duration:n(),easing:xo})));ue(()=>{let a=0;e.stats.forEach(({value:s},o)=>{setTimeout(()=>c(r)[o].set(s),a),a+=n()+400})});var i=wo();oa(i,21,()=>e.stats,sa,(a,s,o)=>{let l=()=>c(s).label;var u=_o(),h=C(u),f=C(h,!0);E(h);var d=I(h,2),g=C(d,!0);E(d),E(u),Ut(()=>{dt(f,e.stats[o].value),dt(g,l())}),ot(a,u)}),E(i),ot(t,i),pe()}var wr="http://www.w3.org/1999/xhtml";const xi={svg:"http://www.w3.org/2000/svg",xhtml:wr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xi.hasOwnProperty(e)?{space:xi[e],local:t}:t}function Ao(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wr&&e.documentElement.namespaceURI===wr?e.createElement(t):e.createElementNS(n,t)}}function Mo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ha(t){var e=Dn(t);return(e.local?Mo:Ao)(e)}function $o(){}function Hr(t){return t==null?$o:function(){return this.querySelector(t)}}function So(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new zt(r,this._parents)}function Eo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function No(){return[]}function da(t){return t==null?No:function(){return this.querySelectorAll(t)}}function Co(t){return function(){return Eo(t.apply(this,arguments))}}function To(t){typeof t=="function"?t=Co(t):t=da(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new zt(r,i)}function pa(t){return function(){return this.matches(t)}}function ga(t){return function(e){return e.matches(t)}}var Io=Array.prototype.find;function Fo(t){return function(){return Io.call(this.children,t)}}function Ro(){return this.firstElementChild}function Do(t){return this.select(t==null?Ro:Fo(typeof t=="function"?t:ga(t)))}var zo=Array.prototype.filter;function Po(){return Array.from(this.children)}function Lo(t){return function(){return zo.call(this.children,t)}}function qo(t){return this.selectAll(t==null?Po:Lo(typeof t=="function"?t:ga(t)))}function Bo(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new zt(r,this._parents)}function ma(t){return new Array(t.length)}function Oo(){return new zt(this._enter||this._groups.map(ma),this._parents)}function wn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wn.prototype={constructor:wn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ho(t){return function(){return t}}function Xo(t,e,n,r,i,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new wn(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Uo(t,e,n,r,i,a,s){var o,l,u=new Map,h=e.length,f=a.length,d=new Array(h),g;for(o=0;o<h;++o)(l=e[o])&&(d[o]=g=s.call(l,l.__data__,o,e)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<f;++o)g=s.call(t,a[o],o,a)+"",(l=u.get(g))?(r[o]=l,l.__data__=a[o],u.delete(g)):n[o]=new wn(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&u.get(d[o])===l&&(i[o]=l)}function Vo(t){return t.__data__}function Yo(t,e){if(!arguments.length)return Array.from(this,Vo);var n=e?Uo:Xo,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ho(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],d=f.length,g=Wo(t.call(h,h&&h.__data__,u,r)),y=g.length,S=o[u]=new Array(y),p=s[u]=new Array(y),v=l[u]=new Array(d);n(h,f,S,p,v,g,e);for(var k=0,m=0,b,x;k<y;++k)if(b=S[k]){for(k>=m&&(m=k+1);!(x=p[m])&&++m<y;);b._next=x||null}}return s=new zt(s,r),s._enter=o,s._exit=l,s}function Wo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Go(){return new zt(this._exit||this._groups.map(ma),this._parents)}function Ko(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Qo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=n[l],h=r[l],f=u.length,d=o[l]=new Array(f),g,y=0;y<f;++y)(g=u[y]||h[y])&&(d[y]=g);for(;l<i;++l)o[l]=n[l];return new zt(o,this._parents)}function Zo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Jo(t){t||(t=jo);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(l[h]=u);l.sort(e)}return new zt(i,this._parents).order()}function jo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function tl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function el(){return Array.from(this)}function nl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function rl(){let t=0;for(const e of this)++t;return t}function il(){return!this.node()}function al(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function sl(t){return function(){this.removeAttribute(t)}}function ol(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ll(t,e){return function(){this.setAttribute(t,e)}}function ul(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function cl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hl(t,e){var n=Dn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ol:sl:typeof e=="function"?n.local?fl:cl:n.local?ul:ll)(n,e))}function va(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dl(t){return function(){this.style.removeProperty(t)}}function pl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function gl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ml(t,e,n){return arguments.length>1?this.each((e==null?dl:typeof e=="function"?gl:pl)(t,e,n??"")):Ce(this.node(),t)}function Ce(t,e){return t.style.getPropertyValue(e)||va(t).getComputedStyle(t,null).getPropertyValue(e)}function vl(t){return function(){delete this[t]}}function yl(t,e){return function(){this[t]=e}}function xl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function bl(t,e){return arguments.length>1?this.each((e==null?vl:typeof e=="function"?xl:yl)(t,e)):this.node()[t]}function ya(t){return t.trim().split(/^|\s+/)}function Xr(t){return t.classList||new xa(t)}function xa(t){this._node=t,this._names=ya(t.getAttribute("class")||"")}xa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ba(t,e){for(var n=Xr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function _a(t,e){for(var n=Xr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function _l(t){return function(){ba(this,t)}}function wl(t){return function(){_a(this,t)}}function kl(t,e){return function(){(e.apply(this,arguments)?ba:_a)(this,t)}}function Al(t,e){var n=ya(t+"");if(arguments.length<2){for(var r=Xr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?kl:e?_l:wl)(n,e))}function Ml(){this.textContent=""}function $l(t){return function(){this.textContent=t}}function Sl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function El(t){return arguments.length?this.each(t==null?Ml:(typeof t=="function"?Sl:$l)(t)):this.node().textContent}function Nl(){this.innerHTML=""}function Cl(t){return function(){this.innerHTML=t}}function Tl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Il(t){return arguments.length?this.each(t==null?Nl:(typeof t=="function"?Tl:Cl)(t)):this.node().innerHTML}function Fl(){this.nextSibling&&this.parentNode.appendChild(this)}function Rl(){return this.each(Fl)}function Dl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zl(){return this.each(Dl)}function Pl(t){var e=typeof t=="function"?t:ha(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ll(){return null}function ql(t,e){var n=typeof t=="function"?t:ha(t),r=e==null?Ll:typeof e=="function"?e:Hr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bl(){var t=this.parentNode;t&&t.removeChild(this)}function Ol(){return this.each(Bl)}function Hl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ul(t){return this.select(t?Xl:Hl)}function Vl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Yl(t){return function(e){t.call(this,e,this.__data__)}}function Wl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Gl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Kl(t,e,n){return function(){var r=this.__on,i,a=Yl(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ql(t,e,n){var r=Wl(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(i=0,h=o[l];i<a;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?Kl:Gl,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function wa(t,e,n){var r=va(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Zl(t,e){return function(){return wa(this,t,e)}}function Jl(t,e){return function(){return wa(this,t,e.apply(this,arguments))}}function jl(t,e){return this.each((typeof e=="function"?Jl:Zl)(t,e))}function*tu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var ka=[null];function zt(t,e){this._groups=t,this._parents=e}function ze(){return new zt([[document.documentElement]],ka)}function eu(){return this}zt.prototype=ze.prototype={constructor:zt,select:So,selectAll:To,selectChild:Do,selectChildren:qo,filter:Bo,data:Yo,enter:Oo,exit:Go,join:Ko,merge:Qo,selection:eu,order:Zo,sort:Jo,call:tl,nodes:el,node:nl,size:rl,empty:il,each:al,attr:hl,style:ml,property:bl,classed:Al,text:El,html:Il,raise:Rl,lower:zl,append:Pl,insert:ql,remove:Ol,clone:Ul,datum:Vl,on:Ql,dispatch:jl,[Symbol.iterator]:tu};function Q(t){return typeof t=="string"?new zt([[document.querySelector(t)]],[document.documentElement]):new zt([[t]],ka)}function nu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bi(t,e){if(t=nu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ee(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Aa(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ma(t){let e,n,r;t.length!==2?(e=Ee,n=(o,l)=>Ee(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ee||t===Aa?t:ru,n=t,r=t);function i(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function s(o,l,u=0,h=o.length){const f=i(o,l,u,h-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function ru(){return 0}function iu(t){return t===null?NaN:+t}function*au(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const su=Ma(Ee),$a=su.right;Ma(iu).center;function ou(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function gn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class kr extends Map{constructor(e,n=cu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(_i(this,e))}has(e){return super.has(_i(this,e))}set(e,n){return super.set(lu(this,e),n)}delete(e){return super.delete(uu(this,e))}}function _i({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function uu({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cu(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Sa(t){return t}function fu(t,e,...n){return hu(t,Sa,e,n)}function hu(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const o=new kr,l=r[s++];let u=-1;for(const h of a){const f=l(h,++u,a),d=o.get(f);d?d.push(h):o.set(f,[h])}for(const[h,f]of o)o.set(h,i(f,s));return e(o)}(t,0)}function du(t=Ee){if(t===Ee)return Ea;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ea(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var pu=Array.prototype,gu=pu.slice;function cr(t){return()=>t}const mu=Math.sqrt(50),vu=Math.sqrt(10),yu=Math.sqrt(2);function kn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=mu?10:a>=vu?5:a>=yu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?kn(t,e,n*2):[o,l,u]}function Na(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?kn(e,t,n):kn(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Te(t,e,n){return e=+e,t=+t,n=+n,kn(t,e,n)[2]}function xu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Te(e,t,n):Te(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function bu(t,e,n){let r;for(;;){const i=Te(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function _u(t){return Math.max(1,Math.ceil(Math.log(ou(t))/Math.LN2)+1)}function wu(){var t=Sa,e=gn,n=_u;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,o,l,u=new Array(s);for(a=0;a<s;++a)u[a]=t(i[a],a,i);var h=e(u),f=h[0],d=h[1],g=n(u,f,d);if(!Array.isArray(g)){const m=d,b=+g;if(e===gn&&([f,d]=bu(f,d,b)),g=Na(f,d,b),g[0]<=f&&(l=Te(f,d,b)),g[g.length-1]>=d)if(m>=d&&e===gn){const x=Te(f,d,b);isFinite(x)&&(x>0?d=(Math.floor(d/x)+1)*x:x<0&&(d=(Math.ceil(d*-x)+1)/-x))}else g.pop()}for(var y=g.length,S=0,p=y;g[S]<=f;)++S;for(;g[p-1]>d;)--p;(S||p<y)&&(g=g.slice(S,p),y=p-S);var v=new Array(y+1),k;for(a=0;a<=y;++a)k=v[a]=[],k.x0=a>0?g[a-1]:f,k.x1=a<y?g[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[Math.min(y,Math.floor((o-f)/l))].push(i[a]);else if(l<0){for(a=0;a<s;++a)if((o=u[a])!=null&&f<=o&&o<=d){const m=Math.floor((f-o)*l);v[Math.min(y,m+(g[m]<=o))].push(i[a])}}}else for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[$a(g,o,0,y)].push(i[a]);return v}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:cr(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:cr([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:cr(Array.isArray(i)?gu.call(i):i),r):n},r}function Gt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ar(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ca(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Ea:du(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+d)),y=Math.min(r,Math.floor(e+(l-u)*f/l+d));Ca(t,e,g,y,i)}const a=t[e];let s=n,o=r;for(Ue(t,n,e),i(t[r],a)>0&&Ue(t,n,r);s<o;){for(Ue(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Ue(t,n,o):(++o,Ue(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Ue(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ze(t,e,n){if(t=Float64Array.from(au(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ar(t);if(e>=1)return Gt(t);var r,i=(r-1)*e,a=Math.floor(i),s=Gt(Ca(t,a).subarray(0,a+1)),o=Ar(t.subarray(a+1));return s+(o-s)*(i-a)}}function ku(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function mn(t,e){return Ze(t,.5,e)}function Au(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Mu(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Ur(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $u(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const wi=Symbol("implicit");function zn(){var t=new kr,e=[],n=[],r=wi;function i(a){let s=t.get(a);if(s===void 0){if(r!==wi)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new kr;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zn(e,n).unknown(r)},Ur.apply(i,arguments),i}function Ta(){var t=zn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,h=.5;delete t.unknown;function f(){var d=e().length,g=i<r,y=g?i:r,S=g?r:i;a=(S-y)/Math.max(1,d-l+u*2),o&&(a=Math.floor(a)),y+=(S-y-a*(d-l))*h,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var p=Au(d).map(function(v){return y+a*v});return n(g?p.reverse():p)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(d){return arguments.length?(o=!!d,f()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},t.copy=function(){return Ta(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(h)},Ur.apply(f(),arguments)}function Vr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ia(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function en(){}var Je=.7,An=1/Je,Ne="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Su=/^#([0-9a-f]{3,8})$/,Eu=new RegExp(`^rgb\\(${Ne},${Ne},${Ne}\\)$`),Nu=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),Cu=new RegExp(`^rgba\\(${Ne},${Ne},${Ne},${je}\\)$`),Tu=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${je}\\)$`),Iu=new RegExp(`^hsl\\(${je},${Kt},${Kt}\\)$`),Fu=new RegExp(`^hsla\\(${je},${Kt},${Kt},${je}\\)$`),ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vr(en,ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHex8:Ru,formatHsl:Du,formatRgb:Mi,toString:Mi});function Ai(){return this.rgb().formatHex()}function Ru(){return this.rgb().formatHex8()}function Du(){return Fa(this).formatHsl()}function Mi(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Su.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$i(e):n===3?new It(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Eu.exec(t))?new It(e[1],e[2],e[3],1):(e=Nu.exec(t))?new It(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cu.exec(t))?fn(e[1],e[2],e[3],e[4]):(e=Tu.exec(t))?fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Iu.exec(t))?Ni(e[1],e[2]/100,e[3]/100,1):(e=Fu.exec(t))?Ni(e[1],e[2]/100,e[3]/100,e[4]):ki.hasOwnProperty(t)?$i(ki[t]):t==="transparent"?new It(NaN,NaN,NaN,0):null}function $i(t){return new It(t>>16&255,t>>8&255,t&255,1)}function fn(t,e,n,r){return r<=0&&(t=e=n=NaN),new It(t,e,n,r)}function zu(t){return t instanceof en||(t=ce(t)),t?(t=t.rgb(),new It(t.r,t.g,t.b,t.opacity)):new It}function Mn(t,e,n,r){return arguments.length===1?zu(t):new It(t,e,n,r??1)}function It(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Vr(It,Mn,Ia(en,{brighter(t){return t=t==null?An:Math.pow(An,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Je:Math.pow(Je,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(le(this.r),le(this.g),le(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Si,formatHex:Si,formatHex8:Pu,formatRgb:Ei,toString:Ei}));function Si(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}`}function Pu(){return`#${oe(this.r)}${oe(this.g)}${oe(this.b)}${oe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ei(){const t=$n(this.opacity);return`${t===1?"rgb(":"rgba("}${le(this.r)}, ${le(this.g)}, ${le(this.b)}${t===1?")":`, ${t})`}`}function $n(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function le(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function oe(t){return t=le(t),(t<16?"0":"")+t.toString(16)}function Ni(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xt(t,e,n,r)}function Fa(t){if(t instanceof Xt)return new Xt(t.h,t.s,t.l,t.opacity);if(t instanceof en||(t=ce(t)),!t)return new Xt;if(t instanceof Xt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Xt(s,o,l,t.opacity)}function Lu(t,e,n,r){return arguments.length===1?Fa(t):new Xt(t,e,n,r??1)}function Xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Vr(Xt,Lu,Ia(en,{brighter(t){return t=t==null?An:Math.pow(An,t),new Xt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Je:Math.pow(Je,t),new Xt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new It(fr(t>=240?t-240:t+120,i,r),fr(t,i,r),fr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xt(Ci(this.h),hn(this.s),hn(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$n(this.opacity);return`${t===1?"hsl(":"hsla("}${Ci(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ci(t){return t=(t||0)%360,t<0?t+360:t}function hn(t){return Math.max(0,Math.min(1,t||0))}function fr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function qu(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function Bu(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return qu((n-r/e)*e,s,i,a,o)}}const Yr=t=>()=>t;function Ou(t,e){return function(n){return t+n*e}}function Hu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xu(t){return(t=+t)==1?Ra:function(e,n){return n-e?Hu(e,n,t):Yr(isNaN(e)?n:e)}}function Ra(t,e){var n=e-t;return n?Ou(t,n):Yr(isNaN(t)?e:t)}const Sn=function t(e){var n=Xu(e);function r(i,a){var s=n((i=Mn(i)).r,(a=Mn(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=Ra(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function Uu(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=Mn(e[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=t(r),i=t(i),a=t(a),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=a(l),o+""}}}var Vu=Uu(Bu);function Yu(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Wu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gu(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=nn(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ku(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qu(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Mr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hr=new RegExp(Mr.source,"g");function Zu(t){return function(){return t}}function Ju(t){return function(e){return t(e)+""}}function Da(t,e){var n=Mr.lastIndex=hr.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Mr.exec(t))&&(i=hr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Ht(r,i)})),n=hr.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ju(l[0].x):Zu(e):(e=l.length,function(u){for(var h=0,f;h<e;++h)o[(f=l[h]).i]=f.x(u);return o.join("")})}function nn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Yr(e):(n==="number"?Ht:n==="string"?(r=ce(e))?(e=r,Sn):Da:e instanceof ce?Sn:e instanceof Date?Ku:Wu(e)?Yu:Array.isArray(e)?Gu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qu:Ht)(t,e)}function za(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ti=180/Math.PI,$r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pa(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Ti,skewX:Math.atan(l)*Ti,scaleX:s,scaleY:o}}var dn;function ju(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?$r:Pa(e.a,e.b,e.c,e.d,e.e,e.f)}function tc(t){return t==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),!(t=dn.transform.baseVal.consolidate()))?$r:(t=t.matrix,Pa(t.a,t.b,t.c,t.d,t.e,t.f))}function La(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,g,y){if(u!==f||h!==d){var S=g.push("translate(",null,e,null,n);y.push({i:S-4,x:Ht(u,f)},{i:S-2,x:Ht(h,d)})}else(f||d)&&g.push("translate("+f+e+d+n)}function s(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ht(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function o(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ht(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function l(u,h,f,d,g,y){if(u!==f||h!==d){var S=g.push(i(g)+"scale(",null,",",null,")");y.push({i:S-4,x:Ht(u,f)},{i:S-2,x:Ht(h,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),s(u.rotate,h.rotate,f,d),o(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(g){for(var y=-1,S=d.length,p;++y<S;)f[(p=d[y]).i]=p.x(g);return f.join("")}}}var ec=La(ju,"px, ","px)","deg)"),nc=La(tc,", ",")",")");function rc(t){return function(){return t}}function ic(t){return+t}var Ii=[0,1];function re(t){return t}function Sr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rc(isNaN(e)?NaN:.5)}function ac(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function sc(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Sr(i,r),a=n(s,a)):(r=Sr(r,i),a=n(a,s)),function(o){return a(r(o))}}function oc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Sr(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=$a(t,o,1,r)-1;return a[l](i[l](o))}}function lc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uc(){var t=Ii,e=Ii,n=nn,r,i,a,s=re,o,l,u;function h(){var d=Math.min(t.length,e.length);return s!==re&&(s=ac(t[0],t[d-1])),o=d>2?oc:sc,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(t.map(r),e,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=o(e,t.map(r),Ht)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,ic),h()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=za,h()},f.clamp=function(d){return arguments.length?(s=d?!0:re,h()):s!==re},f.interpolate=function(d){return arguments.length?(n=d,h()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,g){return r=d,i=g,h()}}function cc(){return uc()(re,re)}function fc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function En(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ie(t){return t=En(Math.abs(t)),t?t[1]:NaN}function hc(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function dc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nn(t){if(!(e=pc.exec(t)))throw new Error("invalid format: "+t);var e;return new Wr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nn.prototype=Wr.prototype;function Wr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qa;function mc(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(qa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+En(t,Math.max(0,e+a-1))[0]}function Fi(t,e){var n=En(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ri={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fi(t*100,e),r:Fi,s:mc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Di(t){return t}var zi=Array.prototype.map,Pi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vc(t){var e=t.grouping===void 0||t.thousands===void 0?Di:hc(zi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Di:dc(zi.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Nn(f);var d=f.fill,g=f.align,y=f.sign,S=f.symbol,p=f.zero,v=f.width,k=f.comma,m=f.precision,b=f.trim,x=f.type;x==="n"?(k=!0,x="g"):Ri[x]||(m===void 0&&(m=12),b=!0,x="g"),(p||d==="0"&&g==="=")&&(p=!0,d="0",g="=");var $=S==="$"?n:S==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",M=S==="$"?r:/[%p]/.test(x)?s:"",N=Ri[x],P=/[defgprs%]/.test(x);m=m===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function A(w){var B=$,_=M,z,G,F;if(x==="c")_=N(w)+_,w="";else{w=+w;var L=w<0||1/w<0;if(w=isNaN(w)?l:N(Math.abs(w),m),b&&(w=gc(w)),L&&+w==0&&y!=="+"&&(L=!1),B=(L?y==="("?y:o:y==="-"||y==="("?"":y)+B,_=(x==="s"?Pi[8+qa/3]:"")+_+(L&&y==="("?")":""),P){for(z=-1,G=w.length;++z<G;)if(F=w.charCodeAt(z),48>F||F>57){_=(F===46?i+w.slice(z+1):w.slice(z))+_,w=w.slice(0,z);break}}}k&&!p&&(w=e(w,1/0));var V=B.length+w.length+_.length,D=V<v?new Array(v-V+1).join(d):"";switch(k&&p&&(w=e(D+w,D.length?v-_.length:1/0),D=""),g){case"<":w=B+w+_+D;break;case"=":w=B+D+w+_;break;case"^":w=D.slice(0,V=D.length>>1)+B+w+_+D.slice(V);break;default:w=D+B+w+_;break}return a(w)}return A.toString=function(){return f+""},A}function h(f,d){var g=u((f=Nn(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Ie(d)/3)))*3,S=Math.pow(10,-y),p=Pi[8+y/3];return function(v){return g(S*v)+p}}return{format:u,formatPrefix:h}}var pn,Nt,Ba;yc({thousands:",",grouping:[3],currency:["$",""]});function yc(t){return pn=vc(t),Nt=pn.format,Ba=pn.formatPrefix,pn}function xc(t){return Math.max(0,-Ie(Math.abs(t)))}function bc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ie(e)/3)))*3-Ie(Math.abs(t)))}function _c(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ie(e)-Ie(t))+1}function wc(t,e,n,r){var i=xu(t,e,n),a;switch(r=Nn(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=bc(i,s))&&(r.precision=a),Ba(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_c(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=xc(i))&&(r.precision=a-(r.type==="%")*2);break}}return Nt(r)}function Oa(t){var e=t.domain;return t.ticks=function(n){var r=e();return Na(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,h=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=Te(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function fe(){var t=cc();return t.copy=function(){return lc(t,fe())},Ur.apply(t,arguments),Oa(t)}function kc(){var t=0,e=1,n,r,i,a,s=re,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function h(f){return function(d){var g,y;return arguments.length?([g,y]=d,s=f(g,y),u):[s(0),s(1)]}}return u.range=h(nn),u.rangeRound=h(za),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ac(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ha(){var t=Oa(kc()(re));return t.copy=function(){return Ac(t,Ha())},$u.apply(t,arguments)}function Mc(t){return t}var dr=1,pr=2,Er=3,Ye=4,Li=1e-6;function $c(t){return"translate("+t+",0)"}function Sc(t){return"translate(0,"+t+")"}function Ec(t){return e=>+t(e)}function Nc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Cc(){return!this.__axis}function Xa(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===dr||t===Ye?-1:1,h=t===Ye||t===pr?"x":"y",f=t===dr||t===Er?$c:Sc;function d(g){var y=r??(e.ticks?e.ticks.apply(e,n):e.domain()),S=i??(e.tickFormat?e.tickFormat.apply(e,n):Mc),p=Math.max(a,0)+o,v=e.range(),k=+v[0]+l,m=+v[v.length-1]+l,b=(e.bandwidth?Nc:Ec)(e.copy(),l),x=g.selection?g.selection():g,$=x.selectAll(".domain").data([null]),M=x.selectAll(".tick").data(y,e).order(),N=M.exit(),P=M.enter().append("g").attr("class","tick"),A=M.select("line"),w=M.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(P),A=A.merge(P.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),w=w.merge(P.append("text").attr("fill","currentColor").attr(h,u*p).attr("dy",t===dr?"0em":t===Er?"0.71em":"0.32em")),g!==x&&($=$.transition(g),M=M.transition(g),A=A.transition(g),w=w.transition(g),N=N.transition(g).attr("opacity",Li).attr("transform",function(B){return isFinite(B=b(B))?f(B+l):this.getAttribute("transform")}),P.attr("opacity",Li).attr("transform",function(B){var _=this.parentNode.__axis;return f((_&&isFinite(_=_(B))?_:b(B))+l)})),N.remove(),$.attr("d",t===Ye||t===pr?s?"M"+u*s+","+k+"H"+l+"V"+m+"H"+u*s:"M"+l+","+k+"V"+m:s?"M"+k+","+u*s+"V"+l+"H"+m+"V"+u*s:"M"+k+","+l+"H"+m),M.attr("opacity",1).attr("transform",function(B){return f(b(B)+l)}),A.attr(h+"2",u*a),w.attr(h,u*p).text(S),x.filter(Cc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pr?"start":t===Ye?"end":"middle"),x.each(function(){this.__axis=b})}return d.scale=function(g){return arguments.length?(e=g,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),d):n.slice()},d.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),d):r&&r.slice()},d.tickFormat=function(g){return arguments.length?(i=g,d):i},d.tickSize=function(g){return arguments.length?(a=s=+g,d):a},d.tickSizeInner=function(g){return arguments.length?(a=+g,d):a},d.tickSizeOuter=function(g){return arguments.length?(s=+g,d):s},d.tickPadding=function(g){return arguments.length?(o=+g,d):o},d.offset=function(g){return arguments.length?(l=+g,d):l},d}function Pn(t){return Xa(Er,t)}function Gr(t){return Xa(Ye,t)}function ke(t){return function(){return t}}const Nr=Math.PI,Cr=2*Nr,se=1e-6,Tc=Cr-se;function Ua(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ic(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ua;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Fc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ua:Ic(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,h=s-e,f=o-n,d=h*h+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>se)if(!(Math.abs(f*l-u*h)>se)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,y=i-o,S=l*l+u*u,p=g*g+y*y,v=Math.sqrt(S),k=Math.sqrt(d),m=a*Math.tan((Nr-Math.acos((S+d-p)/(2*v*k)))/2),b=m/k,x=m/v;Math.abs(b-1)>se&&this._append`L${e+b*h},${n+b*f}`,this._append`A${a},${a},0,0,${+(f*g>h*y)},${this._x1=e+x*l},${this._y1=n+x*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,h=n+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>se||Math.abs(this._y1-h)>se)&&this._append`L${u},${h}`,r&&(d<0&&(d=d%Cr+Cr),d>Tc?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=h}`:d>se&&this._append`A${r},${r},0,${+(d>=Nr)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Rc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Fc(e)}function Dc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Va(t){this._context=t}Va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zc(t){return new Va(t)}function Pc(t){return t[0]}function Lc(t){return t[1]}function qc(t,e){var n=ke(!0),r=null,i=zc,a=null,s=Rc(o);t=typeof t=="function"?t:t===void 0?Pc:ke(t),e=typeof e=="function"?e:e===void 0?Lc:ke(e);function o(l){var u,h=(l=Dc(l)).length,f,d=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=h;++u)!(u<h&&n(f=l[u],u,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ke(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ke(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}var Bc={value:()=>{}};function Kr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new vn(n)}function vn(t){this._=t}function Oc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}vn.prototype=Kr.prototype={constructor:vn,on:function(t,e){var n=this._,r=Oc(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Hc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=qi(n[i],t.name,e);else if(e==null)for(i in n)n[i]=qi(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Hc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function qi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Tr={capture:!0,passive:!1};function Ir(t){t.preventDefault(),t.stopImmediatePropagation()}function Xc(t){var e=t.document.documentElement,n=Q(t).on("dragstart.drag",Ir,Tr);"onselectstart"in e?n.on("selectstart.drag",Ir,Tr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Uc(t,e){var n=t.document.documentElement,r=Q(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ir,Tr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Fe=0,We=0,Ve=0,Ya=1e3,Cn,Ge,Tn=0,he=0,Ln=0,tn=typeof performance=="object"&&performance.now?performance:Date,Wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qr(){return he||(Wa(Vc),he=tn.now()+Ln)}function Vc(){he=0}function In(){this._call=this._time=this._next=null}In.prototype=Ga.prototype={constructor:In,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qr():+n)+(e==null?0:+e),!this._next&&Ge!==this&&(Ge?Ge._next=this:Cn=this,Ge=this),this._call=t,this._time=n,Fr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fr())}};function Ga(t,e,n){var r=new In;return r.restart(t,e,n),r}function Yc(){Qr(),++Fe;for(var t=Cn,e;t;)(e=he-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fe}function Bi(){he=(Tn=tn.now())+Ln,Fe=We=0;try{Yc()}finally{Fe=0,Gc(),he=0}}function Wc(){var t=tn.now(),e=t-Tn;e>Ya&&(Ln-=e,Tn=t)}function Gc(){for(var t,e=Cn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Cn=n);Ge=t,Fr(r)}function Fr(t){if(!Fe){We&&(We=clearTimeout(We));var e=t-he;e>24?(t<1/0&&(We=setTimeout(Bi,t-tn.now()-Ln)),Ve&&(Ve=clearInterval(Ve))):(Ve||(Tn=tn.now(),Ve=setInterval(Wc,Ya)),Fe=1,Wa(Bi))}}function Oi(t,e,n){var r=new In;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Kc=Kr("start","end","cancel","interrupt"),Qc=[],Ka=0,Hi=1,Rr=2,yn=3,Xi=4,Dr=5,xn=6;function qn(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Zc(t,n,{name:e,index:r,group:i,on:Kc,tween:Qc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ka})}function Zr(t,e){var n=Vt(t,e);if(n.state>Ka)throw new Error("too late; already scheduled");return n}function Qt(t,e){var n=Vt(t,e);if(n.state>yn)throw new Error("too late; already running");return n}function Vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ga(a,0,n.time);function a(u){n.state=Hi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,f,d,g;if(n.state!==Hi)return l();for(h in r)if(g=r[h],g.name===n.name){if(g.state===yn)return Oi(s);g.state===Xi?(g.state=xn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=xn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(Oi(function(){n.state===yn&&(n.state=Xi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Rr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Rr){for(n.state=yn,i=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Dr,1),f=-1,d=i.length;++f<d;)i[f].call(t,h);n.state===Dr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=xn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function zr(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>Rr&&r.state<Dr,r.state=xn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Jc(t){return this.each(function(){zr(this,t)})}function jc(t,e){var n,r;return function(){var i=Qt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function tf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Qt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function ef(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Vt(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?jc:tf)(n,t,e))}function Jr(t,e,n){var r=t._id;return t.each(function(){var i=Qt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Vt(i,r).value[e]}}function Qa(t,e){var n;return(typeof e=="number"?Ht:e instanceof ce?Sn:(n=ce(e))?(e=n,Sn):Da)(t,e)}function nf(t){return function(){this.removeAttribute(t)}}function rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function af(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function sf(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function of(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function lf(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function uf(t,e){var n=Dn(t),r=n==="transform"?nc:Qa;return this.attrTween(t,typeof e=="function"?(n.local?lf:of)(n,r,Jr(this,"attr."+t,e)):e==null?(n.local?rf:nf)(n):(n.local?sf:af)(n,r,e))}function cf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ff(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ff(t,a)),n}return i._value=e,i}function df(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cf(t,a)),n}return i._value=e,i}function pf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Dn(t);return this.tween(n,(r.local?hf:df)(r,e))}function gf(t,e){return function(){Zr(this,t).delay=+e.apply(this,arguments)}}function mf(t,e){return e=+e,function(){Zr(this,t).delay=e}}function vf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gf:mf)(e,t)):Vt(this.node(),e).delay}function yf(t,e){return function(){Qt(this,t).duration=+e.apply(this,arguments)}}function xf(t,e){return e=+e,function(){Qt(this,t).duration=e}}function bf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yf:xf)(e,t)):Vt(this.node(),e).duration}function _f(t,e){if(typeof e!="function")throw new Error;return function(){Qt(this,t).ease=e}}function wf(t){var e=this._id;return arguments.length?this.each(_f(e,t)):Vt(this.node(),e).ease}function kf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,t).ease=n}}function Af(t){if(typeof t!="function")throw new Error;return this.each(kf(this._id,t))}function Mf(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new te(r,this._parents,this._name,this._id)}function $f(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],h=l.length,f=s[o]=new Array(h),d,g=0;g<h;++g)(d=l[g]||u[g])&&(f[g]=d);for(;o<r;++o)s[o]=e[o];return new te(s,this._parents,this._name,this._id)}function Sf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ef(t,e,n){var r,i,a=Sf(e)?Zr:Qt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Nf(t,e){var n=this._id;return arguments.length<2?Vt(this.node(),n).on.on(t):this.each(Ef(n,t,e))}function Cf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Tf(){return this.on("end.remove",Cf(this._id))}function If(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Hr(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),h,f,d=0;d<l;++d)(h=o[d])&&(f=t.call(h,h.__data__,d,o))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,qn(u[d],e,n,d,u,Vt(h,n)));return new te(a,this._parents,e,n)}function Ff(t){var e=this._name,n=this._id;typeof t!="function"&&(t=da(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=t.call(h,h.__data__,f,l),g,y=Vt(h,n),S=0,p=d.length;S<p;++S)(g=d[S])&&qn(g,e,n,S,d,y);a.push(d),s.push(h)}return new te(a,s,e,n)}var Rf=ze.prototype.constructor;function Df(){return new Rf(this._groups,this._parents)}function zf(t,e){var n,r,i;return function(){var a=Ce(this,t),s=(this.style.removeProperty(t),Ce(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Za(t){return function(){this.style.removeProperty(t)}}function Pf(t,e,n){var r,i=n+"",a;return function(){var s=Ce(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Lf(t,e,n){var r,i,a;return function(){var s=Ce(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Ce(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function qf(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=Qt(this,t),u=l.on,h=l.value[a]==null?o||(o=Za(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(s,i=h),l.on=r}}function Bf(t,e,n){var r=(t+="")=="transform"?ec:Qa;return e==null?this.styleTween(t,zf(t,r)).on("end.style."+t,Za(t)):typeof e=="function"?this.styleTween(t,Lf(t,r,Jr(this,"style."+t,e))).each(qf(this._id,t)):this.styleTween(t,Pf(t,r,e),n).on("end.style."+t,null)}function Of(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Hf(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Of(t,s,n)),r}return a._value=e,a}function Xf(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hf(t,e,n??""))}function Uf(t){return function(){this.textContent=t}}function Vf(t){return function(){var e=t(this);this.textContent=e??""}}function Yf(t){return this.tween("text",typeof t=="function"?Vf(Jr(this,"text",t)):Uf(t==null?"":t+""))}function Wf(t){return function(e){this.textContent=t.call(this,e)}}function Gf(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Wf(i)),e}return r._value=t,r}function Kf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Gf(t))}function Qf(){for(var t=this._name,e=this._id,n=Ja(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var h=Vt(l,e);qn(l,t,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new te(r,this._parents,t,n)}function Zf(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=Qt(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&a()})}var Jf=0;function te(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Pr(t){return ze().transition(t)}function Ja(){return++Jf}var Zt=ze.prototype;te.prototype=Pr.prototype={constructor:te,select:If,selectAll:Ff,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:Mf,merge:$f,selection:Df,transition:Qf,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:Nf,attr:uf,attrTween:pf,style:Bf,styleTween:Xf,text:Yf,textTween:Kf,remove:Tf,tween:ef,delay:vf,duration:bf,ease:wf,easeVarying:Af,end:Zf,[Symbol.iterator]:Zt[Symbol.iterator]};function jf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var th={time:null,delay:0,duration:250,ease:jf};function eh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nh(t){var e,n;t instanceof te?(e=t._id,t=t._name):(e=Ja(),(n=th).time=Qr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&qn(l,t,e,u,s,n||eh(l,e));return new te(r,this._parents,t,e)}ze.prototype.interrupt=Jc;ze.prototype.transition=nh;const gr=t=>()=>t;function rh(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ih(t){t.stopImmediatePropagation()}function mr(t){t.preventDefault(),t.stopImmediatePropagation()}var Ui={name:"drag"},vr={name:"space"},Ae={name:"handle"},Me={name:"center"};const{abs:Vi,max:wt,min:kt}=Math;function Yi(t){return[+t[0],+t[1]]}function Wi(t){return[Yi(t[0]),Yi(t[1])]}var bn={name:"x",handles:["w","e"].map(Lr),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},yr={},Jt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ki={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ah={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Lr(t){return{type:t}}function oh(t){return!t.ctrlKey&&!t.button}function lh(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function xr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ch(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function fh(){return hh(bn)}function hh(t){var e=lh,n=oh,r=uh,i=!0,a=Kr("start","brush","end"),s=6,o;function l(p){var v=p.property("__brush",S).selectAll(".overlay").data([Lr("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jt.overlay).merge(v).each(function(){var m=xr(this).extent;Q(this).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1])}),p.selectAll(".selection").data([Lr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=p.selectAll(".handle").data(t.handles,function(m){return m.type});k.exit().remove(),k.enter().append("rect").attr("class",function(m){return"handle handle--"+m.type}).attr("cursor",function(m){return Jt[m.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(p,v,k){p.tween?p.on("start.brush",function(m){h(this,arguments).beforestart().start(m)}).on("interrupt.brush end.brush",function(m){h(this,arguments).end(m)}).tween("brush",function(){var m=this,b=m.__brush,x=h(m,arguments),$=b.selection,M=t.input(typeof v=="function"?v.apply(this,arguments):v,b.extent),N=nn($,M);function P(A){b.selection=A===1&&M===null?null:N(A),u.call(m),x.brush()}return $!==null&&M!==null?P:P(1)}):p.each(function(){var m=this,b=arguments,x=m.__brush,$=t.input(typeof v=="function"?v.apply(m,b):v,x.extent),M=h(m,b).beforestart();zr(m),x.selection=$===null?null:$,u.call(m),M.start(k).brush(k).end(k)})},l.clear=function(p,v){l.move(p,null,v)};function u(){var p=Q(this),v=xr(this).selection;v?(p.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?v[1][0]-s/2:v[0][0]-s/2}).attr("y",function(k){return k.type[0]==="s"?v[1][1]-s/2:v[0][1]-s/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?v[1][0]-v[0][0]+s:s}).attr("height",function(k){return k.type==="e"||k.type==="w"?v[1][1]-v[0][1]+s:s})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(p,v,k){var m=p.__brush.emitter;return m&&(!k||!m.clean)?m:new f(p,v,k)}function f(p,v,k){this.that=p,this.args=v,this.state=p.__brush,this.active=0,this.clean=k}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,v){return this.starting?(this.starting=!1,this.emit("start",p,v)):this.emit("brush",p),this},brush:function(p,v){return this.emit("brush",p,v),this},end:function(p,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,v)),this},emit:function(p,v,k){var m=Q(this.that).datum();a.call(p,this.that,new rh(p,{sourceEvent:v,target:l,selection:t.output(this.state.selection),mode:k,dispatch:a}),m)}};function d(p){if(o&&!p.touches||!n.apply(this,arguments))return;var v=this,k=p.target.__data__.type,m=(i&&p.metaKey?k="overlay":k)==="selection"?Ui:i&&p.altKey?Me:Ae,b=t===yr?null:ah[k],x=t===bn?null:sh[k],$=xr(v),M=$.extent,N=$.selection,P=M[0][0],A,w,B=M[0][1],_,z,G=M[1][0],F,L,V=M[1][1],D,Z,T=0,X=0,it,gt=b&&x&&i&&p.shiftKey,mt,ct,J=Array.from(p.touches||[p],O=>{const j=O.identifier;return O=bi(O,v),O.point0=O.slice(),O.identifier=j,O});zr(v);var K=h(v,arguments,!0).beforestart();if(k==="overlay"){N&&(it=!0);const O=[J[0],J[1]||J[0]];$.selection=N=[[A=t===yr?P:kt(O[0][0],O[1][0]),_=t===bn?B:kt(O[0][1],O[1][1])],[F=t===yr?G:wt(O[0][0],O[1][0]),D=t===bn?V:wt(O[0][1],O[1][1])]],J.length>1&&ht(p)}else A=N[0][0],_=N[0][1],F=N[1][0],D=N[1][1];w=A,z=_,L=F,Z=D;var qt=Q(v).attr("pointer-events","none"),bt=qt.selectAll(".overlay").attr("cursor",Jt[k]);if(p.touches)K.moved=H,K.ended=yt;else{var $t=Q(p.view).on("mousemove.brush",H,!0).on("mouseup.brush",yt,!0);i&&$t.on("keydown.brush",et,!0).on("keyup.brush",lt,!0),Xc(p.view)}u.call(v),K.start(p,m.name);function H(O){for(const j of O.changedTouches||[O])for(const Y of J)Y.identifier===j.identifier&&(Y.cur=bi(j,v));if(gt&&!mt&&!ct&&J.length===1){const j=J[0];Vi(j.cur[0]-j[0])>Vi(j.cur[1]-j[1])?ct=!0:mt=!0}for(const j of J)j.cur&&(j[0]=j.cur[0],j[1]=j.cur[1]);it=!0,mr(O),ht(O)}function ht(O){const j=J[0],Y=j.point0;var nt;switch(T=j[0]-Y[0],X=j[1]-Y[1],m){case vr:case Ui:{b&&(T=wt(P-A,kt(G-F,T)),w=A+T,L=F+T),x&&(X=wt(B-_,kt(V-D,X)),z=_+X,Z=D+X);break}case Ae:{J[1]?(b&&(w=wt(P,kt(G,J[0][0])),L=wt(P,kt(G,J[1][0])),b=1),x&&(z=wt(B,kt(V,J[0][1])),Z=wt(B,kt(V,J[1][1])),x=1)):(b<0?(T=wt(P-A,kt(G-A,T)),w=A+T,L=F):b>0&&(T=wt(P-F,kt(G-F,T)),w=A,L=F+T),x<0?(X=wt(B-_,kt(V-_,X)),z=_+X,Z=D):x>0&&(X=wt(B-D,kt(V-D,X)),z=_,Z=D+X));break}case Me:{b&&(w=wt(P,kt(G,A-T*b)),L=wt(P,kt(G,F+T*b))),x&&(z=wt(B,kt(V,_-X*x)),Z=wt(B,kt(V,D+X*x)));break}}L<w&&(b*=-1,nt=A,A=F,F=nt,nt=w,w=L,L=nt,k in Gi&&bt.attr("cursor",Jt[k=Gi[k]])),Z<z&&(x*=-1,nt=_,_=D,D=nt,nt=z,z=Z,Z=nt,k in Ki&&bt.attr("cursor",Jt[k=Ki[k]])),$.selection&&(N=$.selection),mt&&(w=N[0][0],L=N[1][0]),ct&&(z=N[0][1],Z=N[1][1]),(N[0][0]!==w||N[0][1]!==z||N[1][0]!==L||N[1][1]!==Z)&&($.selection=[[w,z],[L,Z]],u.call(v),K.brush(O,m.name))}function yt(O){if(ih(O),O.touches){if(O.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Uc(O.view,it),$t.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);qt.attr("pointer-events","all"),bt.attr("cursor",Jt.overlay),$.selection&&(N=$.selection),ch(N)&&($.selection=null,u.call(v)),K.end(O,m.name)}function et(O){switch(O.keyCode){case 16:{gt=b&&x;break}case 18:{m===Ae&&(b&&(F=L-T*b,A=w+T*b),x&&(D=Z-X*x,_=z+X*x),m=Me,ht(O));break}case 32:{(m===Ae||m===Me)&&(b<0?F=L-T:b>0&&(A=w-T),x<0?D=Z-X:x>0&&(_=z-X),m=vr,bt.attr("cursor",Jt.selection),ht(O));break}default:return}mr(O)}function lt(O){switch(O.keyCode){case 16:{gt&&(mt=ct=gt=!1,ht(O));break}case 18:{m===Me&&(b<0?F=L:b>0&&(A=w),x<0?D=Z:x>0&&(_=z),m=Ae,ht(O));break}case 32:{m===vr&&(O.altKey?(b&&(F=L-T*b,A=w+T*b),x&&(D=Z-X*x,_=z+X*x),m=Me):(b<0?F=L:b>0&&(A=w),x<0?D=Z:x>0&&(_=z),m=Ae),bt.attr("cursor",Jt[k]),ht(O));break}default:return}mr(O)}}function g(p){h(this,arguments).moved(p)}function y(p){h(this,arguments).ended(p)}function S(){var p=this.__brush||{selection:null};return p.extent=Wi(e.apply(this,arguments)),p.dim=t,p}return l.extent=function(p){return arguments.length?(e=typeof p=="function"?p:gr(Wi(p)),l):e},l.filter=function(p){return arguments.length?(n=typeof p=="function"?p:gr(!!p),l):n},l.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:gr(!!p),l):r},l.handleSize=function(p){return arguments.length?(s=+p,l):s},l.keyModifiers=function(p){return arguments.length?(i=!!p,l):i},l.on=function(){var p=a.on.apply(a,arguments);return p===a?l:p},l}var dh=ut('<div class="age-range-indicator svelte-1rr46o8"><span> </span> <button class="clear-btn svelte-1rr46o8">Clear filter</button></div>'),ph=ut('<span class="hint svelte-1rr46o8">Up through the 40-to-50 age range, female cases slightly outnumber males—likely reflecting a higher volume of elective and gynecologic‐related procedures in middle-aged women. After age 60, male surgical cases begin to exceed female, which may be driven by increased cardiovascular and oncologic interventions in older men.</span>'),gh=ut('<div class="age-distribution svelte-1rr46o8"><div class="chart svelte-1rr46o8"><svg class="h-auto w-full"></svg></div> <!> <div class="insights svelte-1rr46o8"><p class="insight-text svelte-1rr46o8"> <!></p></div></div>');function mh(t,e){de(e,!1);const n=U(),r=U();let i=Tt(e,"data",24,()=>[]),a=Tt(e,"showPercentage",8,!1),s=Tt(e,"showBySex",8,!0),o=U(),l=U([null,null]);const u=Qi();function h($){const M=[...$].sort((B,_)=>B-_),N=mn(M)||0,P=Ze(M,.25)||0,A=Ze(M,.75)||0,w=A-P;return{median:N,q1:P,q3:A,iqr:w}}function f(){if(!i().length)return;Q(c(o)).selectAll("*").remove();const $={top:30,right:30,bottom:60,left:60},M=600-$.left-$.right,N=350-$.top-$.bottom,P=c(n).filter(H=>H.age!==void 0&&!isNaN(H.age)),A=P.map(H=>H.age),w=h(A),B=i().filter(H=>H.age!==void 0&&!isNaN(H.age)).map(H=>H.age),_=fe().domain(gn(B)).nice().range([0,M]),z=wu().domain(_.domain()).thresholds(_.ticks(20));let G,F;const L=z(A),V=P.length,D=H=>a()?H.length/V*100:H.length,Z=Gt(L,H=>D(H))||0,T=P.filter(H=>H.sex==="M").map(H=>H.age),X=P.filter(H=>H.sex==="F").map(H=>H.age),it=z(T),gt=z(X),mt=Math.max(Gt(it,H=>D(H))||0,Gt(gt,H=>D(H))||0),ct=Math.max(Z,mt);s()?G={male:it,female:gt}:G=L,F=ct;const J=fe().domain([0,F*1.1]).range([N,0]);Q("body").selectAll(".age-tooltip").data([0]).enter().append("div").attr("class","age-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","12px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("text-align","center").style("z-index","10");const K=Q(c(o)).attr("viewBox",`0 0 ${M+$.left+$.right} ${N+$.top+$.bottom}`).append("g").attr("transform",`translate(${$.left},${$.top})`);if(s()){const H=zn().domain(["Male","Female"]).range(["#4682b4","#db7093"]),ht=G,yt=Pr().duration(500),et=K.append("g").selectAll(".bar-male").data(ht.male).enter().append("rect").attr("class","bar-male").attr("x",Y=>_(Y.x0)).attr("width",Y=>Math.max(0,_(Y.x1)-_(Y.x0)-1)).attr("y",N).attr("height",0).attr("fill",H("Male")).attr("opacity",.7).attr("stroke",H("Male")).attr("stroke-width",1);et.transition(yt).attr("y",Y=>J(D(Y))).attr("height",Y=>N-J(D(Y)));const lt=Q("body").select(".age-tooltip");et.on("mouseover",function(Y,nt){const tt=nt.length,_t=(tt/T.length*100).toFixed(1),Pt=`${nt.x0}-${nt.x1}`;lt.transition().duration(200).style("opacity",.9),lt.html(`
                            <strong>Age: ${Pt}</strong><br/>
                            <strong>Male</strong><br/>
                            Count: ${tt}<br/>
                            Percentage: ${_t}%
                        `).style("left",Y.pageX+10+"px").style("top",Y.pageY-28+"px"),Q(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){lt.transition().duration(500).style("opacity",0),Q(this).attr("stroke",H("Male")).attr("stroke-width",1)});const O=K.append("g").selectAll(".bar-female").data(ht.female).enter().append("rect").attr("class","bar-female").attr("x",Y=>_(Y.x0)).attr("width",Y=>Math.max(0,_(Y.x1)-_(Y.x0)-1)).attr("y",N).attr("height",0).attr("fill",H("Female")).attr("opacity",.7).attr("stroke",H("Female")).attr("stroke-width",1);O.transition(yt).attr("y",Y=>J(D(Y))).attr("height",Y=>N-J(D(Y))),O.on("mouseover",function(Y,nt){const tt=nt.length,_t=(tt/X.length*100).toFixed(1),Pt=`${nt.x0}-${nt.x1}`;lt.transition().duration(200).style("opacity",.9),lt.html(`
                            <strong>Age: ${Pt}</strong><br/>
                            <strong>Female</strong><br/>
                            Count: ${tt}<br/>
                            Percentage: ${_t}%
                        `).style("left",Y.pageX+10+"px").style("top",Y.pageY-28+"px"),Q(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){lt.transition().duration(500).style("opacity",0),Q(this).attr("stroke",H("Female")).attr("stroke-width",1)});const j=K.append("g").attr("class","legend").attr("transform",`translate(${M-100}, 10)`);["Male","Female"].forEach((Y,nt)=>{j.append("rect").attr("x",0).attr("y",nt*20).attr("width",15).attr("height",15).attr("fill",H(Y)),j.append("text").attr("x",20).attr("y",nt*20+12).text(Y).style("font-size","12px")})}else{const H=Pr().duration(500),ht=K.append("g").selectAll("rect").data(G).enter().append("rect").attr("x",et=>_(et.x0)).attr("width",et=>Math.max(0,_(et.x1)-_(et.x0)-1)).attr("y",N).attr("height",0).attr("fill","steelblue").attr("stroke","white").attr("stroke-width",.5);ht.transition(H).attr("y",et=>J(D(et))).attr("height",et=>N-J(D(et)));const yt=Q("body").select(".age-tooltip");ht.on("mouseover",function(et,lt){const O=lt.length,j=(O/V*100).toFixed(1),Y=`${lt.x0}-${lt.x1}`;yt.transition().duration(200).style("opacity",.9),yt.html(`
                        <strong>Age: ${Y}</strong><br/>
                        Count: ${O}<br/>
                        Percentage: ${j}%
                    `).style("left",et.pageX+10+"px").style("top",et.pageY-28+"px"),Q(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){yt.transition().duration(500).style("opacity",0),Q(this).attr("stroke","white").attr("stroke-width",.5)})}K.append("g").attr("transform",`translate(0,${N})`).call(Pn(_).tickFormat(H=>`${H}`)).style("font-size","12px"),K.append("g").call(Gr(J)).style("font-size","12px"),K.append("text").attr("x",M/2).attr("y",N+40).attr("text-anchor","middle").text("Age (years)").style("font-size","14px"),K.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-35).attr("text-anchor","middle").text(a()?"Percentage of Cases (%)":"Number of Cases").style("font-size","14px"),K.append("text").attr("x",M/2).attr("y",-10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Age Distribution of Surgical Cases");const qt=_(w.median);K.append("line").attr("x1",qt).attr("x2",qt).attr("y1",N).attr("y2",10).attr("stroke","red").attr("stroke-width",2).attr("stroke-dasharray","5,5"),K.append("rect").attr("x",_(w.q1)).attr("width",_(w.q3)-_(w.q1)).attr("y",N+5).attr("height",10).attr("fill","rgba(255,0,0,0.3)"),K.append("text").attr("x",qt).attr("y",5).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(`Median: ${Nt(".1f")(w.median)}`),K.append("text").attr("x",(_(w.q1)+_(w.q3))/2).attr("y",N+25).attr("text-anchor","middle").style("font-size","12px").text(`IQR: ${Nt(".1f")(w.q1)} - ${Nt(".1f")(w.q3)}`),w.median>60&&K.append("text").attr("x",M*.75).attr("y",N*.25).attr("text-anchor","middle").style("font-size","13px").style("font-style","italic").style("fill","#555").text("Aging patient population"),Q("body").selectAll(".age-brush-tooltip").data([0]).enter().append("div").attr("class","age-brush-tooltip").style("opacity",0).style("position","fixed").style("background-color","rgba(70, 130, 180, 0.9)").style("color","white").style("border-radius","4px").style("padding","6px 12px").style("pointer-events","none").style("font-size","13px").style("font-weight","bold").style("text-align","center").style("z-index","20").style("transform","translateX(-50%)").style("box-shadow","0 2px 5px rgba(0,0,0,0.3)").style("border","1px solid rgba(255,255,255,0.2)");const bt=fh().extent([[0,0],[M,N]]).on("start brush",H=>{if(H.selection){const[ht,yt]=H.selection.map(nt=>Math.round(_.invert(nt))),et=Q("body").select(".age-brush-tooltip"),lt=c(o).getBoundingClientRect(),O=`Selecting Ages: ${ht} - ${yt} years`,j=lt.left+lt.width/2,Y=lt.bottom-20;et.html(O).style("left",j+"px").style("top",Y+"px").style("opacity",1)}}).on("end",H=>{if(setTimeout(()=>{Q("body").select(".age-brush-tooltip").style("opacity",0)},500),!H.selection){c(l)[0]!==null&&(R(l,[null,null]),setTimeout(()=>f(),0));return}const[ht,yt]=H.selection.map(lt=>_.invert(lt)),et=[Math.round(ht),Math.round(yt)];(c(l)[0]!==et[0]||c(l)[1]!==et[1])&&(R(l,et),setTimeout(()=>f(),0))}),$t=K.append("g").attr("class","brush").call(bt);c(l)[0]!==null&&c(l)[1]!==null&&$t.call(bt.move,[_(c(l)[0]),_(c(l)[1])])}ue(()=>(f(),()=>{Q("body").selectAll(".age-tooltip").remove()})),Zi(f),ue(()=>()=>{Q("body").selectAll(".age-tooltip").remove(),Q("body").selectAll(".age-brush-tooltip").remove()}),st(()=>(c(l),pt(i())),()=>{R(n,c(l)[0]!==null&&c(l)[1]!==null?i().filter($=>$.age!==void 0&&$.age>=c(l)[0]&&$.age<=c(l)[1]):i())}),st(()=>(c(n),mn),()=>{R(r,c(n).length&&mn(c(n).filter($=>$.age!==void 0&&!isNaN($.age)).map($=>$.age))||0)}),st(()=>(c(l),c(n),pt(i())),()=>{c(l)[0]!==null?u("filter",{ageRange:c(l),data:c(n)}):c(n)===i()&&c(l)[0]===null&&u("filter",{ageRange:null,data:i()})}),st(()=>(pt(a()),pt(s()),c(o),Q),()=>{(a()!==void 0||s()!==void 0)&&c(o)&&(Q("body").select(".age-tooltip").style("opacity",0),f())}),De(),Re();var d=gh(),g=C(d),y=C(g);Rn(y,$=>R(o,$),()=>c(o)),E(g);var S=I(g,2);{var p=$=>{var M=dh(),N=C(M),P=C(N);E(N);var A=I(N,2);E(M),Ut(()=>dt(P,`Age range: ${c(l)[0]??""}–${c(l)[1]??""}`)),Se("click",A,()=>{Q("body").select(".age-tooltip").style("opacity",0),R(l,[null,null]),setTimeout(()=>f(),0)}),ot($,M)};Et(S,$=>{c(l)[0]!==null&&$(p)})}var v=I(S,2),k=C(v),m=C(k),b=I(m);{var x=$=>{var M=ph();ot($,M)};Et(b,$=>{s()&&$(x)})}E(k),E(v),E(d),Ut($=>dt(m,`Our surgical cases span six decades of life. The median age of ${$??""}
            suggests an aging population, with implications for surgical risk and recovery considerations. `),[()=>c(r).toFixed(1)],ie),ot(t,d),pe()}var vh=ut('<div class="filter-notice svelte-nv535v"><p class="svelte-nv535v"><span class="filter-badge svelte-nv535v">Filtered</span> Viewing <strong> </strong> cases only <button class="clear-filter svelte-nv535v">Clear filter ×</button></p></div>'),yh=ut('<div class="insight-box svelte-nv535v"><p class="insight-text svelte-nv535v">Our patients span six decades, but <strong>95% of them cluster in just two surgical departments</strong>, setting the stage for wildly different baseline risks.</p></div>'),xh=ut('<div class="department-distribution svelte-nv535v"><div class="chart svelte-nv535v"><svg class="h-auto w-full"></svg></div> <!></div>');function bh(t,e){de(e,!1);let n=Tt(e,"data",24,()=>[]),r=Tt(e,"filteredDepartment",12,null),i=Tt(e,"showPercentage",8,!1),a=U(),s="Department Distribution of Surgical Cases";const o=Qi();function l(){if(!n().length)return;Q(c(a)).selectAll("*").remove();const p={top:30,right:30,bottom:90,left:60},v=600-p.left-p.right,k=350-p.top-p.bottom,m=fu(n(),_=>_.length,_=>_.department),b=Array.from(m,([_,z])=>({key:_,value:z})).sort((_,z)=>Aa(_.value,z.value)),x=Mu(b,_=>_.value),$=b.map(_=>({..._,percent:_.value/x*100})),M=$.slice(0,2);M.reduce((_,z)=>_+z.percent,0);const N=Ta().domain(b.map(_=>_.key)).range([0,v]).padding(.2),P=fe().domain([0,i()?Gt($,_=>_.percent):Gt(b,_=>_.value)]).nice().range([k,0]),A=Q(c(a)).attr("viewBox",`0 0 ${v+p.left+p.right} ${k+p.top+p.bottom}`).append("g").attr("transform",`translate(${p.left},${p.top})`);A.append("text").attr("x",v/2).attr("y",-15).attr("text-anchor","middle").attr("class","chart-title").style("font-size","16px").style("font-weight","bold").text(s);const w=new Map;b.forEach(_=>{const z=n().filter(it=>it.department===_.key),G=z.filter(it=>it.sex==="M").length,F=z.filter(it=>it.sex==="F").length,L=G/_.value*100,V=F/_.value*100,D=z.filter(it=>it.age!==void 0&&!isNaN(it.age)).map(it=>it.age),Z=D.length&&mn(D)||0,T=D.length&&Ze(D,.25)||0,X=D.length&&Ze(D,.75)||0;w.set(_.key,{maleCount:G,femaleCount:F,malePercent:L,femalePercent:V,medianAge:Z,q1:T,q3:X})});const B=Q("body").selectAll(".dept-tooltip").data([0]).enter().append("div").attr("class","dept-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("border-radius","5px").style("padding","10px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("pointer-events","none").style("font-size","12px").style("z-index","10");A.append("g").selectAll("rect").data($).enter().append("rect").attr("x",_=>N(_.key)).attr("y",_=>i()?P(_.percent):P(_.value)).attr("width",N.bandwidth()).attr("height",_=>i()?k-P(_.percent):k-P(_.value)).attr("fill",_=>r()===_.key?"#ff7f50":M.includes(_)?"#2a6d7c":"#5eb1c6").attr("stroke","#fff").attr("stroke-width",1).attr("class","dept-bar").style("cursor","pointer").on("mouseover",function(_,z){Q(this).transition().duration(200).attr("fill","#ff7f50");const G=w.get(z.key);B.html(`
					<div style="font-weight: bold; margin-bottom: 5px; color: #2a6d7c;">${z.key}</div>
					<div>Total cases: <b>${z.value}</b> (${Nt(".1f")(z.percent)}% of all)</div>
					${i()?`<div style="font-weight: bold; color: #2a6d7c; margin-top: 3px;">
							Showing as percentage: ${Nt(".1f")(z.percent)}%
						</div>`:""}
					<div style="margin-top: 5px;">
						<div>Sex ratio: <b>${Nt(".0f")(G.malePercent)}% M / ${Nt(".0f")(G.femalePercent)}% F</b></div>
						<div>Median age: <b>${Nt(".1f")(G.medianAge)}</b> years</div>
						<div>IQR: <b>${Nt(".1f")(G.q1)} - ${Nt(".1f")(G.q3)}</b></div>
					</div>
					<div style="margin-top: 5px; font-size: 10px; color: #666;">Click to filter dashboard by department</div>
				`).style("visibility","visible").style("left",_.pageX+15+"px").style("top",_.pageY-10+"px")}).on("mousemove",function(_){B.style("left",_.pageX+15+"px").style("top",_.pageY-10+"px")}).on("mouseout",function(){const _=Q(this).datum();Q(this).transition().duration(200).attr("fill",r()===_.key?"#ff7f50":M.includes(_)?"#2a6d7c":"#5eb1c6"),B.style("visibility","hidden")}).on("click",function(_,z){_.stopPropagation();const G=r()===z.key?null:z.key;o("filter",{department:G,name:z.key}),Q(c(a)).selectAll(".dept-bar").transition().duration(300).attr("fill",F=>F.key===G?"#ff7f50":M.includes(F)?"#2a6d7c":"#5eb1c6"),r(G)}),A.append("g").attr("transform",`translate(0,${k})`).call(Pn(N)).selectAll("text").attr("transform","rotate(-35)").attr("text-anchor","end").attr("dy","0.5em").attr("dx","-0.8em").style("font-size","12px"),A.append("g").call(Gr(P).tickFormat(_=>i()?Nt(".1f")(_)+"%":Nt(",.0f")(_))).style("font-size","12px"),A.append("text").attr("x",v/2).attr("y",k+65).attr("text-anchor","middle").style("font-size","14px").text("Surgical Department"),A.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-50).attr("text-anchor","middle").style("font-size","14px").text(i()?"Percentage of Cases (%)":"Number of Cases")}function u(){r()&&(r(null),o("filter",{department:null}),l())}ue(()=>{l();const p=c(a);return p&&p.addEventListener("click",u),()=>{p&&p.removeEventListener("click",u),Q("body").selectAll(".dept-tooltip").remove()}}),Zi(l),st(()=>(pt(i()),c(a),Q),()=>{i()!==void 0&&c(a)&&(Q("body").selectAll(".dept-tooltip").style("visibility","hidden"),l())}),st(()=>(c(a),pt(n())),()=>{c(a)&&n()&&l()}),De(),Re();var h=xh(),f=C(h),d=C(f);Rn(d,p=>R(a,p),()=>c(a)),E(f);var g=I(f,2);{var y=p=>{var v=vh(),k=C(v),m=I(C(k),2),b=C(m,!0);E(m);var x=I(m,2);E(k),E(v),Ut(()=>dt(b,r())),Se("click",x,u),ot(p,v)},S=p=>{var v=yh();ot(p,v)};Et(g,p=>{r()?p(y):p(S,!1)})}E(h),ot(t,h),pe()}function _h(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const wh=t=>Vu(t[t.length-1]);var kh=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_h);const Ah=wh(kh);function Ke(t,e,n){this.k=t,this.x=e,this.y=n}Ke.prototype={constructor:Ke,scale:function(t){return t===1?this:new Ke(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ke(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ke.prototype;var Mh=ut("<option> </option>"),$h=ut('<div class="no-data-message svelte-1nsvb8e">No cases match the selected criteria.</div>'),Sh=ut('<div class="timeline-container svelte-1nsvb8e"><div class="filter-controls svelte-1nsvb8e"><div class="filter-group svelte-1nsvb8e"><label for="group-select" class="svelte-1nsvb8e">Group By:</label> <select id="group-select" class="svelte-1nsvb8e"><option>Surgery Type</option><option>Department</option></select></div> <div class="filter-group svelte-1nsvb8e"><label for="group-value" class="svelte-1nsvb8e">Filter Value:</label> <select id="group-value" class="svelte-1nsvb8e"><option>All</option><!></select></div> <div class="filter-group svelte-1nsvb8e"><label class="svelte-1nsvb8e">Age Range:</label> <div class="age-inputs svelte-1nsvb8e"><input type="number" min="0" max="120" class="svelte-1nsvb8e"/> <span>to</span> <input type="number" min="0" max="120" class="svelte-1nsvb8e"/></div></div></div> <div class="timeline-visualization svelte-1nsvb8e"></div> <!></div>');function Eh(t,e){de(e,!1);const n=U();let r=Tt(e,"cases",24,()=>[]),i=Tt(e,"groupBy",12,"optype"),a=Tt(e,"ageRange",28,()=>[0,120]),s=Tt(e,"selectedDepartment",8,null),o=U(null),l=U(),u=U([]);const h=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function f(F){return F.length?h.map(({label:L,key:V})=>{const D=V,Z=F.map(ct=>{const J=ct[D],K=ct.casestart;return typeof J=="number"&&typeof K=="number"?J-K:NaN}).filter(ct=>!isNaN(ct));if(!Z.length)return{label:L,key:V,mean:null,min:null,max:null};const T=365*24*60*60,X=Z.filter(ct=>Math.abs(ct)<T);if(X.length===0)return{label:L,key:V,mean:null,min:null,max:null};const it=ku(X),gt=Ar(X),mt=Gt(X);return{label:L,key:V,mean:it,min:gt,max:mt}}):h.map(({label:L,key:V})=>({label:L,key:V,mean:null,min:null,max:null}))}let d=U([]),g=U(!1);function y(){if(!c(l)||(ee(l,c(l).innerHTML=""),!c(d).length))return;const F=c(l).clientWidth||800,L=280,V=200,D=30,Z=c(d).filter(tt=>tt.mean!==null),T=Z.map(tt=>tt.mean),X=Math.min(...T),it=Math.max(...T),gt=10,mt=Math.floor(X/60)-gt,ct=Math.ceil(it/60)+gt,J=[mt,ct],K=(ct-mt)/7,qt=Array.from({length:8},(tt,_t)=>Math.round((mt+_t*K)/5)*5),bt=fe().domain(J).range([V+D,F-D]),$t=Q(c(l)).append("svg").attr("width","100%").attr("height",L).attr("viewBox",`0 0 ${F} ${L}`),H=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],ht=zn().domain(h.map(tt=>tt.label)).range(H),yt=Pn(bt).tickValues(qt).tickFormat(tt=>`${Math.round(tt)} min`),et=$t.append("g").attr("transform",`translate(0,${L/2})`).call(yt);et.selectAll("text").style("font-size","12px").attr("transform",null).style("text-anchor","middle"),et.selectAll(".tick line").remove(),et.select(".domain").attr("x1",V+D),et.selectAll(".tick").append("line").attr("y1",0).attr("y2",-280/2).attr("stroke","#eee").attr("stroke-dasharray","2,2");const lt=Q(c(l)).append("div").attr("class","timeline-tooltip").style("position","absolute").style("padding","8px 12px").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);$t.selectAll(".event-group").data(Z).enter().append("g").attr("class","event-group").each(function(tt){const _t=Q(this),Pt=bt(tt.mean/60);_t.append("line").attr("x1",()=>Pt).attr("x2",()=>Pt).attr("y1",()=>L/2-20).attr("y2",()=>L/2+20).attr("stroke",()=>ht(tt.label)).attr("stroke-width",2),_t.append("line").attr("x1",()=>{const Bt=bt(tt.min/60),Pe=V+D;return Math.max(Bt,Pe)}).attr("x2",()=>{const Bt=bt(tt.max/60),Pe=F-D;return Math.min(Bt,Pe)}).attr("y1",()=>L/2).attr("y2",()=>L/2).attr("stroke",()=>"#000").attr("stroke-width",1),_t.append("circle").attr("cx",()=>Pt).attr("cy",()=>L/2).attr("r",6).attr("fill",()=>ht(tt.label)).on("mouseover",Bt=>{lt.transition().duration(200).style("opacity",1),lt.html(`
							<strong>${tt.label}</strong><br>
							Mean: ${(tt.mean/60).toFixed(1)} min<br>
							Range: ${(tt.min/60).toFixed(1)} - ${(tt.max/60).toFixed(1)} min
						`)}).on("mousemove",Bt=>{lt.style("left",`${Bt.pageX+10}px`).style("top",`${Bt.pageY-30}px`)}).on("mouseout",()=>{lt.transition().duration(200).style("opacity",0)})}),$t.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(h).enter().append("g").attr("transform",(tt,_t)=>`translate(0, ${_t*25})`).each(function(tt){const _t=Q(this);_t.append("circle").attr("r",6).attr("cy",0).attr("fill",()=>ht(tt.label)),_t.append("text").attr("x",16).attr("y",4).attr("font-size",13).attr("fill","#222").text(tt.label)});let Y="";c(o)&&(Y+=`${i()==="optype"?"Surgery Type":"Department"}: ${c(o)}`),s()&&(Y+=Y?`, Department: ${s()}`:`Department: ${s()}`),(a()[0]>0||a()[1]<120)&&(Y+=Y?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),Y&&$t.append("text").attr("x",V+D).attr("y",20).attr("font-size",12).attr("fill","#666").text(Y),$t.append("text").attr("x",F-D).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${c(n).length} cases`);const nt=J[1]-J[0];$t.append("text").attr("x",F-D).attr("y",L-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(nt)} min`)}ue(()=>{c(l)&&y()}),st(()=>(pt(r()),c(o),pt(i()),pt(s()),pt(a())),()=>{R(n,r().filter(F=>(!c(o)||F[i()]===c(o))&&(!s()||F.department===s())&&F.age>=a()[0]&&F.age<=a()[1]))}),st(()=>(pt(r()),pt(i())),()=>{R(u,Array.from(new Set(r().map(F=>F[i()]))).filter(Boolean))}),st(()=>c(n),()=>{c(n)&&(R(d,f(c(n))),R(g,!0))}),st(()=>(c(g),c(l)),()=>{c(g)&&c(l)&&(y(),R(g,!1))}),De(),Re();var S=Sh(),p=C(S),v=C(p),k=I(C(v),2);Ut(()=>{i(),fi(()=>{})});var m=C(k);m.value=m.__value="optype";var b=I(m);b.value=b.__value="department",E(k),E(v);var x=I(v,2),$=I(C(x),2);Ut(()=>{c(o),fi(()=>{c(u)})});var M=C($);M.value=(M.__value=null)??"";var N=I(M);oa(N,1,()=>c(u),sa,(F,L)=>{var V=Mh(),D={},Z=C(V,!0);E(V),Ut(()=>{D!==(D=c(L))&&(V.value=(V.__value=c(L))??""),dt(Z,c(L))}),ot(F,V)}),E($),E(x);var P=I(x,2),A=I(C(P),2),w=C(A);xt(w);var B=I(w,4);xt(B),E(A),E(P),E(p);var _=I(p,2);Rn(_,F=>R(l,F),()=>c(l));var z=I(_,2);{var G=F=>{var L=$h();ot(F,L)};Et(z,F=>{c(n).length===0&&F(G)})}E(S),gi(k,i),gi($,()=>c(o),F=>R(o,F)),jt(w,()=>a()[0],F=>a(a()[0]=F,!0)),jt(B,()=>a()[1],F=>a(a()[1]=F,!0)),ot(t,S),pe()}function Nh(t,e){return Ch(t)||Th(t,e)||Ih()}function Ch(t){if(Array.isArray(t))return t}function Th(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}function Ih(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ja(t,e,n,r){for(var i=0,a=0,s=t.length;a<s;a++){var o=t[a],l=+e(o,a,t),u=+n(o,a,t);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&r(l,u,i++)}}function Fh(t,e,n,r,i){var a=0,s=0;return ja(t,e,n,function(o,l){var u=l-i(o),h=l-r;a+=u*u,s+=h*h}),1-a/s}function Rh(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,s=e-a*t;return[s,a]}function Dh(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,s=0,o=0,l=0,u=0,h=n?+n[0]:1/0,f=n?+n[1]:-1/0;ja(i,t,e,function(k,m){++a,s+=(k-s)/a,o+=(m-o)/a,l+=(k*m-l)/a,u+=(k*k-u)/a,n||(k<h&&(h=k),k>f&&(f=k))});var d=Rh(s,o,l,u),g=Nh(d,2),y=g[0],S=g[1],p=function(m){return S*m+y},v=[[h,p(h)],[f,p(f)]];return v.a=S,v.b=y,v.predict=p,v.rSquared=Fh(i,t,e,o,p),v}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var zh=ut('<div class="mb-4 flex gap-6 text-sm"><label><input type="radio"/> <span class="ml-1">Elective</span></label> <label><input type="radio"/> <span class="ml-1">Emergency</span></label> <label><input type="radio"/> <span class="ml-1">All</span></label></div> <svg style="width: 100%; height: auto;" class="svelte-1pqg8op"></svg>',1);function Ph(t,e){de(e,!1);const n=[];let r=Tt(e,"patients",24,()=>[]),i=U("elective"),a=U([]),s=U();const o=640,l=320,u=48,h=Ha(Ah).domain([5,0]);function f(x){if(!c(s))return;const $=Q(c(s)).attr("viewBox",`0 0 ${o} ${l}`).html("");if(!x.length){$.append("text").attr("x",o/2).attr("y",l/2).attr("text-anchor","middle").attr("fill","#888").attr("font-size","16px").text("No cases with albumin in this view");return}const M=[...x].sort((T,X)=>+T.preop_alb-+X.preop_alb),N=[];for(let T=0;T<M.length;T+=5){const X=M.slice(T,T+5);if(X.length>0){const it=X.reduce((mt,ct)=>mt+ +ct.preop_alb,0)/X.length,gt=X.reduce((mt,ct)=>mt+(ct.icu_days||0),0)/X.length;N.push({albumin:it,icuDays:gt,count:X.length,cases:X})}}const P=fe().domain([2,Gt(N,T=>T.albumin)||6]).nice().range([u,o-u]),A=fe().domain([0,Gt(N,T=>T.icuDays)||5]).nice().range([l-u,u]),w=$.append("g");A.ticks(5).forEach(T=>{w.append("line").attr("x1",u).attr("x2",o-u).attr("y1",A(T)).attr("y2",A(T)).attr("stroke","#e5e7eb").attr("stroke-width",1)}),P.ticks(6).forEach(T=>{w.append("line").attr("x1",P(T)).attr("x2",P(T)).attr("y1",u).attr("y2",l-u).attr("stroke","#e5e7eb").attr("stroke-width",1)}),w.append("line").attr("x1",P(3.5)).attr("x2",P(3.5)).attr("y1",u).attr("y2",l-u).attr("stroke","#ef4444").attr("stroke-width",2).attr("stroke-dasharray","4,4"),w.append("text").attr("x",P(3.5)).attr("y",u+16).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#ef4444").attr("font-weight","500").text("Albumin Cliff (3.5 g/dL)");const B=Dh().x(T=>T.albumin).y(T=>T.icuDays).domain(P.domain())(N),_=qc().x(T=>P(T[0])).y(T=>A(T[1]));$.append("path").datum(B).attr("fill","none").attr("stroke","#4b5563").attr("stroke-width",2).attr("d",T=>_(T)),$.append("g").selectAll("circle").data(N).enter().append("circle").attr("cx",T=>P(T.albumin)).attr("cy",T=>A(T.icuDays)).attr("r",T=>Math.sqrt(T.count)*2).attr("fill",T=>h(Math.min(T.icuDays,5))).attr("stroke","#374151").attr("stroke-opacity",.15).append("title").text(T=>`Average Albumin: ${T.albumin.toFixed(2)} g/dL
Average ICU Stay: ${T.icuDays.toFixed(1)} days
Number of Cases: ${T.count}`);const z=Pn(P).ticks(6).tickFormat(T=>T+" g/dL");$.append("g").attr("transform",`translate(0, ${l-u})`).call(z).selectAll("text").attr("font-size","13px").attr("fill","#374151");const G=Gr(A).ticks(5).tickFormat(T=>T+" days");$.append("g").attr("transform",`translate(${u}, 0)`).call(G).selectAll("text").attr("font-size","13px").attr("fill","#374151"),$.append("text").attr("x",o/2).attr("y",l-u+36).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Pre-operative Albumin (g/dL)"),$.append("text").attr("transform",`translate(${u-36}, ${l/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Average ICU Stay (days)"),$.append("text").attr("x",o/2).attr("y",u-16).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","600").attr("fill","#1f2937").text("Hidden Risk Factor — The Albumin Cliff");const F=o-u-120,L=u,V=$.append("g").attr("transform",`translate(${F}, ${L})`),D=[0,1,2,3,4,5],Z=15;V.selectAll("rect").data(D).enter().append("rect").attr("x",(T,X)=>X*(Z+2)).attr("y",0).attr("width",Z).attr("height",10).attr("fill",T=>h(T)),V.append("text").attr("x",0).attr("y",24).attr("font-size","12px").attr("fill","#374151").text("ICU ≥ 5d"),V.append("text").attr("x",(Z+2)*5+4).attr("y",24).attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text("0–1d")}ue(()=>{c(s)&&f(c(a))}),st(()=>(pt(r()),c(i)),()=>{r()?R(a,r().filter(x=>{const $=+x.preop_alb;return!Number.isFinite($)||$<=0?!1:c(i)==="elective"?x.emop===0&&x.ane_type==="General":c(i)==="emergency"?x.emop===1:!0})):R(a,[])}),st(()=>(c(s),c(a)),()=>{c(s)&&f(c(a))}),De(),Re();var d=zh(),g=_n(d),y=C(g),S=C(y);xt(S),S.value=S.__value="elective",Ct(2),E(y);var p=I(y,2),v=C(p);xt(v),v.value=v.__value="emergency",Ct(2),E(p);var k=I(p,2),m=C(k);xt(m),m.value=m.__value="all",Ct(2),E(k),E(g);var b=I(g,2);Rn(b,x=>R(s,x),()=>c(s)),ir(n,[],S,()=>c(i),x=>R(i,x)),ir(n,[],v,()=>c(i),x=>R(i,x)),ir(n,[],m,()=>c(i),x=>R(i,x)),ot(t,d),pe()}var Lh=ut(`<div class="mt-4 rounded bg-red-100 p-4 text-red-800"><h4 class="font-bold mb-2">⚠️ No Matching Cases Found</h4> <p>There are no historical cases that match your current patient profile. Consider:</p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some of your filters</li> <li>Adjusting the patient's characteristics to more common values</li> <li>Using a broader range for age, BMI, or ASA score</li></ul></div>`),qh=ut('<div class="mt-4 rounded bg-yellow-100 p-4 text-yellow-800"><h4 class="font-bold mb-2">⚠️ Limited Data Available</h4> <p> </p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some filters to get more comparable cases</li> <li>Adjusting the patient profile to match more common characteristics</li></ul></div>'),Bh=ut('<button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Make a Guess</button>'),Oh=ut('<button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600">Back</button>'),Hh=ut('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold">Make Your Predictions</h3> <div class="grid gap-4"><div><label class="block text-sm text-gray-600">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="mt-1 w-full rounded border p-2"/></div></div></div>'),Xh=ut(`<p class="mt-2 text-red-600">Your predictions were quite far from the actual outcomes. Consider reviewing the patient's risk factors more carefully.</p>`),Uh=ut('<p class="mt-2 text-orange-600">Your predictions were somewhat off. Try to consider how different factors might interact to affect outcomes.</p>'),Vh=ut(`<p class="mt-2 text-yellow-600">Good predictions! You're getting better at understanding how patient characteristics influence outcomes.</p>`),Yh=ut('<p class="mt-2 text-green-600">Excellent predictions! You have a strong understanding of how patient factors correlate with surgical outcomes.</p>'),Wh=ut('<div class="mt-4 rounded bg-yellow-50 p-3 text-sm text-yellow-800"> <!></div>'),Gh=ut('<h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <div class="h-2 w-full rounded-full" style="background: linear-gradient(to right, #22c55e, #ef4444)"></div> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <!>',1),Kh=ut('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><div class="flex gap-8"><div class="flex-1 space-y-6"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold">Adjust Patient Profile</h3> <div class="flex items-center gap-2 text-sm text-gray-600"><span> </span></div></div> <div class="grid grid-cols-2 gap-4"><label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Age Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Height Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">BMI Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">ASA Filter</span></label></div> <div class="space-y-6"><div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" step="0.1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" min="1" max="5" step="1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div></div></div> <div class="flex flex-1 items-center justify-center"><svg class="h-full w-full" style="min-height: 350px; max-height: 500px;"><circle cx="100" cy="30" r="20"></circle><line x1="100" y1="50" x2="100"></line><ellipse cx="100"></ellipse><line x1="100" y1="80"></line><line x1="100" y1="80"></line><line x1="100" x2="70"></line><line x1="100" x2="130"></line><path d="M80,20 Q100,0 120,20" fill="none"></path></svg></div></div> <div class="mt-4 rounded bg-blue-50 p-3 text-sm text-blue-800"> </div> <!> <div class="mt-4 flex space-x-4"><!> <button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600"> </button></div> <!> <!></div>');function Qh(t,e){de(e,!1);const n=U(),r=U(),i=U(),a=U(),s=U(),o=U(),l=U(),u=U(),h=U(),f=U(),d=U(),g=U(),y=U(),S=U();let p=Tt(e,"predictors",12),v=Tt(e,"cases",24,()=>[]),k=U(!1),m=U({icuDays:0,mortality:0,bloodLoss:0}),b=U(!1),x=U(0),$=U(!1),M=U({age:!0,height:!0,bmi:!0,asa:!0});function N(q){const rt=q/2.54,At=Math.floor(rt/12),vt=Math.round(rt%12);return{feet:At,inches:vt}}function P(q,rt){return Math.round((q*12+rt)*2.54)}const A={min:{feet:4,inches:5},max:{feet:7,inches:5}};let w=U(0),B=U(0),_=U(0),z=U(0),G=U({q1:0,q3:0}),F=U({q1:0,q3:0});function L(q,rt,At){if(rt===0&&q===0)return 1;if(rt===0||q===0)return 0;const vt=Math.abs(q-rt)/Math.max(rt,1);return Math.exp(-vt)}function V(){R(k,!0),R(b,!1),R($,!1),R(m,{icuDays:0,mortality:0,bloodLoss:0})}const D={1:"#22c55e",2:"#a3e635",3:"#eab308",4:"#f97316",5:"#ef4444"};st(()=>{},()=>{R(n,{min:P(A.min.feet,A.min.inches),max:P(A.max.feet,A.max.inches)})}),st(()=>pt(v()),()=>{R(r,v().length>0?{min:Math.min(...v().map(q=>q.age)),max:Math.max(...v().map(q=>q.age))}:{min:0,max:0})}),st(()=>pt(v()),()=>{R(i,v().length>0?{min:Math.min(...v().map(q=>q.bmi)),max:Math.max(...v().map(q=>q.bmi))}:{min:0,max:0})}),st(()=>pt(v()),()=>{R(a,v().length>0?[...new Set(v().map(q=>q.asa))].sort():[])}),st(()=>(pt(v()),c(M),pt(p()),c(w),c(B),c(_),c(k),c(b),c(m)),()=>{if(v().length>0){const q=c(M).age?v().filter(ft=>Math.abs(ft.age-p().age)<=5):v(),rt=c(M).bmi?v().filter(ft=>Math.abs(ft.bmi-p().bmi)<=5):v(),At=c(M).height?v().filter(ft=>Math.abs(ft.height-p().height)<=5.08):v(),vt=c(M).asa?v().filter(ft=>Math.abs(ft.asa-p().asa)<=2):v(),Mt=q.filter(ft=>rt.includes(ft)).filter(ft=>At.includes(ft)).filter(ft=>vt.includes(ft));if(R(z,Mt.length),Mt.length>0){const ft=Mt.map(at=>Number(at.icu_days)).filter(at=>!isNaN(at)).sort((at,Dt)=>at-Dt);R(w,ft.reduce((at,Dt)=>at+Dt,0)/ft.length),R(G,{q1:ft[Math.floor(ft.length*.25)],q3:ft[Math.floor(ft.length*.75)]}),R(B,Mt.reduce((at,Dt)=>at+(Dt.death_inhosp||0),0)/Mt.length);const Rt=Mt.map(at=>Number(at.intraop_ebl)).filter(at=>!isNaN(at)).sort((at,Dt)=>at-Dt);if(R(_,Rt.reduce((at,Dt)=>at+Dt,0)/Rt.length),R(F,{q1:Rt[Math.floor(Rt.length*.25)],q3:Rt[Math.floor(Rt.length*.75)]}),c(k)&&c(b)){const at=L(c(m).icuDays,c(w)),Dt=L(c(m).mortality,c(B)*100,Mt.map(qe=>qe.death_inhosp*100)),on=L(c(m).bloodLoss,c(_));R(x,at*.4+Dt*.3+on*.3)}}else R(w,0),R(B,0),R(_,0),R(G,{q1:0,q3:0}),R(F,{q1:0,q3:0})}}),st(()=>(pt(p()),c(n)),()=>{R(s,(p().height-c(n).min)/(c(n).max-c(n).min))}),st(()=>c(s),()=>{R(o,250+c(s)*150)}),st(()=>(pt(p()),c(i)),()=>{R(l,2+(p().bmi-c(i).min)/(c(i).max-c(i).min)*4)}),st(()=>(pt(p()),c(i)),()=>{R(u,(p().bmi-c(i).min)/(c(i).max-c(i).min))}),st(()=>c(u),()=>{R(h,10+c(u)*25)}),st(()=>c(o),()=>{R(f,c(o)*.2)}),st(()=>(pt(p()),c(r)),()=>{R(d,`rgb(${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255})`)}),st(()=>pt(p()),()=>{R(g,D[p().asa]||D[1])}),st(()=>c(M),()=>{R(y,Object.values(c(M)).filter(Boolean).length)}),st(()=>c(y),()=>{R(S,c(y)===4?"all filters":`${c(y)} filter${c(y)===1?"":"s"}`)}),De(),Re();var Z=Kh(),T=C(Z),X=C(T),it=C(X),gt=I(C(it),2),mt=C(gt),ct=C(mt);E(mt),E(gt),E(it);var J=I(it,2),K=C(J),qt=C(K);xt(qt),Ct(2),E(K);var bt=I(K,2),$t=C(bt);xt($t),Ct(2),E(bt);var H=I(bt,2),ht=C(H);xt(ht),Ct(2),E(H);var yt=I(H,2),et=C(yt);xt(et),Ct(2),E(yt),E(J);var lt=I(J,2),O=C(lt),j=C(O),Y=C(j);E(j);var nt=I(j,2);xt(nt);var tt=I(nt,2),_t=C(tt);E(tt),E(O);var Pt=I(O,2),Bt=C(Pt),Pe=C(Bt);E(Bt);var ge=I(Bt,2);xt(ge);var jr=I(ge,2),ts=C(jr);E(jr),E(Pt);var rn=I(Pt,2),Bn=C(rn),es=C(Bn);E(Bn);var me=I(Bn,2);xt(me);var ti=I(me,2),ns=C(ti);E(ti),E(rn);var On=I(rn,2),Hn=C(On),rs=C(Hn);E(Hn);var an=I(Hn,2);xt(an);var ei=I(an,2),is=C(ei);E(ei),E(On),E(lt),E(X);var ni=I(X,2),Xn=C(ni),sn=C(Xn),Le=I(sn),ae=I(Le),ve=I(ae),ye=I(ve),xe=I(ye),be=I(xe),Un=I(be);E(Xn),E(ni),E(T);var Vn=I(T,2),as=C(Vn);E(Vn);var ri=I(Vn,2);{var ss=q=>{var rt=Lh();ot(q,rt)},os=(q,rt)=>{{var At=vt=>{var Ft=qh(),Ot=I(C(Ft),2),Mt=C(Ot);E(Ot),Ct(2),E(Ft),Ut(()=>dt(Mt,`Only ${c(z)??""} cases match your current filters. The predictions may not be reliable. Consider:`)),ot(vt,Ft)};Et(q,vt=>{c(z)<10&&vt(At)},rt)}};Et(ri,q=>{c(z)===0?q(ss):q(os,!1)})}var Yn=I(ri,2),ii=C(Yn);{var ls=q=>{var rt=Bh();Se("click",rt,V),ot(q,rt)},us=q=>{var rt=Oh();Se("click",rt,()=>{R(k,!1),R(b,!1),R($,!1)}),ot(q,rt)};Et(ii,q=>{c(k)?q(us,!1):q(ls)})}var Wn=I(ii,2),cs=C(Wn,!0);E(Wn),E(Yn);var ai=I(Yn,2);{var fs=q=>{var rt=Hh(),At=I(C(rt),2),vt=C(At),Ft=I(C(vt),2);xt(Ft),E(vt);var Ot=I(vt,2),Mt=I(C(Ot),2);xt(Mt),E(Ot);var ft=I(Ot,2),Rt=I(C(ft),2);xt(Rt),E(ft),E(At),E(rt),jt(Ft,()=>c(m).icuDays,at=>ee(m,c(m).icuDays=at)),jt(Mt,()=>c(m).mortality,at=>ee(m,c(m).mortality=at)),jt(Rt,()=>c(m).bloodLoss,at=>ee(m,c(m).bloodLoss=at)),ot(q,rt)};Et(ai,q=>{c(k)&&q(fs)})}var hs=I(ai,2);{var ds=q=>{var rt=Gh(),At=I(_n(rt),2),vt=C(At),Ft=I(C(vt),2),Ot=C(Ft);E(Ft);var Mt=I(Ft,2),ft=C(Mt);E(Mt),E(vt);var Rt=I(vt,2),at=I(C(Rt),4),Dt=C(at);E(at),E(Rt);var on=I(Rt,2),qe=I(C(on),2),ps=C(qe);E(qe);var si=I(qe,2),gs=C(si);E(si),E(on),E(At);var ms=I(At,2);{var vs=Be=>{var Oe=Wh(),ln=C(Oe),Gn=I(ln);{var Kn=Yt=>{var Zn=Xh();ot(Yt,Zn)},Qn=(Yt,Zn)=>{{var ys=_e=>{var Jn=Uh();ot(_e,Jn)},xs=(_e,Jn)=>{{var bs=we=>{var jn=Vh();ot(we,jn)},_s=we=>{var jn=Yh();ot(we,jn)};Et(_e,we=>{c(x)<=.75?we(bs):we(_s,!1)},Jn)}};Et(Yt,_e=>{c(x)<=.5?_e(ys):_e(xs,!1)},Zn)}};Et(Gn,Yt=>{c(x)<=.25?Yt(Kn):Yt(Qn,!1)})}E(Oe),Ut(Yt=>dt(ln,`Your guess was ${Yt??""}% accurate! `),[()=>(c(x)*100).toFixed(1)],ie),ot(Be,Oe)};Et(ms,Be=>{c(k)&&c(b)&&Be(vs)})}Ut((Be,Oe,ln,Gn,Kn,Qn,Yt)=>{dt(Ot,`${Be??""} days`),dt(ft,`IQR: ${Oe??""} - ${ln??""} days`),dt(Dt,`${Gn??""}%`),dt(ps,`${Kn??""} mL`),dt(gs,`IQR: ${Qn??""} - ${Yt??""} mL`)},[()=>c(w).toFixed(1),()=>c(G).q1.toFixed(1),()=>c(G).q3.toFixed(1),()=>(c(B)*100).toFixed(1),()=>c(_).toFixed(0),()=>c(F).q1.toFixed(0),()=>c(F).q3.toFixed(0)],ie),ot(q,rt)};Et(hs,q=>{(!c(k)||c(b))&&c($)&&q(ds)})}E(Z),Ut((q,rt,At,vt,Ft,Ot)=>{dt(ct,`Active: ${c(S)??""}`),un(O,1,cn(c(M).age?"":"opacity-50")),dt(Y,`Age: ${p().age??""} years`),W(nt,"min",c(r).min),W(nt,"max",c(r).max),nt.disabled=!c(M).age,dt(_t,`Range: ${c(r).min??""} - ${c(r).max??""} years`),un(Pt,1,cn(c(M).height?"":"opacity-50")),dt(Pe,`Height: ${q??""}' ${rt??""}"`),W(ge,"min",c(n).min),W(ge,"max",c(n).max),ge.disabled=!c(M).height,dt(ts,`Range: ${A.min.feet}'${A.min.inches}" - ${A.max.feet}'${A.max.inches}"`),un(rn,1,cn(c(M).bmi?"":"opacity-50")),dt(es,`BMI: ${p().bmi??""}`),W(me,"min",c(i).min),W(me,"max",c(i).max),me.disabled=!c(M).bmi,dt(ns,`Range: ${At??""} - ${vt??""}`),un(On,1,cn(c(M).asa?"":"opacity-50")),dt(rs,`ASA Score: ${p().asa??""}`),an.disabled=!c(M).asa,dt(is,`ASA ${p().asa??""}: ${p().asa===1?"Healthy patient":p().asa===2?"Mild systemic disease":p().asa===3?"Severe systemic disease":p().asa===4?"Severe systemic disease that is a constant threat to life":"Moribund patient not expected to survive without the operation"}`),W(Xn,"viewBox",`0 0 200 ${c(o)??""}`),W(sn,"fill",c(g)),W(sn,"stroke-width",c(l)),W(sn,"opacity",c(M).asa?1:.5),W(Le,"y2",c(o)*.6),W(Le,"stroke",c(g)),W(Le,"stroke-width",c(l)),W(Le,"opacity",c(M).asa?1:.5),W(ae,"cy",c(o)*.45),W(ae,"rx",c(h)),W(ae,"ry",c(f)),W(ae,"fill",c(g)),W(ae,"stroke-width",c(l)),W(ae,"opacity",c(M).bmi?1:.5),W(ve,"x2",Ft),W(ve,"y2",c(o)*.4),W(ve,"stroke",c(g)),W(ve,"stroke-width",c(l)),W(ve,"opacity",c(M).asa?1:.5),W(ye,"x2",Ot),W(ye,"y2",c(o)*.4),W(ye,"stroke",c(g)),W(ye,"stroke-width",c(l)),W(ye,"opacity",c(M).asa?1:.5),W(xe,"y1",c(o)*.6),W(xe,"y2",c(o)*.9),W(xe,"stroke",c(g)),W(xe,"stroke-width",c(l)),W(xe,"opacity",c(M).asa?1:.5),W(be,"y1",c(o)*.6),W(be,"y2",c(o)*.9),W(be,"stroke",c(g)),W(be,"stroke-width",c(l)),W(be,"opacity",c(M).asa?1:.5),W(Un,"stroke",c(d)),W(Un,"stroke-width",c(l)*1.5),W(Un,"opacity",c(M).age?1:.5),dt(as,`Found ${c(z)??""} historical patients with similar characteristics`),dt(cs,c($)?"Hide Outcomes":"Show Outcomes")},[()=>N(p().height).feet,()=>N(p().height).inches,()=>c(i).min.toFixed(1),()=>c(i).max.toFixed(1),()=>60-Math.max(0,c(h)-20),()=>140+Math.max(0,c(h)-20)],ie),$e(qt,()=>c(M).age,q=>ee(M,c(M).age=q)),$e($t,()=>c(M).height,q=>ee(M,c(M).height=q)),$e(ht,()=>c(M).bmi,q=>ee(M,c(M).bmi=q)),$e(et,()=>c(M).asa,q=>ee(M,c(M).asa=q)),jt(nt,()=>p().age,q=>p(p().age=q,!0)),jt(ge,()=>p().height,q=>p(p().height=q,!0)),jt(me,()=>p().bmi,q=>p(p().bmi=q,!0)),jt(an,()=>p().asa,q=>p(p().asa=q,!0)),Se("click",Wn,()=>{R($,!c($)),c(k)&&R(b,!0)}),ot(t,Z),pe()}var Zh=ut('<p class="py-16 text-center text-lg">Loading VitalDB dataset …</p>'),Jh=ut(`<article class="prose mx-auto space-y-20 py-10"><section class="space-y-6 text-center"><h1 class="text-4xl leading-tight font-semibold md:text-5xl">Vitals&nbsp;Unveiled:<br/> <span class="text-indigo-600">Why Some "Routine" Surgeries Aren't</span></h1> <p class="mx-auto max-w-2xl text-lg md:text-xl">Every morning an OR schedule hums like clockwork. <strong>6 388</strong> patients arrive,
				expecting a smooth ride through anesthesia and stitched-up certainty. Yet buried in those
				charts are <em>blood-loss spikes, surprise ICU transfers, and silent tragedies</em> that no checklist
				predicted. What separates the happy recoveries from the heart-stopping detours?</p> <p class="mx-auto max-w-2xl text-lg md:text-xl">Scroll on 👇 as we crack open the VitalDB dataset to follow every heartbeat, incision, and
				lab value—then build <strong>interactive risk profiles</strong> that may one day warn us before
				routine turns to critical.</p> <!></section> <section><h2>Who Steps Into the OR?</h2> <p class="mb-4 max-w-xl">Let's start by meeting our patients. The charts below reveal a striking pattern: while our
				patients span six decades, <strong>95% cluster in just two surgical departments</strong>. This concentration—combined
				with age and sex differences—creates wildly different baseline risks before the first
				incision. Click any department bar or select an age range to filter the dashboard and see
				how demographics shift across specialties.</p> <style>/* Ensure both charts have the same height */
				.visualization-grid > :global(div) {
					display: flex;
					flex-direction: column;
					min-height: 520px; /* Set a minimum height for both chart containers */
				}

				.visualization-grid > :global(div) > :global(.chart) {
					flex: 1;
					display: flex;
					flex-direction: column;
					min-height: 420px; /* Increased height to accommodate larger bottom margin */
				}

				.visualization-grid > :global(div) > :global(.chart) > :global(svg) {
					flex: 1;
					min-height: 400px; /* Increased minimum height to match */
				}

				/* Make insights sections the same height */
				.visualization-grid > :global(div) > :global(.insights) {
					min-height: 80px;
				}</style> <div class="controls-container mb-4"><div class="flex flex-wrap gap-4"><label class="flex cursor-pointer items-center gap-2"><input type="checkbox"/> Show percentages</label> <label class="flex cursor-pointer items-center gap-2"><input type="checkbox"/> Split by sex</label> <p class="text-xs text-gray-600 italic"><i>Tip: Click and drag on the age chart to filter by age range. Click on department bars
							to filter by department.</i></p></div></div> <div class="visualization-grid grid gap-8 md:grid-cols-2"><!> <!></div></section> <section><h2 class="mb-1 pb-2 text-left text-3xl font-bold">Time on the Table</h2> <p class="max-w-9xl mx-auto mb-4">Each dot marks a key moment in surgery. The visualization shows <strong>mean, min, and max durations</strong> across our 6,388 cases. Try the filters above—switch between department and surgery type to see
				how <strong>different procedures have their own rhythm</strong>. For instance, breast
				surgeries average just <strong>34 minutes</strong> from anesthesia to incision, while
				transplantations take nearly twice as long, <strong>at 70 minutes</strong>. This
				pre-incision time matters, as longer anesthesia exposure before surgery increases risk of
				complications. If you're facing surgery, use these filters to see typical timing patterns
				for your procedure—knowledge that can help you understand and prepare for your own surgical
				journey. Hover over dots for exact timing stats.</p> <div><!></div></section> <section><h2>Hidden Risk Factor — The Albumin Cliff</h2> <p>Albumin is a blood protein that reflects nutritional reserve and overall physiological
				resilience. In the pre-operative setting, low albumin levels often signal that a patient's
				body may struggle to recover. By highlighting albumin, we remind viewers that a seemingly
				"routine" lab value—often checked before surgery—can quietly predict who sails through the
				OR and who may end up in the ICU. It's the kind of hidden detail that turns "routine" into
				"unexpected" when no one is watching.</p> <br/> <p><strong>x-axis</strong> = pre-operative albumin (g/dL). <strong>Dot colour</strong> = post-op ICU stay (<span style="color:#a50026">red ≈ ≥ 3 days</span>, <span style="color:#3288bd">deep-blue ≈ 0–1 day</span>). Use the radio buttons to flip
				between routine <b>elective</b>, urgent <b>emergency</b>, or <b>all</b> cases. Below a certain threshold, the
				risk of prolonged ICU stay climbs sharply—our so-called "Albumin Cliff."</p> <br/> <!> <h3>What we actually see</h3> <ul class="list-inside list-disc space-y-1"><li><strong>In elective cases, a pronounced shift appears near 3 g/dL.</strong> Patients with
					albumin just under 3 g/dL begin to light up orange and red, whereas above 3 g/dL most stay
					deep-blue. <span class="font-semibold">Median ICU stay below 3 g/dL is about 2.1 days (IQR 1–4),</span> compared to <span class="font-semibold">0.7 days (IQR 0–1) above 3 g/dL</span>. A few low-albumin blue
					outliers exist, but long-stayers (amber & red) become nearly three times more common once
					you cross that cliff.</li> <li><strong>In emergencies, the "cliff" shifts upward to around 3.5 g/dL.</strong> Because
					urgent cases already carry extra risk, the median albumin threshold where ICU stays spike
					is higher. Below ~3.5 g/dL, <span class="font-semibold">the chance of ≥ 3-day ICU stay more than doubles</span> compared
					to those with albumin above 3.5 g/dL. The spread of dots is wider, but the colour gradient
					still tilts toward red as albumin drops.</li> <li>High-albumin (> 4 g/dL) patients rarely linger, anchoring the schedule "clockwork" we saw
					in the opening hook.</li></ul> <p><b>Take-away&nbsp;→</b> Albumin isn't a guarantee of trouble, but a <em>silent gravity well</em>: the lower it drops, the harder it is to climb off the ICU
				track. Even in apparently routine electives, nutrition can tip the balance from day-case
				discharge to days of critical care.</p></section>   <section><h2>Interactive Risk Builder</h2> <p class="mb-4 max-w-xl">Now it's your turn. Build a patient profile using the sliders below. Watch how tiny shifts—a
				single ASA notch or clicking 'Emergency'—can triple the mortality risk instantly. We'll show
				you how many similar historical cases we found, so you can trust the predictions. Try the
				"Make a Guess" mode to test your intuition against the data.</p> <!></section> <section class="text-center"><div class="mx-auto max-w-2xl rounded-lg bg-indigo-50 p-8"><h2 class="mb-4 text-2xl font-semibold text-indigo-900">The Takeaway</h2> <p class="text-lg text-indigo-800">The data reveals three critical insights: First, pre-op albumin levels—easily measured and
					often correctable—strongly predict ICU stays. Second, emergency status and ASA score
					interact in ways that standard checklists miss. And third, while we can't change age, we
					can optimize timing, prepare blood products, and adjust recovery expectations based on
					these risk factors. The data tells us where to look—before the knife ever touches skin.</p></div></section></article> <section>1. What have you done so far? So far, we’ve built a comprehensive exploratory analysis of our
		surgical patient population to lay the groundwork for outcome-based modeling. We began by
		visualizing age distribution, revealing a wide range of patients from their twenties to their
		eighties. This range emphasizes the variation in baseline risk and physiological resilience
		across the cohort. We then created a department-wise breakdown of surgical cases, showing that
		general surgery dominates in volume, with notable contributions from thoracic surgery and
		urology. <br/><br/>In addition to demographic insights, we constructed a line chart to compare the
		average duration of each surgical phase (anesthesia, surgery, and recovery) across departments.
		This helps contextualize how time and resource demands vary by specialty. We also explored risk
		stratification through a radar chart comparing median outcomes for high- and low-risk cohorts.
		Metrics like mortality, ICU stay, and blood loss were visualized, clearly showing that
		pre-operative risk factors correlate with worse outcomes. Finally, we built an interactive tool
		that allows users to manipulate variables like age, ASA status, and emergency status to simulate
		predicted risks, making the data both accessible and actionable. <br/><br/>2. What will be the most challenging part of your project to design and why? The
		most challenging component of the project will likely be the design and refinement of the “Build
		Your Own Patient” predictive interface. While the tool currently visualizes model output based
		on user-selected inputs, accurately modeling risk for ICU stay and in-hospital mortality from
		such a small set of parameters introduces complexity. Capturing the nuances of surgical
		risk—especially interactions between variables like age and ASA score—requires both careful
		feature engineering and robust validation against clinical outcomes. <br/><br/>Additionally, designing an interface that is intuitive yet scientifically accurate
		presents a UI/UX challenge. Users must understand the sensitivity of predictions without
		misinterpreting them as deterministic. Balancing simplicity with explanatory power, and ensuring
		the tool reflects real-world risk distributions without bias, will require tight integration
		between the front-end experience and the underlying model logic. Finally, scaling the model for
		more granular or department-specific predictions while maintaining speed and clarity will
		require thoughtful architectural decisions as the project evolves.</section>`,1);function od(t,e){de(e,!1);let n=U([]),r=U(!0),i=U([]),a=U(null),s=U(null),o=U(!1),l=U(!0);function u(m){const{department:b}=m.detail;R(a,b),d()}function h(m){R(o,m.detail.showPercentage)}function f(m){const{ageRange:b}=m.detail;R(s,b),d()}function d(){let m=[...c(n)];c(a)&&(m=m.filter(b=>b.department===c(a))),c(s)&&(m=m.filter(b=>b.age!==void 0&&b.age>=c(s)[0]&&b.age<=c(s)[1])),R(i,m)}function g(m){return m==null||m.trim()===""?"":/^[+\-]?\d+(\.\d+)?$/.test(m)?+m:m}ue(async()=>{const m=`${Ks}/cases.csv`;R(n,await vo(m,b=>{const x={};for(const $ in b)x[$]=g(b[$]);return x})),R(r,!1)});let y=U({age:60,bmi:25,asa:2,emergency:0});st(()=>c(n),()=>{if(c(n).length>0){let P=function(A,w){const B=A.avgWait;A.count++,A.avgWait=(B*(A.count-1)+w)/A.count,A.stdDev=Math.sqrt(((A.count-2)*A.stdDev*A.stdDev+(w-B)*(w-A.avgWait))/(A.count-1))};const m=c(n).filter(A=>A.emop===1&&(A.preop_alb??0)<3),b=c(n).filter(A=>A.emop===0&&(A.preop_alb??0)>3.5),x=m.length>0?m.reduce((A,w)=>A+(w.death_inhosp??0),0)/m.length:0,$=b.length>0?b.reduce((A,w)=>A+(w.death_inhosp??0),0)/b.length:0;console.log("Emergency Low Alb Mortality:",(x*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",($*100).toFixed(1)+"%"),console.log("Ratio:",(x/($||.001)).toFixed(1)+"x");const M=new Map,N=new Map;c(n).forEach(A=>{if(A.department&&A.optype&&A.anestart&&A.opstart){const w=(A.opstart-A.anestart)/60;M.has(A.department)||M.set(A.department,{count:0,avgWait:0,stdDev:0}),P(M.get(A.department),w),N.has(A.optype)||N.set(A.optype,{count:0,avgWait:0,stdDev:0}),P(N.get(A.optype),w)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(M.entries()).sort((A,w)=>w[1].count-A[1].count).forEach(([A,w])=>{console.log(`${A}: ${w.count} cases, avg wait ${w.avgWait.toFixed(1)} ± ${w.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(N.entries()).sort((A,w)=>w[1].count-A[1].count).slice(0,10).forEach(([A,w])=>{console.log(`${A}: ${w.count} cases, avg wait ${w.avgWait.toFixed(1)} ± ${w.stdDev.toFixed(1)} min`)})}}),De(),Re();var S=ws(),p=_n(S);{var v=m=>{var b=Zh();ot(m,b)},k=m=>{var b=Jh(),x=_n(b),$=C(x),M=I(C($),6);const N=ie(()=>[{label:"Total Surgeries",value:c(n).length},{label:"ICU Transfers",value:c(n).filter(K=>(K.icu_days??0)>0).length},{label:"In-hospital Deaths",value:c(n).filter(K=>K.death_inhosp==1).length}]);ko(M,{get stats(){return c(N)}}),E($);var P=I($,2),A=I(C(P),6),w=C(A),B=C(w),_=C(B);xt(_),Ct(),E(B);var z=I(B,2),G=C(z);xt(G),Ct(),E(z),Ct(2),E(w),E(A);var F=I(A,2),L=C(F);const V=ie(()=>c(a)?c(i):c(n));mh(L,{get data(){return c(V)},get showPercentage(){return c(o)},set showPercentage(K){R(o,K)},get showBySex(){return c(l)},set showBySex(K){R(l,K)},$$events:{percentageChange:h,filter:f},$$legacy:!0});var D=I(L,2);const Z=ie(()=>c(s)?c(i):c(n));bh(D,{get data(){return c(Z)},get filteredDepartment(){return c(a)},get showPercentage(){return c(o)},$$events:{filter:u}}),E(F),E(P);var T=I(P,2),X=I(C(T),4),it=C(X);Eh(it,{get cases(){return c(n)}}),E(X),E(T);var gt=I(T,2),mt=I(C(gt),10);Ph(mt,{get patients(){return c(n)}}),Ct(6),E(gt);var ct=I(gt,2),J=I(C(ct),4);Qh(J,{get cases(){return c(n)},get predictors(){return c(y)},set predictors(K){R(y,K)},$$legacy:!0}),E(ct),Ct(2),E(x),Ct(2),$e(_,()=>c(o),K=>R(o,K)),Se("change",_,()=>{h({detail:{showPercentage:c(o)}})}),$e(G,()=>c(l),K=>R(l,K)),ot(m,b)};Et(p,m=>{c(r)?m(v):m(k,!1)})}ot(t,S),pe()}export{od as component};
