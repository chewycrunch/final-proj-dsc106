import{d as jn,a as dt,f as At}from"../chunks/bPvJk30M.js";import{o as ne,a as en}from"../chunks/DnaeXIsx.js";import{o as ti,q as ft,v as ei,g as v,N as tr,w as ni,x as ri,y as _n,z as yn,A as Ce,F as Ot,aa as ii,B as er,C as nr,D as ai,at as Te,ae as rr,a2 as xn,au as oi,Y as U,av as wn,a5 as ir,aw as si,ax as li,ad as ui,ay as fi,aq as ci,az as hi,aA as di,a8 as pi,aB as gi,aC as mi,aD as vi,aE as _i,b as yi,I as xi,G as ar,aF as wi,aG as bi,p as Ft,k as Dt,R as P,aH as ct,aI as nn,t as Gt,m as $,s as k,e as J,aJ as bn,n as N,aK as zt,j as or,am as Re,Q as Mi,a as Ai,as as Mn}from"../chunks/DRqU9nQu.js";import{a as ki,l as sr,s as G,e as $i}from"../chunks/BkolBn-3.js";import{p as ht,b as Qt,i as lr}from"../chunks/BAi1eWQ2.js";import{b as Ni}from"../chunks/zJuMvR3S.js";import{i as re}from"../chunks/Bzh-Jt6d.js";function Si(t,e){return e}function Ei(t,e,n,r){for(var i=[],a=e.length,o=0;o<a;o++)li(e[o].e,i,!0);var s=a>0&&i.length===0&&n!==null;if(s){var l=n.parentNode;ui(l),l.append(n),r.clear(),vt(t,e[0].prev,e[a-1].next)}fi(i,()=>{for(var u=0;u<a;u++){var f=e[u];s||(r.delete(f.k),vt(t,f.prev,f.next)),ci(f.e,!s)}})}function Ci(t,e,n,r,i,a=null){var o=t,s={flags:e,items:new Map,first:null};ft&&ei();var l=null,u=!1,f=tr(()=>{var h=n();return ir(h)?h:h==null?[]:rr(h)});ti(()=>{var h=v(f),c=h.length;if(u&&c===0)return;u=c===0;let d=!1;if(ft){var p=ni(o)===ri;p!==(c===0)&&(o=_n(),yn(o),Ce(!1),d=!0)}if(ft){for(var g=null,_,m=0;m<c;m++){if(Ot.nodeType===8&&Ot.data===ii){o=Ot,d=!0,Ce(!1);break}var w=h[m],A=r(w,m);_=ur(Ot,s,g,null,w,A,m,i,e,n),s.items.set(A,_),g=_}c>0&&yn(_n())}ft||Ti(h,s,o,i,e,r,n),a!==null&&(c===0?l?er(l):l=nr(()=>a(o)):l!==null&&ai(l,()=>{l=null})),d&&Ce(!0),v(f)}),ft&&(o=Ot)}function Ti(t,e,n,r,i,a,o){var s=t.length,l=e.items,u=e.first,f=u,h,c=null,d=[],p=[],g,_,m,w;for(w=0;w<s;w+=1){if(g=t[w],_=a(g,w),m=l.get(_),m===void 0){var A=f?f.e.nodes_start:n;c=ur(A,e,c,c===null?e.first:c.next,g,_,w,r,i,o),l.set(_,c),d=[],p=[],f=c.next;continue}if(Ri(m,g,w),(m.e.f&Te)!==0&&er(m.e),m!==f){if(h!==void 0&&h.has(m)){if(d.length<p.length){var S=p[0],y;c=S.prev;var L=d[0],M=d[d.length-1];for(y=0;y<d.length;y+=1)An(d[y],S,n);for(y=0;y<p.length;y+=1)h.delete(p[y]);vt(e,L.prev,M.next),vt(e,c,L),vt(e,M,S),f=S,c=M,w-=1,d=[],p=[]}else h.delete(m),An(m,f,n),vt(e,m.prev,m.next),vt(e,m,c===null?e.first:c.next),vt(e,c,m),c=m;continue}for(d=[],p=[];f!==null&&f.k!==_;)(f.e.f&Te)===0&&(h??(h=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;m=f}d.push(m),c=m,f=m.next}if(f!==null||h!==void 0){for(var E=h===void 0?[]:rr(h);f!==null;)(f.e.f&Te)===0&&E.push(f),f=f.next;var D=E.length;if(D>0){var F=null;Ei(e,E,F,l)}}xn.first=e.first&&e.first.e,xn.last=c&&c.e}function Ri(t,e,n,r){oi(t.v,e),t.i=n}function ur(t,e,n,r,i,a,o,s,l,u){var f=(l&hi)!==0,h=(l&di)===0,c=f?h?U(i):wn(i):i,d=(l&si)===0?o:wn(o),p={i:d,v:c,k:a,a:null,e:null,prev:n,next:r};try{return p.e=nr(()=>s(t,c,d,u),ft),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?e.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function An(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var o=pi(a);i.before(a),a=o}}function vt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const Ii=Symbol("is custom element"),Fi=Symbol("is html");function Nt(t){if(ft){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;kn(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;kn(t,"checked",null),t.checked=i}}};t.__on_r=n,gi(n),ki()}}function Di(t,e){var n=fr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function kn(t,e,n,r){var i=fr(t);ft&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[mi]=n),t.removeAttribute(e))}function fr(t){return t.__attributes??(t.__attributes={[Ii]:t.nodeName.includes("-"),[Fi]:t.namespaceURI===vi})}function Wt(t,e,n=e){var r=_i();sr(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=Ie(t)?Fe(a):a,n(a),r&&a!==(a=e())){var o=t.selectionStart,s=t.selectionEnd;t.value=a??"",s!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(s,t.value.length))}}),(ft&&t.defaultValue!==t.value||yi(e)==null&&t.value)&&n(Ie(t)?Fe(t.value):t.value),xi(()=>{var i=e();Ie(t)&&i===Fe(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ie(t){var e=t.type;return e==="number"||e==="range"}function Fe(t){return t===""?null:+t}function cr(t,e,n){if(t.multiple)return e==null?void 0:ir(e)?Pi(t,e):wi();for(var r of t.options){var i=Zt(r);if(bi(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Li(t,e){ar(()=>{var n=new MutationObserver(()=>{var r=t.__value;cr(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function $n(t,e,n=e){var r=!0;sr(t,"change",i=>{var a=i?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),Zt);else{var s=t.querySelector(a)??t.querySelector("option:not([disabled])");o=s&&Zt(s)}n(o)}),ar(()=>{var i=e();if(cr(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Zt(a),n(i))}t.__value=i,r=!1}),Li(t)}function Pi(t,e){for(var n of t.options)n.selected=e.includes(Zt(n))}function Zt(t){return"__value"in t?t.__value:t.value}var Nn={},De={},Le=34,Ht=10,Pe=13;function hr(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Bi(t,e){var n=hr(t);return function(r,i){return e(n(r),i,t)}}function Sn(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Z(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Oi(t){return t<0?"-"+Z(-t,6):t>9999?"+"+Z(t,6):Z(t,4)}function Hi(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Oi(t.getUTCFullYear())+"-"+Z(t.getUTCMonth()+1,2)+"-"+Z(t.getUTCDate(),2)+(i?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"."+Z(i,3)+"Z":r?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"Z":n||e?"T"+Z(e,2)+":"+Z(n,2)+"Z":"")}function qi(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(h,c){var d,p,g=i(h,function(_,m){if(d)return d(_,m-1);p=_,d=c?Bi(_,c):hr(_)});return g.columns=p||[],g}function i(h,c){var d=[],p=h.length,g=0,_=0,m,w=p<=0,A=!1;h.charCodeAt(p-1)===Ht&&--p,h.charCodeAt(p-1)===Pe&&--p;function S(){if(w)return De;if(A)return A=!1,Nn;var L,M=g,E;if(h.charCodeAt(M)===Le){for(;g++<p&&h.charCodeAt(g)!==Le||h.charCodeAt(++g)===Le;);return(L=g)>=p?w=!0:(E=h.charCodeAt(g++))===Ht?A=!0:E===Pe&&(A=!0,h.charCodeAt(g)===Ht&&++g),h.slice(M+1,L-1).replace(/""/g,'"')}for(;g<p;){if((E=h.charCodeAt(L=g++))===Ht)A=!0;else if(E===Pe)A=!0,h.charCodeAt(g)===Ht&&++g;else if(E!==n)continue;return h.slice(M,L)}return w=!0,h.slice(M,p)}for(;(m=S())!==De;){for(var y=[];m!==Nn&&m!==De;)y.push(m),m=S();c&&(y=c(y,_++))==null||d.push(y)}return d}function a(h,c){return h.map(function(d){return c.map(function(p){return f(d[p])}).join(t)})}function o(h,c){return c==null&&(c=Sn(h)),[c.map(f).join(t)].concat(a(h,c)).join(`
`)}function s(h,c){return c==null&&(c=Sn(h)),a(h,c).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(t)}function f(h){return h==null?"":h instanceof Date?Hi(h):e.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}var zi=qi(","),Vi=zi.parse;function Ui(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Xi(t,e){return fetch(t,e).then(Ui)}function Yi(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Xi(e,n).then(function(i){return t(i,r)})}}var Gi=Yi(Vi),Ve="http://www.w3.org/1999/xhtml";const En={svg:"http://www.w3.org/2000/svg",xhtml:Ve,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $e(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),En.hasOwnProperty(e)?{space:En[e],local:t}:t}function Wi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ve&&e.documentElement.namespaceURI===Ve?e.createElement(t):e.createElementNS(n,t)}}function Zi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function dr(t){var e=$e(t);return(e.local?Zi:Wi)(e)}function Ki(){}function rn(t){return t==null?Ki:function(){return this.querySelector(t)}}function Qi(t){typeof t!="function"&&(t=rn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,f=0;f<o;++f)(l=a[f])&&(u=t.call(l,l.__data__,f,a))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new j(r,this._parents)}function Ji(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ji(){return[]}function pr(t){return t==null?ji:function(){return this.querySelectorAll(t)}}function ta(t){return function(){return Ji(t.apply(this,arguments))}}function ea(t){typeof t=="function"?t=ta(t):t=pr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new j(r,i)}function gr(t){return function(){return this.matches(t)}}function mr(t){return function(e){return e.matches(t)}}var na=Array.prototype.find;function ra(t){return function(){return na.call(this.children,t)}}function ia(){return this.firstElementChild}function aa(t){return this.select(t==null?ia:ra(typeof t=="function"?t:mr(t)))}var oa=Array.prototype.filter;function sa(){return Array.from(this.children)}function la(t){return function(){return oa.call(this.children,t)}}function ua(t){return this.selectAll(t==null?sa:la(typeof t=="function"?t:mr(t)))}function fa(t){typeof t!="function"&&(t=gr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new j(r,this._parents)}function vr(t){return new Array(t.length)}function ca(){return new j(this._enter||this._groups.map(vr),this._parents)}function me(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}me.prototype={constructor:me,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ha(t){return function(){return t}}function da(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new me(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function pa(t,e,n,r,i,a,o){var s,l,u=new Map,f=e.length,h=a.length,c=new Array(f),d;for(s=0;s<f;++s)(l=e[s])&&(c[s]=d=o.call(l,l.__data__,s,e)+"",u.has(d)?i[s]=l:u.set(d,l));for(s=0;s<h;++s)d=o.call(t,a[s],s,a)+"",(l=u.get(d))?(r[s]=l,l.__data__=a[s],u.delete(d)):n[s]=new me(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(c[s])===l&&(i[s]=l)}function ga(t){return t.__data__}function ma(t,e){if(!arguments.length)return Array.from(this,ga);var n=e?pa:da,r=this._parents,i=this._groups;typeof t!="function"&&(t=ha(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var f=r[u],h=i[u],c=h.length,d=va(t.call(f,f&&f.__data__,u,r)),p=d.length,g=s[u]=new Array(p),_=o[u]=new Array(p),m=l[u]=new Array(c);n(f,h,g,_,m,d,e);for(var w=0,A=0,S,y;w<p;++w)if(S=g[w]){for(w>=A&&(A=w+1);!(y=_[A])&&++A<p;);S._next=y||null}}return o=new j(o,r),o._enter=s,o._exit=l,o}function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _a(){return new j(this._exit||this._groups.map(vr),this._parents)}function ya(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function xa(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],f=r[l],h=u.length,c=s[l]=new Array(h),d,p=0;p<h;++p)(d=u[p]||f[p])&&(c[p]=d);for(;l<i;++l)s[l]=n[l];return new j(s,this._parents)}function wa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function ba(t){t||(t=Ma);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(l[f]=u);l.sort(e)}return new j(i,this._parents).order()}function Ma(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Aa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ka(){return Array.from(this)}function $a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Na(){let t=0;for(const e of this)++t;return t}function Sa(){return!this.node()}function Ea(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Ca(t){return function(){this.removeAttribute(t)}}function Ta(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ra(t,e){return function(){this.setAttribute(t,e)}}function Ia(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Fa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Da(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function La(t,e){var n=$e(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ta:Ca:typeof e=="function"?n.local?Da:Fa:n.local?Ia:Ra)(n,e))}function _r(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Pa(t){return function(){this.style.removeProperty(t)}}function Ba(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Oa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ha(t,e,n){return arguments.length>1?this.each((e==null?Pa:typeof e=="function"?Oa:Ba)(t,e,n??"")):Ct(this.node(),t)}function Ct(t,e){return t.style.getPropertyValue(e)||_r(t).getComputedStyle(t,null).getPropertyValue(e)}function qa(t){return function(){delete this[t]}}function za(t,e){return function(){this[t]=e}}function Va(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ua(t,e){return arguments.length>1?this.each((e==null?qa:typeof e=="function"?Va:za)(t,e)):this.node()[t]}function yr(t){return t.trim().split(/^|\s+/)}function an(t){return t.classList||new xr(t)}function xr(t){this._node=t,this._names=yr(t.getAttribute("class")||"")}xr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function wr(t,e){for(var n=an(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function br(t,e){for(var n=an(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Xa(t){return function(){wr(this,t)}}function Ya(t){return function(){br(this,t)}}function Ga(t,e){return function(){(e.apply(this,arguments)?wr:br)(this,t)}}function Wa(t,e){var n=yr(t+"");if(arguments.length<2){for(var r=an(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ga:e?Xa:Ya)(n,e))}function Za(){this.textContent=""}function Ka(t){return function(){this.textContent=t}}function Qa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ja(t){return arguments.length?this.each(t==null?Za:(typeof t=="function"?Qa:Ka)(t)):this.node().textContent}function ja(){this.innerHTML=""}function to(t){return function(){this.innerHTML=t}}function eo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function no(t){return arguments.length?this.each(t==null?ja:(typeof t=="function"?eo:to)(t)):this.node().innerHTML}function ro(){this.nextSibling&&this.parentNode.appendChild(this)}function io(){return this.each(ro)}function ao(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oo(){return this.each(ao)}function so(t){var e=typeof t=="function"?t:dr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function lo(){return null}function uo(t,e){var n=typeof t=="function"?t:dr(t),r=e==null?lo:typeof e=="function"?e:rn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function fo(){var t=this.parentNode;t&&t.removeChild(this)}function co(){return this.each(fo)}function ho(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function po(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function go(t){return this.select(t?po:ho)}function mo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function vo(t){return function(e){t.call(this,e,this.__data__)}}function _o(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function yo(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function xo(t,e,n){return function(){var r=this.__on,i,a=vo(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function wo(t,e,n){var r=_o(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?xo:yo,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Mr(t,e,n){var r=_r(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function bo(t,e){return function(){return Mr(this,t,e)}}function Mo(t,e){return function(){return Mr(this,t,e.apply(this,arguments))}}function Ao(t,e){return this.each((typeof e=="function"?Mo:bo)(t,e))}function*ko(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ar=[null];function j(t,e){this._groups=t,this._parents=e}function ie(){return new j([[document.documentElement]],Ar)}function $o(){return this}j.prototype=ie.prototype={constructor:j,select:Qi,selectAll:ea,selectChild:aa,selectChildren:ua,filter:fa,data:ma,enter:ca,exit:_a,join:ya,merge:xa,selection:$o,order:wa,sort:ba,call:Aa,nodes:ka,node:$a,size:Na,empty:Sa,each:Ea,attr:La,style:Ha,property:Ua,classed:Wa,text:Ja,html:no,raise:io,lower:oo,append:so,insert:uo,remove:co,clone:go,datum:mo,on:wo,dispatch:Ao,[Symbol.iterator]:ko};function _t(t){return typeof t=="string"?new j([[document.querySelector(t)]],[document.documentElement]):new j([[t]],Ar)}function he(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function No(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kr(t){let e,n,r;t.length!==2?(e=he,n=(s,l)=>he(t(s),l),r=(s,l)=>t(s)-l):(e=t===he||t===No?t:So,n=t,r=t);function i(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){const h=i(s,l,u,f-1);return h>u&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:o,right:a}}function So(){return 0}function Eo(t){return t===null?NaN:+t}const Co=kr(he),$r=Co.right;kr(Eo).center;function To(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function Kt(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Ue extends Map{constructor(e,n=Fo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Cn(this,e))}has(e){return super.has(Cn(this,e))}set(e,n){return super.set(Ro(this,e),n)}delete(e){return super.delete(Io(this,e))}}function Cn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ro({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Io({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Fo(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nr(t){return t}function Do(t,e,...n){return Lo(t,Nr,e,n)}function Lo(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Ue,l=r[o++];let u=-1;for(const f of a){const h=l(f,++u,a),c=s.get(h);c?c.push(f):s.set(h,[f])}for(const[f,h]of s)s.set(f,i(h,o));return e(s)}(t,0)}var Po=Array.prototype,Bo=Po.slice;function Be(t){return()=>t}const Oo=Math.sqrt(50),Ho=Math.sqrt(10),qo=Math.sqrt(2);function ve(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Oo?10:a>=Ho?5:a>=qo?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?ve(t,e,n*2):[s,l,u]}function Sr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?ve(e,t,n):ve(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function Tt(t,e,n){return e=+e,t=+t,n=+n,ve(t,e,n)[2]}function zo(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Tt(e,t,n):Tt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Vo(t,e,n){let r;for(;;){const i=Tt(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Uo(t){return Math.max(1,Math.ceil(Math.log(To(t))/Math.LN2)+1)}function Xo(){var t=Nr,e=Kt,n=Uo;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var f=e(u),h=f[0],c=f[1],d=n(u,h,c);if(!Array.isArray(d)){const A=c,S=+d;if(e===Kt&&([h,c]=Vo(h,c,S)),d=Sr(h,c,S),d[0]<=h&&(l=Tt(h,c,S)),d[d.length-1]>=c)if(A>=c&&e===Kt){const y=Tt(h,c,S);isFinite(y)&&(y>0?c=(Math.floor(c/y)+1)*y:y<0&&(c=(Math.ceil(c*-y)+1)/-y))}else d.pop()}for(var p=d.length,g=0,_=p;d[g]<=h;)++g;for(;d[_-1]>c;)--_;(g||_<p)&&(d=d.slice(g,_),p=_-g);var m=new Array(p+1),w;for(a=0;a<=p;++a)w=m[a]=[],w.x0=a>0?d[a-1]:h,w.x1=a<p?d[a]:c;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&h<=s&&s<=c&&m[Math.min(p,Math.floor((s-h)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&h<=s&&s<=c){const A=Math.floor((h-s)*l);m[Math.min(p,A+(d[A]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&h<=s&&s<=c&&m[$r(d,s,0,p)].push(i[a]);return m}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Be(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Be([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Be(Array.isArray(i)?Bo.call(i):i),r):n},r}function on(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Yo(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Go(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function Wo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function sn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Tn=Symbol("implicit");function ln(){var t=new Ue,e=[],n=[],r=Tn;function i(a){let o=t.get(a);if(o===void 0){if(r!==Tn)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ue;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ln(e,n).unknown(r)},sn.apply(i,arguments),i}function Er(){var t=ln().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var c=e().length,d=i<r,p=d?i:r,g=d?r:i;a=(g-p)/Math.max(1,c-l+u*2),s&&(a=Math.floor(a)),p+=(g-p-a*(c-l))*f,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var _=Wo(c).map(function(m){return p+a*m});return n(d?_.reverse():_)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return Er(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},sn.apply(h(),arguments)}function un(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Cr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ae(){}var Jt=.7,_e=1/Jt,Et="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",st="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zo=/^#([0-9a-f]{3,8})$/,Ko=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),Qo=new RegExp(`^rgb\\(${st},${st},${st}\\)$`),Jo=new RegExp(`^rgba\\(${Et},${Et},${Et},${jt}\\)$`),jo=new RegExp(`^rgba\\(${st},${st},${st},${jt}\\)$`),ts=new RegExp(`^hsl\\(${jt},${st},${st}\\)$`),es=new RegExp(`^hsla\\(${jt},${st},${st},${jt}\\)$`),Rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};un(ae,bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:In,formatHex:In,formatHex8:ns,formatHsl:rs,formatRgb:Fn,toString:Fn});function In(){return this.rgb().formatHex()}function ns(){return this.rgb().formatHex8()}function rs(){return Tr(this).formatHsl()}function Fn(){return this.rgb().formatRgb()}function bt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Dn(e):n===3?new K(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?le(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?le(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ko.exec(t))?new K(e[1],e[2],e[3],1):(e=Qo.exec(t))?new K(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jo.exec(t))?le(e[1],e[2],e[3],e[4]):(e=jo.exec(t))?le(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ts.exec(t))?Bn(e[1],e[2]/100,e[3]/100,1):(e=es.exec(t))?Bn(e[1],e[2]/100,e[3]/100,e[4]):Rn.hasOwnProperty(t)?Dn(Rn[t]):t==="transparent"?new K(NaN,NaN,NaN,0):null}function Dn(t){return new K(t>>16&255,t>>8&255,t&255,1)}function le(t,e,n,r){return r<=0&&(t=e=n=NaN),new K(t,e,n,r)}function is(t){return t instanceof ae||(t=bt(t)),t?(t=t.rgb(),new K(t.r,t.g,t.b,t.opacity)):new K}function Xe(t,e,n,r){return arguments.length===1?is(t):new K(t,e,n,r??1)}function K(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}un(K,Xe,Cr(ae,{brighter(t){return t=t==null?_e:Math.pow(_e,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jt:Math.pow(Jt,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new K(wt(this.r),wt(this.g),wt(this.b),ye(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ln,formatHex:Ln,formatHex8:as,formatRgb:Pn,toString:Pn}));function Ln(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function as(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pn(){const t=ye(this.opacity);return`${t===1?"rgb(":"rgba("}${wt(this.r)}, ${wt(this.g)}, ${wt(this.b)}${t===1?")":`, ${t})`}`}function ye(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xt(t){return t=wt(t),(t<16?"0":"")+t.toString(16)}function Bn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new it(t,e,n,r)}function Tr(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);if(t instanceof ae||(t=bt(t)),!t)return new it;if(t instanceof it)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new it(o,s,l,t.opacity)}function os(t,e,n,r){return arguments.length===1?Tr(t):new it(t,e,n,r??1)}function it(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}un(it,os,Cr(ae,{brighter(t){return t=t==null?_e:Math.pow(_e,t),new it(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jt:Math.pow(Jt,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new K(Oe(t>=240?t-240:t+120,i,r),Oe(t,i,r),Oe(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new it(On(this.h),ue(this.s),ue(this.l),ye(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ye(this.opacity);return`${t===1?"hsl(":"hsla("}${On(this.h)}, ${ue(this.s)*100}%, ${ue(this.l)*100}%${t===1?")":`, ${t})`}`}}));function On(t){return t=(t||0)%360,t<0?t+360:t}function ue(t){return Math.max(0,Math.min(1,t||0))}function Oe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fn=t=>()=>t;function ss(t,e){return function(n){return t+n*e}}function ls(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function us(t){return(t=+t)==1?Rr:function(e,n){return n-e?ls(e,n,t):fn(isNaN(e)?n:e)}}function Rr(t,e){var n=e-t;return n?ss(t,n):fn(isNaN(t)?e:t)}const xe=function t(e){var n=us(e);function r(i,a){var o=n((i=Xe(i)).r,(a=Xe(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Rr(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function fs(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function cs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hs(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=cn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function ds(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ps(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=cn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,He=new RegExp(Ye.source,"g");function gs(t){return function(){return t}}function ms(t){return function(e){return t(e)+""}}function Ir(t,e){var n=Ye.lastIndex=He.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Ye.exec(t))&&(i=He.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:rt(r,i)})),n=He.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?ms(l[0].x):gs(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function cn(t,e){var n=typeof e,r;return e==null||n==="boolean"?fn(e):(n==="number"?rt:n==="string"?(r=bt(e))?(e=r,xe):Ir:e instanceof bt?xe:e instanceof Date?ds:cs(e)?fs:Array.isArray(e)?hs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ps:rt)(t,e)}function vs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Hn=180/Math.PI,Ge={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fr(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Hn,skewX:Math.atan(l)*Hn,scaleX:o,scaleY:s}}var fe;function _s(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ge:Fr(e.a,e.b,e.c,e.d,e.e,e.f)}function ys(t){return t==null||(fe||(fe=document.createElementNS("http://www.w3.org/2000/svg","g")),fe.setAttribute("transform",t),!(t=fe.transform.baseVal.consolidate()))?Ge:(t=t.matrix,Fr(t.a,t.b,t.c,t.d,t.e,t.f))}function Dr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,c,d,p){if(u!==h||f!==c){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:rt(u,h)},{i:g-2,x:rt(f,c)})}else(h||c)&&d.push("translate("+h+e+c+n)}function o(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:rt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:rt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(u,f,h,c,d,p){if(u!==h||f!==c){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:rt(u,h)},{i:g-2,x:rt(f,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,c),o(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(d){for(var p=-1,g=c.length,_;++p<g;)h[(_=c[p]).i]=_.x(d);return h.join("")}}}var xs=Dr(_s,"px, ","px)","deg)"),ws=Dr(ys,", ",")",")");function bs(t){return function(){return t}}function Ms(t){return+t}var qn=[0,1];function St(t){return t}function We(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bs(isNaN(e)?NaN:.5)}function As(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ks(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=We(i,r),a=n(o,a)):(r=We(r,i),a=n(a,o)),function(s){return a(r(s))}}function $s(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=We(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=$r(t,s,1,r)-1;return a[l](i[l](s))}}function Ns(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ss(){var t=qn,e=qn,n=cn,r,i,a,o=St,s,l,u;function f(){var c=Math.min(t.length,e.length);return o!==St&&(o=As(t[0],t[c-1])),s=c>2?$s:ks,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?a:(l||(l=s(t.map(r),e,n)))(r(o(c)))}return h.invert=function(c){return o(i((u||(u=s(e,t.map(r),rt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Ms),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=vs,f()},h.clamp=function(c){return arguments.length?(o=c?!0:St,f()):o!==St},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(a=c,h):a},function(c,d){return r=c,i=d,f()}}function Es(){return Ss()(St,St)}function Cs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function we(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Rt(t){return t=we(Math.abs(t)),t?t[1]:NaN}function Ts(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Rs(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Is=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function be(t){if(!(e=Is.exec(t)))throw new Error("invalid format: "+t);var e;return new hn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}be.prototype=hn.prototype;function hn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fs(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Lr;function Ds(t,e){var n=we(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Lr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+we(t,Math.max(0,e+a-1))[0]}function zn(t,e){var n=we(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Cs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zn(t*100,e),r:zn,s:Ds,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Un(t){return t}var Xn=Array.prototype.map,Yn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ls(t){var e=t.grouping===void 0||t.thousands===void 0?Un:Ts(Xn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Un:Rs(Xn.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=be(h);var c=h.fill,d=h.align,p=h.sign,g=h.symbol,_=h.zero,m=h.width,w=h.comma,A=h.precision,S=h.trim,y=h.type;y==="n"?(w=!0,y="g"):Vn[y]||(A===void 0&&(A=12),S=!0,y="g"),(_||c==="0"&&d==="=")&&(_=!0,c="0",d="=");var L=g==="$"?n:g==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",M=g==="$"?r:/[%p]/.test(y)?o:"",E=Vn[y],D=/[defgprs%]/.test(y);A=A===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function F(b){var B=L,x=M,R,q,O;if(y==="c")x=E(b)+x,b="";else{b=+b;var X=b<0||1/b<0;if(b=isNaN(b)?l:E(Math.abs(b),A),S&&(b=Fs(b)),X&&+b==0&&p!=="+"&&(X=!1),B=(X?p==="("?p:s:p==="-"||p==="("?"":p)+B,x=(y==="s"?Yn[8+Lr/3]:"")+x+(X&&p==="("?")":""),D){for(R=-1,q=b.length;++R<q;)if(O=b.charCodeAt(R),48>O||O>57){x=(O===46?i+b.slice(R+1):b.slice(R))+x,b=b.slice(0,R);break}}}w&&!_&&(b=e(b,1/0));var z=B.length+b.length+x.length,H=z<m?new Array(m-z+1).join(c):"";switch(w&&_&&(b=e(H+b,H.length?m-x.length:1/0),H=""),d){case"<":b=B+b+x+H;break;case"=":b=B+H+b+x;break;case"^":b=H.slice(0,z=H.length>>1)+B+b+x+H.slice(z);break;default:b=H+B+b+x;break}return a(b)}return F.toString=function(){return h+""},F}function f(h,c){var d=u((h=be(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Rt(c)/3)))*3,g=Math.pow(10,-p),_=Yn[8+p/3];return function(m){return d(g*m)+_}}return{format:u,formatPrefix:f}}var ce,Pr,Br;Ps({thousands:",",grouping:[3],currency:["$",""]});function Ps(t){return ce=Ls(t),Pr=ce.format,Br=ce.formatPrefix,ce}function Bs(t){return Math.max(0,-Rt(Math.abs(t)))}function Os(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rt(e)/3)))*3-Rt(Math.abs(t)))}function Hs(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rt(e)-Rt(t))+1}function qs(t,e,n,r){var i=zo(t,e,n),a;switch(r=be(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Os(i,o))&&(r.precision=a),Br(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Hs(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Bs(i))&&(r.precision=a-(r.type==="%")*2);break}}return Pr(r)}function zs(t){var e=t.domain;return t.ticks=function(n){var r=e();return Sr(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return qs(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,f=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);f-- >0;){if(u=Tt(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function te(){var t=Es();return t.copy=function(){return Ns(t,te())},sn.apply(t,arguments),zs(t)}function Vs(t){return t}var qe=1,ze=2,Ze=3,Vt=4,Gn=1e-6;function Us(t){return"translate("+t+",0)"}function Xs(t){return"translate(0,"+t+")"}function Ys(t){return e=>+t(e)}function Gs(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ws(){return!this.__axis}function Or(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===qe||t===Vt?-1:1,f=t===Vt||t===ze?"x":"y",h=t===qe||t===Ze?Us:Xs;function c(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):Vs),_=Math.max(a,0)+s,m=e.range(),w=+m[0]+l,A=+m[m.length-1]+l,S=(e.bandwidth?Gs:Ys)(e.copy(),l),y=d.selection?d.selection():d,L=y.selectAll(".domain").data([null]),M=y.selectAll(".tick").data(p,e).order(),E=M.exit(),D=M.enter().append("g").attr("class","tick"),F=M.select("line"),b=M.select("text");L=L.merge(L.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(D),F=F.merge(D.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),b=b.merge(D.append("text").attr("fill","currentColor").attr(f,u*_).attr("dy",t===qe?"0em":t===Ze?"0.71em":"0.32em")),d!==y&&(L=L.transition(d),M=M.transition(d),F=F.transition(d),b=b.transition(d),E=E.transition(d).attr("opacity",Gn).attr("transform",function(B){return isFinite(B=S(B))?h(B+l):this.getAttribute("transform")}),D.attr("opacity",Gn).attr("transform",function(B){var x=this.parentNode.__axis;return h((x&&isFinite(x=x(B))?x:S(B))+l)})),E.remove(),L.attr("d",t===Vt||t===ze?o?"M"+u*o+","+w+"H"+l+"V"+A+"H"+u*o:"M"+l+","+w+"V"+A:o?"M"+w+","+u*o+"V"+l+"H"+A+"V"+u*o:"M"+w+","+l+"H"+A),M.attr("opacity",1).attr("transform",function(B){return h(S(B)+l)}),F.attr(f+"2",u*a),b.attr(f,u*_).text(g),y.filter(Ws).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ze?"start":t===Vt?"end":"middle"),y.each(function(){this.__axis=S})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(a=o=+d,c):a},c.tickSizeInner=function(d){return arguments.length?(a=+d,c):a},c.tickSizeOuter=function(d){return arguments.length?(o=+d,c):o},c.tickPadding=function(d){return arguments.length?(s=+d,c):s},c.offset=function(d){return arguments.length?(l=+d,c):l},c}function dn(t){return Or(Ze,t)}function Hr(t){return Or(Vt,t)}var Zs=jn('<svg class="h-auto w-full"></svg>');function Ks(t,e){Ft(e,!1);let n=ht(e,"data",24,()=>[]),r=U();function i(){if(!n().length)return;_t(v(r)).selectAll("*").remove();const o={top:20,right:20,bottom:50,left:40},s=600-o.left-o.right,l=300-o.top-o.bottom,u=n().map(p=>p.age),f=te().domain(Kt(u)).nice().range([0,s]),h=Xo().domain(f.domain()).thresholds(f.ticks(20))(u),c=te().domain([0,on(h,p=>p.length)]).range([l,0]),d=_t(v(r)).attr("viewBox",`0 0 ${s+o.left+o.right} ${l+o.top+o.bottom}`).append("g").attr("transform",`translate(${o.left},${o.top})`);d.append("g").selectAll("rect").data(h).enter().append("rect").attr("x",p=>f(p.x0)).attr("y",p=>c(p.length)).attr("width",p=>f(p.x1)-f(p.x0)-1).attr("height",p=>l-c(p.length)).attr("fill","steelblue"),d.append("g").attr("transform",`translate(0,${l})`).call(dn(f)),d.append("g").call(Hr(c)),d.append("text").attr("x",s/2).attr("y",l+35).attr("text-anchor","middle").text("Age (years)"),d.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-35).attr("text-anchor","middle").text("Count")}ne(i),en(i),re();var a=Zs();Qt(a,o=>P(r,o),()=>v(r)),dt(t,a),Dt()}var Qs=jn('<svg class="h-auto w-full"></svg>');function Js(t,e){Ft(e,!1);let n=ht(e,"data",24,()=>[]),r=U();function i(){if(!n().length)return;_t(v(r)).selectAll("*").remove();const o={top:20,right:20,bottom:100,left:40},s=600-o.left-o.right,l=300-o.top-o.bottom,u=Do(n(),p=>p.length,p=>p.department),f=Array.from(u,([p,g])=>({key:p,value:g})),h=Er().domain(f.map(p=>p.key)).range([0,s]).padding(.2),c=te().domain([0,on(f,p=>p.value)]).nice().range([l,0]),d=_t(v(r)).attr("viewBox",`0 0 ${s+o.left+o.right} ${l+o.top+o.bottom}`).append("g").attr("transform",`translate(${o.left},${o.top})`);d.append("g").selectAll("rect").data(f).enter().append("rect").attr("x",p=>h(p.key)).attr("y",p=>c(p.value)).attr("width",h.bandwidth()).attr("height",p=>l-c(p.value)).attr("fill","teal"),d.append("g").attr("transform",`translate(0,${l})`).call(dn(h)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end"),d.append("g").call(Hr(c)),d.append("text").attr("x",s/2).attr("y",l+80).attr("text-anchor","middle").text("Surgical Department"),d.append("text").attr("transform","rotate(-90)").attr("x",-180/2).attr("y",-35).attr("text-anchor","middle").text("Number of Cases")}ne(i),en(i),re();var a=Qs();Qt(a,o=>P(r,o),()=>v(r)),dt(t,a),Dt()}var js={value:()=>{}};function qr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new de(n)}function de(t){this._=t}function tl(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}de.prototype=qr.prototype={constructor:de,on:function(t,e){var n=this._,r=tl(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=el(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Wn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Wn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new de(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function el(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Wn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=js,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var It=0,Ut=0,qt=0,zr=1e3,Me,Xt,Ae=0,Mt=0,Ne=0,ee=typeof performance=="object"&&performance.now?performance:Date,Vr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function pn(){return Mt||(Vr(nl),Mt=ee.now()+Ne)}function nl(){Mt=0}function ke(){this._call=this._time=this._next=null}ke.prototype=Ur.prototype={constructor:ke,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?pn():+n)+(e==null?0:+e),!this._next&&Xt!==this&&(Xt?Xt._next=this:Me=this,Xt=this),this._call=t,this._time=n,Ke()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ke())}};function Ur(t,e,n){var r=new ke;return r.restart(t,e,n),r}function rl(){pn(),++It;for(var t=Me,e;t;)(e=Mt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--It}function Zn(){Mt=(Ae=ee.now())+Ne,It=Ut=0;try{rl()}finally{It=0,al(),Mt=0}}function il(){var t=ee.now(),e=t-Ae;e>zr&&(Ne-=e,Ae=t)}function al(){for(var t,e=Me,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Me=n);Xt=t,Ke(r)}function Ke(t){if(!It){Ut&&(Ut=clearTimeout(Ut));var e=t-Mt;e>24?(t<1/0&&(Ut=setTimeout(Zn,t-ee.now()-Ne)),qt&&(qt=clearInterval(qt))):(qt||(Ae=ee.now(),qt=setInterval(il,zr)),It=1,Vr(Zn))}}function Kn(t,e,n){var r=new ke;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ol=qr("start","end","cancel","interrupt"),sl=[],Xr=0,Qn=1,Qe=2,pe=3,Jn=4,Je=5,ge=6;function Se(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;ll(t,n,{name:e,index:r,group:i,on:ol,tween:sl,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Xr})}function gn(t,e){var n=at(t,e);if(n.state>Xr)throw new Error("too late; already scheduled");return n}function lt(t,e){var n=at(t,e);if(n.state>pe)throw new Error("too late; already running");return n}function at(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ll(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ur(a,0,n.time);function a(u){n.state=Qn,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,h,c,d;if(n.state!==Qn)return l();for(f in r)if(d=r[f],d.name===n.name){if(d.state===pe)return Kn(o);d.state===Jn?(d.state=ge,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<e&&(d.state=ge,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if(Kn(function(){n.state===pe&&(n.state=Jn,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Qe,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Qe){for(n.state=pe,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Je,1),h=-1,c=i.length;++h<c;)i[h].call(t,f);n.state===Je&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ge,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function ul(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Qe&&r.state<Je,r.state=ge,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function fl(t){return this.each(function(){ul(this,t)})}function cl(t,e){var n,r;return function(){var i=lt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function hl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=lt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function dl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=at(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?cl:hl)(n,t,e))}function mn(t,e,n){var r=t._id;return t.each(function(){var i=lt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return at(i,r).value[e]}}function Yr(t,e){var n;return(typeof e=="number"?rt:e instanceof bt?xe:(n=bt(e))?(e=n,xe):Ir)(t,e)}function pl(t){return function(){this.removeAttribute(t)}}function gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ml(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function vl(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function _l(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function yl(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function xl(t,e){var n=$e(t),r=n==="transform"?ws:Yr;return this.attrTween(t,typeof e=="function"?(n.local?yl:_l)(n,r,mn(this,"attr."+t,e)):e==null?(n.local?gl:pl)(n):(n.local?vl:ml)(n,r,e))}function wl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function bl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ml(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&bl(t,a)),n}return i._value=e,i}function Al(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&wl(t,a)),n}return i._value=e,i}function kl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$e(t);return this.tween(n,(r.local?Ml:Al)(r,e))}function $l(t,e){return function(){gn(this,t).delay=+e.apply(this,arguments)}}function Nl(t,e){return e=+e,function(){gn(this,t).delay=e}}function Sl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$l:Nl)(e,t)):at(this.node(),e).delay}function El(t,e){return function(){lt(this,t).duration=+e.apply(this,arguments)}}function Cl(t,e){return e=+e,function(){lt(this,t).duration=e}}function Tl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?El:Cl)(e,t)):at(this.node(),e).duration}function Rl(t,e){if(typeof e!="function")throw new Error;return function(){lt(this,t).ease=e}}function Il(t){var e=this._id;return arguments.length?this.each(Rl(e,t)):at(this.node(),e).ease}function Fl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,t).ease=n}}function Dl(t){if(typeof t!="function")throw new Error;return this.each(Fl(this._id,t))}function Ll(t){typeof t!="function"&&(t=gr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new pt(r,this._parents,this._name,this._id)}function Pl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],f=l.length,h=o[s]=new Array(f),c,d=0;d<f;++d)(c=l[d]||u[d])&&(h[d]=c);for(;s<r;++s)o[s]=e[s];return new pt(o,this._parents,this._name,this._id)}function Bl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ol(t,e,n){var r,i,a=Bl(e)?gn:lt;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function Hl(t,e){var n=this._id;return arguments.length<2?at(this.node(),n).on.on(t):this.each(Ol(n,t,e))}function ql(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function zl(){return this.on("end.remove",ql(this._id))}function Vl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=rn(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Se(u[c],e,n,c,u,at(f,n)));return new pt(a,this._parents,e,n)}function Ul(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pr(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=t.call(f,f.__data__,h,l),d,p=at(f,n),g=0,_=c.length;g<_;++g)(d=c[g])&&Se(d,e,n,g,c,p);a.push(c),o.push(f)}return new pt(a,o,e,n)}var Xl=ie.prototype.constructor;function Yl(){return new Xl(this._groups,this._parents)}function Gl(t,e){var n,r,i;return function(){var a=Ct(this,t),o=(this.style.removeProperty(t),Ct(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Gr(t){return function(){this.style.removeProperty(t)}}function Wl(t,e,n){var r,i=n+"",a;return function(){var o=Ct(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Zl(t,e,n){var r,i,a;return function(){var o=Ct(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Ct(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function Kl(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=lt(this,t),u=l.on,f=l.value[a]==null?s||(s=Gr(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(o,i=f),l.on=r}}function Ql(t,e,n){var r=(t+="")=="transform"?xs:Yr;return e==null?this.styleTween(t,Gl(t,r)).on("end.style."+t,Gr(t)):typeof e=="function"?this.styleTween(t,Zl(t,r,mn(this,"style."+t,e))).each(Kl(this._id,t)):this.styleTween(t,Wl(t,r,e),n).on("end.style."+t,null)}function Jl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function jl(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Jl(t,o,n)),r}return a._value=e,a}function tu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,jl(t,e,n??""))}function eu(t){return function(){this.textContent=t}}function nu(t){return function(){var e=t(this);this.textContent=e??""}}function ru(t){return this.tween("text",typeof t=="function"?nu(mn(this,"text",t)):eu(t==null?"":t+""))}function iu(t){return function(e){this.textContent=t.call(this,e)}}function au(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&iu(i)),e}return r._value=t,r}function ou(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,au(t))}function su(){for(var t=this._name,e=this._id,n=Wr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var f=at(l,e);Se(l,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new pt(r,this._parents,t,n)}function lu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=lt(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var uu=0;function pt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wr(){return++uu}var ut=ie.prototype;pt.prototype={constructor:pt,select:Vl,selectAll:Ul,selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:Ll,merge:Pl,selection:Yl,transition:su,call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:Hl,attr:xl,attrTween:kl,style:Ql,styleTween:tu,text:ru,textTween:ou,remove:zl,tween:dl,delay:Sl,duration:Tl,ease:Il,easeVarying:Dl,end:lu,[Symbol.iterator]:ut[Symbol.iterator]};function fu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var cu={time:null,delay:0,duration:250,ease:fu};function hu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function du(t){var e,n;t instanceof pt?(e=t._id,t=t._name):(e=Wr(),(n=cu).time=pn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Se(l,t,e,u,o,n||hu(l,e));return new pt(r,this._parents,t,e)}ie.prototype.interrupt=fl;ie.prototype.transition=du;const je=Math.PI,tn=2*je,yt=1e-6,pu=tn-yt;function Zr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zr;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class mu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zr:gu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,f=o-e,h=s-n,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>yt)if(!(Math.abs(h*l-u*f)>yt)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,p=i-s,g=l*l+u*u,_=d*d+p*p,m=Math.sqrt(g),w=Math.sqrt(c),A=a*Math.tan((je-Math.acos((g+c-_)/(2*m*w)))/2),S=A/w,y=A/m;Math.abs(S-1)>yt&&this._append`L${e+S*f},${n+S*h}`,this._append`A${a},${a},0,0,${+(h*d>f*p)},${this._x1=e+y*l},${this._y1=n+y*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,f=n+l,h=1^o,c=o?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yt||Math.abs(this._y1-f)>yt)&&this._append`L${u},${f}`,r&&(c<0&&(c=c%tn+tn),c>pu?this._append`A${r},${r},0,1,${h},${e-s},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:c>yt&&this._append`A${r},${r},0,${+(c>=je)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function $t(t){return function(){return t}}function vu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new mu(e)}function _u(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Kr(t){this._context=t}Kr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qr(t){return new Kr(t)}function yu(t){return t[0]}function xu(t){return t[1]}function wu(t,e){var n=$t(!0),r=null,i=Qr,a=null,o=vu(s);t=typeof t=="function"?t:t===void 0?yu:$t(t),e=typeof e=="function"?e:e===void 0?xu:$t(e);function s(l){var u,f=(l=_u(l)).length,h,c=!1,d;for(r==null&&(a=i(d=o())),u=0;u<=f;++u)!(u<f&&n(h=l[u],u,l))===c&&((c=!c)?a.lineStart():a.lineEnd()),c&&a.point(+t(h,u,l),+e(h,u,l));if(d)return a=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:$t(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:$t(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:$t(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}var bu=jr(Qr);function Jr(t){this._curve=t}Jr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function jr(t){function e(n){return new Jr(t(n))}return e._curve=t,e}function Mu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(jr(n)):e()._curve},t}function Au(){return Mu(wu().curve(bu))}function Yt(t,e,n){this.k=t,this.x=e,this.y=n}Yt.prototype={constructor:Yt,scale:function(t){return t===1?this:new Yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Yt.prototype;var ku=At("<option> </option>"),$u=At('<div style="color: #ef4444; padding: 1rem; text-align: center;">No patients match the selected criteria.</div>'),Nu=At('<div><div class="filter-controls svelte-1czrbuq" style="margin-bottom: 1.5rem;"><label for="group-select" style="font-weight:600;">Group By:</label> <select id="group-select" style="margin:0 1rem 0.5rem 0;"><option>Surgery Type</option><option>Department</option></select> <label for="group-value" style="font-weight:600;">Filter Value:</label> <select id="group-value" style="margin:0 1rem 0.5rem 0;"><option>All</option><!></select> <div style="margin-top: 0.5rem;"><label style="font-weight:600;">Age Range:</label> <input type="number" min="0" max="120" style="width:60px; margin:0 0.5rem;"/> <span>to</span> <input type="number" min="0" max="120" style="width:60px; margin:0 0.5rem;"/></div></div> <div></div> <!></div>');function Su(t,e){Ft(e,!1);const n=U();let r=ht(e,"patients",24,()=>[]),i=ht(e,"groupBy",12,"optype"),a=ht(e,"ageRange",28,()=>[0,120]),o=ht(e,"selectedDepartment",8,null),s=U(null),l=U(),u=U([]);const f=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function h(x,R){return typeof x[R]=="number"?x[R]:null}function c(x){return x.length?f.map(({label:R,key:q})=>{const O=x.map(W=>h(W,q)).filter(W=>W!==null);if(!O.length)return{label:R,key:q,mean:null,min:null,max:null};const X=7*24*60*60,z=O.filter(W=>Math.abs(W)<X);if(z.length===0||z.length<O.length*.1&&z.length<5)return console.warn(`Outlier filtering removed all or most data for ${R}. Original: ${O.length}, Filtered: ${z.length}`),{label:R,key:q,mean:null,min:null,max:null};const H=Go(z),nt=Yo(z),tt=on(z);return{label:R,key:q,mean:H,min:nt,max:tt}}):f.map(({label:R,key:q})=>({label:R,key:q,mean:null,min:null,max:null}))}let d=U([]);function p(){if(!v(l)||(zt(l,v(l).innerHTML=""),!v(d).length))return;const x=800,R=280,q=160,O=v(d).filter(T=>T.mean!==null),X=O.map(T=>T.mean),z=Kt(X);let[H,nt]=z;H===nt&&(H-=60,nt+=60);const tt=H/60,W=nt/60,gt=(W-tt)*.05,I=tt>=0&&tt<gt&&H>=0?0:tt-gt,C=W+gt,Y=_t(v(l)).append("svg").attr("width",x).attr("height",R),kt=f.map(T=>T.label),Lt=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],oe=ln().domain(kt).range(Lt),V=te().domain([I,C]).range([q+40,x-60]).nice(),Pt=dn(V).ticks(Math.min(O.length+1,10));Y.append("g").attr("transform",`translate(0,${R/2})`).call(Pt.tickFormat(T=>`${Math.round(T)} min`)).selectAll("text").style("font-size","12px");const mt=_t(v(l)).append("div").attr("class","tooltip").style("position","absolute").style("padding","6px 10px").style("background","#333").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);Y.selectAll("circle.event-marker").data(O).enter().append("circle").attr("class","event-marker").attr("cx",T=>V(T.mean/60)).attr("cy",R/2).attr("r",10).attr("fill",T=>oe(T.label)).on("mouseover",(T,Q)=>{mt.transition().duration(200).style("opacity",1),mt.html(`<strong>${Q.label}</strong><br>${(Q.mean/60).toFixed(1)} min`)}).on("mousemove",T=>{mt.style("left",`${T.pageX+10}px`).style("top",`${T.pageY-30}px`)}).on("mouseout",()=>{mt.transition().duration(200).style("opacity",0)}),Y.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(f).enter().append("g").attr("transform",(T,Q)=>`translate(0, ${Q*25})`).each(function(T){const Q=_t(this);Q.append("circle").attr("r",8).attr("cy",0).attr("fill",oe(T.label)),Q.append("text").attr("x",16).attr("y",5).attr("font-size",13).attr("fill","#222").text(T.label)}),Y.append("text").attr("x",x-60).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${v(n).length} patients`);let ot="";v(s)&&(ot+=`${i()==="optype"?"Surgery Type":"Department"}: ${v(s)}`),o()&&(ot+=ot?`, Department: ${o()}`:`Department: ${o()}`),(a()[0]>0||a()[1]<120)&&(ot+=ot?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),ot&&Y.append("text").attr("x",100).attr("y",20).attr("font-size",12).attr("fill","#666").text(ot);const et=C-I;Y.append("text").attr("x",x-60).attr("y",R-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(et)} min`)}ne(()=>{v(l)&&p()}),ct(()=>(J(r()),v(s),J(i()),J(o()),J(a())),()=>{P(n,r().filter(x=>(!v(s)||x[i()]===v(s))&&(!o()||x.department===o())&&x.age>=a()[0]&&x.age<=a()[1]))}),ct(()=>(J(r()),J(i())),()=>{P(u,Array.from(new Set(r().map(x=>x[i()]))).filter(Boolean))}),ct(()=>(v(n),v(l)),()=>{P(d,c(v(n))),v(l)&&p()}),nn(),re();var g=Nu(),_=$(g),m=k($(_),2);Gt(()=>{i(),bn(()=>{})});var w=$(m);w.value=w.__value="optype";var A=k(w);A.value=A.__value="department",N(m);var S=k(m,4);Gt(()=>{v(s),bn(()=>{v(u)})});var y=$(S);y.value=(y.__value=null)??"";var L=k(y);Ci(L,1,()=>v(u),Si,(x,R)=>{var q=ku(),O={},X=$(q,!0);N(q),Gt(()=>{O!==(O=v(R))&&(q.value=(q.__value=v(R))??""),G(X,v(R))}),dt(x,q)}),N(S);var M=k(S,2),E=k($(M),2);Nt(E);var D=k(E,4);Nt(D),N(M),N(_);var F=k(_,2);Qt(F,x=>P(l,x),()=>v(l));var b=k(F,2);{var B=x=>{var R=$u();dt(x,R)};lr(b,x=>{v(n).length===0&&x(B)})}N(g),$n(m,i),$n(S,()=>v(s),x=>P(s,x)),Wt(E,()=>a()[0],x=>a(a()[0]=x,!0)),Wt(D,()=>a()[1],x=>a(a()[1]=x,!0)),dt(t,g),Dt()}var Eu=At('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><h3 class="text-lg font-semibold">Current Filters</h3> <div class="grid grid-cols-2 gap-4"><div><p class="text-sm text-gray-600">Age</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">BMI</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">ASA Score</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Emergency Case</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p></div></div> <div class="mt-4 text-sm text-gray-600"> </div></div>');function Cu(t,e){Ft(e,!1);const n=U(),r=U(),i=U(),a=U();let o=ht(e,"predictors",8),s=ht(e,"cases",24,()=>[]),l=U(0),u=U(0),f=U(0),h=U(0);ct(()=>J(s()),()=>{P(n,s().length>0?{min:Math.min(...s().map(V=>V.age)),max:Math.max(...s().map(V=>V.age))}:{min:0,max:0})}),ct(()=>J(s()),()=>{P(r,s().length>0?{min:Math.min(...s().map(V=>V.bmi)),max:Math.max(...s().map(V=>V.bmi))}:{min:0,max:0})}),ct(()=>J(s()),()=>{P(i,s().length>0?[...new Set(s().map(V=>V.asa))].sort():[])}),ct(()=>J(s()),()=>{P(a,s().length>0?[...new Set(s().map(V=>V.emergency).filter(V=>!isNaN(V)))].sort():[])}),ct(()=>(J(s()),J(o())),()=>{if(s().length>0){const V=s().filter(T=>Math.abs(T.age-o().age)<=10),Pt=s().filter(T=>Math.abs(T.bmi-o().bmi)<=5),mt=s().filter(T=>T.asa===o().asa),se=s().filter(T=>!isNaN(T.emergency)&&T.emergency===o().emergency),et=V.filter(T=>Pt.includes(T)).filter(T=>mt.includes(T)).filter(T=>se.includes(T));if(P(h,et.length),et.length>0){const T=et.reduce((Q,Bt)=>{const vn=Number(Bt.icu_days);return Q+(isNaN(vn)?0:vn)},0);P(l,Math.max(0,T/et.length)),P(u,Math.max(0,et.reduce((Q,Bt)=>Q+(Bt.death_inhosp||0),0)/et.length)),P(f,Math.max(0,et.reduce((Q,Bt)=>Q+(Bt.intraop_ebl||0),0)/et.length))}else P(l,0),P(u,0),P(f,0)}}),nn(),re();var c=Eu(),d=k($(c),2),p=$(d),g=k($(p),2),_=$(g);N(g);var m=k(g,2),w=$(m);N(m),N(p);var A=k(p,2),S=k($(A),2),y=$(S,!0);N(S);var L=k(S,2),M=$(L);N(L),N(A);var E=k(A,2),D=k($(E),2),F=$(D,!0);N(D);var b=k(D,2),B=$(b);N(b),N(E);var x=k(E,2),R=k($(x),2),q=$(R,!0);N(R);var O=k(R,2),X=$(O);N(O),N(x),N(d);var z=k(d,4),H=$(z),nt=k($(H),2),tt=$(nt);N(nt),N(H);var W=k(H,2),gt=k($(W),2),I=$(gt);N(gt),N(W);var C=k(W,2),Y=k($(C),2),kt=$(Y);N(Y),N(C),N(z);var Lt=k(z,2),oe=$(Lt);N(Lt),N(c),Gt((V,Pt,mt,se,Ee,ot,et)=>{G(_,`${o().age??""} years`),G(w,`Range in data: ${v(n).min??""} - ${v(n).max??""}`),G(y,o().bmi),G(M,`Range in data: ${V??""} - ${Pt??""}`),G(F,o().asa),G(B,`Available values: ${mt??""}`),G(q,o().emergency===1?"Yes":"No"),G(X,`Available values: ${se??""}`),G(tt,`${Ee??""} days`),G(I,`${ot??""}%`),G(kt,`${et??""} mL`),G(oe,`Based on ${v(h)??""} similar cases in our database`)},[()=>v(r).min.toFixed(1),()=>v(r).max.toFixed(1),()=>v(i).join(", "),()=>v(a).join(", "),()=>v(l).toFixed(1),()=>(v(u)*100).toFixed(1),()=>v(f).toFixed(0)],tr),dt(t,c),Dt()}var Tu=At('<svg class="mx-auto w-full max-w-md"></svg> <div class="radar-tip svelte-qgx6cs"></div>',1);function Ru(t,e){Ft(e,!1);let n=ht(e,"cases",24,()=>[]),r=U(null),i=U(null);const a=g=>g.death_inhosp*1e6+g.icu_days*1e3+g.intraop_ebl,o=[{key:"death_inhosp",label:"Mortality (%)",colour:"#d62728"},{key:"icu_days",label:"ICU Stay (days)",colour:"#ff8800"},{key:"intraop_ebl",label:"Blood Loss (mL)",colour:"#2ca02c"}],s=140,l=g=>Math.PI*2/o.length*g;let u=U(),f=U();function h(){if(!v(u))return;const g=_t(v(u)).attr("viewBox","-220 -190 440 380");if(g.selectAll("*").remove(),!v(r)||!v(i))return;const _=o.map(M=>{const E=v(r)[M.key],D=v(i)[M.key],F=Math.max(E,D)||1;return{a:M,hi:E,lo:D,hiN:E/F,loN:D/F}}),m=g.append("g");for(let M=1;M<=4;M++)m.append("circle").attr("r",s*M/4).attr("fill","none").attr("stroke","#bbb").attr("stroke-dasharray","4 3");_.forEach((M,E)=>{const D=Math.sin(l(E))*s,F=-Math.cos(l(E))*s;m.append("line").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",F).attr("stroke",M.a.colour).attr("stroke-width",1.4),m.append("text").attr("x",D*1.15).attr("y",F*1.15).attr("text-anchor",D>=0?"start":"end").attr("alignment-baseline","middle").attr("font-size",12).text(M.a.label)});const w=Au().radius(M=>M*s).angle((M,E)=>l(E)),A=M=>_.map(E=>E[M]).concat(_[0][M]),S="#1f77b4",y="#d62728";m.append("path").attr("d",w(A("loN"))).attr("fill",S).attr("fill-opacity",.35).attr("stroke",S).attr("stroke-width",2),m.append("path").attr("d",w(A("hiN"))).attr("fill",y).attr("fill-opacity",.35).attr("stroke",y).attr("stroke-width",2);function L(M,E,D){m.selectAll(".dot-"+M).data(_).enter().append("circle").attr("class","dot-"+M).attr("r",4).attr("cx",(F,b)=>Math.sin(l(b))*F[M]*s).attr("cy",(F,b)=>-Math.cos(l(b))*F[M]*s).attr("fill",D).on("mouseover",(F,b)=>{zt(f,v(f).style.opacity="1"),zt(f,v(f).textContent=`${b.a.label}: ${b[E]}`)}).on("mousemove",F=>zt(f,v(f).style.transform=`translate(${F.pageX+12}px,${F.pageY-24}px)`)).on("mouseout",()=>zt(f,v(f).style.opacity="0"))}L("loN","lo",S),L("hiN","hi",y),m.append("rect").attr("x",-52).attr("y",s+24).attr("width",12).attr("height",12).attr("fill",y),m.append("text").attr("x",-34).attr("y",s+33).text("High-risk").attr("font-size",12),m.append("rect").attr("x",54).attr("y",s+24).attr("width",12).attr("height",12).attr("fill",S),m.append("text").attr("x",72).attr("y",s+33).text("Low-risk").attr("font-size",12)}ne(h),en(h),ct(()=>J(n()),()=>{if(n().length){const g=n().filter(m=>m.death_inhosp===0);n().filter(m=>m.death_inhosp===1),g.sort((m,w)=>a(m)-a(w)),P(i,g[0]??null);const _=[...n()].sort((m,w)=>a(w)-a(m));P(r,_[0]??null)}}),nn(),re();var c=Tu(),d=or(c);Qt(d,g=>P(u,g),()=>v(u));var p=k(d,2);Qt(p,g=>P(f,g),()=>v(f)),dt(t,c),Dt()}var Iu=At('<div class="flex justify-center"><!></div>'),Fu=At(`<h1>Title here</h1> <section><h2>Explore Patient Demographics</h2> <div class="flex flex-col items-center gap-8 md:flex-row"><div class="space-y-4 md:w-1/2"><p>Before diving into outcomes, it's critical to understand who our patients are. Here we plot
				the age distribution of all surgical cases alongside a breakdown of procedure types by
				department. The age histogram reveals the full span of adult patients—ranging from young
				adults in their twenties to seniors in their eighties—highlighting that risk profiles may
				vary substantially across that range.</p> <p>The department bar chart then shows which specialties contribute most to our dataset.
				General surgery leads by volume, but thoracic and urologic procedures also form significant
				cohorts. By surfacing these basic patterns, we equip viewers with the demographic and
				procedural context needed to interpret subsequent analyses of risk and outcomes.</p></div> <div class="space-y-8 md:w-1/2"><!> <!></div></div></section> <section><h2>Average Phase Durations Over Departments</h2> <p class="mb-4">For each surgical department, this line chart shows the average minutes spent in 1) Anesthesia
		(from anesthesia start to operation start), 2) Surgery (operation start to end), and 3) Recovery
		(operation end to discharge).</p> <div class="mx-auto w-full md:w-4/5"><!></div></section> <h1>The Tension</h1> <section class="space-y-6"><h2 id="dynamic-comparison">Dynamic Comparison — Median Outcomes for High-Risk vs Low-Risk Cohorts</h2> <p>We summarise the <strong>highest-risk cohort&nbsp;(A)</strong> (worst composite score) and the <strong>lowest-risk decile&nbsp;(B)</strong>. The radar chart shows median values for <em>mortality&nbsp;(%)</em>, <em>ICU-stay&nbsp;(days)</em>, and <em>blood loss&nbsp;(mL)</em>. A vertex farther from the centre signals a worse outcome.</p> <!> <h3>What the chart reveals</h3> <ul class="list-inside list-disc space-y-1"><li><strong>Mortality</strong> — cohort&nbsp;A shows a non-zero median mortality, whereas cohort&nbsp;B’s
			median is 0&nbsp;%; hover the red and blue vertices to see exact percentages.</li> <li><strong>ICU-stay</strong> — high-risk patients spend roughly <span class="font-semibold">4× longer</span> in the ICU.</li> <li><strong>Blood loss</strong> — median intra-operative blood loss is markedly higher for cohort&nbsp;A.</li></ul> <p>The outward-bulging red polygon demonstrates how pre-operative factors magnify surgical risk
		across <em>all</em> major outcomes. Hover any point to inspect the underlying medians.</p></section> <section><h2>Build Your Own Patient</h2> <div class="flex flex-col items-center gap-8 md:flex-row-reverse"><div class="space-y-4 md:w-1/2"><p>What if you could dial in exactly the characteristics of a patient and instantly preview
				their risks? Use the sliders below to set age, BMI, ASA physical status, and toggle
				emergency status. These inputs feed a simple predictive model that estimates both ICU stay
				duration and in-hospital mortality percentage.</p> <p>This interactive "risk profile" tool brings theory into practice: you'll see how even a
				single-point change in ASA score or marking the case as emergency can shift predicted ICU
				days by several hours or double mortality probability. Experiment freely to build intuition
				about how each factor compounds overall risk.</p> <div><label class="block font-medium"> </label> <input type="range" min="0" max="100" class="w-full"/></div> <div><label class="block font-medium"> </label> <input type="range" min="10" max="50" step="1" class="w-full"/></div> <div><label class="block font-medium"> </label> <input type="range" min="1" max="5" class="w-full"/></div> <div class="flex items-center space-x-2"><input type="checkbox"/> <label>Emergency Case</label></div></div> <div class="md:w-1/2"><!></div></div></section>`,1);function zu(t,e){Ft(e,!0);let n=Re(Mi([])),r=Re(null),i=Re(null),a={age:65,bmi:28,asa:3,emergency:0};const o=I=>I===""||I==null?NaN:+I,s=I=>[I.icu_days,I.intraop_ebl,I.death_inhosp].every(C=>!isNaN(C)&&C>0),l=I=>I.death_inhosp*100+I.icu_days+I.intraop_ebl/500;Ai(()=>{if(v(n).length){const I=v(n).filter(s).sort((C,Y)=>l(C)-l(Y));P(i,I[Math.floor(I.length*.1)]??null,!0),P(r,I[I.length-1]??null,!0)}}),ne(async()=>{const I=`${Ni}/cases.csv`;P(n,await Gi(I,C=>{const Y=C.emergency?Number(C.emergency):0;isNaN(Y)&&console.warn("Invalid emergency value:",C.emergency,"defaulting to 0");const kt=C.icu_days?Number(C.icu_days):0;return isNaN(kt)&&console.warn("Invalid ICU stay value:",C.icu_days,"defaulting to 0"),{caseid:C.caseid,age:+C.age,sex:C.sex??"M",bmi:+C.bmi,department:C.department,asa:+C.asa,emergency:Y,casestart:+C.casestart,anestart:+C.anestart,opstart:+C.opstart,opend:+C.opend,dis:+C.dis,icu_days:kt,intraop_ebl:+C.intraop_ebl,death_inhosp:+C.death_inhosp,preop_htn:o(C.preop_htn),preop_dm:o(C.preop_dm)}}),!0)});var u=Fu(),f=k(or(u),2),h=k($(f),2),c=k($(h),2),d=$(c);Ks(d,{get data(){return v(n)}});var p=k(d,2);Js(p,{get data(){return v(n)}}),N(c),N(h),N(f);var g=k(f,2),_=k($(g),4),m=$(_);Su(m,{get patients(){return v(n)}}),N(_),N(g);var w=k(g,4),A=k($(w),4);{var S=I=>{var C=Iu(),Y=$(C);Ru(Y,{get cases(){return v(n)}}),N(C),dt(I,C)};lr(A,I=>{v(r)&&v(i)&&I(S)})}Mn(6),N(w);var y=k(w,2),L=k($(y),2),M=$(L),E=k($(M),4),D=$(E),F=$(D);N(D);var b=k(D,2);Nt(b),N(E);var B=k(E,2),x=$(B),R=$(x);N(x);var q=k(x,2);Nt(q),N(B);var O=k(B,2),X=$(O),z=$(X);N(X);var H=k(X,2);Nt(H),N(O);var nt=k(O,2),tt=$(nt);Nt(tt),Mn(2),N(nt),N(M);var W=k(M,2),gt=$(W);Cu(gt,{predictors:a,get cases(){return v(n)}}),N(W),N(L),N(y),Gt(()=>{G(F,`Age: ${a.age??""}`),G(R,`BMI: ${a.bmi??""}`),G(z,`ASA Score: ${a.asa??""}`),Di(tt,a.emergency===1)}),Wt(b,()=>a.age,I=>a.age=I),Wt(q,()=>a.bmi,I=>a.bmi=I),Wt(H,()=>a.asa,I=>a.asa=I),$i("change",tt,()=>a.emergency=a.emergency===1?0:1),dt(t,u),Dt()}export{zu as component};
