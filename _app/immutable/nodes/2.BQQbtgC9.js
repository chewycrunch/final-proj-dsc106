import{f as Q,a as Y,t as Zs,c as er}from"../chunks/qHRkqzZS.js";import{i as Ke}from"../chunks/DPx2lHXl.js";import{o as Ie,c as Ha,a as Oa}from"../chunks/CSTSkMFu.js";import{I as Hr,h as Qt,ad as Js,am as to,C as eo,b as no,j as o,T as Ne,D as ro,F as io,G as Qi,J as Or,c as Nn,ag as ao,K as Ua,a as Va,L as so,av as Ya,ak as Xa,p as Wa,Z as O,aw as ji,ax as Ur,O as li,a9 as Ki,ay as Si,az as oo,aA as Ti,aB as Zi,aC as lo,aj as co,aD as uo,d as fo,aE as ho,ae as vo,aF as po,aG as go,aH as mo,aI as yo,aJ as xo,g as Ga,N as Ei,aK as bo,aL as Qa,ab as wo,M as ja,aM as _o,y as g,n as ko,z as p,w as $t,t as ke,au as qn,x as Me,A as w,aN as ot,k as kt,aO as Ze,Y as I,B as Ct,aP as Ji,aQ as ne,v as Te,as as fe,X as In,aR as hr}from"../chunks/BD_qM0Sa.js";import{a as Mo,l as Ar,s as X,e as Qe}from"../chunks/TAZr9h0G.js";import{p as jt,b as cn,i as At,c as ta,s as Ao}from"../chunks/C8hyNlV_.js";import{w as $o,b as Co}from"../chunks/DuZ0-xPb.js";import{s as So}from"../chunks/CkuBDuny.js";function On(t,e){return e}function To(t,e,n,r){for(var i=[],a=e.length,s=0;s<a;s++)lo(e[s].e,i,!0);var l=a>0&&i.length===0&&n!==null;if(l){var c=n.parentNode;co(c),c.append(n),r.clear(),We(t,e[0].prev,e[a-1].next)}uo(i,()=>{for(var u=0;u<a;u++){var d=e[u];l||(r.delete(d.k),We(t,d.prev,d.next)),fo(d.e,!l)}})}function Un(t,e,n,r,i,a=null){var s=t,l={flags:e,items:new Map,first:null},c=(e&Ya)!==0;if(c){var u=t;s=Qt?Hr(Js(u)):u.appendChild(to())}Qt&&eo();var d=null,f=!1,h=Ne(()=>{var m=n();return Wa(m)?m:m==null?[]:Xa(m)});no(()=>{var m=o(h),$=m.length;if(f&&$===0)return;f=$===0;let L=!1;if(Qt){var v=ro(s)===io;v!==($===0)&&(s=Qi(),Hr(s),Or(!1),L=!0)}if(Qt){for(var y=null,x,b=0;b<$;b++){if(Nn.nodeType===8&&Nn.data===ao){s=Nn,L=!0,Or(!1);break}var S=m[b],A=r(S,b);x=Ka(Nn,l,y,null,S,A,b,i,e,n),l.items.set(A,x),y=x}$>0&&Hr(Qi())}Qt||Eo(m,l,s,i,e,r,n),a!==null&&($===0?d?Ua(d):d=Va(()=>a(s)):d!==null&&so(d,()=>{d=null})),L&&Or(!0),o(h)}),Qt&&(s=Nn)}function Eo(t,e,n,r,i,a,s){var F,V,z,P;var l=(i&oo)!==0,c=(i&(Ti|Si))!==0,u=t.length,d=e.items,f=e.first,h=f,m,$=null,L,v=[],y=[],x,b,S,A;if(l)for(A=0;A<u;A+=1)x=t[A],b=a(x,A),S=d.get(b),S!==void 0&&((F=S.a)==null||F.measure(),(L??(L=new Set)).add(S));for(A=0;A<u;A+=1){if(x=t[A],b=a(x,A),S=d.get(b),S===void 0){var M=h?h.e.nodes_start:n;$=Ka(M,e,$,$===null?e.first:$.next,x,b,A,r,i,s),d.set(b,$),v=[],y=[],h=$.next;continue}if(c&&No(S,x,A,i),(S.e.f&Ur)!==0&&(Ua(S.e),l&&((V=S.a)==null||V.unfix(),(L??(L=new Set)).delete(S))),S!==h){if(m!==void 0&&m.has(S)){if(v.length<y.length){var N=y[0],R;$=N.prev;var T=v[0],_=v[v.length-1];for(R=0;R<v.length;R+=1)ea(v[R],N,n);for(R=0;R<y.length;R+=1)m.delete(y[R]);We(e,T.prev,_.next),We(e,$,T),We(e,_,N),h=N,$=_,A-=1,v=[],y=[]}else m.delete(S),ea(S,h,n),We(e,S.prev,S.next),We(e,S,$===null?e.first:$.next),We(e,$,S),$=S;continue}for(v=[],y=[];h!==null&&h.k!==b;)(h.e.f&Ur)===0&&(m??(m=new Set)).add(h),y.push(h),h=h.next;if(h===null)continue;S=h}v.push(S),$=S,h=S.next}if(h!==null||m!==void 0){for(var E=m===void 0?[]:Xa(m);h!==null;)(h.e.f&Ur)===0&&E.push(h),h=h.next;var B=E.length;if(B>0){var k=(i&Ya)!==0&&u===0?n:null;if(l){for(A=0;A<B;A+=1)(z=E[A].a)==null||z.measure();for(A=0;A<B;A+=1)(P=E[A].a)==null||P.fix()}To(e,E,k,d)}}l&&li(()=>{var at;if(L!==void 0)for(S of L)(at=S.a)==null||at.apply()}),Ki.first=e.first&&e.first.e,Ki.last=$&&$.e}function No(t,e,n,r){(r&Ti)!==0&&Zi(t.v,e),(r&Si)!==0?Zi(t.i,n):t.i=n}function Ka(t,e,n,r,i,a,s,l,c,u){var d=(c&Ti)!==0,f=(c&ho)===0,h=d?f?O(i):ji(i):i,m=(c&Si)===0?s:ji(s),$={i:m,v:h,k:a,a:null,e:null,prev:n,next:r};try{return $.e=Va(()=>l(t,h,m,u),Qt),$.e.prev=n&&n.e,$.e.next=r&&r.e,n===null?e.first=$:(n.next=$,n.e.next=$.e),r!==null&&(r.prev=$,r.e.prev=$.e),$}finally{}}function ea(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var s=vo(a);i.before(a),a=s}}function We(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Za(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Za(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ro(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Za(t))&&(r&&(r+=" "),r+=e);return r}function nr(t){return typeof t=="object"?Ro(t):t??""}const na=[...` 	
\r\fÂ \v\uFEFF`];function zo(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+a;(s===0||na.includes(r[s-1]))&&(l===r.length||na.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function Fo(t,e){return t==null?null:String(t)}function Gt(t,e,n,r,i,a){var s=t.__className;if(Qt||s!==n||s===void 0){var l=zo(n,r,a);(!Qt||l!==t.getAttribute("class"))&&(l==null?t.removeAttribute("class"):t.className=l),t.__className=n}else if(a&&i!==a)for(var c in a){var u=!!a[c];(i==null||u!==!!i[c])&&t.classList.toggle(c,u)}return a}function Ni(t,e,n,r){var i=t.__style;if(Qt||i!==e){var a=Fo(e);(!Qt||a!==t.getAttribute("style"))&&(a==null?t.removeAttribute("style"):t.style.cssText=a),t.__style=e}return r}const Io=Symbol("is custom element"),Lo=Symbol("is html");function Mt(t){if(Qt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;it(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;it(t,"checked",null),t.checked=i}}};t.__on_r=n,po(n),Mo()}}function it(t,e,n,r){var i=Do(t);Qt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[go]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Bo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Do(t){return t.__attributes??(t.__attributes={[Io]:t.nodeName.includes("-"),[Lo]:t.namespaceURI===mo})}var ra=new Map;function Bo(t){var e=ra.get(t.nodeName);if(e)return e;ra.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=xo(r);for(var a in n)n[a].set&&e.push(a);r=yo(r)}return e}const Po=()=>performance.now(),Ee={tick:t=>requestAnimationFrame(t),now:()=>Po(),tasks:new Set};function Ja(){const t=Ee.now();Ee.tasks.forEach(e=>{e.c(t)||(Ee.tasks.delete(e),e.f())}),Ee.tasks.size!==0&&Ee.tick(Ja)}function qo(t){let e;return Ee.tasks.size===0&&Ee.tick(Ja),{promise:new Promise(n=>{Ee.tasks.add(e={c:t,f:n})}),abort(){Ee.tasks.delete(e)}}}function re(t,e,n=e){var r=bo();Ar(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=Xr(t)?Wr(a):a,n(a),r&&a!==(a=e())){var s=t.selectionStart,l=t.selectionEnd;t.value=a??"",l!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(l,t.value.length))}}),(Qt&&t.defaultValue!==t.value||Ga(e)==null&&t.value)&&n(Xr(t)?Wr(t.value):t.value),Ei(()=>{var i=e();Xr(t)&&i===Wr(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}const Vr=new Set;function Yr(t,e,n,r,i=r){var a=n.getAttribute("type")==="checkbox",s=t;let l=!1;if(e!==null)for(var c of e)s=s[c]??(s[c]=[]);s.push(n),Ar(n,"change",()=>{var u=n.__value;a&&(u=ia(s,u,n.checked)),i(u)},()=>i(a?[]:null)),Ei(()=>{var u=r();if(Qt&&n.defaultChecked!==n.checked){l=!0;return}a?(u=u||[],n.checked=u.includes(n.__value)):n.checked=Qa(n.__value,u)}),wo(()=>{var u=s.indexOf(n);u!==-1&&s.splice(u,1)}),Vr.has(s)||(Vr.add(s),li(()=>{s.sort((u,d)=>u.compareDocumentPosition(d)===4?-1:1),Vr.delete(s)})),li(()=>{if(l){var u;if(a)u=ia(s,u,n.checked);else{var d=s.find(f=>f.checked);u=d==null?void 0:d.__value}i(u)}})}function Re(t,e,n=e){Ar(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),(Qt&&t.defaultChecked!==t.checked||Ga(e)==null)&&n(t.checked),Ei(()=>{var r=e();t.checked=!!r})}function ia(t,e,n){for(var r=new Set,i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function Xr(t){var e=t.type;return e==="number"||e==="range"}function Wr(t){return t===""?null:+t}function ts(t,e,n){if(t.multiple)return e==null?void 0:Wa(e)?Oo(t,e):_o();for(var r of t.options){var i=Hn(r);if(Qa(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ho(t,e){ja(()=>{var n=new MutationObserver(()=>{var r=t.__value;ts(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function aa(t,e,n=e){var r=!0;Ar(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Hn);else{var l=t.querySelector(a)??t.querySelector("option:not([disabled])");s=l&&Hn(l)}n(s)}),ja(()=>{var i=e();if(ts(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Hn(a),n(i))}t.__value=i,r=!1}),Ho(t)}function Oo(t,e){for(var n of t.options)n.selected=e.includes(Hn(n))}function Hn(t){return"__value"in t?t.__value:t.value}var Uo=Q("<div><!></div>");function Vo(t,e){var n=Uo(),r=g(n);So(r,()=>e.children??ko),p(n),$t(()=>Gt(n,1,`mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 ${e.class&&e.class}`)),Y(t,n)}var sa={},Gr={},Qr=34,Rn=10,jr=13;function es(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Yo(t,e){var n=es(t);return function(r,i){return e(n(r),i,t)}}function oa(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function te(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Xo(t){return t<0?"-"+te(-t,6):t>9999?"+"+te(t,6):te(t,4)}function Wo(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Xo(t.getUTCFullYear())+"-"+te(t.getUTCMonth()+1,2)+"-"+te(t.getUTCDate(),2)+(i?"T"+te(e,2)+":"+te(n,2)+":"+te(r,2)+"."+te(i,3)+"Z":r?"T"+te(e,2)+":"+te(n,2)+":"+te(r,2)+"Z":n||e?"T"+te(e,2)+":"+te(n,2)+"Z":"")}function Go(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var m,$,L=i(f,function(v,y){if(m)return m(v,y-1);$=v,m=h?Yo(v,h):es(v)});return L.columns=$||[],L}function i(f,h){var m=[],$=f.length,L=0,v=0,y,x=$<=0,b=!1;f.charCodeAt($-1)===Rn&&--$,f.charCodeAt($-1)===jr&&--$;function S(){if(x)return Gr;if(b)return b=!1,sa;var M,N=L,R;if(f.charCodeAt(N)===Qr){for(;L++<$&&f.charCodeAt(L)!==Qr||f.charCodeAt(++L)===Qr;);return(M=L)>=$?x=!0:(R=f.charCodeAt(L++))===Rn?b=!0:R===jr&&(b=!0,f.charCodeAt(L)===Rn&&++L),f.slice(N+1,M-1).replace(/""/g,'"')}for(;L<$;){if((R=f.charCodeAt(M=L++))===Rn)b=!0;else if(R===jr)b=!0,f.charCodeAt(L)===Rn&&++L;else if(R!==n)continue;return f.slice(N,M)}return x=!0,f.slice(N,$)}for(;(y=S())!==Gr;){for(var A=[];y!==sa&&y!==Gr;)A.push(y),y=S();h&&(A=h(A,v++))==null||m.push(A)}return m}function a(f,h){return f.map(function(m){return h.map(function($){return d(m[$])}).join(t)})}function s(f,h){return h==null&&(h=oa(f)),[h.map(d).join(t)].concat(a(f,h)).join(`
`)}function l(f,h){return h==null&&(h=oa(f)),a(f,h).join(`
`)}function c(f){return f.map(u).join(`
`)}function u(f){return f.map(d).join(t)}function d(f){return f==null?"":f instanceof Date?Wo(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:l,formatRows:c,formatRow:u,formatValue:d}}var Qo=Go(","),jo=Qo.parse;function Ko(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Zo(t,e){return fetch(t,e).then(Ko)}function Jo(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zo(e,n).then(function(i){return t(i,r)})}}var tl=Jo(jo);function la(t){return Object.prototype.toString.call(t)==="[object Date]"}function el(t){return t}function nl(t){const e=t-1;return e*e*e+1}function ci(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,a)=>ci(t[a],i));return i=>r.map(a=>a(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(la(t)&&la(e)){const a=t.getTime(),l=e.getTime()-a;return c=>new Date(a+c*l)}const r=Object.keys(e),i={};return r.forEach(a=>{i[a]=ci(t[a],e[a])}),a=>{const s={};return r.forEach(l=>{s[l]=i[l](a)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}return()=>e}function rl(t,e={}){const n=$o(t);let r,i=t;function a(s,l){if(i=s,t==null)return n.set(t=s),Promise.resolve();let c=r,u=!1,{delay:d=0,duration:f=400,easing:h=el,interpolate:m=ci}={...e,...l};if(f===0)return c&&(c.abort(),c=null),n.set(t=i),Promise.resolve();const $=Ee.now()+d;let L;return r=qo(v=>{if(v<$)return!0;u||(L=m(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),c&&(c.abort(),c=null);const y=v-$;return y>f?(n.set(t=s),!1):(n.set(t=L(h(y/f))),!0)}),r.promise}return{set:a,update:(s,l)=>a(s(i,t),l),subscribe:n.subscribe}}var il=Q('<div class="text-center"><h2 class="text-4xl font-extrabold tracking-tight tabular-nums svelte-19d6zus"> </h2> <p class="text-text-secondary text-xs tracking-wide uppercase"> </p></div>'),al=Q('<div class="mt-6 flex flex-wrap justify-center gap-8"></div>');function sl(t,e){ke(e,!0);let n=jt(e,"duration",3,1200);const r=qn(()=>e.stats.map(()=>rl(0,{duration:n(),easing:nl})));Ie(()=>{let a=0;e.stats.forEach(({value:s},l)=>{setTimeout(()=>o(r)[l].set(s),a),a+=n()+400})});var i=al();Un(i,21,()=>e.stats,On,(a,s,l)=>{let c=()=>o(s).label;var u=il(),d=g(u),f=g(d,!0);p(d);var h=w(d,2),m=g(h,!0);p(h),p(u),$t(()=>{X(f,e.stats[l].value),X(m,c())}),Y(a,u)}),p(i),Y(t,i),Me()}var ol=Q(`<div class="slide-container svelte-5descd"><div class="content svelte-5descd"><h1 class="title svelte-5descd">Vitals&nbsp;Unveiled:<br/> <span class="text-text-accent">When "Routine" Surgeries Take Unexpected Turns</span></h1> <p class="description svelte-5descd">Imagine an operating room humming along in perfect rhythm, dozens of cases lined up, each one
			expected to end smoothly. Yet among those <strong>6 388</strong> surgeries lie stories of sudden
			blood-loss emergencies, unplanned ICU detours, and the quiet heartbreak of lives forever changed.</p> <p class="description svelte-5descd">Today, we invite you on a journey through Seoul National University's VitalDB. We'll follow
			every heartbeat, incision, and lab result in search of the subtle signs that tip a "routine"
			case into crisis.</p> <p class="description svelte-5descd">Scroll down to meet our patients, feel the pulse of the OR phases, test your own predictions,
			and discover the hidden signals that could one day warn us, before the routine becomes critical.</p> <!></div></div>`);function ll(t,e){ke(e,!0);var n=ol(),r=g(n),i=w(g(r),8);const a=qn(()=>[{label:"Total Surgeries",value:e.cases.length},{label:"ICU Transfers",value:e.cases.filter(s=>(s.icu_days??0)>0).length},{label:"In-Hospital Deaths",value:e.cases.filter(s=>s.death_inhosp===1).length}]);sl(i,{get stats(){return o(a)}}),p(r),p(n),Y(t,n),Me()}var ui="http://www.w3.org/1999/xhtml";const ca={svg:"http://www.w3.org/2000/svg",xhtml:ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $r(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ca.hasOwnProperty(e)?{space:ca[e],local:t}:t}function cl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ui&&e.documentElement.namespaceURI===ui?e.createElement(t):e.createElementNS(n,t)}}function ul(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ns(t){var e=$r(t);return(e.local?ul:cl)(e)}function fl(){}function Ri(t){return t==null?fl:function(){return this.querySelector(t)}}function dl(t){typeof t!="function"&&(t=Ri(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,l=r[i]=new Array(s),c,u,d=0;d<s;++d)(c=a[d])&&(u=t.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new de(r,this._parents)}function hl(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function vl(){return[]}function rs(t){return t==null?vl:function(){return this.querySelectorAll(t)}}function pl(t){return function(){return hl(t.apply(this,arguments))}}function gl(t){typeof t=="function"?t=pl(t):t=rs(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],l=s.length,c,u=0;u<l;++u)(c=s[u])&&(r.push(t.call(c,c.__data__,u,s)),i.push(c));return new de(r,i)}function is(t){return function(){return this.matches(t)}}function as(t){return function(e){return e.matches(t)}}var ml=Array.prototype.find;function yl(t){return function(){return ml.call(this.children,t)}}function xl(){return this.firstElementChild}function bl(t){return this.select(t==null?xl:yl(typeof t=="function"?t:as(t)))}var wl=Array.prototype.filter;function _l(){return Array.from(this.children)}function kl(t){return function(){return wl.call(this.children,t)}}function Ml(t){return this.selectAll(t==null?_l:kl(typeof t=="function"?t:as(t)))}function Al(t){typeof t!="function"&&(t=is(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,l=r[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&l.push(c);return new de(r,this._parents)}function ss(t){return new Array(t.length)}function $l(){return new de(this._enter||this._groups.map(ss),this._parents)}function vr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vr.prototype={constructor:vr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Cl(t){return function(){return t}}function Sl(t,e,n,r,i,a){for(var s=0,l,c=e.length,u=a.length;s<u;++s)(l=e[s])?(l.__data__=a[s],r[s]=l):n[s]=new vr(t,a[s]);for(;s<c;++s)(l=e[s])&&(i[s]=l)}function Tl(t,e,n,r,i,a,s){var l,c,u=new Map,d=e.length,f=a.length,h=new Array(d),m;for(l=0;l<d;++l)(c=e[l])&&(h[l]=m=s.call(c,c.__data__,l,e)+"",u.has(m)?i[l]=c:u.set(m,c));for(l=0;l<f;++l)m=s.call(t,a[l],l,a)+"",(c=u.get(m))?(r[l]=c,c.__data__=a[l],u.delete(m)):n[l]=new vr(t,a[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(h[l])===c&&(i[l]=c)}function El(t){return t.__data__}function Nl(t,e){if(!arguments.length)return Array.from(this,El);var n=e?Tl:Sl,r=this._parents,i=this._groups;typeof t!="function"&&(t=Cl(t));for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var d=r[u],f=i[u],h=f.length,m=Rl(t.call(d,d&&d.__data__,u,r)),$=m.length,L=l[u]=new Array($),v=s[u]=new Array($),y=c[u]=new Array(h);n(d,f,L,v,y,m,e);for(var x=0,b=0,S,A;x<$;++x)if(S=L[x]){for(x>=b&&(b=x+1);!(A=v[b])&&++b<$;);S._next=A||null}}return s=new de(s,r),s._enter=l,s._exit=c,s}function Rl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zl(){return new de(this._exit||this._groups.map(ss),this._parents)}function Fl(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Il(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),l=new Array(i),c=0;c<s;++c)for(var u=n[c],d=r[c],f=u.length,h=l[c]=new Array(f),m,$=0;$<f;++$)(m=u[$]||d[$])&&(h[$]=m);for(;c<i;++c)l[c]=n[c];return new de(l,this._parents)}function Ll(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Dl(t){t||(t=Bl);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],l=s.length,c=i[a]=new Array(l),u,d=0;d<l;++d)(u=s[d])&&(c[d]=u);c.sort(e)}return new de(i,this._parents).order()}function Bl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ql(){return Array.from(this)}function Hl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function Ol(){let t=0;for(const e of this)++t;return t}function Ul(){return!this.node()}function Vl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,l;a<s;++a)(l=i[a])&&t.call(l,l.__data__,a,i);return this}function Yl(t){return function(){this.removeAttribute(t)}}function Xl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wl(t,e){return function(){this.setAttribute(t,e)}}function Gl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ql(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function jl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kl(t,e){var n=$r(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Xl:Yl:typeof e=="function"?n.local?jl:Ql:n.local?Gl:Wl)(n,e))}function os(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Zl(t){return function(){this.style.removeProperty(t)}}function Jl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function tc(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ec(t,e,n){return arguments.length>1?this.each((e==null?Zl:typeof e=="function"?tc:Jl)(t,e,n??"")):_n(this.node(),t)}function _n(t,e){return t.style.getPropertyValue(e)||os(t).getComputedStyle(t,null).getPropertyValue(e)}function nc(t){return function(){delete this[t]}}function rc(t,e){return function(){this[t]=e}}function ic(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ac(t,e){return arguments.length>1?this.each((e==null?nc:typeof e=="function"?ic:rc)(t,e)):this.node()[t]}function ls(t){return t.trim().split(/^|\s+/)}function zi(t){return t.classList||new cs(t)}function cs(t){this._node=t,this._names=ls(t.getAttribute("class")||"")}cs.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function us(t,e){for(var n=zi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function fs(t,e){for(var n=zi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function sc(t){return function(){us(this,t)}}function oc(t){return function(){fs(this,t)}}function lc(t,e){return function(){(e.apply(this,arguments)?us:fs)(this,t)}}function cc(t,e){var n=ls(t+"");if(arguments.length<2){for(var r=zi(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?lc:e?sc:oc)(n,e))}function uc(){this.textContent=""}function fc(t){return function(){this.textContent=t}}function dc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hc(t){return arguments.length?this.each(t==null?uc:(typeof t=="function"?dc:fc)(t)):this.node().textContent}function vc(){this.innerHTML=""}function pc(t){return function(){this.innerHTML=t}}function gc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mc(t){return arguments.length?this.each(t==null?vc:(typeof t=="function"?gc:pc)(t)):this.node().innerHTML}function yc(){this.nextSibling&&this.parentNode.appendChild(this)}function xc(){return this.each(yc)}function bc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wc(){return this.each(bc)}function _c(t){var e=typeof t=="function"?t:ns(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kc(){return null}function Mc(t,e){var n=typeof t=="function"?t:ns(t),r=e==null?kc:typeof e=="function"?e:Ri(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ac(){var t=this.parentNode;t&&t.removeChild(this)}function $c(){return this.each(Ac)}function Cc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Sc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Tc(t){return this.select(t?Sc:Cc)}function Ec(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Nc(t){return function(e){t.call(this,e,this.__data__)}}function Rc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function zc(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Fc(t,e,n){return function(){var r=this.__on,i,a=Nc(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ic(t,e,n){var r=Rc(t+""),i,a=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(i=0,d=l[c];i<a;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(l=e?Fc:zc,i=0;i<a;++i)this.each(l(r[i],e,n));return this}function ds(t,e,n){var r=os(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Lc(t,e){return function(){return ds(this,t,e)}}function Dc(t,e){return function(){return ds(this,t,e.apply(this,arguments))}}function Bc(t,e){return this.each((typeof e=="function"?Dc:Lc)(t,e))}function*Pc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var hs=[null];function de(t,e){this._groups=t,this._parents=e}function $n(){return new de([[document.documentElement]],hs)}function qc(){return this}de.prototype=$n.prototype={constructor:de,select:dl,selectAll:gl,selectChild:bl,selectChildren:Ml,filter:Al,data:Nl,enter:$l,exit:zl,join:Fl,merge:Il,selection:qc,order:Ll,sort:Dl,call:Pl,nodes:ql,node:Hl,size:Ol,empty:Ul,each:Vl,attr:Kl,style:ec,property:ac,classed:cc,text:hc,html:mc,raise:xc,lower:wc,append:_c,insert:Mc,remove:$c,clone:Tc,datum:Ec,on:Ic,dispatch:Bc,[Symbol.iterator]:Pc};function G(t){return typeof t=="string"?new de([[document.querySelector(t)]],[document.documentElement]):new de([[t]],hs)}function Hc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ua(t,e){if(t=Hc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function bn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vs(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ps(t){let e,n,r;t.length!==2?(e=bn,n=(l,c)=>bn(t(l),c),r=(l,c)=>t(l)-c):(e=t===bn||t===vs?t:Oc,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:s,right:a}}function Oc(){return 0}function Uc(t){return t===null?NaN:+t}function*Vc(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Yc=ps(bn),gs=Yc.right;ps(Uc).center;function Xc(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function or(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class fi extends Map{constructor(e,n=Qc){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(fa(this,e))}has(e){return super.has(fa(this,e))}set(e,n){return super.set(Wc(this,e),n)}delete(e){return super.delete(Gc(this,e))}}function fa({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Wc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Gc({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Qc(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ms(t){return t}function jc(t,e,...n){return Kc(t,ms,e,n)}function Kc(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const l=new fi,c=r[s++];let u=-1;for(const d of a){const f=c(d,++u,a),h=l.get(f);h?h.push(d):l.set(f,[d])}for(const[d,f]of l)l.set(d,i(f,s));return e(l)}(t,0)}function Zc(t=bn){if(t===bn)return ys;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ys(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var Jc=Array.prototype,tu=Jc.slice;function Kr(t){return()=>t}const eu=Math.sqrt(50),nu=Math.sqrt(10),ru=Math.sqrt(2);function pr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=eu?10:a>=nu?5:a>=ru?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/s,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?pr(t,e,n*2):[l,c,u]}function xs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?pr(e,t,n):pr(t,e,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let u=0;u<l;++u)c[u]=(a-u)/-s;else for(let u=0;u<l;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(i+u)/-s;else for(let u=0;u<l;++u)c[u]=(i+u)*s;return c}function kn(t,e,n){return e=+e,t=+t,n=+n,pr(t,e,n)[2]}function iu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?kn(e,t,n):kn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function au(t,e,n){let r;for(;;){const i=kn(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function su(t){return Math.max(1,Math.ceil(Math.log(Xc(t))/Math.LN2)+1)}function ou(){var t=ms,e=or,n=su;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,l,c,u=new Array(s);for(a=0;a<s;++a)u[a]=t(i[a],a,i);var d=e(u),f=d[0],h=d[1],m=n(u,f,h);if(!Array.isArray(m)){const b=h,S=+m;if(e===or&&([f,h]=au(f,h,S)),m=xs(f,h,S),m[0]<=f&&(c=kn(f,h,S)),m[m.length-1]>=h)if(b>=h&&e===or){const A=kn(f,h,S);isFinite(A)&&(A>0?h=(Math.floor(h/A)+1)*A:A<0&&(h=(Math.ceil(h*-A)+1)/-A))}else m.pop()}for(var $=m.length,L=0,v=$;m[L]<=f;)++L;for(;m[v-1]>h;)--v;(L||v<$)&&(m=m.slice(L,v),$=v-L);var y=new Array($+1),x;for(a=0;a<=$;++a)x=y[a]=[],x.x0=a>0?m[a-1]:f,x.x1=a<$?m[a]:h;if(isFinite(c)){if(c>0)for(a=0;a<s;++a)(l=u[a])!=null&&f<=l&&l<=h&&y[Math.min($,Math.floor((l-f)/c))].push(i[a]);else if(c<0){for(a=0;a<s;++a)if((l=u[a])!=null&&f<=l&&l<=h){const b=Math.floor((f-l)*c);y[Math.min($,b+(m[b]<=l))].push(i[a])}}}else for(a=0;a<s;++a)(l=u[a])!=null&&f<=l&&l<=h&&y[gs(m,l,0,$)].push(i[a]);return y}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Kr(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Kr([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Kr(Array.isArray(i)?tu.call(i):i),r):n},r}function ze(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function di(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function bs(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ys:Zc(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/c+h)),$=Math.min(r,Math.floor(e+(c-u)*f/c+h));bs(t,e,m,$,i)}const a=t[e];let s=n,l=r;for(zn(t,n,e),i(t[r],a)>0&&zn(t,n,r);s<l;){for(zn(t,s,l),++s,--l;i(t[s],a)<0;)++s;for(;i(t[l],a)>0;)--l}i(t[n],a)===0?zn(t,n,l):(++l,zn(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function zn(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Vn(t,e,n){if(t=Float64Array.from(Vc(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return di(t);if(e>=1)return ze(t);var r,i=(r-1)*e,a=Math.floor(i),s=ze(bs(t,a).subarray(0,a+1)),l=di(t.subarray(a+1));return s+(l-s)*(i-a)}}function da(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function lr(t,e){return Vn(t,.5,e)}function ws(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function lu(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Fi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function cu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ha=Symbol("implicit");function Cr(){var t=new fi,e=[],n=[],r=ha;function i(a){let s=t.get(a);if(s===void 0){if(r!==ha)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new fi;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Cr(e,n).unknown(r)},Fi.apply(i,arguments),i}function Sr(){var t=Cr().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,m=i<r,$=m?i:r,L=m?r:i;a=(L-$)/Math.max(1,h-c+u*2),l&&(a=Math.floor(a)),$+=(L-$-a*(h-c))*d,s=a*(1-c),l&&($=Math.round($),s=Math.round(s));var v=ws(h).map(function(y){return $+a*y});return n(m?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return Sr(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Fi.apply(f(),arguments)}function Ii(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _s(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Gn(){}var Yn=.7,gr=1/Yn,wn="\\s*([+-]?\\d+)\\s*",Xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uu=/^#([0-9a-f]{3,8})$/,fu=new RegExp(`^rgb\\(${wn},${wn},${wn}\\)$`),du=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),hu=new RegExp(`^rgba\\(${wn},${wn},${wn},${Xn}\\)$`),vu=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Xn}\\)$`),pu=new RegExp(`^hsl\\(${Xn},${Fe},${Fe}\\)$`),gu=new RegExp(`^hsla\\(${Xn},${Fe},${Fe},${Xn}\\)$`),va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ii(Gn,un,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pa,formatHex:pa,formatHex8:mu,formatHsl:yu,formatRgb:ga,toString:ga});function pa(){return this.rgb().formatHex()}function mu(){return this.rgb().formatHex8()}function yu(){return ks(this).formatHsl()}function ga(){return this.rgb().formatRgb()}function un(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=uu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ma(e):n===3?new ie(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fu.exec(t))?new ie(e[1],e[2],e[3],1):(e=du.exec(t))?new ie(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hu.exec(t))?rr(e[1],e[2],e[3],e[4]):(e=vu.exec(t))?rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pu.exec(t))?ba(e[1],e[2]/100,e[3]/100,1):(e=gu.exec(t))?ba(e[1],e[2]/100,e[3]/100,e[4]):va.hasOwnProperty(t)?ma(va[t]):t==="transparent"?new ie(NaN,NaN,NaN,0):null}function ma(t){return new ie(t>>16&255,t>>8&255,t&255,1)}function rr(t,e,n,r){return r<=0&&(t=e=n=NaN),new ie(t,e,n,r)}function xu(t){return t instanceof Gn||(t=un(t)),t?(t=t.rgb(),new ie(t.r,t.g,t.b,t.opacity)):new ie}function mr(t,e,n,r){return arguments.length===1?xu(t):new ie(t,e,n,r??1)}function ie(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ii(ie,mr,_s(Gn,{brighter(t){return t=t==null?gr:Math.pow(gr,t),new ie(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Yn:Math.pow(Yn,t),new ie(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ie(ln(this.r),ln(this.g),ln(this.b),yr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ya,formatHex:ya,formatHex8:bu,formatRgb:xa,toString:xa}));function ya(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function bu(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on((isNaN(this.opacity)?1:this.opacity)*255)}`}function xa(){const t=yr(this.opacity);return`${t===1?"rgb(":"rgba("}${ln(this.r)}, ${ln(this.g)}, ${ln(this.b)}${t===1?")":`, ${t})`}`}function yr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ln(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function on(t){return t=ln(t),(t<16?"0":"")+t.toString(16)}function ba(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _e(t,e,n,r)}function ks(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);if(t instanceof Gn||(t=un(t)),!t)return new _e;if(t instanceof _e)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,l=a-i,c=(a+i)/2;return l?(e===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new _e(s,l,c,t.opacity)}function wu(t,e,n,r){return arguments.length===1?ks(t):new _e(t,e,n,r??1)}function _e(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ii(_e,wu,_s(Gn,{brighter(t){return t=t==null?gr:Math.pow(gr,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Yn:Math.pow(Yn,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ie(Zr(t>=240?t-240:t+120,i,r),Zr(t,i,r),Zr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _e(wa(this.h),ir(this.s),ir(this.l),yr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yr(this.opacity);return`${t===1?"hsl(":"hsla("}${wa(this.h)}, ${ir(this.s)*100}%, ${ir(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wa(t){return t=(t||0)%360,t<0?t+360:t}function ir(t){return Math.max(0,Math.min(1,t||0))}function Zr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function _u(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function ku(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,l=r<e-1?t[r+2]:2*a-i;return _u((n-r/e)*e,s,i,a,l)}}const Li=t=>()=>t;function Mu(t,e){return function(n){return t+n*e}}function Au(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $u(t){return(t=+t)==1?Ms:function(e,n){return n-e?Au(e,n,t):Li(isNaN(e)?n:e)}}function Ms(t,e){var n=e-t;return n?Mu(t,n):Li(isNaN(t)?e:t)}const xr=function t(e){var n=$u(e);function r(i,a){var s=n((i=mr(i)).r,(a=mr(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),u=Ms(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Cu(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),s,l;for(s=0;s<n;++s)l=mr(e[s]),r[s]=l.r||0,i[s]=l.g||0,a[s]=l.b||0;return r=t(r),i=t(i),a=t(a),l.opacity=1,function(c){return l.r=r(c),l.g=i(c),l.b=a(c),l+""}}}var Su=Cu(ku);function Tu(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Eu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Nu(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Qn(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function Ru(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function we(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zu(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Qn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jr=new RegExp(hi.source,"g");function Fu(t){return function(){return t}}function Iu(t){return function(e){return t(e)+""}}function As(t,e){var n=hi.lastIndex=Jr.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=hi.exec(t))&&(i=Jr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:we(r,i)})),n=Jr.lastIndex;return n<e.length&&(a=e.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?Iu(c[0].x):Fu(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Qn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Li(e):(n==="number"?we:n==="string"?(r=un(e))?(e=r,xr):As:e instanceof un?xr:e instanceof Date?Ru:Eu(e)?Tu:Array.isArray(e)?Nu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zu:we)(t,e)}function $s(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var _a=180/Math.PI,vi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cs(t,e,n,r,i,a){var s,l,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*_a,skewX:Math.atan(c)*_a,scaleX:s,scaleY:l}}var ar;function Lu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?vi:Cs(e.a,e.b,e.c,e.d,e.e,e.f)}function Du(t){return t==null||(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),!(t=ar.transform.baseVal.consolidate()))?vi:(t=t.matrix,Cs(t.a,t.b,t.c,t.d,t.e,t.f))}function Ss(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,d,f,h,m,$){if(u!==f||d!==h){var L=m.push("translate(",null,e,null,n);$.push({i:L-4,x:we(u,f)},{i:L-2,x:we(d,h)})}else(f||h)&&m.push("translate("+f+e+h+n)}function s(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:we(u,d)})):d&&f.push(i(f)+"rotate("+d+r)}function l(u,d,f,h){u!==d?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:we(u,d)}):d&&f.push(i(f)+"skewX("+d+r)}function c(u,d,f,h,m,$){if(u!==f||d!==h){var L=m.push(i(m)+"scale(",null,",",null,")");$.push({i:L-4,x:we(u,f)},{i:L-2,x:we(d,h)})}else(f!==1||h!==1)&&m.push(i(m)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,f,h),s(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(m){for(var $=-1,L=h.length,v;++$<L;)f[(v=h[$]).i]=v.x(m);return f.join("")}}}var Bu=Ss(Lu,"px, ","px)","deg)"),Pu=Ss(Du,", ",")",")");function qu(t){return function(){return t}}function Hu(t){return+t}var ka=[0,1];function Ge(t){return t}function pi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:qu(isNaN(e)?NaN:.5)}function Ou(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Uu(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=pi(i,r),a=n(s,a)):(r=pi(r,i),a=n(a,s)),function(l){return a(r(l))}}function Vu(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=pi(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(l){var c=gs(t,l,1,r)-1;return a[c](i[c](l))}}function Yu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xu(){var t=ka,e=ka,n=Qn,r,i,a,s=Ge,l,c,u;function d(){var h=Math.min(t.length,e.length);return s!==Ge&&(s=Ou(t[0],t[h-1])),l=h>2?Vu:Uu,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=l(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((u||(u=l(e,t.map(r),we)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Hu),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=$s,d()},f.clamp=function(h){return arguments.length?(s=h?!0:Ge,d()):s!==Ge},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,m){return r=h,i=m,d()}}function Wu(){return Xu()(Ge,Ge)}function Gu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function br(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Mn(t){return t=br(Math.abs(t)),t?t[1]:NaN}function Qu(t,e){return function(n,r){for(var i=n.length,a=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return a.reverse().join(e)}}function ju(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ku=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wr(t){if(!(e=Ku.exec(t)))throw new Error("invalid format: "+t);var e;return new Di({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wr.prototype=Di.prototype;function Di(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Di.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zu(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ts;function Ju(t,e){var n=br(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ts=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+br(t,Math.max(0,e+a-1))[0]}function Ma(t,e){var n=br(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Aa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Gu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ma(t*100,e),r:Ma,s:Ju,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $a(t){return t}var Ca=Array.prototype.map,Sa=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function tf(t){var e=t.grouping===void 0||t.thousands===void 0?$a:Qu(Ca.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$a:ju(Ca.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"â":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=wr(f);var h=f.fill,m=f.align,$=f.sign,L=f.symbol,v=f.zero,y=f.width,x=f.comma,b=f.precision,S=f.trim,A=f.type;A==="n"?(x=!0,A="g"):Aa[A]||(b===void 0&&(b=12),S=!0,A="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var M=L==="$"?n:L==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",N=L==="$"?r:/[%p]/.test(A)?s:"",R=Aa[A],T=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function _(E){var B=M,k=N,F,V,z;if(A==="c")k=R(E)+k,E="";else{E=+E;var P=E<0||1/E<0;if(E=isNaN(E)?c:R(Math.abs(E),b),S&&(E=Zu(E)),P&&+E==0&&$!=="+"&&(P=!1),B=(P?$==="("?$:l:$==="-"||$==="("?"":$)+B,k=(A==="s"?Sa[8+Ts/3]:"")+k+(P&&$==="("?")":""),T){for(F=-1,V=E.length;++F<V;)if(z=E.charCodeAt(F),48>z||z>57){k=(z===46?i+E.slice(F+1):E.slice(F))+k,E=E.slice(0,F);break}}}x&&!v&&(E=e(E,1/0));var at=B.length+E.length+k.length,j=at<y?new Array(y-at+1).join(h):"";switch(x&&v&&(E=e(j+E,j.length?y-k.length:1/0),j=""),m){case"<":E=B+E+k+j;break;case"=":E=B+j+E+k;break;case"^":E=j.slice(0,at=j.length>>1)+B+E+k+j.slice(at);break;default:E=j+B+E+k;break}return a(E)}return _.toString=function(){return f+""},_}function d(f,h){var m=u((f=wr(f),f.type="f",f)),$=Math.max(-8,Math.min(8,Math.floor(Mn(h)/3)))*3,L=Math.pow(10,-$),v=Sa[8+$/3];return function(y){return m(L*y)+v}}return{format:u,formatPrefix:d}}var sr,ee,Es;ef({thousands:",",grouping:[3],currency:["$",""]});function ef(t){return sr=tf(t),ee=sr.format,Es=sr.formatPrefix,sr}function nf(t){return Math.max(0,-Mn(Math.abs(t)))}function rf(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mn(e)/3)))*3-Mn(Math.abs(t)))}function af(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mn(e)-Mn(t))+1}function sf(t,e,n,r){var i=iu(t,e,n),a;switch(r=wr(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=rf(i,s))&&(r.precision=a),Es(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=af(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=nf(i))&&(r.precision=a-(r.type==="%")*2);break}}return ee(r)}function Ns(t){var e=t.domain;return t.ticks=function(n){var r=e();return xs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return sf(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],l=r[a],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=kn(s,l,n),u===c)return r[i]=s,r[a]=l,e(r);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function je(){var t=Wu();return t.copy=function(){return Yu(t,je())},Fi.apply(t,arguments),Ns(t)}function of(){var t=0,e=1,n,r,i,a,s=Ge,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(a(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,$;return arguments.length?([m,$]=h,s=f(m,$),u):[s(0),s(1)]}}return u.range=d(Qn),u.rangeRound=d($s),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function lf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Rs(){var t=Ns(of()(Ge));return t.copy=function(){return lf(t,Rs())},cu.apply(t,arguments)}function cf(t){return t}var ti=1,ei=2,gi=3,Ln=4,Ta=1e-6;function uf(t){return"translate("+t+",0)"}function ff(t){return"translate(0,"+t+")"}function df(t){return e=>+t(e)}function hf(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function vf(){return!this.__axis}function zs(t,e){var n=[],r=null,i=null,a=6,s=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===ti||t===Ln?-1:1,d=t===Ln||t===ei?"x":"y",f=t===ti||t===gi?uf:ff;function h(m){var $=r??(e.ticks?e.ticks.apply(e,n):e.domain()),L=i??(e.tickFormat?e.tickFormat.apply(e,n):cf),v=Math.max(a,0)+l,y=e.range(),x=+y[0]+c,b=+y[y.length-1]+c,S=(e.bandwidth?hf:df)(e.copy(),c),A=m.selection?m.selection():m,M=A.selectAll(".domain").data([null]),N=A.selectAll(".tick").data($,e).order(),R=N.exit(),T=N.enter().append("g").attr("class","tick"),_=N.select("line"),E=N.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(T),_=_.merge(T.append("line").attr("stroke","currentColor").attr(d+"2",u*a)),E=E.merge(T.append("text").attr("fill","currentColor").attr(d,u*v).attr("dy",t===ti?"0em":t===gi?"0.71em":"0.32em")),m!==A&&(M=M.transition(m),N=N.transition(m),_=_.transition(m),E=E.transition(m),R=R.transition(m).attr("opacity",Ta).attr("transform",function(B){return isFinite(B=S(B))?f(B+c):this.getAttribute("transform")}),T.attr("opacity",Ta).attr("transform",function(B){var k=this.parentNode.__axis;return f((k&&isFinite(k=k(B))?k:S(B))+c)})),R.remove(),M.attr("d",t===Ln||t===ei?s?"M"+u*s+","+x+"H"+c+"V"+b+"H"+u*s:"M"+c+","+x+"V"+b:s?"M"+x+","+u*s+"V"+c+"H"+b+"V"+u*s:"M"+x+","+c+"H"+b),N.attr("opacity",1).attr("transform",function(B){return f(S(B)+c)}),_.attr(d+"2",u*a),E.attr(d,u*v).text(L),A.filter(vf).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ei?"start":t===Ln?"end":"middle"),A.each(function(){this.__axis=S})}return h.scale=function(m){return arguments.length?(e=m,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),h):n.slice()},h.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),h):r&&r.slice()},h.tickFormat=function(m){return arguments.length?(i=m,h):i},h.tickSize=function(m){return arguments.length?(a=s=+m,h):a},h.tickSizeInner=function(m){return arguments.length?(a=+m,h):a},h.tickSizeOuter=function(m){return arguments.length?(s=+m,h):s},h.tickPadding=function(m){return arguments.length?(l=+m,h):l},h.offset=function(m){return arguments.length?(c=+m,h):c},h}function jn(t){return zs(gi,t)}function Tr(t){return zs(Ln,t)}function gn(t){return function(){return t}}const mi=Math.PI,yi=2*mi,sn=1e-6,pf=yi-sn;function Fs(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gf(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fs;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class mf{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fs:gf(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-e,u=i-n,d=s-e,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>sn)if(!(Math.abs(f*c-u*d)>sn)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,$=i-l,L=c*c+u*u,v=m*m+$*$,y=Math.sqrt(L),x=Math.sqrt(h),b=a*Math.tan((mi-Math.acos((L+h-v)/(2*y*x)))/2),S=b/x,A=b/y;Math.abs(S-1)>sn&&this._append`L${e+S*d},${n+S*f}`,this._append`A${a},${a},0,0,${+(f*m>d*$)},${this._x1=e+A*c},${this._y1=n+A*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>sn||Math.abs(this._y1-d)>sn)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%yi+yi),h>pf?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>sn&&this._append`A${r},${r},0,${+(h>=mi)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function yf(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new mf(e)}function xf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Is(t){this._context=t}Is.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bf(t){return new Is(t)}function wf(t){return t[0]}function _f(t){return t[1]}function kf(t,e){var n=gn(!0),r=null,i=bf,a=null,s=yf(l);t=typeof t=="function"?t:t===void 0?wf:gn(t),e=typeof e=="function"?e:e===void 0?_f:gn(e);function l(c){var u,d=(c=xf(c)).length,f,h=!1,m;for(r==null&&(a=i(m=s())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,c),+e(f,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:gn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:gn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gn(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}var Mf={value:()=>{}};function Bi(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cr(n)}function cr(t){this._=t}function Af(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cr.prototype=Bi.prototype={constructor:cr,on:function(t,e){var n=this._,r=Af(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=$f(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Ea(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ea(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function $f(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ea(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Mf,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const xi={capture:!0,passive:!1};function bi(t){t.preventDefault(),t.stopImmediatePropagation()}function Cf(t){var e=t.document.documentElement,n=G(t).on("dragstart.drag",bi,xi);"onselectstart"in e?n.on("selectstart.drag",bi,xi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Sf(t,e){var n=t.document.documentElement,r=G(t).on("dragstart.drag",null);e&&(r.on("click.drag",bi,xi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var An=0,Dn=0,Fn=0,Ls=1e3,_r,Bn,kr=0,fn=0,Er=0,Wn=typeof performance=="object"&&performance.now?performance:Date,Ds=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pi(){return fn||(Ds(Tf),fn=Wn.now()+Er)}function Tf(){fn=0}function Mr(){this._call=this._time=this._next=null}Mr.prototype=Bs.prototype={constructor:Mr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Pi():+n)+(e==null?0:+e),!this._next&&Bn!==this&&(Bn?Bn._next=this:_r=this,Bn=this),this._call=t,this._time=n,wi()},stop:function(){this._call&&(this._call=null,this._time=1/0,wi())}};function Bs(t,e,n){var r=new Mr;return r.restart(t,e,n),r}function Ef(){Pi(),++An;for(var t=_r,e;t;)(e=fn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--An}function Na(){fn=(kr=Wn.now())+Er,An=Dn=0;try{Ef()}finally{An=0,Rf(),fn=0}}function Nf(){var t=Wn.now(),e=t-kr;e>Ls&&(Er-=e,kr=t)}function Rf(){for(var t,e=_r,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:_r=n);Bn=t,wi(r)}function wi(t){if(!An){Dn&&(Dn=clearTimeout(Dn));var e=t-fn;e>24?(t<1/0&&(Dn=setTimeout(Na,t-Wn.now()-Er)),Fn&&(Fn=clearInterval(Fn))):(Fn||(kr=Wn.now(),Fn=setInterval(Nf,Ls)),An=1,Ds(Na))}}function Ra(t,e,n){var r=new Mr;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var zf=Bi("start","end","cancel","interrupt"),Ff=[],Ps=0,za=1,_i=2,ur=3,Fa=4,ki=5,fr=6;function Nr(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;If(t,n,{name:e,index:r,group:i,on:zf,tween:Ff,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ps})}function qi(t,e){var n=Ae(t,e);if(n.state>Ps)throw new Error("too late; already scheduled");return n}function Le(t,e){var n=Ae(t,e);if(n.state>ur)throw new Error("too late; already running");return n}function Ae(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function If(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Bs(a,0,n.time);function a(u){n.state=za,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,f,h,m;if(n.state!==za)return c();for(d in r)if(m=r[d],m.name===n.name){if(m.state===ur)return Ra(s);m.state===Fa?(m.state=fr,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[d]):+d<e&&(m.state=fr,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[d])}if(Ra(function(){n.state===ur&&(n.state=Fa,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=_i,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_i){for(n.state=ur,i=new Array(h=n.tween.length),d=0,f=-1;d<h;++d)(m=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=m);i.length=f+1}}function l(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ki,1),f=-1,h=i.length;++f<h;)i[f].call(t,d);n.state===ki&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=fr,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Mi(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>_i&&r.state<ki,r.state=fr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Lf(t){return this.each(function(){Mi(this,t)})}function Df(t,e){var n,r;return function(){var i=Le(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Bf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Le(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var l={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=l;break}c===u&&i.push(l)}a.tween=i}}function Pf(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ae(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Df:Bf)(n,t,e))}function Hi(t,e,n){var r=t._id;return t.each(function(){var i=Le(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ae(i,r).value[e]}}function qs(t,e){var n;return(typeof e=="number"?we:e instanceof un?xr:(n=un(e))?(e=n,xr):As)(t,e)}function qf(t){return function(){this.removeAttribute(t)}}function Hf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Of(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function Uf(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function Vf(t,e,n){var r,i,a;return function(){var s,l=n(this),c;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=l+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,l)))}}function Yf(t,e,n){var r,i,a;return function(){var s,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=l+"",s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,l)))}}function Xf(t,e){var n=$r(t),r=n==="transform"?Pu:qs;return this.attrTween(t,typeof e=="function"?(n.local?Yf:Vf)(n,r,Hi(this,"attr."+t,e)):e==null?(n.local?Hf:qf)(n):(n.local?Uf:Of)(n,r,e))}function Wf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Gf(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Gf(t,a)),n}return i._value=e,i}function jf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Wf(t,a)),n}return i._value=e,i}function Kf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$r(t);return this.tween(n,(r.local?Qf:jf)(r,e))}function Zf(t,e){return function(){qi(this,t).delay=+e.apply(this,arguments)}}function Jf(t,e){return e=+e,function(){qi(this,t).delay=e}}function td(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zf:Jf)(e,t)):Ae(this.node(),e).delay}function ed(t,e){return function(){Le(this,t).duration=+e.apply(this,arguments)}}function nd(t,e){return e=+e,function(){Le(this,t).duration=e}}function rd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ed:nd)(e,t)):Ae(this.node(),e).duration}function id(t,e){if(typeof e!="function")throw new Error;return function(){Le(this,t).ease=e}}function ad(t){var e=this._id;return arguments.length?this.each(id(e,t)):Ae(this.node(),e).ease}function sd(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Le(this,t).ease=n}}function od(t){if(typeof t!="function")throw new Error;return this.each(sd(this._id,t))}function ld(t){typeof t!="function"&&(t=is(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,l=r[i]=[],c,u=0;u<s;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&l.push(c);return new Ve(r,this._parents,this._name,this._id)}function cd(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var c=e[l],u=n[l],d=c.length,f=s[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(f[m]=h);for(;l<r;++l)s[l]=e[l];return new Ve(s,this._parents,this._name,this._id)}function ud(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function fd(t,e,n){var r,i,a=ud(e)?qi:Le;return function(){var s=a(this,t),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}}function dd(t,e){var n=this._id;return arguments.length<2?Ae(this.node(),n).on.on(t):this.each(fd(n,t,e))}function hd(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function vd(){return this.on("end.remove",hd(this._id))}function pd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ri(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var l=r[s],c=l.length,u=a[s]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=t.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Nr(u[h],e,n,h,u,Ae(d,n)));return new Ve(a,this._parents,e,n)}function gd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=rs(t));for(var r=this._groups,i=r.length,a=[],s=[],l=0;l<i;++l)for(var c=r[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=t.call(d,d.__data__,f,c),m,$=Ae(d,n),L=0,v=h.length;L<v;++L)(m=h[L])&&Nr(m,e,n,L,h,$);a.push(h),s.push(d)}return new Ve(a,s,e,n)}var md=$n.prototype.constructor;function yd(){return new md(this._groups,this._parents)}function xd(t,e){var n,r,i;return function(){var a=_n(this,t),s=(this.style.removeProperty(t),_n(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Hs(t){return function(){this.style.removeProperty(t)}}function bd(t,e,n){var r,i=n+"",a;return function(){var s=_n(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function wd(t,e,n){var r,i,a;return function(){var s=_n(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),_n(this,t))),s===c?null:s===r&&c===i?a:(i=c,a=e(r=s,l))}}function _d(t,e){var n,r,i,a="style."+e,s="end."+a,l;return function(){var c=Le(this,t),u=c.on,d=c.value[a]==null?l||(l=Hs(e)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(s,i=d),c.on=r}}function kd(t,e,n){var r=(t+="")=="transform"?Bu:qs;return e==null?this.styleTween(t,xd(t,r)).on("end.style."+t,Hs(t)):typeof e=="function"?this.styleTween(t,wd(t,r,Hi(this,"style."+t,e))).each(_d(this._id,t)):this.styleTween(t,bd(t,r,e),n).on("end.style."+t,null)}function Md(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ad(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Md(t,s,n)),r}return a._value=e,a}function $d(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ad(t,e,n??""))}function Cd(t){return function(){this.textContent=t}}function Sd(t){return function(){var e=t(this);this.textContent=e??""}}function Td(t){return this.tween("text",typeof t=="function"?Sd(Hi(this,"text",t)):Cd(t==null?"":t+""))}function Ed(t){return function(e){this.textContent=t.call(this,e)}}function Nd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ed(i)),e}return r._value=t,r}function Rd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nd(t))}function zd(){for(var t=this._name,e=this._id,n=Os(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],l=s.length,c,u=0;u<l;++u)if(c=s[u]){var d=Ae(c,e);Nr(c,t,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ve(r,this._parents,t,n)}function Fd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var l={value:s},c={value:function(){--i===0&&a()}};n.each(function(){var u=Le(this,r),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),i===0&&a()})}var Id=0;function Ve(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ai(t){return $n().transition(t)}function Os(){return++Id}var Oe=$n.prototype;Ve.prototype=Ai.prototype={constructor:Ve,select:pd,selectAll:gd,selectChild:Oe.selectChild,selectChildren:Oe.selectChildren,filter:ld,merge:cd,selection:yd,transition:zd,call:Oe.call,nodes:Oe.nodes,node:Oe.node,size:Oe.size,empty:Oe.empty,each:Oe.each,on:dd,attr:Xf,attrTween:Kf,style:kd,styleTween:$d,text:Td,textTween:Rd,remove:vd,tween:Pf,delay:td,duration:rd,ease:ad,easeVarying:od,end:Fd,[Symbol.iterator]:Oe[Symbol.iterator]};function Ld(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Dd={time:null,delay:0,duration:250,ease:Ld};function Bd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Pd(t){var e,n;t instanceof Ve?(e=t._id,t=t._name):(e=Os(),(n=Dd).time=Pi(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],l=s.length,c,u=0;u<l;++u)(c=s[u])&&Nr(c,t,e,u,s,n||Bd(c,e));return new Ve(r,this._parents,t,e)}$n.prototype.interrupt=Lf;$n.prototype.transition=Pd;const ni=t=>()=>t;function qd(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Hd(t){t.stopImmediatePropagation()}function ri(t){t.preventDefault(),t.stopImmediatePropagation()}var Ia={name:"drag"},ii={name:"space"},mn={name:"handle"},yn={name:"center"};const{abs:La,max:Xt,min:Wt}=Math;function Da(t){return[+t[0],+t[1]]}function Ba(t){return[Da(t[0]),Da(t[1])]}var dr={name:"x",handles:["w","e"].map($i),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ai={},Ue={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},qa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Od={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ud={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function $i(t){return{type:t}}function Vd(t){return!t.ctrlKey&&!t.button}function Yd(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Xd(){return navigator.maxTouchPoints||"ontouchstart"in this}function si(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Wd(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Gd(){return Qd(dr)}function Qd(t){var e=Yd,n=Vd,r=Xd,i=!0,a=Bi("start","brush","end"),s=6,l;function c(v){var y=v.property("__brush",L).selectAll(".overlay").data([$i("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ue.overlay).merge(y).each(function(){var b=si(this).extent;G(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),v.selectAll(".selection").data([$i("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ue.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var x=v.selectAll(".handle").data(t.handles,function(b){return b.type});x.exit().remove(),x.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Ue[b.type]}),v.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",m).on("touchend.brush touchcancel.brush",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(v,y,x){v.tween?v.on("start.brush",function(b){d(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){d(this,arguments).end(b)}).tween("brush",function(){var b=this,S=b.__brush,A=d(b,arguments),M=S.selection,N=t.input(typeof y=="function"?y.apply(this,arguments):y,S.extent),R=Qn(M,N);function T(_){S.selection=_===1&&N===null?null:R(_),u.call(b),A.brush()}return M!==null&&N!==null?T:T(1)}):v.each(function(){var b=this,S=arguments,A=b.__brush,M=t.input(typeof y=="function"?y.apply(b,S):y,A.extent),N=d(b,S).beforestart();Mi(b),A.selection=M===null?null:M,u.call(b),N.start(x).brush(x).end(x)})},c.clear=function(v,y){c.move(v,null,y)};function u(){var v=G(this),y=si(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(x){return x.type[x.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(x){return x.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(x){return x.type==="n"||x.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(x){return x.type==="e"||x.type==="w"?y[1][1]-y[0][1]+s:s})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(v,y,x){var b=v.__brush.emitter;return b&&(!x||!b.clean)?b:new f(v,y,x)}function f(v,y,x){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=x}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,x){var b=G(this.that).datum();a.call(v,this.that,new qd(v,{sourceEvent:y,target:c,selection:t.output(this.state.selection),mode:x,dispatch:a}),b)}};function h(v){if(l&&!v.touches||!n.apply(this,arguments))return;var y=this,x=v.target.__data__.type,b=(i&&v.metaKey?x="overlay":x)==="selection"?Ia:i&&v.altKey?yn:mn,S=t===ai?null:Od[x],A=t===dr?null:Ud[x],M=si(y),N=M.extent,R=M.selection,T=N[0][0],_,E,B=N[0][1],k,F,V=N[1][0],z,P,at=N[1][1],j,ct,q=0,U=0,H,lt=S&&A&&i&&v.shiftKey,ut,yt,C=Array.from(v.touches||[v],W=>{const vt=W.identifier;return W=ua(W,y),W.point0=W.slice(),W.identifier=vt,W});Mi(y);var K=d(y,arguments,!0).beforestart();if(x==="overlay"){R&&(H=!0);const W=[C[0],C[1]||C[0]];M.selection=R=[[_=t===ai?T:Wt(W[0][0],W[1][0]),k=t===dr?B:Wt(W[0][1],W[1][1])],[z=t===ai?V:Xt(W[0][0],W[1][0]),j=t===dr?at:Xt(W[0][1],W[1][1])]],C.length>1&&dt(v)}else _=R[0][0],k=R[0][1],z=R[1][0],j=R[1][1];E=_,F=k,P=z,ct=j;var pt=G(y).attr("pointer-events","none"),J=pt.selectAll(".overlay").attr("cursor",Ue[x]);if(v.touches)K.moved=ft,K.ended=tt;else{var nt=G(v.view).on("mousemove.brush",ft,!0).on("mouseup.brush",tt,!0);i&&nt.on("keydown.brush",St,!0).on("keyup.brush",Pt,!0),Cf(v.view)}u.call(y),K.start(v,b.name);function ft(W){for(const vt of W.changedTouches||[W])for(const Nt of C)Nt.identifier===vt.identifier&&(Nt.cur=ua(vt,y));if(lt&&!ut&&!yt&&C.length===1){const vt=C[0];La(vt.cur[0]-vt[0])>La(vt.cur[1]-vt[1])?yt=!0:ut=!0}for(const vt of C)vt.cur&&(vt[0]=vt.cur[0],vt[1]=vt.cur[1]);H=!0,ri(W),dt(W)}function dt(W){const vt=C[0],Nt=vt.point0;var Tt;switch(q=vt[0]-Nt[0],U=vt[1]-Nt[1],b){case ii:case Ia:{S&&(q=Xt(T-_,Wt(V-z,q)),E=_+q,P=z+q),A&&(U=Xt(B-k,Wt(at-j,U)),F=k+U,ct=j+U);break}case mn:{C[1]?(S&&(E=Xt(T,Wt(V,C[0][0])),P=Xt(T,Wt(V,C[1][0])),S=1),A&&(F=Xt(B,Wt(at,C[0][1])),ct=Xt(B,Wt(at,C[1][1])),A=1)):(S<0?(q=Xt(T-_,Wt(V-_,q)),E=_+q,P=z):S>0&&(q=Xt(T-z,Wt(V-z,q)),E=_,P=z+q),A<0?(U=Xt(B-k,Wt(at-k,U)),F=k+U,ct=j):A>0&&(U=Xt(B-j,Wt(at-j,U)),F=k,ct=j+U));break}case yn:{S&&(E=Xt(T,Wt(V,_-q*S)),P=Xt(T,Wt(V,z+q*S))),A&&(F=Xt(B,Wt(at,k-U*A)),ct=Xt(B,Wt(at,j+U*A)));break}}P<E&&(S*=-1,Tt=_,_=z,z=Tt,Tt=E,E=P,P=Tt,x in Pa&&J.attr("cursor",Ue[x=Pa[x]])),ct<F&&(A*=-1,Tt=k,k=j,j=Tt,Tt=F,F=ct,ct=Tt,x in qa&&J.attr("cursor",Ue[x=qa[x]])),M.selection&&(R=M.selection),ut&&(E=R[0][0],P=R[1][0]),yt&&(F=R[0][1],ct=R[1][1]),(R[0][0]!==E||R[0][1]!==F||R[1][0]!==P||R[1][1]!==ct)&&(M.selection=[[E,F],[P,ct]],u.call(y),K.brush(W,b.name))}function tt(W){if(Hd(W),W.touches){if(W.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Sf(W.view,H),nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);pt.attr("pointer-events","all"),J.attr("cursor",Ue.overlay),M.selection&&(R=M.selection),Wd(R)&&(M.selection=null,u.call(y)),K.end(W,b.name)}function St(W){switch(W.keyCode){case 16:{lt=S&&A;break}case 18:{b===mn&&(S&&(z=P-q*S,_=E+q*S),A&&(j=ct-U*A,k=F+U*A),b=yn,dt(W));break}case 32:{(b===mn||b===yn)&&(S<0?z=P-q:S>0&&(_=E-q),A<0?j=ct-U:A>0&&(k=F-U),b=ii,J.attr("cursor",Ue.selection),dt(W));break}default:return}ri(W)}function Pt(W){switch(W.keyCode){case 16:{lt&&(ut=yt=lt=!1,dt(W));break}case 18:{b===yn&&(S<0?z=P:S>0&&(_=E),A<0?j=ct:A>0&&(k=F),b=mn,dt(W));break}case 32:{b===ii&&(W.altKey?(S&&(z=P-q*S,_=E+q*S),A&&(j=ct-U*A,k=F+U*A),b=yn):(S<0?z=P:S>0&&(_=E),A<0?j=ct:A>0&&(k=F),b=mn),J.attr("cursor",Ue[x]),dt(W));break}default:return}ri(W)}}function m(v){d(this,arguments).moved(v)}function $(v){d(this,arguments).ended(v)}function L(){var v=this.__brush||{selection:null};return v.extent=Ba(e.apply(this,arguments)),v.dim=t,v}return c.extent=function(v){return arguments.length?(e=typeof v=="function"?v:ni(Ba(v)),c):e},c.filter=function(v){return arguments.length?(n=typeof v=="function"?v:ni(!!v),c):n},c.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:ni(!!v),c):r},c.handleSize=function(v){return arguments.length?(s=+v,c):s},c.keyModifiers=function(v){return arguments.length?(i=!!v,c):i},c.on=function(){var v=a.on.apply(a,arguments);return v===a?c:v},c}var jd=Q('<div class="age-range-indicator svelte-s2n15r"><span class="svelte-s2n15r"> </span> <button class="clear-btn svelte-s2n15r">Clear filter</button></div>'),Kd=Q('<div class="age-distribution svelte-s2n15r"><div class="chart svelte-s2n15r"><svg class="h-auto w-full"></svg></div> <!></div>');function Zd(t,e){ke(e,!1);const n=O(),r=O();let i=jt(e,"data",24,()=>[]),a=jt(e,"showPercentage",8,!1),s=jt(e,"showBySex",8,!0),l=O(),c=O([null,null]);const u=Ha();function d(y){const x=[...y].sort((N,R)=>N-R),b=lr(x)||0,S=Vn(x,.25)||0,A=Vn(x,.75)||0,M=A-S;return{median:b,q1:S,q3:A,iqr:M}}function f(){if(!i().length)return;G(o(l)).selectAll("*").remove();const y={top:30,right:30,bottom:60,left:60},x=600-y.left-y.right,b=350-y.top-y.bottom,S=o(n).filter(C=>C.age!==void 0&&!isNaN(C.age)),A=S.map(C=>C.age),M=d(A),N=i().filter(C=>C.age!==void 0&&!isNaN(C.age)).map(C=>C.age),R=je().domain(or(N)).nice().range([0,x]),T=ou().domain(R.domain()).thresholds(R.ticks(20));let _,E;const B=T(A),k=S.length,F=C=>a()?C.length/k*100:C.length,V=ze(B,C=>F(C))||0,z=S.filter(C=>C.sex==="M").map(C=>C.age),P=S.filter(C=>C.sex==="F").map(C=>C.age),at=T(z),j=T(P),ct=Math.max(ze(at,C=>F(C))||0,ze(j,C=>F(C))||0),q=Math.max(V,ct);s()?_={male:at,female:j}:_=B,E=q;const U=je().domain([0,E*1.1]).range([b,0]);G("body").selectAll(".age-tooltip").data([0]).enter().append("div").attr("class","age-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","12px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("text-align","center").style("z-index","10");const H=G(o(l)).attr("viewBox",`0 0 ${x+y.left+y.right} ${b+y.top+y.bottom}`).append("g").attr("transform",`translate(${y.left},${y.top})`);if(s()){const C=Cr().domain(["Male","Female"]).range(["#4682b4","#db7093"]),K=_,pt=Ai().duration(500),J=H.append("g").selectAll(".bar-male").data(K.male).enter().append("rect").attr("class","bar-male").attr("x",tt=>R(tt.x0)).attr("width",tt=>Math.max(0,R(tt.x1)-R(tt.x0)-1)).attr("y",b).attr("height",0).attr("fill",C("Male")).attr("opacity",.7).attr("stroke",C("Male")).attr("stroke-width",1);J.transition(pt).attr("y",tt=>U(F(tt))).attr("height",tt=>b-U(F(tt)));const nt=G("body").select(".age-tooltip");J.on("mouseover",function(tt,St){const Pt=St.length,W=(Pt/z.length*100).toFixed(1),vt=`${St.x0}-${St.x1}`;nt.transition().duration(200).style("opacity",.9),nt.html(`
                            <strong>Age: ${vt}</strong><br/>
                            <strong>Male</strong><br/>
                            Count: ${Pt}<br/>
                            Percentage: ${W}%
                        `).style("left",tt.pageX+10+"px").style("top",tt.pageY-28+"px"),G(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){nt.transition().duration(500).style("opacity",0),G(this).attr("stroke",C("Male")).attr("stroke-width",1)});const ft=H.append("g").selectAll(".bar-female").data(K.female).enter().append("rect").attr("class","bar-female").attr("x",tt=>R(tt.x0)).attr("width",tt=>Math.max(0,R(tt.x1)-R(tt.x0)-1)).attr("y",b).attr("height",0).attr("fill",C("Female")).attr("opacity",.7).attr("stroke",C("Female")).attr("stroke-width",1);ft.transition(pt).attr("y",tt=>U(F(tt))).attr("height",tt=>b-U(F(tt))),ft.on("mouseover",function(tt,St){const Pt=St.length,W=(Pt/P.length*100).toFixed(1),vt=`${St.x0}-${St.x1}`;nt.transition().duration(200).style("opacity",.9),nt.html(`
                            <strong>Age: ${vt}</strong><br/>
                            <strong>Female</strong><br/>
                            Count: ${Pt}<br/>
                            Percentage: ${W}%
                        `).style("left",tt.pageX+10+"px").style("top",tt.pageY-28+"px"),G(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){nt.transition().duration(500).style("opacity",0),G(this).attr("stroke",C("Female")).attr("stroke-width",1)});const dt=H.append("g").attr("class","legend").attr("transform",`translate(${x-100}, 10)`);["Male","Female"].forEach((tt,St)=>{dt.append("rect").attr("x",0).attr("y",St*20).attr("width",15).attr("height",15).attr("fill",C(tt)),dt.append("text").attr("x",20).attr("y",St*20+12).text(tt).style("font-size","12px")})}else{const C=Ai().duration(500),K=H.append("g").selectAll("rect").data(_).enter().append("rect").attr("x",J=>R(J.x0)).attr("width",J=>Math.max(0,R(J.x1)-R(J.x0)-1)).attr("y",b).attr("height",0).attr("fill","steelblue").attr("stroke","white").attr("stroke-width",.5);K.transition(C).attr("y",J=>U(F(J))).attr("height",J=>b-U(F(J)));const pt=G("body").select(".age-tooltip");K.on("mouseover",function(J,nt){const ft=nt.length,dt=(ft/k*100).toFixed(1),tt=`${nt.x0}-${nt.x1}`;pt.transition().duration(200).style("opacity",.9),pt.html(`
                        <strong>Age: ${tt}</strong><br/>
                        Count: ${ft}<br/>
                        Percentage: ${dt}%
                    `).style("left",J.pageX+10+"px").style("top",J.pageY-28+"px"),G(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){pt.transition().duration(500).style("opacity",0),G(this).attr("stroke","white").attr("stroke-width",.5)})}H.append("g").attr("transform",`translate(0,${b})`).call(jn(R).tickFormat(C=>`${C}`)).style("font-size","12px"),H.append("g").call(Tr(U)).style("font-size","12px"),H.append("text").attr("x",x/2).attr("y",b+40).attr("text-anchor","middle").text("Age (years)").style("font-size","14px").attr("class","fill-text-primary"),H.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-35).attr("text-anchor","middle").text(a()?"Percentage of Cases (%)":"Number of Cases").style("font-size","14px").attr("class","fill-text-primary"),H.append("text").attr("x",x/2).attr("y",-10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Age Distribution of Surgical Cases").attr("class","fill-text-primary");const lt=R(M.median);H.append("line").attr("x1",lt).attr("x2",lt).attr("y1",b).attr("y2",10).attr("stroke","red").attr("stroke-width",2).attr("stroke-dasharray","5,5"),H.append("rect").attr("x",R(M.q1)).attr("width",R(M.q3)-R(M.q1)).attr("y",b+5).attr("height",10).attr("fill","rgba(255,0,0,0.3)"),H.append("text").attr("x",lt).attr("y",5).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(`Median: ${ee(".1f")(M.median)}`).attr("class","fill-text-primary"),H.append("text").attr("x",(R(M.q1)+R(M.q3))/2).attr("y",b+25).attr("text-anchor","middle").style("font-size","12px").text(`IQR: ${ee(".1f")(M.q1)} - ${ee(".1f")(M.q3)}`).attr("class","fill-text-primary"),M.median>60&&H.append("text").attr("x",x*.75).attr("y",b*.25).attr("text-anchor","middle").style("font-size","13px").style("font-style","italic").style("fill","#555").text("Aging patient population"),G("body").selectAll(".age-brush-tooltip").data([0]).enter().append("div").attr("class","age-brush-tooltip").style("opacity",0).style("position","fixed").style("background-color","rgba(70, 130, 180, 0.9)").style("color","white").style("border-radius","4px").style("padding","6px 12px").style("pointer-events","none").style("font-size","13px").style("font-weight","bold").style("text-align","center").style("z-index","20").style("transform","translateX(-50%)").style("box-shadow","0 2px 5px rgba(0,0,0,0.3)").style("border","1px solid rgba(255,255,255,0.2)");const ut=Gd().extent([[0,0],[x,b]]).on("start brush",C=>{if(C.selection){const[K,pt]=C.selection.map(St=>Math.round(R.invert(St))),J=G("body").select(".age-brush-tooltip"),nt=o(l).getBoundingClientRect(),ft=`Selecting Ages: ${K} - ${pt} years`,dt=nt.left+nt.width/2,tt=nt.bottom-20;J.html(ft).style("left",dt+"px").style("top",tt+"px").style("opacity",1)}}).on("end",C=>{if(setTimeout(()=>{G("body").select(".age-brush-tooltip").style("opacity",0)},500),!C.selection){o(c)[0]!==null&&(I(c,[null,null]),setTimeout(()=>f(),0));return}const[K,pt]=C.selection.map(nt=>R.invert(nt)),J=[Math.round(K),Math.round(pt)];(o(c)[0]!==J[0]||o(c)[1]!==J[1])&&(I(c,J),setTimeout(()=>f(),0))}),yt=H.append("g").attr("class","brush").call(ut);o(c)[0]!==null&&o(c)[1]!==null&&yt.call(ut.move,[R(o(c)[0]),R(o(c)[1])])}Ie(()=>(f(),()=>{G("body").selectAll(".age-tooltip").remove()})),Oa(f),Ie(()=>()=>{G("body").selectAll(".age-tooltip").remove(),G("body").selectAll(".age-brush-tooltip").remove()}),ot(()=>(o(c),kt(i())),()=>{I(n,o(c)[0]!==null&&o(c)[1]!==null?i().filter(y=>y.age!==void 0&&y.age>=o(c)[0]&&y.age<=o(c)[1]):i())}),ot(()=>(o(n),lr),()=>{I(r,o(n).length&&lr(o(n).filter(y=>y.age!==void 0&&!isNaN(y.age)).map(y=>y.age))||0)}),ot(()=>(o(c),o(n),kt(i())),()=>{o(c)[0]!==null?u("filter",{ageRange:o(c),data:o(n)}):o(n)===i()&&o(c)[0]===null&&u("filter",{ageRange:null,data:i()})}),ot(()=>(kt(a()),kt(s()),o(l),G),()=>{(a()!==void 0||s()!==void 0)&&o(l)&&(G("body").select(".age-tooltip").style("opacity",0),f())}),Ze(),Ke();var h=Kd(),m=g(h),$=g(m);cn($,y=>I(l,y),()=>o(l)),p(m);var L=w(m,2);{var v=y=>{var x=jd(),b=g(x),S=g(b);p(b);var A=w(b,2);p(x),$t(()=>X(S,`Age range: ${o(c)[0]??""}â${o(c)[1]??""}`)),Qe("click",A,()=>{G("body").select(".age-tooltip").style("opacity",0),I(c,[null,null]),setTimeout(()=>f(),0)}),Y(y,x)};At(L,y=>{o(c)[0]!==null&&y(v)})}p(h),Y(t,h),Me()}var Jd=Q('<div class="filter-notice svelte-1xqgfk8"><span class="filter-badge svelte-1xqgfk8">Filtered</span> <span class="text-black svelte-1xqgfk8">Viewing <strong> </strong> cases only</span> <button class="clear-filter text-black svelte-1xqgfk8">Clear filter Ã</button></div>'),th=Q('<div class="department-distribution svelte-1xqgfk8"><div class="chart svelte-1xqgfk8"><svg class="h-auto w-full"></svg></div> <!></div>');function eh(t,e){ke(e,!1);let n=jt(e,"data",24,()=>[]),r=jt(e,"filteredDepartment",12,null),i=jt(e,"showPercentage",8,!1),a=O(),s="Department Distribution of Surgical Cases";const l=Ha();function c(){if(!n().length)return;G(o(a)).selectAll("*").remove();const v={top:30,right:30,bottom:90,left:60},y=600-v.left-v.right,x=350-v.top-v.bottom,b=jc(n(),k=>k.length,k=>k.department),S=Array.from(b,([k,F])=>({key:k,value:F})).sort((k,F)=>vs(k.value,F.value)),A=lu(S,k=>k.value),M=S.map(k=>({...k,percent:k.value/A*100})),N=M.slice(0,2);N.reduce((k,F)=>k+F.percent,0);const R=Sr().domain(S.map(k=>k.key)).range([0,y]).padding(.2),T=je().domain([0,i()?ze(M,k=>k.percent):ze(S,k=>k.value)]).nice().range([x,0]),_=G(o(a)).attr("viewBox",`0 0 ${y+v.left+v.right} ${x+v.top+v.bottom}`).append("g").attr("transform",`translate(${v.left},${v.top})`);_.append("text").attr("x",y/2).attr("y",-15).attr("text-anchor","middle").attr("class","chart-title").style("font-size","16px").style("font-weight","bold").text(s).attr("class","fill-text-primary");const E=new Map;S.forEach(k=>{const F=n().filter(H=>H.department===k.key),V=F.filter(H=>H.sex==="M").length,z=F.filter(H=>H.sex==="F").length,P=V/k.value*100,at=z/k.value*100,j=F.filter(H=>H.age!==void 0&&!isNaN(H.age)).map(H=>H.age),ct=j.length&&lr(j)||0,q=j.length&&Vn(j,.25)||0,U=j.length&&Vn(j,.75)||0;E.set(k.key,{maleCount:V,femaleCount:z,malePercent:P,femalePercent:at,medianAge:ct,q1:q,q3:U})});const B=G("body").selectAll(".dept-tooltip").data([0]).enter().append("div").attr("class","dept-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("border-radius","5px").style("padding","10px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("pointer-events","none").style("font-size","12px").style("z-index","10");_.append("g").selectAll("rect").data(M).enter().append("rect").attr("x",k=>R(k.key)).attr("y",k=>i()?T(k.percent):T(k.value)).attr("width",R.bandwidth()).attr("height",k=>i()?x-T(k.percent):x-T(k.value)).attr("fill",k=>r()===k.key?"#ff7f50":N.includes(k)?"#2a6d7c":"#5eb1c6").attr("stroke","#fff").attr("stroke-width",1).attr("class","dept-bar").style("cursor","pointer").on("mouseover",function(k,F){G(this).transition().duration(200).attr("fill","#ff7f50");const V=E.get(F.key);B.html(`
					<div style="font-weight: bold; margin-bottom: 5px; color: #2a6d7c;">${F.key}</div>
					<div>Total cases: <b>${F.value}</b> (${ee(".1f")(F.percent)}% of all)</div>
					${i()?`<div style="font-weight: bold; color: #2a6d7c; margin-top: 3px;">
							Showing as percentage: ${ee(".1f")(F.percent)}%
						</div>`:""}
					<div style="margin-top: 5px;">
						<div>Sex ratio: <b>${ee(".0f")(V.malePercent)}% M / ${ee(".0f")(V.femalePercent)}% F</b></div>
						<div>Median age: <b>${ee(".1f")(V.medianAge)}</b> years</div>
						<div>IQR: <b>${ee(".1f")(V.q1)} - ${ee(".1f")(V.q3)}</b></div>
					</div>
					<div style="margin-top: 5px; font-size: 10px; color: #666;">Click to filter dashboard by department</div>
				`).style("visibility","visible").style("left",k.pageX+15+"px").style("top",k.pageY-10+"px")}).on("mousemove",function(k){B.style("left",k.pageX+15+"px").style("top",k.pageY-10+"px")}).on("mouseout",function(){const k=G(this).datum();G(this).transition().duration(200).attr("fill",r()===k.key?"#ff7f50":N.includes(k)?"#2a6d7c":"#5eb1c6"),B.style("visibility","hidden")}).on("click",function(k,F){k.stopPropagation();const V=r()===F.key?null:F.key;l("filter",{department:V,name:F.key}),G(o(a)).selectAll(".dept-bar").transition().duration(300).attr("fill",z=>z.key===V?"#ff7f50":N.includes(z)?"#2a6d7c":"#5eb1c6"),r(V)}),_.append("g").attr("transform",`translate(0,${x})`).call(jn(R)).selectAll("text").attr("transform","rotate(-35)").attr("text-anchor","end").attr("dy","0.5em").attr("dx","-0.8em").style("font-size","12px"),_.append("g").call(Tr(T).tickFormat(k=>i()?ee(".1f")(k)+"%":ee(",.0f")(k))).style("font-size","12px"),_.append("text").attr("x",y/2).attr("y",x+65).attr("text-anchor","middle").style("font-size","14px").text("Surgical Department").attr("class","fill-text-primary"),_.append("text").attr("transform","rotate(-90)").attr("x",-230/2).attr("y",-50).attr("text-anchor","middle").style("font-size","14px").text(i()?"Percentage of Cases (%)":"Number of Cases").attr("class","fill-text-primary")}function u(){r()&&(r(null),l("filter",{department:null}),c())}Ie(()=>{c();const v=o(a);return v&&v.addEventListener("click",u),()=>{v&&v.removeEventListener("click",u),G("body").selectAll(".dept-tooltip").remove()}}),Oa(c),ot(()=>(kt(i()),o(a),G),()=>{i()!==void 0&&o(a)&&(G("body").selectAll(".dept-tooltip").style("visibility","hidden"),c())}),ot(()=>(o(a),kt(n())),()=>{o(a)&&n()&&c()}),Ze(),Ke();var d=th(),f=g(d),h=g(f);cn(h,v=>I(a,v),()=>o(a)),p(f);var m=w(f,2);{var $=v=>{var y=Jd(),x=w(g(y),2),b=w(g(x)),S=g(b,!0);p(b),Ct(),p(x);var A=w(x,2);p(y),$t(()=>X(S,r())),Qe("click",A,u),Y(v,y)},L=v=>{};At(m,v=>{r()?v($):v(L,!1)})}p(d),Y(t,d),Me()}var nh=Q(`<div class="slide-container svelte-1vwebms"><div class="content svelte-1vwebms"><h2 class="svelte-1vwebms">Who Steps Into the OR?</h2> <p class="description svelte-1vwebms">Let's start by meeting our patients. The charts below reveal a striking pattern: while our
			patients span six decades, <strong>95% cluster in just two surgical departments</strong>. This concentration, combined with
			age and sex differences, creates wildly different baseline risks before the first incision. Click
			any department bar or select an age range to filter the dashboard and see how demographics shift
			across specialties.</p> <div class="controls-container svelte-1vwebms"><div class="flex-controls svelte-1vwebms"><label class="control-item svelte-1vwebms"><input type="checkbox" class="svelte-1vwebms"/> <span class="checkbox-label svelte-1vwebms">Show percentages</span></label> <label class="control-item svelte-1vwebms"><input type="checkbox" class="svelte-1vwebms"/> <span class="checkbox-label svelte-1vwebms">Split by sex</span></label> <p class="tip-text svelte-1vwebms"><i>Tip: Click and drag on the age chart to filter by age range. Click on department bars to
						filter by department.</i></p></div></div> <div class="visualization-grid svelte-1vwebms"><!> <!></div> <div class="insights-container svelte-1vwebms"><h4 class="svelte-1vwebms">Insights into Demographics</h4> <div class="insights-grid svelte-1vwebms"><div class="insight-card svelte-1vwebms"><p class="svelte-1vwebms">Our surgical cases span six decades of life. The median age of 59.0 suggests an
						aging population, with implications for surgical risk and recovery
						considerations.</p></div> <div class="insight-card svelte-1vwebms"><p class="svelte-1vwebms">Our patients span six decades, but 95% of them cluster in just two surgical
						departments, setting the stage for wildly different baseline risks.</p></div></div></div></div></div>`);function rh(t,e){ke(e,!1);let n=O([]),r=O(null),i=O(null),a=O(!1),s=O(!1),l=jt(e,"cases",24,()=>[]);function c(T){const{department:_}=T.detail;I(r,_),f()}function u(T){I(a,T.detail.showPercentage)}function d(T){const{ageRange:_}=T.detail;I(i,_),f()}function f(){let T=[...l()];o(r)&&(T=T.filter(_=>_.department===o(r))),o(i)&&(T=T.filter(_=>_.age!==void 0&&_.age>=o(i)[0]&&_.age<=o(i)[1])),I(n,T)}ot(()=>kt(l()),()=>{if(l().length>0){let V=function(z,P){const at=z.avgWait;z.count++,z.avgWait=(at*(z.count-1)+P)/z.count,z.stdDev=Math.sqrt(((z.count-2)*z.stdDev*z.stdDev+(P-at)*(P-z.avgWait))/(z.count-1))};const T=l().filter(z=>z.emop===1&&(z.preop_alb??0)<3),_=l().filter(z=>z.emop===0&&(z.preop_alb??0)>3.5),E=T.length>0?T.reduce((z,P)=>z+(P.death_inhosp??0),0)/T.length:0,B=_.length>0?_.reduce((z,P)=>z+(P.death_inhosp??0),0)/_.length:0;console.log("Emergency Low Alb Mortality:",(E*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",(B*100).toFixed(1)+"%"),console.log("Ratio:",(E/(B||.001)).toFixed(1)+"x");const k=new Map,F=new Map;l().forEach(z=>{if(z.department&&z.optype&&z.anestart&&z.opstart){const P=(z.opstart-z.anestart)/60;k.has(z.department)||k.set(z.department,{count:0,avgWait:0,stdDev:0}),V(k.get(z.department),P),F.has(z.optype)||F.set(z.optype,{count:0,avgWait:0,stdDev:0}),V(F.get(z.optype),P)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(k.entries()).sort((z,P)=>P[1].count-z[1].count).forEach(([z,P])=>{console.log(`${z}: ${P.count} cases, avg wait ${P.avgWait.toFixed(1)} Â± ${P.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(F.entries()).sort((z,P)=>P[1].count-z[1].count).slice(0,10).forEach(([z,P])=>{console.log(`${z}: ${P.count} cases, avg wait ${P.avgWait.toFixed(1)} Â± ${P.stdDev.toFixed(1)} min`)})}}),Ze(),Ke();var h=nh(),m=g(h),$=w(g(m),4),L=g($),v=g(L),y=g(v);Mt(y),Ct(2),p(v);var x=w(v,2),b=g(x);Mt(b),Ct(2),p(x),Ct(2),p(L),p($);var S=w($,2),A=g(S);const M=Ne(()=>o(r)?o(n):l());Zd(A,{get data(){return o(M)},get showPercentage(){return o(a)},set showPercentage(T){I(a,T)},get showBySex(){return o(s)},set showBySex(T){I(s,T)},$$events:{percentageChange:u,filter:d},$$legacy:!0});var N=w(A,2);const R=Ne(()=>o(i)?o(n):l());eh(N,{get data(){return o(R)},get filteredDepartment(){return o(r)},get showPercentage(){return o(a)},$$events:{filter:c}}),p(S),Ct(2),p(m),p(h),Re(y,()=>o(a),T=>I(a,T)),Re(b,()=>o(s),T=>I(s,T)),Y(t,h),Me()}function ih(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const ah=t=>Su(t[t.length-1]);var sh=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ih);const oh=ah(sh);function Pn(t,e,n){this.k=t,this.x=e,this.y=n}Pn.prototype={constructor:Pn,scale:function(t){return t===1?this:new Pn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Pn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Pn.prototype;var lh=Q("<option> </option>"),ch=Q('<div class="no-data-message svelte-17bwdb">No cases match the selected criteria.</div>'),uh=Q('<div class="timeline-container svelte-17bwdb"><div class="filter-controls svelte-17bwdb"><div class="filter-group svelte-17bwdb"><label for="group-select" class="svelte-17bwdb">Group By:</label> <select id="group-select" class="svelte-17bwdb"><option>Surgery Type</option><option>Department</option></select></div> <div class="filter-group svelte-17bwdb"><label for="group-value" class="svelte-17bwdb">Filter Value:</label> <select id="group-value" class="svelte-17bwdb"><option>All</option><!></select></div> <div class="filter-group svelte-17bwdb"><label class="svelte-17bwdb">Age Range:</label> <div class="age-inputs svelte-17bwdb"><div class="age-input-group svelte-17bwdb"><input type="number" min="0" max="120" class="svelte-17bwdb"/> <input type="range" min="0" max="120" class="age-slider svelte-17bwdb"/></div> <span>to</span> <div class="age-input-group svelte-17bwdb"><input type="number" min="0" max="120" class="svelte-17bwdb"/> <input type="range" min="0" max="120" class="age-slider svelte-17bwdb"/></div></div></div></div> <div class="timeline-visualization svelte-17bwdb"></div> <!></div>');function fh(t,e){ke(e,!1);const n=O();let r=jt(e,"cases",24,()=>[]),i=jt(e,"groupBy",12,"optype"),a=jt(e,"ageRange",28,()=>[0,120]),s=jt(e,"selectedDepartment",8,null),l=O(null),c=O(),u=O(),d=O([]);const f=[{label:"Case Duration",startKey:"casestart",endKey:"caseend"},{label:"Anesthesia Duration",startKey:"anestart",endKey:"aneend"},{label:"Operation Duration",startKey:"opstart",endKey:"opend"}];function h(q){return q.length?f.map(({label:U,startKey:H,endKey:lt})=>{const ut=[],yt=[];q.forEach(nt=>{const ft=nt.casestart,dt=nt[H],tt=nt[lt];typeof ft=="number"&&typeof dt=="number"&&typeof tt=="number"&&(ut.push(dt-ft),yt.push(tt-ft))});const C=365*24*60*60,K=ut.map((nt,ft)=>{const dt=yt[ft];return dt>nt&&dt-nt<C}),pt=ut.filter((nt,ft)=>K[ft]),J=yt.filter((nt,ft)=>K[ft]);return pt.length===0?{label:U,key:H,startMean:null,endMean:null}:{label:U,key:H,startMean:da(pt),endMean:da(J)}}):f.map(({label:U,startKey:H})=>({label:U,key:H,startMean:null,endMean:null}))}let m=O([]),$=O(!1);function L(){if(!o(c)||(ne(c,o(c).innerHTML=""),!o(m).length))return;const q=o(u).offsetWidth,U=o(c).clientHeight>0?o(c).clientHeight:400,H={top:20,right:100,bottom:60,left:200},lt=q-H.left-H.right,ut=U-H.top-H.bottom,yt=o(m).filter(st=>st.startMean!==null&&st.endMean!==null),C=yt.flatMap(st=>[st.startMean,st.endMean]),K=Math.min(...C),pt=Math.max(...C),J=10,nt=Math.floor(K/60)-J,ft=Math.ceil(pt/60)+J,dt=ft-nt>120,tt=dt?60:1,St=dt?[nt/60,ft/60]:[nt,ft],W=(ft-nt)/(6*tt),vt=ws(St[0],St[1]+W,W),Nt=je().domain(St).range([0,lt]),Tt=Sr().domain(yt.map(st=>st.label)).range([0,ut]).padding(.4),he=G(o(c)).append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 -20 ${q} ${U+20}`).attr("preserveAspectRatio","xMidYMid meet"),Kt=he.append("g").attr("transform",`translate(${H.left},${H.top})`),De=["#81C784","#FFB74D","#9575CD"],Rt=Cr().domain(f.map(st=>st.label)).range(De),Be=jn(Nt).tickValues(vt).tickFormat(st=>{const zt=st;return dt?`${zt.toFixed(1)} hr`:`${Math.round(zt)} min`}),ge=Kt.append("g").attr("transform",`translate(0,${ut})`).call(Be);ge.selectAll("text").style("font-size","12px").style("text-anchor","middle").attr("fill","#CBD5E0").attr("dy","1em"),ge.selectAll(".tick line").remove(),ge.selectAll(".tick").append("line").attr("y1",-ut).attr("y2",0).attr("stroke","#4A5568").attr("stroke-dasharray","2,2").attr("opacity",.5),Kt.append("line").attr("x1",0).attr("y1",ut).attr("x2",lt).attr("y2",ut).attr("stroke","#4A5568").attr("stroke-width",1),Kt.append("g").selectAll("text").data(yt).enter().append("text").attr("x",-10).attr("y",st=>(Tt(st.label)||0)+Tt.bandwidth()/2).attr("text-anchor","end").attr("dominant-baseline","middle").style("font-size","12px").attr("fill","#CBD5E0").text(st=>st.label);const ae=G("body").append("div").attr("class","timeline-tooltip").style("position","fixed").style("padding","8px 12px").style("background","rgba(45, 55, 72, 0.95)").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0).style("box-shadow","0 2px 4px rgba(0,0,0,0.2)").style("z-index","1000").style("white-space","nowrap").style("transition","opacity 0.2s");Kt.selectAll(".event-group").data(yt).enter().append("g").attr("class","event-group").each(function(st){const zt=G(this),Zt=(Tt(st.label)||0)+Tt.bandwidth()/2,se=dt?st.startMean/3600:st.startMean/60,Ht=dt?st.endMean/3600:st.endMean/60;zt.append("line").attr("x1",Nt(se)).attr("x2",Nt(Ht)).attr("y1",Zt).attr("y2",Zt).attr("stroke",()=>Rt(st.label)).attr("stroke-width",6).attr("opacity",.9).style("cursor","pointer").on("mouseenter",function(Ot){o(c).getBoundingClientRect(),ae.style("opacity",1).html(`
								<strong>${st.label}</strong><br>
								Duration: ${dt?`${(Ht-se).toFixed(1)} hr`:`${((Ht-se)*60).toFixed(1)} min`}
							`)}).on("mousemove",Ot=>{const Ut=o(c).getBoundingClientRect(),oe=120,$e=40,It=Ot.clientX-Ut.left,le=Ot.clientY-Ut.top;let ce=Ut.left+It+10,Ce=Ut.top+le-$e-10;ce+oe>Ut.right&&(ce=Ut.left+It-oe-10),Ce<Ut.top&&(Ce=Ut.top+le+10),ae.style("left",`${ce}px`).style("top",`${Ce}px`)}).on("mouseout",()=>{ae.transition().duration(200).style("opacity",0)}),["start","end"].forEach(Ot=>{const Ut=Ot==="start"?se:Ht;zt.append("circle").attr("cx",Nt(Ut)).attr("cy",Zt).attr("r",8).attr("fill",()=>Rt(st.label)).attr("stroke","white").attr("stroke-width",2).style("cursor","pointer").on("mouseenter",function($e){o(c).getBoundingClientRect(),ae.style("opacity",1).html(`
									<strong>${st.label} - ${Ot==="start"?"Start":"End"}</strong><br>
									Time: ${dt?`${Ut.toFixed(1)} hr`:`${(Ut*60).toFixed(1)} min`}
								`)}).on("mousemove",function($e){const It=o(c).getBoundingClientRect(),le=120,ce=40,Ce=$e.clientX-It.left,ve=$e.clientY-It.top;let Ye=It.left+Ce+10,Xe=It.top+ve-ce-10;Ye+le>It.right&&(Ye=It.left+Ce-le-10),Xe<It.top&&(Xe=It.top+ve+10),ae.style("left",`${Ye}px`).style("top",`${Xe}px`)}).on("mouseleave",function(){ae.transition().duration(200).style("opacity",0)})})});let qt="";o(l)&&(qt+=`${i()==="optype"?"Surgery Type":"Department"}: ${o(l)}`),s()&&(qt+=qt?`, Department: ${s()}`:`Department: ${s()}`),(a()[0]>0||a()[1]<120)&&(qt+=qt?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),qt&&he.append("text").attr("x",H.left).attr("y",H.top-25).attr("font-size","12px").attr("fill","#CBD5E0").text(qt),he.append("text").attr("x",q-H.right-10).attr("y",H.top-25).attr("text-anchor","end").attr("font-size","12px").attr("fill","#CBD5E0").text(`n = ${o(n).length} cases`)}Ie(()=>{o(c)&&L()}),ot(()=>(kt(r()),o(l),kt(i()),kt(s()),kt(a())),()=>{I(n,r().filter(q=>(!o(l)||q[i()]===o(l))&&(!s()||q.department===s())&&(q.age??0)>=a()[0]&&(q.age??120)<=a()[1]))}),ot(()=>(kt(r()),kt(i())),()=>{I(d,Array.from(new Set(r().map(q=>q[i()]??""))).filter(Boolean))}),ot(()=>o(n),()=>{o(n)&&(I(m,h(o(n))),I($,!0))}),ot(()=>(o($),o(c)),()=>{o($)&&o(c)&&(L(),I($,!1))}),Ze(),Ke();var v=uh(),y=g(v),x=g(y),b=w(g(x),2);$t(()=>{i(),Ji(()=>{})});var S=g(b);S.value=S.__value="optype";var A=w(S);A.value=A.__value="department",p(b),p(x);var M=w(x,2),N=w(g(M),2);$t(()=>{o(l),Ji(()=>{o(d)})});var R=g(N);R.value=(R.__value=null)??"";var T=w(R);Un(T,1,()=>o(d),On,(q,U)=>{var H=lh(),lt={},ut=g(H,!0);p(H),$t(()=>{lt!==(lt=o(U))&&(H.value=(H.__value=o(U))??""),X(ut,o(U))}),Y(q,H)}),p(N),p(M);var _=w(M,2),E=w(g(_),2),B=g(E),k=g(B);Mt(k);var F=w(k,2);Mt(F),p(B);var V=w(B,4),z=g(V);Mt(z);var P=w(z,2);Mt(P),p(V),p(E),p(_),p(y);var at=w(y,2);cn(at,q=>I(c,q),()=>o(c));var j=w(at,2);{var ct=q=>{var U=ch();Y(q,U)};At(j,q=>{o(n).length===0&&q(ct)})}p(v),cn(v,q=>I(u,q),()=>o(u)),aa(b,i),aa(N,()=>o(l),q=>I(l,q)),re(k,()=>a()[0],q=>a(a()[0]=q,!0)),re(F,()=>a()[0],q=>a(a()[0]=q,!0)),re(z,()=>a()[1],q=>a(a()[1]=q,!0)),re(P,()=>a()[1],q=>a(a()[1]=q,!0)),Y(t,v),Me()}var dh=Q(`<div class="slide-container svelte-731ldz"><div class="content svelte-731ldz"><h2 class="svelte-731ldz">Time on the Table</h2> <p class="description svelte-731ldz">Each dot marks a key moment in surgery. The visualization shows <strong>mean, min, and max durations</strong> across our 6,388 cases. Try the filters above, switch between department and surgery type to see how <strong>different procedures have their own rhythm</strong>. This pre-incision time matters, as longer anesthesia exposure
			before surgery increases risk of complications. If you're facing surgery, use these filters to see
			typical timing patterns for your procedure, knowledge that can help you understand and prepare for
			your own surgical journey. Hover over dots for exact timing stats.</p> <div class="timeline-wrapper svelte-731ldz"><!></div> <p class="timing-note svelte-731ldz">For instance, breast surgeries average just <strong>34 minutes</strong> from anesthesia to incision, 
			while transplantations take nearly twice as long, <strong>at 70 minutes</strong>.</p></div></div>`);function hh(t,e){var n=dh(),r=g(n),i=w(g(r),4),a=g(i);fh(a,{get cases(){return e.cases}}),p(i),Ct(2),p(r),p(n),Y(t,n)}function vh(t,e){return ph(t)||gh(t,e)||mh()}function ph(t){if(Array.isArray(t))return t}function gh(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}function mh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Us(t,e,n,r){for(var i=0,a=0,s=t.length;a<s;a++){var l=t[a],c=+e(l,a,t),u=+n(l,a,t);c!=null&&isFinite(c)&&u!=null&&isFinite(u)&&r(c,u,i++)}}function yh(t,e,n,r,i){var a=0,s=0;return Us(t,e,n,function(l,c){var u=c-i(l),d=c-r;a+=u*u,s+=d*d}),1-a/s}function xh(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,s=e-a*t;return[s,a]}function bh(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,s=0,l=0,c=0,u=0,d=n?+n[0]:1/0,f=n?+n[1]:-1/0;Us(i,t,e,function(x,b){++a,s+=(x-s)/a,l+=(b-l)/a,c+=(x*b-c)/a,u+=(x*x-u)/a,n||(x<d&&(d=x),x>f&&(f=x))});var h=xh(s,l,c,u),m=vh(h,2),$=m[0],L=m[1],v=function(b){return L*b+$},y=[[d,v(d)],[f,v(f)]];return y.a=L,y.b=$,y.predict=v,y.rSquared=yh(i,t,e,l,v),y}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var wh=Q('<div class="rounded-xl p-6 shadow-lg border border-[#4A5568]"><div class="mb-4 flex gap-8 text-sm text-gray-200"><label class="flex items-center cursor-pointer"><input type="radio" class="w-5 h-5 mr-3 accent-[#0096FF] cursor-pointer svelte-1arbr6k"/> <span class="select-none text-base">Elective</span></label> <label class="flex items-center cursor-pointer"><input type="radio" class="w-5 h-5 mr-3 accent-[#0096FF] cursor-pointer svelte-1arbr6k"/> <span class="select-none text-base">Emergency</span></label> <label class="flex items-center cursor-pointer"><input type="radio" class="w-5 h-5 mr-3 accent-[#0096FF] cursor-pointer svelte-1arbr6k"/> <span class="select-none text-base">All</span></label></div> <svg style="width: 100%; height: auto;" class="svelte-1arbr6k"></svg></div>');function _h(t,e){ke(e,!1);const n=[];let r=jt(e,"patients",24,()=>[]),i=O("elective"),a=O([]),s=O();const l=640,c=320,u=48,d=100,h=Rs(N=>N<.15?"#ff0000":oh(N)).domain([5,0]);function m(N){if(!o(s))return;const R=G(o(s)).attr("viewBox",`0 0 ${l} ${c}`).html("");if(!N.length){R.append("text").attr("x",l/2).attr("y",c/2).attr("text-anchor","middle").attr("fill","#888").attr("font-size","16px").text("No cases with albumin in this view");return}const T=[...N].sort((C,K)=>+C.preop_alb-+K.preop_alb),_=[];for(let C=0;C<T.length;C+=5){const K=T.slice(C,C+5);if(K.length>0){const pt=K.reduce((nt,ft)=>nt+ +ft.preop_alb,0)/K.length,J=K.reduce((nt,ft)=>nt+(ft.icu_days||0),0)/K.length;_.push({albumin:pt,icuDays:J,count:K.length,cases:K})}}let E=_;(o(i)==="emergency"||o(i)==="all")&&(E=_.filter(C=>C.icuDays<20)),E=E.filter(C=>C.albumin>=2);const B=je().domain([2,ze(E,C=>C.albumin)||6]).nice().range([d,l-u]),k=je().domain([0,ze(E,C=>C.icuDays)||5]).nice().range([c-u,u]),F=R.append("g");k.ticks(5).forEach(C=>{F.append("line").attr("x1",d).attr("x2",l-u).attr("y1",k(C)).attr("y2",k(C)).attr("stroke","#4A5568").attr("stroke-dasharray","2,2").attr("opacity",.5)}),B.ticks(6).forEach(C=>{F.append("line").attr("x1",B(C)).attr("x2",B(C)).attr("y1",u).attr("y2",c-u).attr("stroke","#4A5568").attr("stroke-dasharray","2,2").attr("opacity",.5)}),F.append("line").attr("x1",B(3.5)).attr("x2",B(3.5)).attr("y1",u).attr("y2",c-u).attr("stroke","#ff3b3b").attr("stroke-width",2).attr("stroke-dasharray","4,4"),F.append("text").attr("x",B(3.5)).attr("y",u-10).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#CBD5E0").attr("font-weight","500").text("Albumin Cliff (3.5 g/dL)");const V=bh().x(C=>C.albumin).y(C=>C.icuDays).domain(B.domain())(E),z=kf().x(C=>B(C[0])).y(C=>k(C[1])),P=Math.max(2,di(E,C=>C.albumin)||0),at=ze(E,C=>C.albumin)||0,j=[[P,Math.max(0,V.predict(P))],[at,Math.max(0,V.predict(at))]];R.append("path").datum(j).attr("fill","none").attr("stroke","#fbbf24").attr("stroke-width",2).attr("d",C=>z(C)),R.append("g").selectAll("circle").data(E).enter().append("circle").attr("cx",C=>B(C.albumin)).attr("cy",C=>k(C.icuDays)).attr("r",C=>Math.sqrt(C.count)*2).attr("fill",C=>h(Math.min(C.icuDays,5))).attr("stroke","#374151").attr("stroke-opacity",.15).append("title").text(C=>`Average Albumin: ${C.albumin.toFixed(2)} g/dL
Average ICU Stay: ${C.icuDays.toFixed(1)} days
Number of Cases: ${C.count}`);const ct=jn(B).ticks(6).tickFormat(C=>C+" g/dL");R.append("g").attr("transform",`translate(0, ${c-u})`).call(ct).selectAll("text").attr("font-size","12px").attr("fill","#CBD5E0").attr("class","fill-text-primary");const q=Tr(k).ticks(5).tickFormat(C=>C+" days");R.append("g").attr("transform",`translate(${d}, 0)`).call(q).selectAll("text").attr("font-size","12px").attr("fill","#CBD5E0").attr("class","fill-text-primary"),R.append("text").attr("x",l/2).attr("y",c-u+36).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#CBD5E0").text("Pre-operative Albumin (g/dL)").attr("class","fill-text-primary"),R.append("text").attr("transform",`translate(${d-60}, ${c/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#CBD5E0").text("Average ICU Stay (days)").attr("class","fill-text-primary"),R.append("text").attr("x",l/2).attr("y",u-32).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","600").attr("fill","#CBD5E0").text("Hidden Risk Factor: The Albumin Cliff").attr("class","fill-text-primary");const U=l-u-80,H=u-40,lt=R.append("g").attr("transform",`translate(${U}, ${H})`),ut=[0,1,2,3,4,5],yt=15;lt.selectAll("rect").data(ut).enter().append("rect").attr("x",(C,K)=>K*(yt+2)).attr("y",0).attr("width",yt).attr("height",10).attr("fill",C=>h(C)),lt.append("text").attr("x",0).attr("y",24).attr("font-size","12px").attr("fill","#CBD5E0").text("ICU â¥ 5d").attr("class","fill-text-primary"),lt.append("text").attr("x",(yt+2)*5+4).attr("y",24).attr("text-anchor","end").attr("font-size","12px").attr("fill","#CBD5E0").text("0â1d").attr("class","fill-text-primary")}Ie(()=>{o(s)&&m(o(a))}),ot(()=>(kt(r()),o(i)),()=>{r()?I(a,r().filter(N=>{const R=+N.preop_alb;return!Number.isFinite(R)||R<=0?!1:o(i)==="elective"?N.emop===0&&N.ane_type==="General":o(i)==="emergency"?N.emop===1:!0})):I(a,[])}),ot(()=>(o(s),o(a)),()=>{o(s)&&m(o(a))}),Ze(),Ke();var $=wh(),L=g($),v=g(L),y=g(v);Mt(y),y.value=y.__value="elective",Ct(2),p(v);var x=w(v,2),b=g(x);Mt(b),b.value=b.__value="emergency",Ct(2),p(x);var S=w(x,2),A=g(S);Mt(A),A.value=A.__value="all",Ct(2),p(S),p(L);var M=w(L,2);cn(M,N=>I(s,N),()=>o(s)),p($),Yr(n,[],y,()=>o(i),N=>I(i,N)),Yr(n,[],b,()=>o(i),N=>I(i,N)),Yr(n,[],A,()=>o(i),N=>I(i,N)),Y(t,$),Me()}var kh=Q(`<h2>Hidden Risk Factor: The Albumin Cliff</h2> <p>Albumin is a blood protein that reflects nutritional reserve and overall physiological resilience.
	In the pre-operative setting, low albumin levels often signal that a patient's body may struggle
	to recover. By highlighting albumin, we remind viewers that a seemingly "routine" lab value
	can quietly predict who may end up in the ICU.
	It's the kind of hidden detail that turns "routine" into "unexpected" when no one is watching.</p> <br/> <p>Use the radio buttons to flip between
	routine <b>elective</b>, urgent <b>emergency</b>, or <b>all</b> cases. Below a certain threshold, the
	risk of prolonged ICU stay climbs sharply, our so-called "Albumin Cliff."</p> <br/> <!> <div class="h-7"></div> <p class="insight svelte-9gohf2">Albumin acts as a <em>silent gravity well</em>: lower levels make it harder to avoid
	extended ICU stays. Even in routine cases, poor nutrition can shift outcomes from same-day discharge to
	prolonged critical care.</p> <div class="h-16"></div>`,1);function Mh(t,e){var n=kh(),r=w(Te(n),10);_h(r,{get patients(){return e.cases}}),Ct(6),Y(t,n)}var Ah=Q(`<div class="slide-container svelte-xfyh99"><div class="content svelte-xfyh99"><h1 class="title text-text-accent svelte-xfyh99">The Takeaway</h1> <p class="description svelte-xfyh99">Our journey through Seoul National University's VitalDB reveals four critical insights that could transform surgical care.

			1. Demographics matter more than we thought since 95% of our 6,388 cases cluster in just two departments, creating distinct risk profiles. This concentration means that the results from our analysis are more applicable to a select few departments.

			2. Timing is everything. From anesthesia to incision, different procedures have their own rhythm as breast surgeries average 34 minutes while transplantations take 70 minutes. This pre-incision time can significantly impacts outcomes, so it is important to be aware of.

			3. Pre-op albumin levels, easily measured and often correctable, strongly predict ICU stays. This simple blood test could be our early warning system, allowing us to intervene before complications arise.

			4. Our interactive risk builder and prediction test revealed that while we can't change age, we can optimize care through better risk assessment. The interaction between emergency status and ASA score reveals patterns that standard checklists miss.

			By understanding these relationships, we can better prepare blood products, adjust recovery expectations, and potentially prevent complications, all before the knife ever touches skin.</p></div></div>`);function $h(t){var e=Ah();Y(t,e)}var Ch=Q(`<h2>Writeup</h2> <p>1. What have you done so far? So far, weâve built a comprehensive exploratory analysis of our
	surgical patient population to lay the groundwork for outcome-based modeling. We began by
	visualizing age distribution, revealing a wide range of patients from their twenties to their
	eighties. This range emphasizes the variation in baseline risk and physiological resilience across
	the cohort. We then created a department-wise breakdown of surgical cases, showing that general
	surgery dominates in volume, with notable contributions from thoracic surgery and urology. <br/>In addition to demographic insights, we constructed a line chart to compare the average
	duration of each surgical phase (anesthesia, surgery, and recovery) across departments. This helps
	contextualize how time and resource demands vary by specialty. We also explored risk
	stratification through a radar chart comparing median outcomes for high- and low-risk cohorts.
	Metrics like mortality, ICU stay, and blood loss were visualized, clearly showing that
	pre-operative risk factors correlate with worse outcomes. Finally, we built an interactive tool
	that allows users to manipulate variables like age, ASA status, and emergency status to simulate
	predicted risks, making the data both accessible and actionable. <br/><br/>2. What will be the most challenging part of your project to design and why? The most
	challenging component of the project will likely be the design and refinement of the âBuild Your
	Own Patientâ predictive interface. While the tool currently visualizes model output based on
	user-selected inputs, accurately modeling risk for ICU stay and in-hospital mortality from such a
	small set of parameters introduces complexity. Capturing the nuances of surgical riskâespecially
	interactions between variables like age and ASA scoreârequires both careful feature engineering
	and robust validation against clinical outcomes. <br/>Additionally, designing an interface that is intuitive yet scientifically accurate presents
	a UI/UX challenge. Users must understand the sensitivity of predictions without misinterpreting
	them as deterministic. Balancing simplicity with explanatory power, and ensuring the tool reflects
	real-world risk distributions without bias, will require tight integration between the front-end
	experience and the underlying model logic. Finally, scaling the model for more granular or
	department-specific predictions while maintaining speed and clarity will require thoughtful
	architectural decisions as the project evolves.</p>`,1);function Sh(t){var e=Ch();Ct(2),Y(t,e)}function Ci(t,e){const n=t.filter(u=>u.age!=null&&Math.abs(u.age-e.age)<=10),r=t.filter(u=>u.bmi!=null&&Math.abs(u.bmi-e.bmi)<=8),i=t.filter(u=>u.height!=null&&Math.abs(u.height-e.height)<=10.16),a=t.filter(u=>u.asa!=null&&Math.abs(u.asa-e.asa)<=1),c=n.filter(u=>r.includes(u)).filter(u=>i.includes(u)).filter(u=>a.includes(u));return console.log("Matching cases:",{ageMatches:n.length,bmiMatches:r.length,heightMatches:i.length,asaMatches:a.length,finalMatches:c.length,profile:e}),c}function xn(t){if(t.length===0)return{avgICUStay:0,mortalityRate:0,avgBloodLoss:0,icuIQR:{q1:0,q3:0},bloodLossIQR:{q1:0,q3:0},icuValues:[],bloodLossValues:[]};const e=t.map(c=>Number(c.icu_days)).filter(c=>!isNaN(c)).sort((c,u)=>c-u),n=e.reduce((c,u)=>c+u,0)/e.length,r={q1:e[Math.floor(e.length*.25)],q3:e[Math.floor(e.length*.75)]},i=t.reduce((c,u)=>c+(u.death_inhosp||0),0)/t.length,a=t.map(c=>Number(c.intraop_ebl)).filter(c=>!isNaN(c)).sort((c,u)=>c-u),s=a.reduce((c,u)=>c+u,0)/a.length,l={q1:a[Math.floor(a.length*.25)],q3:a[Math.floor(a.length*.75)]};return{avgICUStay:n,mortalityRate:i,avgBloodLoss:s,icuIQR:r,bloodLossIQR:l,icuValues:e,bloodLossValues:a}}function oi(t,e,n){if(e===0&&t===0)return 1;if(e===0||t===0)return 0;const r=Math.abs(t-e)/Math.max(e,1);return Math.exp(-r)}var Th=Q(`<p class="mb-3 text-sm opacity-80">There are no historical cases that match your current patient profile.</p> <div class="space-y-1"><p class="text-sm font-medium opacity-80">Consider:</p> <ul class="ml-4 space-y-1 text-sm opacity-70"><li>â¢ Relaxing some of your filters</li> <li>â¢ Adjusting the patient's characteristics to more common values</li> <li>â¢ Using a broader range for age, BMI, or ASA score</li></ul></div>`,1),Eh=Q('<p class="mb-3 text-sm opacity-80"> </p> <div class="space-y-1"><p class="text-sm font-medium opacity-80">Consider:</p> <ul class="ml-4 space-y-1 text-sm opacity-70"><li>â¢ Relaxing some filters to get more comparable cases</li> <li>â¢ Adjusting the patient profile to match more common characteristics</li></ul></div>',1),Nh=Q('<div class="chart-wrapper svelte-1ehvwb8"><div class="flex items-start gap-3"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-red-100"><span class="text-lg">â ï¸</span></div> <div class="flex-1"><div class="flex items-center justify-between"><h4 class="mb-2 font-bold text-red-700"> </h4> <div class="flex items-center justify-center gap-2 min-w-[200px]"><span class="text-base font-medium">Overall Risk Level:</span> <span> </span></div></div> <!></div></div></div>'),Rh=Q('<div class="chart-wrapper svelte-1ehvwb8"><div class="flex items-start gap-3"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-yellow-100"><span class="text-lg">ð</span></div> <div class="flex-1"><div class="flex items-center justify-between"><h4 class="mb-2 font-bold text-yellow-700">Good Sample Size</h4> <div class="flex items-center justify-center gap-2 min-w-[200px]"><span class="text-base font-medium">Overall Risk Level:</span> <span> </span></div></div> <p class="text-sm opacity-80"> </p></div></div></div>'),zh=Q('<div class="chart-wrapper svelte-1ehvwb8"><div class="flex items-start gap-3"><div class="flex h-10 w-10 items-center justify-center rounded-full bg-green-100"><span class="text-lg">â</span></div> <div class="flex-1"><div class="flex items-center justify-between"><h4 class="mb-2 font-bold text-green-700">Excellent Sample Size</h4> <div class="flex items-center justify-center gap-2 min-w-[200px]"><span class="text-base font-medium">Overall Risk Level:</span> <span> </span></div></div> <p class="text-sm opacity-80"> </p></div></div></div>'),Fh=Q('<div class="grid grid-cols-1 gap-3 md:grid-cols-3"><div class="control-item svelte-1ehvwb8"><div class="flex items-center gap-3"><div><span class="text-base text-white">ð¥</span></div> <div><h3 class="text-sm font-medium opacity-80">ICU Stay</h3> <p> </p></div></div></div> <div class="control-item svelte-1ehvwb8"><div class="flex items-center gap-3"><div><span class="text-base text-white">ð</span></div> <div><h3 class="text-sm font-medium opacity-80">Mortality Rate</h3> <p> </p></div></div></div> <div class="control-item svelte-1ehvwb8"><div class="flex items-center gap-3"><div><span class="text-base text-white">ð©¸</span></div> <div><h3 class="text-sm font-medium opacity-80">Blood Loss</h3> <p> </p></div></div></div></div>'),Ih=Q('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold">Make Your Predictions</h3> <div class="grid gap-4"><div><label class="block text-sm opacity-80">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm opacity-80">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm opacity-80">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="mt-1 w-full rounded border p-2"/></div></div></div>'),Lh=Q(`<p class="mt-2 opacity-80">Your predictions were quite far from the actual outcomes. Consider reviewing the
							patient's risk factors more carefully.</p>`),Dh=Q('<div class="mt-4 rounded p-3 text-sm shadow-sm"> <!></div>'),Bh=Q('<h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm opacity-80">Average ICU Stay</p> <p class="font-medium"> </p> <p class="text-xs opacity-60"> </p></div> <div><p class="text-sm opacity-80">Mortality Rate</p> <div class="h-2 w-full rounded-full" style="background: linear-gradient(to right, #22c55e, #ef4444)"></div> <p class="font-medium"> </p></div> <div><p class="text-sm opacity-80">Average Blood Loss</p> <p class="font-medium"> </p> <p class="text-xs opacity-60"> </p></div></div> <!>',1),Ph=Q('<div class="container svelte-1ehvwb8"><div class="space-y-4 rounded-lg p-3 shadow-sm bg-[#0e192b]"><div class="controls-panel svelte-1ehvwb8"><div class="controls-content svelte-1ehvwb8"><div class="flex items-center justify-between"><h3 class="text-base font-semibold">Adjust Patient Profile</h3> <div class="flex items-center gap-3"><label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="factor-name svelte-1ehvwb8">Age</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="factor-name svelte-1ehvwb8">Height</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="factor-name svelte-1ehvwb8">BMI</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="factor-name svelte-1ehvwb8">ASA</span></label></div></div> <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4"><div><label class="block text-xs opacity-80"> </label> <input type="range" class="w-full svelte-1ehvwb8"/> <p class="text-xs opacity-60"> </p></div> <div><label class="block text-xs opacity-80"> </label> <input type="range" class="w-full svelte-1ehvwb8"/> <p class="text-xs opacity-60"> </p></div> <div><label class="block text-xs opacity-80"> </label> <input type="range" step="0.1" class="w-full svelte-1ehvwb8"/> <p class="text-xs opacity-60"> </p></div> <div><label class="block text-xs opacity-80"> </label> <input type="range" min="1" max="5" step="1" class="w-full svelte-1ehvwb8"/> <p class="text-xs opacity-60"> </p></div></div></div></div> <!> <div class="grid grid-cols-1 gap-4 lg:grid-cols-12"><div class="space-y-2 lg:col-span-3"><h4 class="text-center text-sm font-semibold">Patient Visualization</h4> <div class="flex items-center justify-center"><svg class="h-full w-full" style="min-height: 250px; max-height: 350px;"><circle cx="100" cy="30" r="20"></circle><line x1="100" y1="50" x2="100"></line><ellipse cx="100"></ellipse><line x1="100" y1="80"></line><line x1="100" y1="80"></line><line x1="100" x2="70"></line><line x1="100" x2="130"></line><path d="M80,20 Q100,0 120,20" fill="none"></path></svg></div></div> <div class="space-y-2 lg:col-span-6"><h4 class="text-center text-sm font-semibold">Patient Outcomes Radar</h4> <div class="flex justify-center h-[450px] -mt-10 w-[120%] -ml-[10%]"><svg class="radar-chart h-full svelte-1ehvwb8"></svg></div></div> <div class="space-y-3 max-w-[350px] ml-auto lg:col-span-3"><div class="control-item svelte-1ehvwb8"><h4 class="mb-2 text-sm font-semibold">How to Read This Chart</h4> <div class="space-y-1 text-xs opacity-80"><p>â¢ <strong>Distance from center</strong> = Risk level (0-100%)</p> <p>â¢ <strong>Triangle shape</strong> = Overall risk profile</p> <p>â¢ <strong>Color</strong> = Risk severity level</p></div></div> <div class="control-item svelte-1ehvwb8"><h4 class="mb-2 text-sm font-semibold">Scale Ranges</h4> <div class="space-y-1 text-xs opacity-80"><div><strong>ICU Stay:</strong> </div> <div><strong>Mortality Rate:</strong> </div> <div><strong>Blood Loss:</strong> </div> <div class="mt-2 text-xs opacity-60"><em>Ranges based on 95th percentile of dataset</em></div></div></div> <div class="control-item svelte-1ehvwb8"><h4 class="mb-2 text-sm font-semibold">Risk Levels</h4> <div class="space-y-1 text-xs opacity-80"><div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-green-500"></span> <span class="font-medium text-green-500">Low Risk</span></div> <div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-yellow-500"></span> <span class="font-medium text-yellow-500">Medium Risk</span></div> <div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-red-500"></span> <span class="font-medium text-red-500">High Risk</span></div></div></div></div></div> <!> <!> <!></div></div>');function qh(t,e){ke(e,!1);const n=O(),r=O(),i=O(),a=O(),s=O(),l=O(),c=O(),u=O(),d=O(),f=O(),h=O(),m=O(),$=O(),L=O(),v=O(),y=O(),x=O(),b=O(),S=O(),A=O();let M=jt(e,"predictors",12),N=jt(e,"cases",24,()=>[]),R=O(!1),T=O({icuDays:0,mortality:0,bloodLoss:0}),_=O(!1),E=0,B=O(!1),k=O({age:!0,height:!0,bmi:!0,asa:!0}),F=O(5),V=O(.1),z=O(1e3);const P=160,at=80,j=P*2+at*2,ct=j;let q=O();function U(D){const rt=D/2.54,bt=Math.floor(rt/12),et=Math.round(rt%12);return{feet:bt,inches:et}}function H(D,rt){return Math.round((D*12+rt)*2.54)}const lt={min:{feet:4,inches:5},max:{feet:7,inches:5}};let ut=O(0),yt=O(0),C=O(0),K=O(0),pt=O({q1:0,q3:0}),J=O({q1:0,q3:0});const nt={1:"#22c55e",2:"#a3e635",3:"#eab308",4:"#f97316",5:"#ef4444"};function ft(D){if(N().length===0)return{icuStay:0,mortality:0,bloodLoss:0};const rt=Ci(N(),D);if(rt.length===0){const et=N().filter(ht=>ht.age!=null&&ht.bmi!=null&&ht.height!=null&&ht.asa!=null&&Math.abs(ht.age-D.age)<=15&&Math.abs(ht.bmi-D.bmi)<=10&&Math.abs(ht.asa-D.asa)<=1);if(et.length===0){const ht=xn(N());return{icuStay:ht.avgICUStay,mortality:ht.mortalityRate,bloodLoss:ht.avgBloodLoss}}const gt=xn(et);return{icuStay:gt.avgICUStay,mortality:gt.mortalityRate,bloodLoss:gt.avgBloodLoss}}const bt=xn(rt);return{icuStay:bt.avgICUStay,mortality:bt.mortalityRate,bloodLoss:bt.avgBloodLoss}}function dt(D){const rt=D.mortality*100,bt=D.icuStay/o(F)*100,et=D.bloodLoss/o(z)*100,gt=rt*.6+bt*.25+et*.15;return gt<20?{level:"Low",color:"text-green-600",triangleColor:"#10b981",triangleFill:"rgba(16, 185, 129, 0.15)"}:gt<50?{level:"Medium",color:"text-yellow-600",triangleColor:"#f59e0b",triangleFill:"rgba(245, 158, 11, 0.15)"}:{level:"High",color:"text-red-600",triangleColor:"#ef4444",triangleFill:"rgba(239, 68, 68, 0.15)"}}function tt(D){const rt=D/o(F);return rt<.2?{level:"Low",bgColor:"bg-green-500",textColor:"text-green-500",borderColor:"border-green-500"}:rt<.6?{level:"Medium",bgColor:"bg-yellow-500",textColor:"text-yellow-500",borderColor:"border-yellow-500"}:{level:"High",bgColor:"bg-red-500",textColor:"text-red-500",borderColor:"border-red-500"}}function St(D){return D<.05?{level:"Low",bgColor:"bg-green-500",textColor:"text-green-500",borderColor:"border-green-500"}:D<.15?{level:"Medium",bgColor:"bg-yellow-500",textColor:"text-yellow-500",borderColor:"border-yellow-500"}:{level:"High",bgColor:"bg-red-500",textColor:"text-red-500",borderColor:"border-red-500"}}function Pt(D){const rt=D/o(z);return rt<.3?{level:"Low",bgColor:"bg-green-500",textColor:"text-green-500",borderColor:"border-green-500"}:rt<.7?{level:"Medium",bgColor:"bg-yellow-500",textColor:"text-yellow-500",borderColor:"border-yellow-500"}:{level:"High",bgColor:"bg-red-500",textColor:"text-red-500",borderColor:"border-red-500"}}function W(){G(o(q)).selectAll("*").remove();const D=G(o(q)).attr("width",j).attr("height",ct).append("g").attr("transform",`translate(${j/2},${ct/2})`).style("font-family","Inter, sans-serif"),rt=Z=>Math.PI*2/o(A).length*Z-Math.PI/2,bt=Z=>({0:-Math.PI/2,1:Math.PI/6,2:5*Math.PI/6})[Z],et=(Z,mt)=>mt===0?0:Math.min(1,Math.max(0,Z/mt))*P;D.selectAll(".ring").data([.2,.4,.6,.8,1]).enter().append("circle").attr("class","ring").attr("r",Z=>Z*P).attr("fill","none").attr("stroke","#e5e7eb").attr("stroke-width",1).attr("stroke-dasharray",(Z,mt)=>mt===4?"none":"3 3"),D.append("text").attr("x",P+10).attr("y",-10).attr("text-anchor","start").attr("dominant-baseline","middle").attr("fill","#ffffff").attr("font-size",10).attr("font-weight","500").text(`Max: ${o(F).toFixed(0)}d`),D.append("text").attr("x",P+10).attr("y",5).attr("text-anchor","start").attr("dominant-baseline","middle").attr("fill","#ffffff").attr("font-size",10).attr("font-weight","500").text(`${(o(V)*100).toFixed(0)}%`),D.append("text").attr("x",P+10).attr("y",20).attr("text-anchor","start").attr("dominant-baseline","middle").attr("fill","#ffffff").attr("font-size",10).attr("font-weight","500").text(`${o(z).toFixed(0)}ml`),D.selectAll(".label-group").data(o(A)).enter().append("g").attr("class","label-group").append("text").attr("x",(Z,mt)=>{const wt=rt(mt);return(P+35)*Math.cos(wt)}).attr("y",(Z,mt)=>{const wt=rt(mt);return(P+35)*Math.sin(wt)*-1}).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#ffffff").attr("font-size",13).attr("font-weight","600").style("text-shadow","1px 1px 2px rgba(0,0,0,0.5)").text(Z=>Z.label);const xt=o(A).map((Z,mt)=>{const wt=bt(mt),Yt=et(Z.value,Z.max),Bt=Math.min(P,Math.max(0,Yt));return{x:Bt*Math.cos(wt),y:Bt*Math.sin(wt)*-1,data:Z,index:mt,angle:wt,radius:Bt}}).filter(Z=>!isNaN(Z.x)&&!isNaN(Z.y)&&isFinite(Z.x)&&isFinite(Z.y));if(xt.length!==3){console.warn("Invalid triangle vertices detected, skipping chart rendering");return}const _t=D.append("defs").append("filter").attr("id","glow").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%");_t.append("feGaussianBlur").attr("stdDeviation","3").attr("result","coloredBlur");const Et=_t.append("feMerge");if(Et.append("feMergeNode").attr("in","coloredBlur"),Et.append("feMergeNode").attr("in","SourceGraphic"),xt.length===3){const Z=`M ${xt[0].x} ${xt[0].y} 
								 L ${xt[1].x} ${xt[1].y} 
								 L ${xt[2].x} ${xt[2].y} Z`;D.append("path").attr("d",Z).attr("fill",o(y).triangleFill).attr("stroke","none").style("transition","all 0.3s ease"),[{from:0,to:1},{from:1,to:2},{from:2,to:0}].forEach((wt,Yt)=>{const Bt=xt[wt.from],be=xt[wt.to];D.append("line").attr("class",`triangle-edge-${Yt}`).attr("x1",Bt.x).attr("y1",Bt.y).attr("x2",be.x).attr("y2",be.y).attr("stroke",o(y).triangleColor).attr("stroke-width",3).attr("stroke-linecap","round").style("filter","url(#glow)").style("transition","all 0.3s ease")})}G(o(q).parentElement).selectAll(".tooltip").remove();const Dt=G(o(q).parentElement).append("div").attr("class","tooltip fixed z-30 rounded bg-gray-900 px-2 py-1 text-xs text-white pointer-events-none").style("opacity","0").style("transition","opacity 0.2s ease");D.selectAll(".vertex-dot").data(xt).enter().append("circle").attr("class","vertex-dot").attr("cx",Z=>Z.x).attr("cy",Z=>Z.y).attr("r",8).attr("fill","#ffffff").attr("stroke",o(y).triangleColor).attr("stroke-width",4).style("filter","drop-shadow(0px 2px 6px rgba(37, 99, 235, 0.4))").style("cursor","pointer").on("mouseenter",function(Z,mt){Dt.style("opacity","1").html(`${mt.data.label}: ${mt.data.fmt(mt.data.value)}`),G(this).transition().duration(200).attr("r",10).attr("stroke-width",5)}).on("mousemove",function(Z,mt){Dt.style("left",Z.pageX+14+"px").style("top",Z.pageY-32+"px")}).on("mouseleave",function(){Dt.style("opacity","0"),G(this).transition().duration(200).attr("r",8).attr("stroke-width",4)}),D.selectAll(".vertex-inner-dot").data(xt).enter().append("circle").attr("class","vertex-inner-dot").attr("cx",Z=>Z.x).attr("cy",Z=>Z.y).attr("r",3).attr("fill",o(y).triangleColor).style("pointer-events","none")}Ie(()=>{o(q)&&W()}),ot(()=>kt(N()),()=>{if(N().length>0){const D=N().map(et=>Number(et.icu_days)).filter(et=>!isNaN(et)&&et>0),rt=N().map(et=>Number(et.death_inhosp)).filter(et=>!isNaN(et)),bt=N().map(et=>Number(et.intraop_ebl)).filter(et=>!isNaN(et)&&et>0);if(D.length>0){const et=D.sort((gt,ht)=>gt-ht);I(F,Math.min(5,Math.max(5,et[Math.floor(et.length*.95)])))}if(rt.length>0&&I(V,.1),bt.length>0){const et=bt.sort((gt,ht)=>gt-ht);I(z,Math.min(1e3,Math.max(1e3,et[Math.floor(et.length*.95)])))}}}),ot(()=>{},()=>{I(n,{min:H(lt.min.feet,lt.min.inches),max:H(lt.max.feet,lt.max.inches)})}),ot(()=>kt(N()),()=>{I(r,N().length>0?{min:Math.min(...N().map(D=>D.age)),max:Math.max(...N().map(D=>D.age))}:{min:0,max:0})}),ot(()=>kt(N()),()=>{I(i,N().length>0?{min:Math.min(...N().map(D=>D.bmi)),max:Math.max(...N().map(D=>D.bmi))}:{min:0,max:0})}),ot(()=>kt(N()),()=>{I(a,N().length>0?[...new Set(N().map(D=>D.asa))].sort():[])}),ot(()=>(kt(N()),kt(M()),xn),()=>{if(N().length>0){const D=Ci(N(),M());if(I(K,D.length),D.length>0){const rt=xn(D);I(ut,rt.avgICUStay),I(yt,rt.mortalityRate),I(C,rt.avgBloodLoss),I(pt,rt.icuIQR),I(J,rt.bloodLossIQR)}else I(ut,0),I(yt,0),I(C,0),I(pt,{q1:0,q3:0}),I(J,{q1:0,q3:0})}}),ot(()=>(kt(M()),o(n)),()=>{I(s,(M().height-o(n).min)/(o(n).max-o(n).min))}),ot(()=>o(s),()=>{I(l,250+o(s)*150)}),ot(()=>(kt(M()),o(i)),()=>{I(c,2+(M().bmi-o(i).min)/(o(i).max-o(i).min)*4)}),ot(()=>(kt(M()),o(i)),()=>{I(u,(M().bmi-o(i).min)/(o(i).max-o(i).min))}),ot(()=>o(u),()=>{I(d,10+o(u)*25)}),ot(()=>o(l),()=>{I(f,o(l)*.2)}),ot(()=>(kt(M()),o(r)),()=>{I(h,`rgb(${(M().age-o(r).min)/(o(r).max-o(r).min)*255}, ${(M().age-o(r).min)/(o(r).max-o(r).min)*255}, ${(M().age-o(r).min)/(o(r).max-o(r).min)*255})`)}),ot(()=>kt(M()),()=>{I(m,nt[M().asa]||nt[1])}),ot(()=>o(k),()=>{I($,Object.values(o(k)).filter(Boolean).length)}),ot(()=>o($),()=>{I(L,o($)===4?"all filters":`${o($)} filter${o($)===1?"":"s"}`)}),ot(()=>kt(M()),()=>{I(v,ft(M()))}),ot(()=>o(v),()=>{I(y,dt(o(v)))}),ot(()=>o(v),()=>{I(x,tt(o(v).icuStay))}),ot(()=>o(v),()=>{I(b,St(o(v).mortality))}),ot(()=>o(v),()=>{I(S,Pt(o(v).bloodLoss))}),ot(()=>(o(v),o(F),o(V),o(z)),()=>{I(A,[{label:"ICU Stay (days)",key:"icu",value:Math.min(o(v).icuStay,o(F)),max:o(F),fmt:D=>D.toFixed(1)},{label:"Mortality Rate (%)",key:"mort",value:Math.min(o(v).mortality*100,o(V)*100),max:o(V)*100,fmt:D=>D.toFixed(1)+"%"},{label:"Blood Loss (mL)",key:"blood",value:Math.min(o(v).bloodLoss,o(z)),max:o(z),fmt:D=>Math.round(D).toLocaleString()}])}),ot(()=>(o(q),o(A),o(F),o(V),o(z)),()=>{o(q)&&o(A)&&o(F)&&o(V)&&o(z)&&W()}),Ze(),Ke();var vt=Ph(),Nt=g(vt),Tt=g(Nt),he=g(Tt),Kt=g(he),De=w(g(Kt),2),Rt=g(De),Be=g(Rt);Mt(Be),Ct(2),p(Rt);var ge=w(Rt,2),ae=g(ge);Mt(ae),Ct(2),p(ge);var qt=w(ge,2),st=g(qt);Mt(st),Ct(2),p(qt);var zt=w(qt,2),Zt=g(zt);Mt(Zt),Ct(2),p(zt),p(De),p(Kt);var se=w(Kt,2),Ht=g(se),Ot=g(Ht),Ut=g(Ot);p(Ot);var oe=w(Ot,2);Mt(oe);var $e=w(oe,2),It=g($e);p($e),p(Ht);var le=w(Ht,2),ce=g(le),Ce=g(ce);p(ce);var ve=w(ce,2);Mt(ve);var Ye=w(ve,2),Xe=g(Ye);p(Ye),p(le);var Je=w(le,2),tn=g(Je),Rr=g(tn);p(tn);var Pe=w(tn,2);Mt(Pe);var Kn=w(Pe,2),Cn=g(Kn);p(Kn),p(Je);var en=w(Je,2),Sn=g(en),zr=g(Sn);p(Sn);var dn=w(Sn,2);Mt(dn);var Zn=w(dn,2),Fr=g(Zn);p(Zn),p(en),p(se),p(he),p(Tt);var Jn=w(Tt,2);{var Ir=D=>{var rt=Nh(),bt=g(rt),et=w(g(bt),2),gt=g(et),ht=g(gt),xt=g(ht,!0);p(ht);var Ft=w(ht,2),_t=w(g(Ft),2),Et=g(_t,!0);p(_t),p(Ft),p(gt);var Dt=w(gt,2);{var Z=wt=>{var Yt=Th();Ct(2),Y(wt,Yt)},mt=wt=>{var Yt=Eh(),Bt=Te(Yt),be=g(Bt);p(Bt),Ct(2),$t(()=>X(be,`Only ${o(K)??""} cases match your current filters. The predictions may not be
								reliable.`)),Y(wt,Yt)};At(Dt,wt=>{o(K)===0?wt(Z):wt(mt,!1)})}p(et),p(bt),p(rt),$t(()=>{X(xt,o(K)===0?"No Matching Cases Found":"Limited Data Available"),Gt(_t,1,`text-base font-semibold ${o(y).color??""}`,"svelte-1ehvwb8"),X(Et,o(y).level)}),Y(D,rt)},Lt=(D,rt)=>{{var bt=gt=>{var ht=Rh(),xt=g(ht),Ft=w(g(xt),2),_t=g(Ft),Et=w(g(_t),2),Dt=w(g(Et),2),Z=g(Dt,!0);p(Dt),p(Et),p(_t);var mt=w(_t,2),wt=g(mt);p(mt),p(Ft),p(xt),p(ht),$t(()=>{Gt(Dt,1,`text-base font-semibold ${o(y).color??""}`,"svelte-1ehvwb8"),X(Z,o(y).level),X(wt,`With ${o(K)??""} matching cases, the predictions are reasonably reliable.`)}),Y(gt,ht)},et=(gt,ht)=>{{var xt=Ft=>{var _t=zh(),Et=g(_t),Dt=w(g(Et),2),Z=g(Dt),mt=w(g(Z),2),wt=w(g(mt),2),Yt=g(wt,!0);p(wt),p(mt),p(Z);var Bt=w(Z,2),be=g(Bt);p(Bt),p(Dt),p(Et),p(_t),$t(()=>{Gt(wt,1,`text-base font-semibold ${o(y).color??""}`,"svelte-1ehvwb8"),X(Yt,o(y).level),X(be,`Great! With ${o(K)??""} matching cases, the predictions are highly reliable.`)}),Y(Ft,_t)};At(gt,Ft=>{o(K)>=50&&Ft(xt)},ht)}};At(D,gt=>{o(K)<50?gt(bt):gt(et,!1)},rt)}};At(Jn,D=>{o(K)<10?D(Ir):D(Lt,!1)})}var Vt=w(Jn,2),me=g(Vt),qe=w(g(me),2),Jt=g(qe),pe=g(Jt),ye=w(pe),xe=w(ye),ue=w(xe),Se=w(ue),hn=w(Se),vn=w(hn),Lr=w(vn);p(Jt),p(qe),p(me);var Dr=w(me,2),Oi=w(g(Dr),2),Vs=g(Oi);cn(Vs,D=>I(q,D),()=>o(q)),p(Oi),p(Dr);var Ui=w(Dr,2),Vi=w(g(Ui),2),Yi=w(g(Vi),2),Br=g(Yi),Ys=w(g(Br));p(Br);var Pr=w(Br,2),Xs=w(g(Pr));p(Pr);var Xi=w(Pr,2),Ws=w(g(Xi));p(Xi),Ct(2),p(Yi),p(Vi),Ct(2),p(Ui),p(Vt);var Wi=w(Vt,2);{var Gs=D=>{var rt=Fh(),bt=g(rt),et=g(bt),gt=g(et),ht=w(gt,2),xt=w(g(ht),2),Ft=g(xt);p(xt),p(ht),p(et),p(bt);var _t=w(bt,2),Et=g(_t),Dt=g(Et),Z=w(Dt,2),mt=w(g(Z),2),wt=g(mt);p(mt),p(Z),p(Et),p(_t);var Yt=w(_t,2),Bt=g(Yt),be=g(Bt),tr=w(be,2),He=w(g(tr),2),nn=g(He);p(He),p(tr),p(Bt),p(Yt),p(rt),$t((pn,Tn,En)=>{Gt(gt,1,`h-8 w-8 rounded-full ${o(x).bgColor??""} flex items-center justify-center`,"svelte-1ehvwb8"),Gt(xt,1,`text-xl font-bold ${o(x).textColor??""}`,"svelte-1ehvwb8"),X(Ft,`${pn??""} days`),Gt(Dt,1,`h-8 w-8 rounded-full ${o(b).bgColor??""} flex items-center justify-center`,"svelte-1ehvwb8"),Gt(mt,1,`text-xl font-bold ${o(b).textColor??""}`,"svelte-1ehvwb8"),X(wt,`${Tn??""}%`),Gt(be,1,`h-8 w-8 rounded-full ${o(S).bgColor??""} flex items-center justify-center`,"svelte-1ehvwb8"),Gt(He,1,`text-xl font-bold ${o(S).textColor??""}`,"svelte-1ehvwb8"),X(nn,`${En??""} mL`)},[()=>o(v).icuStay.toFixed(1),()=>(o(v).mortality*100).toFixed(1),()=>Math.round(o(v).bloodLoss)],Ne),Y(D,rt)};At(Wi,D=>{o(K)!=0&&D(Gs)})}var Gi=w(Wi,2);{var Qs=D=>{var rt=Ih(),bt=w(g(rt),2),et=g(bt),gt=w(g(et),2);Mt(gt),p(et);var ht=w(et,2),xt=w(g(ht),2);Mt(xt),p(ht);var Ft=w(ht,2),_t=w(g(Ft),2);Mt(_t),p(Ft),p(bt),p(rt),re(gt,()=>o(T).icuDays,Et=>ne(T,o(T).icuDays=Et)),re(xt,()=>o(T).mortality,Et=>ne(T,o(T).mortality=Et)),re(_t,()=>o(T).bloodLoss,Et=>ne(T,o(T).bloodLoss=Et)),Y(D,rt)};At(Gi,D=>{o(R)&&D(Qs)})}var js=w(Gi,2);{var Ks=D=>{var rt=Bh(),bt=w(Te(rt),2),et=g(bt),gt=w(g(et),2),ht=g(gt);p(gt);var xt=w(gt,2),Ft=g(xt);p(xt),p(et);var _t=w(et,2),Et=w(g(_t),4),Dt=g(Et);p(Et),p(_t);var Z=w(_t,2),mt=w(g(Z),2),wt=g(mt);p(mt);var Yt=w(mt,2),Bt=g(Yt);p(Yt),p(Z),p(bt);var be=w(bt,2);{var tr=He=>{var nn=Dh(),pn=g(nn),Tn=w(pn);{var En=rn=>{var qr=Lh();Y(rn,qr)};At(Tn,rn=>{rn(En)})}p(nn),$t(rn=>X(pn,`Your guess was ${rn??""}% accurate! `),[()=>(E*100).toFixed(1)],Ne),Y(He,nn)};At(be,He=>{o(R)&&o(_)&&He(tr)})}$t((He,nn,pn,Tn,En,rn,qr)=>{X(ht,`${He??""} days`),X(Ft,`IQR: ${nn??""} - ${pn??""} days`),X(Dt,`${Tn??""}%`),X(wt,`${En??""} mL`),X(Bt,`IQR: ${rn??""} - ${qr??""} mL`)},[()=>o(ut).toFixed(1),()=>o(pt).q1.toFixed(1),()=>o(pt).q3.toFixed(1),()=>(o(yt)*100).toFixed(1),()=>o(C).toFixed(0),()=>o(J).q1.toFixed(0),()=>o(J).q3.toFixed(0)],Ne),Y(D,rt)};At(js,D=>{(!o(R)||o(_))&&o(B)&&D(Ks)})}p(Nt),p(vt),$t((D,rt,bt,et,gt,ht,xt,Ft,_t)=>{Gt(Ht,1,nr(o(k).age?"control-item":"control-item opacity-50"),"svelte-1ehvwb8"),X(Ut,`Age: ${M().age??""} years`),it(oe,"min",o(r).min),it(oe,"max",o(r).max),oe.disabled=!o(k).age,X(It,`Range: ${o(r).min??""} - ${o(r).max??""} years`),Gt(le,1,nr(o(k).height?"control-item":"control-item opacity-50"),"svelte-1ehvwb8"),X(Ce,`Height: ${D??""}' ${rt??""}"`),it(ve,"min",o(n).min),it(ve,"max",o(n).max),ve.disabled=!o(k).height,X(Xe,`Range: ${lt.min.feet}'${lt.min.inches}" - ${lt.max.feet}'${lt.max.inches}"`),Gt(Je,1,nr(o(k).bmi?"control-item":"control-item opacity-50"),"svelte-1ehvwb8"),X(Rr,`BMI: ${M().bmi??""}`),it(Pe,"min",o(i).min),it(Pe,"max",o(i).max),Pe.disabled=!o(k).bmi,X(Cn,`Range: ${bt??""} - ${et??""}`),Gt(en,1,nr(o(k).asa?"control-item":"control-item opacity-50"),"svelte-1ehvwb8"),X(zr,`ASA Score: ${M().asa??""}`),dn.disabled=!o(k).asa,X(Fr,`ASA ${M().asa??""}: ${M().asa===1?"Healthy patient":M().asa===2?"Mild systemic disease":M().asa===3?"Severe systemic disease":M().asa===4?"Severe systemic disease that is a constant threat to life":"Moribund patient not expected to survive without the operation"}`),it(Jt,"viewBox",`0 0 200 ${o(l)??""}`),it(pe,"fill",o(m)),it(pe,"stroke-width",o(c)),it(pe,"opacity",o(k).asa?1:.5),it(ye,"y2",o(l)*.6),it(ye,"stroke",o(m)),it(ye,"stroke-width",o(c)),it(ye,"opacity",o(k).asa?1:.5),it(xe,"cy",o(l)*.45),it(xe,"rx",o(d)),it(xe,"ry",o(f)),it(xe,"fill",o(m)),it(xe,"stroke-width",o(c)),it(xe,"opacity",o(k).bmi?1:.5),it(ue,"x2",gt),it(ue,"y2",o(l)*.4),it(ue,"stroke",o(m)),it(ue,"stroke-width",o(c)),it(ue,"opacity",o(k).asa?1:.5),it(Se,"x2",ht),it(Se,"y2",o(l)*.4),it(Se,"stroke",o(m)),it(Se,"stroke-width",o(c)),it(Se,"opacity",o(k).asa?1:.5),it(hn,"y1",o(l)*.6),it(hn,"y2",o(l)*.9),it(hn,"stroke",o(m)),it(hn,"stroke-width",o(c)),it(hn,"opacity",o(k).asa?1:.5),it(vn,"y1",o(l)*.6),it(vn,"y2",o(l)*.9),it(vn,"stroke",o(m)),it(vn,"stroke-width",o(c)),it(vn,"opacity",o(k).asa?1:.5),it(Lr,"stroke",o(h)),it(Lr,"stroke-width",o(c)*1.5),it(Lr,"opacity",o(k).age?1:.5),X(Ys,` 0 - ${xt??""} days`),X(Xs,` 0 - ${Ft??""}%`),X(Ws,` 0 - ${_t??""} mL`)},[()=>U(M().height).feet,()=>U(M().height).inches,()=>o(i).min.toFixed(1),()=>o(i).max.toFixed(1),()=>60-Math.max(0,o(d)-20),()=>140+Math.max(0,o(d)-20),()=>o(F).toFixed(1),()=>(o(V)*100).toFixed(0),()=>o(z).toLocaleString()],Ne),Re(Be,()=>o(k).age,D=>ne(k,o(k).age=D)),Re(ae,()=>o(k).height,D=>ne(k,o(k).height=D)),Re(st,()=>o(k).bmi,D=>ne(k,o(k).bmi=D)),Re(Zt,()=>o(k).asa,D=>ne(k,o(k).asa=D)),re(oe,()=>M().age,D=>M(M().age=D,!0)),re(ve,()=>M().height,D=>M(M().height=D,!0)),re(Pe,()=>M().bmi,D=>M(M().bmi=D,!0)),re(dn,()=>M().asa,D=>M(M().asa=D,!0)),Y(t,vt),Me()}var Hh=Q(`<div class="lg:ml-16"><h2 class="pl-4">Interactive Risk Builder</h2> <p class="mb-4 pl-4">Now it's your turn. Build a patient profile using the sliders below. Watch how tiny shifts, like a
	single ASA notch or clicking 'Emergency' can triple the mortality risk instantly. We'll show you
	how many similar historical cases we found, so you can trust the predictions. <br/> <br/> Once you are finished with your patient profile, you can move to the next slide to make your predictions</p> <!></div>`);function Oh(t,e){let n=fe(In({age:60,bmi:25,asa:2,emergency:0,height:170}));var r=Hh(),i=w(g(r),4);qh(i,{get cases(){return e.cases},get predictors(){return o(n)},set predictors(a){I(n,a,!0)}}),p(r),Y(t,r)}var Uh=Q('<div class="typing-line svelte-1lomvqb"><span> </span></div>'),Vh=Q('<div class="fixed inset-0 h-screen w-screen svelte-1lomvqb"><div class="text-text-primary mx-auto max-w-5xl px-4 text-center text-4xl font-semibold md:text-5xl svelte-1lomvqb"><div class="typing-container svelte-1lomvqb"><div class="typing-wrapper svelte-1lomvqb"></div></div></div></div>');function an(t,e){var n=Vh(),r=g(n),i=g(r),a=g(i);Un(a,21,()=>e.lines,On,(s,l,c)=>{var u=Uh(),d=g(u);Gt(d,1,"typing-text svelte-1lomvqb",null,{},{"first-line":c===0,"second-line":c===1}),Ni(d,`--delay: ${c*1.5}s`);var f=g(d,!0);p(d),p(u),$t(()=>X(f,o(l))),Y(s,u)}),p(a),p(i),p(r),p(n),Y(t,n)}var Yh=Q('<button class="check-button svelte-xvk0si"><!></button>'),Xh=Q(`<p class="accuracy-feedback poor svelte-xvk0si">Your predictions were quite far from the actual outcomes. Consider reviewing the patient's risk factors more carefully.</p>`),Wh=Q('<p class="accuracy-feedback fair svelte-xvk0si">Your predictions were somewhat off. Try to consider how different factors might interact to affect outcomes.</p>'),Gh=Q(`<p class="accuracy-feedback good svelte-xvk0si">Good predictions! You're getting better at understanding how patient characteristics influence outcomes.</p>`),Qh=Q('<p class="accuracy-feedback excellent svelte-xvk0si">Excellent predictions! You have a strong understanding of how patient factors correlate with surgical outcomes.</p>'),jh=Q('<button class="next-button svelte-xvk0si">Next Question</button>'),Kh=Q('<div class="completion-panel svelte-xvk0si"><div class="completion-card svelte-xvk0si"><h3 class="svelte-xvk0si">ð Quiz Complete!</h3> <p class="svelte-xvk0si"> </p></div> <button class="reset-button svelte-xvk0si">Try Again</button></div>'),Zh=Q('<div class="results-panel svelte-xvk0si"><h4 class="svelte-xvk0si">ð Actual Outcomes from Similar Cases</h4> <div class="outcomes-grid svelte-xvk0si"><div class="outcome-card svelte-xvk0si"><div class="outcome-icon svelte-xvk0si">ð¥</div> <div class="outcome-content svelte-xvk0si"><span class="outcome-label svelte-xvk0si">Average ICU Stay</span> <span class="outcome-value svelte-xvk0si"> </span> <span class="outcome-range svelte-xvk0si"> </span></div></div> <div class="outcome-card svelte-xvk0si"><div class="outcome-icon svelte-xvk0si">ð</div> <div class="outcome-content svelte-xvk0si"><span class="outcome-label svelte-xvk0si">Mortality Rate</span> <span class="outcome-value svelte-xvk0si"> </span> <div class="mortality-bar svelte-xvk0si"><div class="mortality-fill svelte-xvk0si"></div></div></div></div> <div class="outcome-card svelte-xvk0si"><div class="outcome-icon svelte-xvk0si">ð©¸</div> <div class="outcome-content svelte-xvk0si"><span class="outcome-label svelte-xvk0si">Average Blood Loss</span> <span class="outcome-value svelte-xvk0si"> </span> <span class="outcome-range svelte-xvk0si"> </span></div></div></div> <div class="accuracy-panel svelte-xvk0si"><span class="accuracy-label svelte-xvk0si"> </span> <!></div> <!></div>'),Jh=Q('<div class="controls-panel svelte-xvk0si"><div class="controls-content svelte-xvk0si"><h3 class="svelte-xvk0si">ð§  Test Your Knowledge</h3> <p class="subtitle svelte-xvk0si">Based on the patient profile below, predict their likely outcomes. Consider factors like age, BMI, ASA score, and height when making your predictions.</p> <div class="progress-section svelte-xvk0si"><div class="progress-stats svelte-xvk0si"><span class="progress-item svelte-xvk0si"> </span> <span class="progress-item svelte-xvk0si"> </span></div></div></div></div> <div class="profile-panel svelte-xvk0si"><h4 class="svelte-xvk0si">ð¤ Patient Profile</h4> <p class="profile-description svelte-xvk0si"> </p> <div class="profile-grid svelte-xvk0si"><div class="profile-item svelte-xvk0si"><span class="profile-label svelte-xvk0si">Age</span> <span class="profile-value svelte-xvk0si"> </span></div> <div class="profile-item svelte-xvk0si"><span class="profile-label svelte-xvk0si">Height</span> <span class="profile-value svelte-xvk0si"> </span></div> <div class="profile-item svelte-xvk0si"><span class="profile-label svelte-xvk0si">BMI</span> <span class="profile-value svelte-xvk0si"> </span></div> <div class="profile-item svelte-xvk0si"><span class="profile-label svelte-xvk0si">ASA Score</span> <span class="profile-value svelte-xvk0si"> </span></div></div></div> <div class="prediction-panel svelte-xvk0si"><h4 class="svelte-xvk0si">ð Make Your Predictions</h4> <div class="prediction-grid svelte-xvk0si"><div class="prediction-item svelte-xvk0si"><label class="prediction-label svelte-xvk0si">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="prediction-input svelte-xvk0si"/></div> <div class="prediction-item svelte-xvk0si"><label class="prediction-label svelte-xvk0si">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="prediction-input svelte-xvk0si"/></div> <div class="prediction-item svelte-xvk0si"><label class="prediction-label svelte-xvk0si">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="prediction-input svelte-xvk0si"/></div></div> <!></div>',1),tv=Q('<div class="loading svelte-xvk0si"><div class="loading-spinner svelte-xvk0si"></div> <p class="svelte-xvk0si">Loading surgical data...</p></div>'),ev=Q('<div class="container svelte-xvk0si"><!></div>');function nv(t,e){ke(e,!0);function n(B){const k=B/2.54,F=Math.floor(k/12),V=Math.round(k%12);return{feet:F,inches:V}}const r=[{age:45,bmi:22,asa:1,height:175,description:"A healthy middle-aged patient with normal BMI"},{age:75,bmi:32,asa:3,height:165,description:"An elderly patient with obesity and severe systemic disease"},{age:60,bmi:28,asa:2,height:170,description:"A patient with mild systemic disease and slightly elevated BMI"}];let i=fe(0),a=fe(!1),s=fe(0),l=fe(0),c=fe(0),u=!1,d=fe(In({icuDays:0,mortality:0,bloodLoss:0})),f=fe(0),h=fe(0),m=fe(0),$=fe(In({q1:0,q3:0})),L=fe(In({q1:0,q3:0})),v=fe(0),y=In(new Map);function x(){if(o(a))return;const B=r[o(i)],k=Ci(e.cases,B);I(v,k.length,!0);const F=xn(k);I(f,F.avgICUStay,!0),I(h,F.mortalityRate,!0),I(m,F.avgBloodLoss,!0),I($,F.icuIQR,!0),I(L,F.bloodLossIQR,!0);const V=oi(o(d).icuDays,F.avgICUStay,F.icuValues),z=oi(o(d).mortality,F.mortalityRate*100,k.map(at=>(at.death_inhosp??0)*100)),P=oi(o(d).bloodLoss,F.avgBloodLoss,F.bloodLossValues);I(s,V*.4+z*.3+P*.3),I(l,o(l)+o(s)),hr(c),I(a,!0)}function b(){o(i)<r.length-1&&(hr(i),I(a,!1),I(d,{icuDays:0,mortality:0,bloodLoss:0},!0))}function S(){I(i,0),I(a,!1),I(l,0),I(c,0),I(d,{icuDays:0,mortality:0,bloodLoss:0},!0),y.clear()}let A=qn(()=>r[o(i)]),M=qn(()=>o(i)===r.length-1),N=qn(()=>o(c)>0?o(l)/o(c)*100:0);var R=ev(),T=g(R);{var _=B=>{var k=Jh(),F=Te(k),V=g(F),z=w(g(V),4),P=g(z),at=g(P),j=g(at);p(at);var ct=w(at,2),q=g(ct);p(ct),p(P),p(z),p(V),p(F);var U=w(F,2),H=w(g(U),2),lt=g(H,!0);p(H);var ut=w(H,2),yt=g(ut),C=w(g(yt),2),K=g(C);p(C),p(yt);var pt=w(yt,2),J=w(g(pt),2),nt=g(J);p(J),p(pt);var ft=w(pt,2),dt=w(g(ft),2),tt=g(dt,!0);p(dt),p(ft);var St=w(ft,2),Pt=w(g(St),2),W=g(Pt,!0);p(Pt),p(St),p(ut),p(U);var vt=w(U,2),Nt=w(g(vt),2),Tt=g(Nt),he=w(g(Tt),2);Mt(he),p(Tt);var Kt=w(Tt,2),De=w(g(Kt),2);Mt(De),p(Kt);var Rt=w(Kt,2),Be=w(g(Rt),2);Mt(Be),p(Rt),p(Nt);var ge=w(Nt,2);{var ae=st=>{var zt=Yh(),Zt=g(zt);{var se=Ht=>{var Ot=Zs("Check Your Predictions");Y(Ht,Ot)};At(Zt,Ht=>{Ht(se,!1)})}p(zt),$t(()=>zt.disabled=u),Qe("click",zt,x),Y(st,zt)},qt=st=>{var zt=Zh(),Zt=w(g(zt),2),se=g(Zt),Ht=w(g(se),2),Ot=w(g(Ht),2),Ut=g(Ot);p(Ot);var oe=w(Ot,2),$e=g(oe);p(oe),p(Ht),p(se);var It=w(se,2),le=w(g(It),2),ce=w(g(le),2),Ce=g(ce);p(ce);var ve=w(ce,2),Ye=g(ve);p(ve),p(le),p(It);var Xe=w(It,2),Je=w(g(Xe),2),tn=w(g(Je),2),Rr=g(tn);p(tn);var Pe=w(tn,2),Kn=g(Pe);p(Pe),p(Je),p(Xe),p(Zt);var Cn=w(Zt,2),en=g(Cn),Sn=g(en);p(en);var zr=w(en,2);{var dn=Lt=>{var Vt=Xh();Y(Lt,Vt)},Zn=(Lt,Vt)=>{{var me=Jt=>{var pe=Wh();Y(Jt,pe)},qe=(Jt,pe)=>{{var ye=ue=>{var Se=Gh();Y(ue,Se)},xe=ue=>{var Se=Qh();Y(ue,Se)};At(Jt,ue=>{o(s)<=.75?ue(ye):ue(xe,!1)},pe)}};At(Lt,Jt=>{o(s)<=.5?Jt(me):Jt(qe,!1)},Vt)}};At(zr,Lt=>{o(s)<=.25?Lt(dn):Lt(Zn,!1)})}p(Cn);var Fr=w(Cn,2);{var Jn=Lt=>{var Vt=jh();Qe("click",Vt,b),Y(Lt,Vt)},Ir=Lt=>{var Vt=Kh(),me=g(Vt),qe=w(g(me),2),Jt=g(qe);p(qe),p(me);var pe=w(me,2);p(Vt),$t(ye=>X(Jt,`Your final average score: ${ye??""}%`),[()=>o(N).toFixed(1)]),Qe("click",pe,S),Y(Lt,Vt)};At(Fr,Lt=>{o(M)?Lt(Ir,!1):Lt(Jn)})}p(zt),$t((Lt,Vt,me,qe,Jt,pe,ye,xe)=>{X(Ut,`${Lt??""} days`),X($e,`IQR: ${Vt??""} - ${me??""} days`),X(Ce,`${qe??""}%`),Ni(Ye,`width: ${o(h)*100}%`),X(Rr,`${Jt??""} mL`),X(Kn,`IQR: ${pe??""} - ${ye??""} mL`),X(Sn,`Your guess was ${xe??""}% accurate!`)},[()=>o(f).toFixed(1),()=>o($).q1.toFixed(1),()=>o($).q3.toFixed(1),()=>(o(h)*100).toFixed(1),()=>o(m).toFixed(0),()=>o(L).q1.toFixed(0),()=>o(L).q3.toFixed(0),()=>(o(s)*100).toFixed(1)]),Y(st,zt)};At(ge,st=>{o(a)?st(qt,!1):st(ae)})}p(vt),$t((st,zt,Zt)=>{X(j,`Question ${o(i)+1} of ${r.length??""}`),X(q,`Average Score: ${st??""}%`),X(lt,o(A).description),X(K,`${o(A).age??""} years`),X(nt,`${zt??""}' ${Zt??""}"`),X(tt,o(A).bmi),X(W,o(A).asa)},[()=>o(N).toFixed(1),()=>n(o(A).height).feet,()=>n(o(A).height).inches]),re(he,()=>o(d).icuDays,st=>o(d).icuDays=st),re(De,()=>o(d).mortality,st=>o(d).mortality=st),re(Be,()=>o(d).bloodLoss,st=>o(d).bloodLoss=st),Y(B,k)},E=B=>{var k=tv();Y(B,k)};At(T,B=>{e.cases&&e.cases.length>0?B(_):B(E,!1)})}p(R),Y(t,R),Me()}var rv=Q('<div class="insights svelte-k1szas"><h4 class="svelte-k1szas">ð Key Clinical Insights</h4> <div class="insights-grid svelte-k1szas"><div class="insight-card svelte-k1szas"><strong class="svelte-k1szas">Baseline Risk</strong> <span class="svelte-k1szas"> </span> <small class="svelte-k1szas">Low-risk patients</small></div> <div class="insight-card svelte-k1szas"><strong class="svelte-k1szas">Top Risk Factor</strong> <span class="svelte-k1szas"> </span> <small class="svelte-k1szas"> </small></div> <div class="insight-card svelte-k1szas"><strong class="svelte-k1szas">Maximum Risk</strong> <span class="svelte-k1szas"> </span> <small class="svelte-k1szas">All factors combined</small></div> <div class="insight-card svelte-k1szas"><strong class="svelte-k1szas">Data Source</strong> <span class="svelte-k1szas"> </span> <small class="svelte-k1szas">VitalDB surgical cases</small></div></div></div>'),iv=Q(`<div class="context-panel svelte-k1szas"><h2 class="svelte-k1szas">Interactive Risk Calculator</h2> <p class="context-description svelte-k1szas">This interactive waterfall chart visualizes how different risk factors contribute to
				surgical mortality risk. The graph shows the cumulative effect of multiple risk factors,
				starting from a baseline risk for low-risk patients and building up as additional factors
				are added. Toggle the risk factors below to see how they combine and affect overall
				mortality risk. Each bar represents the additional risk contribution of that factor, with
				connecting lines demonstrating how factors build upon each other. Hover over bars for
				detailed information. Based on real surgical data from VitalDB, showing actual mortality
				rates for patients with different risk factor combinations.</p></div> <div class="controls-panel svelte-k1szas"><div class="controls-content svelte-k1szas"><h3 class="svelte-k1szas">â ï¸ Risk Factors</h3> <p class="subtitle svelte-k1szas">Toggle risk factors to see how they combine and affect patient mortality</p> <div class="controls-grid svelte-k1szas"><label class="control-item major svelte-k1szas"><input type="checkbox" class="svelte-k1szas"/> <span class="factor-name svelte-k1szas">ASA â¥ 3</span> <span class="factor-impact svelte-k1szas">High Impact</span></label> <label class="control-item major svelte-k1szas"><input type="checkbox" class="svelte-k1szas"/> <span class="factor-name svelte-k1szas">Emergency</span> <span class="factor-impact svelte-k1szas">High Impact</span></label> <label class="control-item major svelte-k1szas"><input type="checkbox" class="svelte-k1szas"/> <span class="factor-name svelte-k1szas">Low Albumin</span> <span class="factor-impact svelte-k1szas">High Impact</span></label> <label class="control-item minor svelte-k1szas"><input type="checkbox" class="svelte-k1szas"/> <span class="factor-name svelte-k1szas">Age > 65</span> <span class="factor-impact svelte-k1szas">Minor Impact</span></label></div> <div class="current-risk svelte-k1szas"><span class="risk-label svelte-k1szas">Current Patient Risk:</span> <span class="risk-value svelte-k1szas"> </span></div></div></div> <div class="chart-wrapper svelte-k1szas"><div class="data-stats svelte-k1szas"><span class="svelte-k1szas"><strong class="svelte-k1szas">Total Cases:</strong> </span> <span class="svelte-k1szas"><strong class="svelte-k1szas">Valid Cases:</strong> </span> <span class="svelte-k1szas"><strong class="svelte-k1szas">Active Factors:</strong> </span></div> <svg class="chart svelte-k1szas"></svg></div> <!>`,1),av=Q('<div class="loading svelte-k1szas"><div class="loading-spinner svelte-k1szas"></div> <p class="svelte-k1szas">Loading surgical data...</p></div>'),sv=Q('<div class="container svelte-k1szas"><!></div>');function ov(t,e){ke(e,!1);let n=jt(e,"cases",24,()=>[]),r=O(),i=O([]),a=O(0),s=O(0),l=O({asa_high:!1,emergency:!1,low_albumin:!1,old_age:!1});function c(){if(!n()||n().length===0)return;console.log("=== WATERFALL GRAPH DEBUG ==="),console.log("Total cases:",n().length),console.log("Sample case:",n()[0]);const v=n().filter(M=>typeof M.death_inhosp=="number"&&typeof M.asa=="number"&&typeof M.emop=="number"&&typeof M.age=="number");if(I(a,n().length),I(s,v.length),console.log("Clean cases:",v.length),v.length===0){console.error("No valid cases found!");return}const y=v.filter(M=>M.asa<=2&&M.emop===0&&M.age<65),x=y.length>0?y.filter(M=>M.death_inhosp===1).length/y.length*100:2;console.log(`Baseline: ${y.length} cases, ${x.toFixed(1)}% mortality`);const A=[{name:"ASA â¥ 3",key:"asa_high",filter:M=>M.asa>=3,color:"#ef4444"},{name:"Emergency",key:"emergency",filter:M=>M.emop===1,color:"#f97316"},{name:"Low Albumin",key:"low_albumin",filter:M=>M.preop_alb&&M.preop_alb<3.5,color:"#eab308"},{name:"Age > 65",key:"old_age",filter:M=>M.age>65,color:"#64748b"}].map(M=>{const N=v.filter(M.filter),R=v.filter(B=>!M.filter(B));if(N.length===0||R.length===0)return{...M,contribution:0,withCount:N.length,withoutCount:R.length,riskWith:0,riskWithout:0};const T=N.filter(B=>B.death_inhosp===1).length/N.length*100,_=R.filter(B=>B.death_inhosp===1).length/R.length*100,E=Math.max(0,T-_);return console.log(`${M.name}: ${N.length} cases, ${T.toFixed(1)}% vs ${_.toFixed(1)}% = +${E.toFixed(1)}%`),{...M,contribution:E,withCount:N.length,withoutCount:R.length,riskWith:T,riskWithout:_}}).sort((M,N)=>N.contribution-M.contribution);I(i,[{name:"Baseline",key:"baseline",value:x,cumulative:x,type:"baseline",color:"#475569",description:`Low-risk patients (ASAâ¤2, elective, age<65): ${y.length} cases`}]),A.forEach((M,N)=>{o(i).push({name:M.name,key:M.key,value:M.contribution,cumulative:0,type:N<3?"major":"minor",color:M.color,description:M.contribution>0?`${M.withCount} cases with factor, adds +${M.contribution.toFixed(1)}% risk`:`${M.withCount} cases with factor, no significant impact`})}),o(i).push({name:"Total Risk",key:"total",value:0,cumulative:0,type:"total",color:"#1e40af",description:"Combined mortality risk based on selected factors"}),console.log("Final risk factors:",o(i)),u()}function u(){if(o(i).length===0)return;let v=o(i)[0].value;for(let x=1;x<o(i).length-1;x++){const b=o(i)[x],S=o(l)[b.key];b.cumulative=v,S&&(v+=b.value)}const y=o(i).length-1;ne(i,o(i)[y].value=v),ne(i,o(i)[y].cumulative=v)}function d(){if(o(i).length===0)return 0;let v=o(i)[0].value;for(let y=1;y<o(i).length-1;y++){const x=o(i)[y];o(l)[x.key]&&(v+=x.value)}return v}function f(){if(!o(r)||o(i).length===0)return;G(o(r)).selectAll("*").remove();const v={top:50,right:80,bottom:60,left:120},y=Math.min(800,window.innerWidth-v.left-v.right-40),x=Math.min(400,window.innerHeight*.6),b=o(i).filter(_=>_.type==="baseline"||_.type==="total"?!0:_.key&&_.key!=="baseline"&&_.key!=="total"?o(l)[_.key]:!1);b.length<2&&(b.push(o(i)[0]),b.push(o(i)[o(i).length-1]));const S=Math.max(...o(i).map(_=>_.type==="total"?_.value:_.cumulative+_.value)),A=je().domain([0,S*1.1]).range([0,y]),M=Sr().domain(b.map(_=>_.name)).range([0,x]).padding(.3),N=G(o(r)).attr("viewBox",`0 0 ${y+v.left+v.right} ${x+v.top+v.bottom}`).append("g").attr("transform",`translate(${v.left},${v.top})`),R=G("body").selectAll(".waterfall-tooltip").data([0]).enter().append("div").attr("class","waterfall-tooltip").style("opacity",0).style("position","absolute").style("background-color","rgba(15, 23, 42, 0.95)").style("color","white").style("border","1px solid #334155").style("border-radius","8px").style("padding","12px").style("pointer-events","none").style("font-size","13px").style("box-shadow","0 4px 12px rgba(0,0,0,0.3)").style("z-index","1000"),T=N.selectAll(".bar").data(b).enter().append("g").attr("class","bar");T.append("rect").attr("x",_=>_.type==="baseline"||_.type==="total"?0:A(_.cumulative)).attr("y",_=>M(_.name)).attr("width",0).attr("height",M.bandwidth()).attr("fill",_=>_.color).attr("stroke","#1e293b").attr("stroke-width",2).attr("rx",4).style("cursor","pointer").transition().duration(800).delay((_,E)=>E*100).attr("width",_=>A(_.value)).on("end",function(){G(this.parentNode).select("text").transition().duration(200).attr("opacity",1)}),T.append("text").attr("x",_=>(_.type==="baseline"||_.type==="total"?0:A(_.cumulative))+A(_.value)/2).attr("y",_=>M(_.name)+M.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#ffffff").attr("opacity",0).style("font-weight","600").style("font-size","12px").style("text-shadow","0 1px 2px rgba(0,0,0,0.3)").text(_=>`${_.value.toFixed(1)}%`),T.on("mouseover",function(_,E){G(this).select("rect").transition().duration(200).attr("opacity",.8),R.transition().duration(200).style("opacity",1),R.html(`
				<div style="font-weight: bold; margin-bottom: 6px; color: #f1f5f9;">${E.name}</div>
				<div style="margin-bottom: 4px;">${E.description}</div>
				<div style="font-weight: bold; color: #60a5fa;">Risk: +${E.value.toFixed(1)}%</div>
			`).style("left",_.pageX+10+"px").style("top",_.pageY-28+"px")}).on("mouseout",function(){G(this).select("rect").transition().duration(200).attr("opacity",1),R.transition().duration(300).style("opacity",0)});for(let _=1;_<b.length-1;_++){const E=b[_],B=b[_+1];E.type!=="total"&&B.type!=="total"&&N.append("line").attr("x1",A(E.cumulative+E.value)).attr("y1",M(E.name)+M.bandwidth()).attr("x2",A(B.cumulative)).attr("y2",M(B.name)).attr("stroke","#475569").attr("stroke-width",1.5).attr("stroke-dasharray","4,4").attr("opacity",0).transition().duration(1e3).delay(800).attr("opacity",.6)}N.append("g").attr("transform",`translate(0,${x})`).call(jn(A).tickFormat(_=>`${_}%`)).style("color","#ffffff"),N.append("g").call(Tr(M)).style("color","#ffffff"),N.append("text").attr("x",y/2).attr("y",-35).attr("text-anchor","middle").style("font-size","24px").style("font-weight","bold").style("fill","#60a5fa").style("dominant-baseline","text-before-edge").text("Interactive Risk Calculator"),N.append("text").attr("x",y/2).attr("y",x+45).attr("text-anchor","middle").style("font-size","14px").style("fill","#ffffff").text("Mortality Risk (%)"),N.append("g").attr("class","grid").selectAll("line").data(A.ticks()).enter().append("line").attr("x1",_=>A(_)).attr("x2",_=>A(_)).attr("y1",0).attr("y2",x).attr("stroke","#334155").attr("stroke-width",1).attr("stroke-dasharray","4,4").attr("opacity",.3)}Ie(()=>(n()&&n().length>0&&c(),()=>{G("body").selectAll(".waterfall-tooltip").remove()})),ot(()=>kt(n()),()=>{n()&&n().length>0&&c()}),ot(()=>(o(r),o(i)),()=>{o(r)&&o(i).length>0&&(u(),f())}),ot(()=>(o(l),o(i)),()=>{o(l)&&o(i).length>0&&(u(),f())}),Ze(),Ke();var h=sv(),m=g(h);{var $=v=>{var y=iv(),x=w(Te(y),2),b=g(x),S=w(g(b),4),A=g(S),M=g(A);Mt(M),Ct(4),p(A);var N=w(A,2),R=g(N);Mt(R),Ct(4),p(N);var T=w(N,2),_=g(T);Mt(_),Ct(4),p(T);var E=w(T,2),B=g(E);Mt(B),Ct(4),p(E),p(S);var k=w(S,2),F=w(g(k),2),V=g(F);p(F),p(k),p(b),p(x);var z=w(x,2),P=g(z),at=g(P),j=w(g(at));p(at);var ct=w(at,2),q=w(g(ct));p(ct);var U=w(ct,2),H=w(g(U));p(U),p(P);var lt=w(P,2);cn(lt,C=>I(r,C),()=>o(r)),p(z);var ut=w(z,2);{var yt=C=>{var K=rv(),pt=w(g(K),2),J=g(pt),nt=w(g(J),2),ft=g(nt);p(nt),Ct(2),p(J);var dt=w(J,2),tt=w(g(dt),2),St=g(tt,!0);p(tt);var Pt=w(tt,2),W=g(Pt);p(Pt),p(dt);var vt=w(dt,2),Nt=w(g(vt),2),Tt=g(Nt);p(Nt),Ct(2),p(vt);var he=w(vt,2),Kt=w(g(he),2),De=g(Kt,!0);p(Kt),Ct(2),p(he),p(pt),p(K),$t((Rt,Be,ge,ae)=>{var qt;X(ft,`${Rt??""}%`),X(St,(qt=o(i)[1])==null?void 0:qt.name),X(W,`+${Be??""}% mortality`),X(Tt,`${ge??""}%`),X(De,ae)},[()=>{var Rt;return(Rt=o(i)[0])==null?void 0:Rt.value.toFixed(1)},()=>{var Rt;return(Rt=o(i)[1])==null?void 0:Rt.value.toFixed(1)},()=>{var Rt;return(Rt=o(i)[o(i).length-1])==null?void 0:Rt.value.toFixed(1)},()=>o(s).toLocaleString()],Ne),Y(C,K)};At(ut,C=>{o(i).length>3&&C(yt)})}$t((C,K,pt,J)=>{X(V,`${C??""}%`),X(j,` ${K??""}`),X(q,` ${pt??""}`),X(H,` ${J??""}`)},[()=>d().toFixed(1),()=>o(a).toLocaleString(),()=>o(s).toLocaleString(),()=>Object.values(o(l)).filter(Boolean).length],Ne),Re(M,()=>o(l).asa_high,C=>ne(l,o(l).asa_high=C)),Re(R,()=>o(l).emergency,C=>ne(l,o(l).emergency=C)),Re(_,()=>o(l).low_albumin,C=>ne(l,o(l).low_albumin=C)),Re(B,()=>o(l).old_age,C=>ne(l,o(l).old_age=C)),Y(v,y)},L=v=>{var y=av();Y(v,y)};At(m,v=>{n()&&n().length>0?v($):v(L,!1)})}p(h),Y(t,h),Me()}var lv=Q('<p class="py-16 text-center text-lg">Loading VitalDB dataset â¦</p>'),cv=Q('<button class="absolute top-1/2 left-4 z-50 -translate-y-1/2 cursor-pointer rounded-full bg-gray-800/80 p-2 shadow-lg hover:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>'),uv=Q('<button class="absolute top-1/2 right-4 z-50 -translate-y-1/2 cursor-pointer rounded-full bg-gray-800/80 p-2 shadow-lg hover:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-200" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>'),fv=Q("<button></button>"),dv=Q('<div class="absolute inset-0 overflow-y-auto transition-opacity duration-300 svelte-1xekagg"><!></div>'),hv=Q('<!> <!> <div class="absolute bottom-4 left-1/2 z-50 flex -translate-x-1/2 gap-2"></div> <!>',1);function _v(t,e){ke(e,!1);let n=O([]),r=O(!0),i=O(0),a=O(!1);const s=300,l=[{id:"hook",content:ll},{id:"transition",content:an,props:{lines:["First, let's meet our patients:","who are they, and where do they come from?"]}},{id:"demographics",content:rh},{id:"transition",content:an,props:{lines:["Knowing who our patients are, the next question is:","how long do we spend on each phase of their care?"]}},{id:"timeline",content:hh},{id:"transition",content:an,props:{lines:["Time on the table is predictable, but what about recovery?","Let's explore how other factors can reveal hidden risks."]}},{id:"waterfall",content:ov},{id:"transition",content:an,props:{lines:["Low albumin emerged as a key risk factor...","But what is it and why does it matter so much?"]}},{id:"albumin",content:Mh},{id:"transition",content:an,props:{lines:["Now that we understand albumin's impact,","Let's build your patient profile in our interactive risk builder."]}},{id:"buildPatient",content:Oh},{id:"transition",content:an,props:{lines:["Now that you've built your patient profile, let's test your knowledge.",'Can you predict the outcomes for these preset patient profiles?"']}},{id:"makeAGuess",content:nv},{id:"transition",content:an,props:{lines:["Now that you've made your predictions","what is the key takeaway from our journey?"]}},{id:"takeaway",content:$h},{id:"writeup",content:Sh}],c=l.length;function u(){o(i)<c-1&&!o(a)&&(I(a,!0),hr(i),setTimeout(()=>{I(a,!1)},s))}function d(){o(i)>0&&!o(a)&&(I(a,!0),hr(i,-1),setTimeout(()=>{I(a,!1)},s))}function f(x){x>=0&&x<c&&!o(a)&&(I(a,!0),I(i,x),setTimeout(()=>{I(a,!1)},s))}function h(x){x.key==="ArrowRight"||x.key==="ArrowDown"?u():(x.key==="ArrowLeft"||x.key==="ArrowUp")&&d()}Ie(()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}));function m(x){return x==null||x.trim()===""?"":/^[+\-]?\d+(\.\d+)?$/.test(x)?+x:x}Ie(async()=>{const x=`${Co}/cases.csv`;I(n,await tl(x,b=>{const S={};for(const A in b)S[A]=m(b[A]);return S})),I(r,!1)}),ot(()=>o(n),()=>{if(o(n).length>0){let R=function(T,_){const E=T.avgWait;T.count++,T.avgWait=(E*(T.count-1)+_)/T.count,T.stdDev=Math.sqrt(((T.count-2)*T.stdDev*T.stdDev+(_-E)*(_-T.avgWait))/(T.count-1))};const x=o(n).filter(T=>T.emop===1&&(T.preop_alb??0)<3),b=o(n).filter(T=>T.emop===0&&(T.preop_alb??0)>3.5),S=x.length>0?x.reduce((T,_)=>T+(_.death_inhosp??0),0)/x.length:0,A=b.length>0?b.reduce((T,_)=>T+(_.death_inhosp??0),0)/b.length:0;console.log("Emergency Low Alb Mortality:",(S*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",(A*100).toFixed(1)+"%"),console.log("Ratio:",(S/(A||.001)).toFixed(1)+"x");const M=new Map,N=new Map;o(n).forEach(T=>{if(T.department&&T.optype&&T.anestart&&T.opstart){const _=(T.opstart-T.anestart)/60;M.has(T.department)||M.set(T.department,{count:0,avgWait:0,stdDev:0}),R(M.get(T.department),_),N.has(T.optype)||N.set(T.optype,{count:0,avgWait:0,stdDev:0}),R(N.get(T.optype),_)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(M.entries()).sort((T,_)=>_[1].count-T[1].count).forEach(([T,_])=>{console.log(`${T}: ${_.count} cases, avg wait ${_.avgWait.toFixed(1)} Â± ${_.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(N.entries()).sort((T,_)=>_[1].count-T[1].count).slice(0,10).forEach(([T,_])=>{console.log(`${T}: ${_.count} cases, avg wait ${_.avgWait.toFixed(1)} Â± ${_.stdDev.toFixed(1)} min`)})}}),Ze(),Ke();var $=er(),L=Te($);{var v=x=>{var b=lv();Y(x,b)},y=x=>{var b=hv(),S=Te(b);{var A=_=>{var E=cv();$t(()=>E.disabled=o(i)===0||o(a)),Qe("click",E,d),Y(_,E)};At(S,_=>{o(i)>0&&_(A)})}var M=w(S,2);{var N=_=>{var E=uv();$t(()=>E.disabled=o(i)===c-1||o(a)),Qe("click",E,u),Y(_,E)};At(M,_=>{o(i)<c-1&&_(N)})}var R=w(M,2);Un(R,5,()=>l,On,(_,E,B)=>{var k=fv();$t(()=>{Gt(k,1,`h-3 w-3 rounded-full transition-all duration-300
					${o(i)===B?"bg-text-accent ":"bg-gray-700 hover:bg-gray-500"}`),k.disabled=o(a)}),Qe("click",k,()=>f(B)),Y(_,k)}),p(R);var T=w(R,2);Un(T,1,()=>l,On,(_,E,B)=>{var k=er(),F=Te(k);{var V=z=>{var P=dv(),at=g(P);{var j=q=>{var U=er(),H=Te(U);const lt=Ne(()=>{var ut;return((ut=o(E).props)==null?void 0:ut.lines)||[]});ta(H,()=>o(E).content,(ut,yt)=>{yt(ut,{get lines(){return o(lt)}})}),Y(q,U)},ct=q=>{Vo(q,{class:"min-h-full py-10",children:(U,H)=>{var lt=er(),ut=Te(lt);ta(ut,()=>o(E).content,(yt,C)=>{C(yt,Ao({get cases(){return o(n)}},()=>o(E).props||{}))}),Y(U,lt)}})};At(at,q=>{o(E).id==="transition"?q(j):q(ct,!1)})}p(P),$t(()=>Ni(P,`opacity: ${o(a)?0:1}`)),Y(z,P)};At(F,z=>{o(i)===B&&z(V)})}Y(_,k)}),Y(x,b)};At(L,x=>{o(r)?x(v):x(y,!1)})}Y(t,$),Me()}export{_v as component};
