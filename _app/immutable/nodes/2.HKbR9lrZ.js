import{f as lt,a as st,c as ws}from"../chunks/DoRUkMhY.js";import{i as Ie}from"../chunks/CTrH24o-.js";import{o as Re,c as Qi,a as Zi}from"../chunks/52fD4koz.js";import{C as jn,w as Lt,a9 as ks,ai as As,y as Ms,x as $s,g as c,Q as ie,z as Ss,A as Es,B as oi,D as tr,J as He,ac as Ns,F as Ji,G as ji,I as Cs,au as ta,ag as ea,i as na,X,av as li,aw as er,M as xr,a5 as ui,ax as qr,ay as Ts,az as Lr,aA as ci,aB as Fs,af as Is,aC as Rs,ar as Ds,aD as Ps,aa as zs,aE as qs,aF as Ls,aG as Bs,aH as Os,aI as Hs,b as ra,L as Br,aJ as Vs,aK as ia,a7 as Xs,K as aa,aL as Ys,p as de,aq as Us,q as E,m as pe,o as C,v as T,t as Vt,aM as at,W as P,e as mt,aN as De,aO as fi,aP as ee,k as Or,at as Dt}from"../chunks/BB7v2pX3.js";import{a as Gs,l as Fn,s as ct,e as ae}from"../chunks/CmBeYHHS.js";import{p as Pt,i as Nt,b as In}from"../chunks/oI3_PeFi.js";import{w as Ws,b as Ks}from"../chunks/E4pwkIDm.js";import{s as un,c as cn}from"../chunks/DOzdMIMB.js";function sa(t,e){return e}function Qs(t,e,n,r){for(var i=[],a=e.length,s=0;s<a;s++)Fs(e[s].e,i,!0);var o=a>0&&i.length===0&&n!==null;if(o){var l=n.parentNode;Is(l),l.append(n),r.clear(),ne(t,e[0].prev,e[a-1].next)}Rs(i,()=>{for(var u=0;u<a;u++){var h=e[u];o||(r.delete(h.k),ne(t,h.prev,h.next)),Ds(h.e,!o)}})}function oa(t,e,n,r,i,a=null){var s=t,o={flags:e,items:new Map,first:null},l=(e&ta)!==0;if(l){var u=t;s=Lt?jn(ks(u)):u.appendChild(As())}Lt&&Ms();var h=null,f=!1,d=ie(()=>{var g=n();return na(g)?g:g==null?[]:ea(g)});$s(()=>{var g=c(d),x=g.length;if(f&&x===0)return;f=x===0;let S=!1;if(Lt){var p=Ss(s)===Es;p!==(x===0)&&(s=oi(),jn(s),tr(!1),S=!0)}if(Lt){for(var v=null,y,m=0;m<x;m++){if(He.nodeType===8&&He.data===Ns){s=He,S=!0,tr(!1);break}var w=g[m],b=r(w,m);y=la(He,o,v,null,w,b,m,i,e,n),o.items.set(b,y),v=y}x>0&&jn(oi())}Lt||Zs(g,o,s,i,e,r,n),a!==null&&(x===0?h?Ji(h):h=ji(()=>a(s)):h!==null&&Cs(h,()=>{h=null})),S&&tr(!0),c(d)}),Lt&&(s=He)}function Zs(t,e,n,r,i,a,s){var N,K,R,B;var o=(i&Ts)!==0,l=(i&(Lr|qr))!==0,u=t.length,h=e.items,f=e.first,d=f,g,x=null,S,p=[],v=[],y,m,w,b;if(o)for(b=0;b<u;b+=1)y=t[b],m=a(y,b),w=h.get(m),w!==void 0&&((N=w.a)==null||N.measure(),(S??(S=new Set)).add(w));for(b=0;b<u;b+=1){if(y=t[b],m=a(y,b),w=h.get(m),w===void 0){var D=d?d.e.nodes_start:n;x=la(D,e,x,x===null?e.first:x.next,y,m,b,r,i,s),h.set(m,x),p=[],v=[],d=x.next;continue}if(l&&Js(w,y,b,i),(w.e.f&er)!==0&&(Ji(w.e),o&&((K=w.a)==null||K.unfix(),(S??(S=new Set)).delete(w))),w!==d){if(g!==void 0&&g.has(w)){if(p.length<v.length){var _=v[0],F;x=_.prev;var k=p[0],M=p[p.length-1];for(F=0;F<p.length;F+=1)hi(p[F],_,n);for(F=0;F<v.length;F+=1)g.delete(v[F]);ne(e,k.prev,M.next),ne(e,x,k),ne(e,M,_),d=_,x=M,b-=1,p=[],v=[]}else g.delete(w),hi(w,d,n),ne(e,w.prev,w.next),ne(e,w,x===null?e.first:x.next),ne(e,x,w),x=w;continue}for(p=[],v=[];d!==null&&d.k!==m;)(d.e.f&er)===0&&(g??(g=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;w=d}p.push(w),x=w,d=w.next}if(d!==null||g!==void 0){for(var $=g===void 0?[]:ea(g);d!==null;)(d.e.f&er)===0&&$.push(d),d=d.next;var L=$.length;if(L>0){var A=(i&ta)!==0&&u===0?n:null;if(o){for(b=0;b<L;b+=1)(R=$[b].a)==null||R.measure();for(b=0;b<L;b+=1)(B=$[b].a)==null||B.fix()}Qs(e,$,A,h)}}o&&xr(()=>{var U;if(S!==void 0)for(w of S)(U=w.a)==null||U.apply()}),ui.first=e.first&&e.first.e,ui.last=x&&x.e}function Js(t,e,n,r){(r&Lr)!==0&&ci(t.v,e),(r&qr)!==0?ci(t.i,n):t.i=n}function la(t,e,n,r,i,a,s,o,l,u){var h=(l&Lr)!==0,f=(l&Ps)===0,d=h?f?X(i):li(i):i,g=(l&qr)===0?s:li(s),x={i:g,v:d,k:a,a:null,e:null,prev:n,next:r};try{return x.e=ji(()=>o(t,d,g,u),Lt),x.e.prev=n&&n.e,x.e.next=r&&r.e,n===null?e.first=x:(n.next=x,n.e.next=x.e),r!==null&&(r.prev=x,r.e.prev=x.e),x}finally{}}function hi(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==r;){var s=zs(a);i.before(a),a=s}}function ne(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const js=Symbol("is custom element"),to=Symbol("is html");function _t(t){if(Lt){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;W(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;W(t,"checked",null),t.checked=i}}};t.__on_r=n,qs(n),Gs()}}function W(t,e,n,r){var i=eo(t);Lt&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[Ls]=n),n==null?t.removeAttribute(e):typeof n!="string"&&no(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function eo(t){return t.__attributes??(t.__attributes={[js]:t.nodeName.includes("-"),[to]:t.namespaceURI===Bs})}var di=new Map;function no(t){var e=di.get(t.nodeName);if(e)return e;di.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Hs(r);for(var a in n)n[a].set&&e.push(a);r=Os(r)}return e}const ro=()=>performance.now(),Gt={tick:t=>requestAnimationFrame(t),now:()=>ro(),tasks:new Set};function ua(){const t=Gt.now();Gt.tasks.forEach(e=>{e.c(t)||(Gt.tasks.delete(e),e.f())}),Gt.tasks.size!==0&&Gt.tick(ua)}function io(t){let e;return Gt.tasks.size===0&&Gt.tick(ua),{promise:new Promise(n=>{Gt.tasks.add(e={c:t,f:n})}),abort(){Gt.tasks.delete(e)}}}function jt(t,e,n=e){var r=Vs();Fn(t,"input",i=>{var a=i?t.defaultValue:t.value;if(a=ir(t)?ar(a):a,n(a),r&&a!==(a=e())){var s=t.selectionStart,o=t.selectionEnd;t.value=a??"",o!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(o,t.value.length))}}),(Lt&&t.defaultValue!==t.value||ra(e)==null&&t.value)&&n(ir(t)?ar(t.value):t.value),Br(()=>{var i=e();ir(t)&&i===ar(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}const nr=new Set;function rr(t,e,n,r,i=r){var a=n.getAttribute("type")==="checkbox",s=t;let o=!1;if(e!==null)for(var l of e)s=s[l]??(s[l]=[]);s.push(n),Fn(n,"change",()=>{var u=n.__value;a&&(u=pi(s,u,n.checked)),i(u)},()=>i(a?[]:null)),Br(()=>{var u=r();if(Lt&&n.defaultChecked!==n.checked){o=!0;return}a?(u=u||[],n.checked=u.includes(n.__value)):n.checked=ia(n.__value,u)}),Xs(()=>{var u=s.indexOf(n);u!==-1&&s.splice(u,1)}),nr.has(s)||(nr.add(s),xr(()=>{s.sort((u,h)=>u.compareDocumentPosition(h)===4?-1:1),nr.delete(s)})),xr(()=>{if(o){var u;if(a)u=pi(s,u,n.checked);else{var h=s.find(f=>f.checked);u=h==null?void 0:h.__value}i(u)}})}function $e(t,e,n=e){Fn(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),(Lt&&t.defaultChecked!==t.checked||ra(e)==null)&&n(t.checked),Br(()=>{var r=e();t.checked=!!r})}function pi(t,e,n){for(var r=new Set,i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function ir(t){var e=t.type;return e==="number"||e==="range"}function ar(t){return t===""?null:+t}function ca(t,e,n){if(t.multiple)return e==null?void 0:na(e)?so(t,e):Ys();for(var r of t.options){var i=Qe(r);if(ia(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ao(t,e){aa(()=>{var n=new MutationObserver(()=>{var r=t.__value;ca(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function gi(t,e,n=e){var r=!0;Fn(t,"change",i=>{var a=i?"[selected]":":checked",s;if(t.multiple)s=[].map.call(t.querySelectorAll(a),Qe);else{var o=t.querySelector(a)??t.querySelector("option:not([disabled])");s=o&&Qe(o)}n(s)}),aa(()=>{var i=e();if(ca(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Qe(a),n(i))}t.__value=i,r=!1}),ao(t)}function so(t,e){for(var n of t.options)n.selected=e.includes(Qe(n))}function Qe(t){return"__value"in t?t.__value:t.value}var mi={},sr={},or=34,Ve=10,lr=13;function fa(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function oo(t,e){var n=fa(t);return function(r,i){return e(n(r),i,t)}}function vi(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Et(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lo(t){return t<0?"-"+Et(-t,6):t>9999?"+"+Et(t,6):Et(t,4)}function uo(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":lo(t.getUTCFullYear())+"-"+Et(t.getUTCMonth()+1,2)+"-"+Et(t.getUTCDate(),2)+(i?"T"+Et(e,2)+":"+Et(n,2)+":"+Et(r,2)+"."+Et(i,3)+"Z":r?"T"+Et(e,2)+":"+Et(n,2)+":"+Et(r,2)+"Z":n||e?"T"+Et(e,2)+":"+Et(n,2)+"Z":"")}function co(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var g,x,S=i(f,function(p,v){if(g)return g(p,v-1);x=p,g=d?oo(p,d):fa(p)});return S.columns=x||[],S}function i(f,d){var g=[],x=f.length,S=0,p=0,v,y=x<=0,m=!1;f.charCodeAt(x-1)===Ve&&--x,f.charCodeAt(x-1)===lr&&--x;function w(){if(y)return sr;if(m)return m=!1,mi;var D,_=S,F;if(f.charCodeAt(_)===or){for(;S++<x&&f.charCodeAt(S)!==or||f.charCodeAt(++S)===or;);return(D=S)>=x?y=!0:(F=f.charCodeAt(S++))===Ve?m=!0:F===lr&&(m=!0,f.charCodeAt(S)===Ve&&++S),f.slice(_+1,D-1).replace(/""/g,'"')}for(;S<x;){if((F=f.charCodeAt(D=S++))===Ve)m=!0;else if(F===lr)m=!0,f.charCodeAt(S)===Ve&&++S;else if(F!==n)continue;return f.slice(_,D)}return y=!0,f.slice(_,x)}for(;(v=w())!==sr;){for(var b=[];v!==mi&&v!==sr;)b.push(v),v=w();d&&(b=d(b,p++))==null||g.push(b)}return g}function a(f,d){return f.map(function(g){return d.map(function(x){return h(g[x])}).join(t)})}function s(f,d){return d==null&&(d=vi(f)),[d.map(h).join(t)].concat(a(f,d)).join(`
`)}function o(f,d){return d==null&&(d=vi(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?uo(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:o,formatRows:l,formatRow:u,formatValue:h}}var fo=co(","),ho=fo.parse;function po(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function go(t,e){return fetch(t,e).then(po)}function mo(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),go(e,n).then(function(i){return t(i,r)})}}var vo=mo(ho);function yi(t){return Object.prototype.toString.call(t)==="[object Date]"}function yo(t){return t}function xo(t){const e=t-1;return e*e*e+1}function br(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,a)=>br(t[a],i));return i=>r.map(a=>a(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(yi(t)&&yi(e)){const a=t.getTime(),o=e.getTime()-a;return l=>new Date(a+l*o)}const r=Object.keys(e),i={};return r.forEach(a=>{i[a]=br(t[a],e[a])}),a=>{const s={};return r.forEach(o=>{s[o]=i[o](a)}),s}}if(n==="number"){const r=e-t;return i=>t+i*r}return()=>e}function bo(t,e={}){const n=Ws(t);let r,i=t;function a(s,o){if(i=s,t==null)return n.set(t=s),Promise.resolve();let l=r,u=!1,{delay:h=0,duration:f=400,easing:d=yo,interpolate:g=br}={...e,...o};if(f===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const x=Gt.now()+h;let S;return r=io(p=>{if(p<x)return!0;u||(S=g(t,s),typeof f=="function"&&(f=f(t,s)),u=!0),l&&(l.abort(),l=null);const v=p-x;return v>f?(n.set(t=s),!1):(n.set(t=S(d(v/f))),!0)}),r.promise}return{set:a,update:(s,o)=>a(s(i,t),o),subscribe:n.subscribe}}var _o=lt('<div class="text-center"><h2 class="text-4xl font-extrabold tracking-tight tabular-nums svelte-19d6zus"> </h2> <p class="text-xs tracking-wide text-gray-500 uppercase"> </p></div>'),wo=lt('<div class="mt-6 flex flex-wrap justify-center gap-8"></div>');function ko(t,e){de(e,!0);let n=Pt(e,"duration",3,1200);const r=Us(()=>e.stats.map(()=>bo(0,{duration:n(),easing:xo})));Re(()=>{let a=0;e.stats.forEach(({value:s},o)=>{setTimeout(()=>c(r)[o].set(s),a),a+=n()+400})});var i=wo();oa(i,21,()=>e.stats,sa,(a,s,o)=>{let l=()=>c(s).label;var u=_o(),h=C(u),f=C(h,!0);E(h);var d=T(h,2),g=C(d,!0);E(d),E(u),Vt(()=>{ct(f,e.stats[o].value),ct(g,l())}),st(a,u)}),E(i),st(t,i),pe()}var _r="http://www.w3.org/1999/xhtml";const xi={svg:"http://www.w3.org/2000/svg",xhtml:_r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xi.hasOwnProperty(e)?{space:xi[e],local:t}:t}function Ao(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_r&&e.documentElement.namespaceURI===_r?e.createElement(t):e.createElementNS(n,t)}}function Mo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ha(t){var e=Rn(t);return(e.local?Mo:Ao)(e)}function $o(){}function Hr(t){return t==null?$o:function(){return this.querySelector(t)}}function So(t){typeof t!="function"&&(t=Hr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,u,h=0;h<s;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),o[h]=u);return new zt(r,this._parents)}function Eo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function No(){return[]}function da(t){return t==null?No:function(){return this.querySelectorAll(t)}}function Co(t){return function(){return Eo(t.apply(this,arguments))}}function To(t){typeof t=="function"?t=Co(t):t=da(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(t.call(l,l.__data__,u,s)),i.push(l));return new zt(r,i)}function pa(t){return function(){return this.matches(t)}}function ga(t){return function(e){return e.matches(t)}}var Fo=Array.prototype.find;function Io(t){return function(){return Fo.call(this.children,t)}}function Ro(){return this.firstElementChild}function Do(t){return this.select(t==null?Ro:Io(typeof t=="function"?t:ga(t)))}var Po=Array.prototype.filter;function zo(){return Array.from(this.children)}function qo(t){return function(){return Po.call(this.children,t)}}function Lo(t){return this.selectAll(t==null?zo:qo(typeof t=="function"?t:ga(t)))}function Bo(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new zt(r,this._parents)}function ma(t){return new Array(t.length)}function Oo(){return new zt(this._enter||this._groups.map(ma),this._parents)}function _n(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_n.prototype={constructor:_n,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ho(t){return function(){return t}}function Vo(t,e,n,r,i,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new _n(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Xo(t,e,n,r,i,a,s){var o,l,u=new Map,h=e.length,f=a.length,d=new Array(h),g;for(o=0;o<h;++o)(l=e[o])&&(d[o]=g=s.call(l,l.__data__,o,e)+"",u.has(g)?i[o]=l:u.set(g,l));for(o=0;o<f;++o)g=s.call(t,a[o],o,a)+"",(l=u.get(g))?(r[o]=l,l.__data__=a[o],u.delete(g)):n[o]=new _n(t,a[o]);for(o=0;o<h;++o)(l=e[o])&&u.get(d[o])===l&&(i[o]=l)}function Yo(t){return t.__data__}function Uo(t,e){if(!arguments.length)return Array.from(this,Yo);var n=e?Xo:Vo,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ho(t));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],d=f.length,g=Go(t.call(h,h&&h.__data__,u,r)),x=g.length,S=o[u]=new Array(x),p=s[u]=new Array(x),v=l[u]=new Array(d);n(h,f,S,p,v,g,e);for(var y=0,m=0,w,b;y<x;++y)if(w=S[y]){for(y>=m&&(m=y+1);!(b=p[m])&&++m<x;);w._next=b||null}}return s=new zt(s,r),s._enter=o,s._exit=l,s}function Go(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Wo(){return new zt(this._exit||this._groups.map(ma),this._parents)}function Ko(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Qo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=n[l],h=r[l],f=u.length,d=o[l]=new Array(f),g,x=0;x<f;++x)(g=u[x]||h[x])&&(d[x]=g);for(;l<i;++l)o[l]=n[l];return new zt(o,this._parents)}function Zo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Jo(t){t||(t=jo);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),u,h=0;h<o;++h)(u=s[h])&&(l[h]=u);l.sort(e)}return new zt(i,this._parents).order()}function jo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function tl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function el(){return Array.from(this)}function nl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function rl(){let t=0;for(const e of this)++t;return t}function il(){return!this.node()}function al(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function sl(t){return function(){this.removeAttribute(t)}}function ol(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ll(t,e){return function(){this.setAttribute(t,e)}}function ul(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function cl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function fl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hl(t,e){var n=Rn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ol:sl:typeof e=="function"?n.local?fl:cl:n.local?ul:ll)(n,e))}function va(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dl(t){return function(){this.style.removeProperty(t)}}function pl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function gl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ml(t,e,n){return arguments.length>1?this.each((e==null?dl:typeof e=="function"?gl:pl)(t,e,n??"")):Ne(this.node(),t)}function Ne(t,e){return t.style.getPropertyValue(e)||va(t).getComputedStyle(t,null).getPropertyValue(e)}function vl(t){return function(){delete this[t]}}function yl(t,e){return function(){this[t]=e}}function xl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function bl(t,e){return arguments.length>1?this.each((e==null?vl:typeof e=="function"?xl:yl)(t,e)):this.node()[t]}function ya(t){return t.trim().split(/^|\s+/)}function Vr(t){return t.classList||new xa(t)}function xa(t){this._node=t,this._names=ya(t.getAttribute("class")||"")}xa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ba(t,e){for(var n=Vr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function _a(t,e){for(var n=Vr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function _l(t){return function(){ba(this,t)}}function wl(t){return function(){_a(this,t)}}function kl(t,e){return function(){(e.apply(this,arguments)?ba:_a)(this,t)}}function Al(t,e){var n=ya(t+"");if(arguments.length<2){for(var r=Vr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?kl:e?_l:wl)(n,e))}function Ml(){this.textContent=""}function $l(t){return function(){this.textContent=t}}function Sl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function El(t){return arguments.length?this.each(t==null?Ml:(typeof t=="function"?Sl:$l)(t)):this.node().textContent}function Nl(){this.innerHTML=""}function Cl(t){return function(){this.innerHTML=t}}function Tl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Fl(t){return arguments.length?this.each(t==null?Nl:(typeof t=="function"?Tl:Cl)(t)):this.node().innerHTML}function Il(){this.nextSibling&&this.parentNode.appendChild(this)}function Rl(){return this.each(Il)}function Dl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pl(){return this.each(Dl)}function zl(t){var e=typeof t=="function"?t:ha(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ql(){return null}function Ll(t,e){var n=typeof t=="function"?t:ha(t),r=e==null?ql:typeof e=="function"?e:Hr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bl(){var t=this.parentNode;t&&t.removeChild(this)}function Ol(){return this.each(Bl)}function Hl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xl(t){return this.select(t?Vl:Hl)}function Yl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ul(t){return function(e){t.call(this,e,this.__data__)}}function Gl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Wl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Kl(t,e,n){return function(){var r=this.__on,i,a=Ul(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Ql(t,e,n){var r=Gl(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,h;l<u;++l)for(i=0,h=o[l];i<a;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(o=e?Kl:Wl,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function wa(t,e,n){var r=va(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Zl(t,e){return function(){return wa(this,t,e)}}function Jl(t,e){return function(){return wa(this,t,e.apply(this,arguments))}}function jl(t,e){return this.each((typeof e=="function"?Jl:Zl)(t,e))}function*tu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var ka=[null];function zt(t,e){this._groups=t,this._parents=e}function Pe(){return new zt([[document.documentElement]],ka)}function eu(){return this}zt.prototype=Pe.prototype={constructor:zt,select:So,selectAll:To,selectChild:Do,selectChildren:Lo,filter:Bo,data:Uo,enter:Oo,exit:Wo,join:Ko,merge:Qo,selection:eu,order:Zo,sort:Jo,call:tl,nodes:el,node:nl,size:rl,empty:il,each:al,attr:hl,style:ml,property:bl,classed:Al,text:El,html:Fl,raise:Rl,lower:Pl,append:zl,insert:Ll,remove:Ol,clone:Xl,datum:Yl,on:Ql,dispatch:jl,[Symbol.iterator]:tu};function Z(t){return typeof t=="string"?new zt([[document.querySelector(t)]],[document.documentElement]):new zt([[t]],ka)}function nu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bi(t,e){if(t=nu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Se(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Aa(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ma(t){let e,n,r;t.length!==2?(e=Se,n=(o,l)=>Se(t(o),l),r=(o,l)=>t(o)-l):(e=t===Se||t===Aa?t:ru,n=t,r=t);function i(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(o[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function s(o,l,u=0,h=o.length){const f=i(o,l,u,h-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function ru(){return 0}function iu(t){return t===null?NaN:+t}function*au(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const su=Ma(Se),$a=su.right;Ma(iu).center;function ou(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function gn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class wr extends Map{constructor(e,n=cu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(_i(this,e))}has(e){return super.has(_i(this,e))}set(e,n){return super.set(lu(this,e),n)}delete(e){return super.delete(uu(this,e))}}function _i({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lu({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function uu({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cu(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Sa(t){return t}function fu(t,e,...n){return hu(t,Sa,e,n)}function hu(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const o=new wr,l=r[s++];let u=-1;for(const h of a){const f=l(h,++u,a),d=o.get(f);d?d.push(h):o.set(f,[h])}for(const[h,f]of o)o.set(h,i(f,s));return e(o)}(t,0)}function du(t=Se){if(t===Se)return Ea;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ea(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var pu=Array.prototype,gu=pu.slice;function ur(t){return()=>t}const mu=Math.sqrt(50),vu=Math.sqrt(10),yu=Math.sqrt(2);function wn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=mu?10:a>=vu?5:a>=yu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?wn(t,e,n*2):[o,l,u]}function Na(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?wn(e,t,n):wn(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Ce(t,e,n){return e=+e,t=+t,n=+n,wn(t,e,n)[2]}function xu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ce(e,t,n):Ce(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function bu(t,e,n){let r;for(;;){const i=Ce(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function _u(t){return Math.max(1,Math.ceil(Math.log(ou(t))/Math.LN2)+1)}function wu(){var t=Sa,e=gn,n=_u;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,o,l,u=new Array(s);for(a=0;a<s;++a)u[a]=t(i[a],a,i);var h=e(u),f=h[0],d=h[1],g=n(u,f,d);if(!Array.isArray(g)){const m=d,w=+g;if(e===gn&&([f,d]=bu(f,d,w)),g=Na(f,d,w),g[0]<=f&&(l=Ce(f,d,w)),g[g.length-1]>=d)if(m>=d&&e===gn){const b=Ce(f,d,w);isFinite(b)&&(b>0?d=(Math.floor(d/b)+1)*b:b<0&&(d=(Math.ceil(d*-b)+1)/-b))}else g.pop()}for(var x=g.length,S=0,p=x;g[S]<=f;)++S;for(;g[p-1]>d;)--p;(S||p<x)&&(g=g.slice(S,p),x=p-S);var v=new Array(x+1),y;for(a=0;a<=x;++a)y=v[a]=[],y.x0=a>0?g[a-1]:f,y.x1=a<x?g[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[Math.min(x,Math.floor((o-f)/l))].push(i[a]);else if(l<0){for(a=0;a<s;++a)if((o=u[a])!=null&&f<=o&&o<=d){const m=Math.floor((f-o)*l);v[Math.min(x,m+(g[m]<=o))].push(i[a])}}}else for(a=0;a<s;++a)(o=u[a])!=null&&f<=o&&o<=d&&v[$a(g,o,0,x)].push(i[a]);return v}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:ur(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:ur([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:ur(Array.isArray(i)?gu.call(i):i),r):n},r}function Wt(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function kr(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ca(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Ea:du(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+d)),x=Math.min(r,Math.floor(e+(l-u)*f/l+d));Ca(t,e,g,x,i)}const a=t[e];let s=n,o=r;for(Xe(t,n,e),i(t[r],a)>0&&Xe(t,n,r);s<o;){for(Xe(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Xe(t,n,o):(++o,Xe(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Xe(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ze(t,e,n){if(t=Float64Array.from(au(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return kr(t);if(e>=1)return Wt(t);var r,i=(r-1)*e,a=Math.floor(i),s=Wt(Ca(t,a).subarray(0,a+1)),o=kr(t.subarray(a+1));return s+(o-s)*(i-a)}}function ku(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function mn(t,e){return Ze(t,.5,e)}function Au(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Mu(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Xr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $u(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const wi=Symbol("implicit");function Dn(){var t=new wr,e=[],n=[],r=wi;function i(a){let s=t.get(a);if(s===void 0){if(r!==wi)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new wr;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Dn(e,n).unknown(r)},Xr.apply(i,arguments),i}function Ta(){var t=Dn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,h=.5;delete t.unknown;function f(){var d=e().length,g=i<r,x=g?i:r,S=g?r:i;a=(S-x)/Math.max(1,d-l+u*2),o&&(a=Math.floor(a)),x+=(S-x-a*(d-l))*h,s=a*(1-l),o&&(x=Math.round(x),s=Math.round(s));var p=Au(d).map(function(v){return x+a*v});return n(g?p.reverse():p)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(d){return arguments.length?(o=!!d,f()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},t.copy=function(){return Ta(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(h)},Xr.apply(f(),arguments)}function Yr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fa(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function en(){}var Je=.7,kn=1/Je,Ee="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Su=/^#([0-9a-f]{3,8})$/,Eu=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Nu=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),Cu=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${je}\\)$`),Tu=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${je}\\)$`),Fu=new RegExp(`^hsl\\(${je},${Kt},${Kt}\\)$`),Iu=new RegExp(`^hsla\\(${je},${Kt},${Kt},${je}\\)$`),ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yr(en,ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ai,formatHex:Ai,formatHex8:Ru,formatHsl:Du,formatRgb:Mi,toString:Mi});function Ai(){return this.rgb().formatHex()}function Ru(){return this.rgb().formatHex8()}function Du(){return Ia(this).formatHsl()}function Mi(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Su.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$i(e):n===3?new Tt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Eu.exec(t))?new Tt(e[1],e[2],e[3],1):(e=Nu.exec(t))?new Tt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Cu.exec(t))?fn(e[1],e[2],e[3],e[4]):(e=Tu.exec(t))?fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fu.exec(t))?Ni(e[1],e[2]/100,e[3]/100,1):(e=Iu.exec(t))?Ni(e[1],e[2]/100,e[3]/100,e[4]):ki.hasOwnProperty(t)?$i(ki[t]):t==="transparent"?new Tt(NaN,NaN,NaN,0):null}function $i(t){return new Tt(t>>16&255,t>>8&255,t&255,1)}function fn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Tt(t,e,n,r)}function Pu(t){return t instanceof en||(t=ce(t)),t?(t=t.rgb(),new Tt(t.r,t.g,t.b,t.opacity)):new Tt}function An(t,e,n,r){return arguments.length===1?Pu(t):new Tt(t,e,n,r??1)}function Tt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Yr(Tt,An,Fa(en,{brighter(t){return t=t==null?kn:Math.pow(kn,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Je:Math.pow(Je,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Tt(ue(this.r),ue(this.g),ue(this.b),Mn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Si,formatHex:Si,formatHex8:zu,formatRgb:Ei,toString:Ei}));function Si(){return`#${le(this.r)}${le(this.g)}${le(this.b)}`}function zu(){return`#${le(this.r)}${le(this.g)}${le(this.b)}${le((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ei(){const t=Mn(this.opacity);return`${t===1?"rgb(":"rgba("}${ue(this.r)}, ${ue(this.g)}, ${ue(this.b)}${t===1?")":`, ${t})`}`}function Mn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ue(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function le(t){return t=ue(t),(t<16?"0":"")+t.toString(16)}function Ni(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ht(t,e,n,r)}function Ia(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(t instanceof en||(t=ce(t)),!t)return new Ht;if(t instanceof Ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Ht(s,o,l,t.opacity)}function qu(t,e,n,r){return arguments.length===1?Ia(t):new Ht(t,e,n,r??1)}function Ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yr(Ht,qu,Fa(en,{brighter(t){return t=t==null?kn:Math.pow(kn,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Je:Math.pow(Je,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Tt(cr(t>=240?t-240:t+120,i,r),cr(t,i,r),cr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ht(Ci(this.h),hn(this.s),hn(this.l),Mn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ci(this.h)}, ${hn(this.s)*100}%, ${hn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ci(t){return t=(t||0)%360,t<0?t+360:t}function hn(t){return Math.max(0,Math.min(1,t||0))}function cr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Lu(t,e,n,r,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*n+(1+3*t+3*a-3*s)*r+s*i)/6}function Bu(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],s=r>0?t[r-1]:2*i-a,o=r<e-1?t[r+2]:2*a-i;return Lu((n-r/e)*e,s,i,a,o)}}const Ur=t=>()=>t;function Ou(t,e){return function(n){return t+n*e}}function Hu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Vu(t){return(t=+t)==1?Ra:function(e,n){return n-e?Hu(e,n,t):Ur(isNaN(e)?n:e)}}function Ra(t,e){var n=e-t;return n?Ou(t,n):Ur(isNaN(t)?e:t)}const $n=function t(e){var n=Vu(e);function r(i,a){var s=n((i=An(i)).r,(a=An(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=Ra(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=o(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function Xu(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=An(e[s]),r[s]=o.r||0,i[s]=o.g||0,a[s]=o.b||0;return r=t(r),i=t(i),a=t(a),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=a(l),o+""}}}var Yu=Xu(Bu);function Uu(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Gu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wu(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=nn(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ku(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ot(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qu(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ar=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fr=new RegExp(Ar.source,"g");function Zu(t){return function(){return t}}function Ju(t){return function(e){return t(e)+""}}function Da(t,e){var n=Ar.lastIndex=fr.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Ar.exec(t))&&(i=fr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Ot(r,i)})),n=fr.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Ju(l[0].x):Zu(e):(e=l.length,function(u){for(var h=0,f;h<e;++h)o[(f=l[h]).i]=f.x(u);return o.join("")})}function nn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ur(e):(n==="number"?Ot:n==="string"?(r=ce(e))?(e=r,$n):Da:e instanceof ce?$n:e instanceof Date?Ku:Gu(e)?Uu:Array.isArray(e)?Wu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qu:Ot)(t,e)}function Pa(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ti=180/Math.PI,Mr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function za(t,e,n,r,i,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Ti,skewX:Math.atan(l)*Ti,scaleX:s,scaleY:o}}var dn;function ju(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mr:za(e.a,e.b,e.c,e.d,e.e,e.f)}function tc(t){return t==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),!(t=dn.transform.baseVal.consolidate()))?Mr:(t=t.matrix,za(t.a,t.b,t.c,t.d,t.e,t.f))}function qa(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,g,x){if(u!==f||h!==d){var S=g.push("translate(",null,e,null,n);x.push({i:S-4,x:Ot(u,f)},{i:S-2,x:Ot(h,d)})}else(f||d)&&g.push("translate("+f+e+d+n)}function s(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ot(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function o(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ot(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function l(u,h,f,d,g,x){if(u!==f||h!==d){var S=g.push(i(g)+"scale(",null,",",null,")");x.push({i:S-4,x:Ot(u,f)},{i:S-2,x:Ot(h,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),s(u.rotate,h.rotate,f,d),o(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(g){for(var x=-1,S=d.length,p;++x<S;)f[(p=d[x]).i]=p.x(g);return f.join("")}}}var ec=qa(ju,"px, ","px)","deg)"),nc=qa(tc,", ",")",")");function rc(t){return function(){return t}}function ic(t){return+t}var Fi=[0,1];function re(t){return t}function $r(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rc(isNaN(e)?NaN:.5)}function ac(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function sc(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=$r(i,r),a=n(s,a)):(r=$r(r,i),a=n(a,s)),function(o){return a(r(o))}}function oc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=$r(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=$a(t,o,1,r)-1;return a[l](i[l](o))}}function lc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function uc(){var t=Fi,e=Fi,n=nn,r,i,a,s=re,o,l,u;function h(){var d=Math.min(t.length,e.length);return s!==re&&(s=ac(t[0],t[d-1])),o=d>2?oc:sc,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(t.map(r),e,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=o(e,t.map(r),Ot)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,ic),h()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Pa,h()},f.clamp=function(d){return arguments.length?(s=d?!0:re,h()):s!==re},f.interpolate=function(d){return arguments.length?(n=d,h()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,g){return r=d,i=g,h()}}function cc(){return uc()(re,re)}function fc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Te(t){return t=Sn(Math.abs(t)),t?t[1]:NaN}function hc(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function dc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function En(t){if(!(e=pc.exec(t)))throw new Error("invalid format: "+t);var e;return new Gr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}En.prototype=Gr.prototype;function Gr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Gr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var La;function mc(t,e){var n=Sn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(La=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Sn(t,Math.max(0,e+a-1))[0]}function Ii(t,e){var n=Sn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ri={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:fc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ii(t*100,e),r:Ii,s:mc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Di(t){return t}var Pi=Array.prototype.map,zi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vc(t){var e=t.grouping===void 0||t.thousands===void 0?Di:hc(Pi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Di:dc(Pi.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=En(f);var d=f.fill,g=f.align,x=f.sign,S=f.symbol,p=f.zero,v=f.width,y=f.comma,m=f.precision,w=f.trim,b=f.type;b==="n"?(y=!0,b="g"):Ri[b]||(m===void 0&&(m=12),w=!0,b="g"),(p||d==="0"&&g==="=")&&(p=!0,d="0",g="=");var D=S==="$"?n:S==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_=S==="$"?r:/[%p]/.test(b)?s:"",F=Ri[b],k=/[defgprs%]/.test(b);m=m===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function M($){var L=D,A=_,N,K,R;if(b==="c")A=F($)+A,$="";else{$=+$;var B=$<0||1/$<0;if($=isNaN($)?l:F(Math.abs($),m),w&&($=gc($)),B&&+$==0&&x!=="+"&&(B=!1),L=(B?x==="("?x:o:x==="-"||x==="("?"":x)+L,A=(b==="s"?zi[8+La/3]:"")+A+(B&&x==="("?")":""),k){for(N=-1,K=$.length;++N<K;)if(R=$.charCodeAt(N),48>R||R>57){A=(R===46?i+$.slice(N+1):$.slice(N))+A,$=$.slice(0,N);break}}}y&&!p&&($=e($,1/0));var U=L.length+$.length+A.length,O=U<v?new Array(v-U+1).join(d):"";switch(y&&p&&($=e(O+$,O.length?v-A.length:1/0),O=""),g){case"<":$=L+$+A+O;break;case"=":$=L+O+$+A;break;case"^":$=O.slice(0,U=O.length>>1)+L+$+A+O.slice(U);break;default:$=O+L+$+A;break}return a($)}return M.toString=function(){return f+""},M}function h(f,d){var g=u((f=En(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Te(d)/3)))*3,S=Math.pow(10,-x),p=zi[8+x/3];return function(v){return g(S*v)+p}}return{format:u,formatPrefix:h}}var pn,Ct,Ba;yc({thousands:",",grouping:[3],currency:["$",""]});function yc(t){return pn=vc(t),Ct=pn.format,Ba=pn.formatPrefix,pn}function xc(t){return Math.max(0,-Te(Math.abs(t)))}function bc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Te(e)/3)))*3-Te(Math.abs(t)))}function _c(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Te(e)-Te(t))+1}function wc(t,e,n,r){var i=xu(t,e,n),a;switch(r=En(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=bc(i,s))&&(r.precision=a),Ba(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_c(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=xc(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ct(r)}function Oa(t){var e=t.domain;return t.ticks=function(n){var r=e();return Na(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wc(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,h=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);h-- >0;){if(u=Ce(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function fe(){var t=cc();return t.copy=function(){return lc(t,fe())},Xr.apply(t,arguments),Oa(t)}function kc(){var t=0,e=1,n,r,i,a,s=re,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function h(f){return function(d){var g,x;return arguments.length?([g,x]=d,s=f(g,x),u):[s(0),s(1)]}}return u.range=h(nn),u.rangeRound=h(Pa),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ac(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ha(){var t=Oa(kc()(re));return t.copy=function(){return Ac(t,Ha())},$u.apply(t,arguments)}function Mc(t){return t}var hr=1,dr=2,Sr=3,Ue=4,qi=1e-6;function $c(t){return"translate("+t+",0)"}function Sc(t){return"translate(0,"+t+")"}function Ec(t){return e=>+t(e)}function Nc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Cc(){return!this.__axis}function Va(t,e){var n=[],r=null,i=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===hr||t===Ue?-1:1,h=t===Ue||t===dr?"x":"y",f=t===hr||t===Sr?$c:Sc;function d(g){var x=r??(e.ticks?e.ticks.apply(e,n):e.domain()),S=i??(e.tickFormat?e.tickFormat.apply(e,n):Mc),p=Math.max(a,0)+o,v=e.range(),y=+v[0]+l,m=+v[v.length-1]+l,w=(e.bandwidth?Nc:Ec)(e.copy(),l),b=g.selection?g.selection():g,D=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(x,e).order(),F=_.exit(),k=_.enter().append("g").attr("class","tick"),M=_.select("line"),$=_.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),M=M.merge(k.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),$=$.merge(k.append("text").attr("fill","currentColor").attr(h,u*p).attr("dy",t===hr?"0em":t===Sr?"0.71em":"0.32em")),g!==b&&(D=D.transition(g),_=_.transition(g),M=M.transition(g),$=$.transition(g),F=F.transition(g).attr("opacity",qi).attr("transform",function(L){return isFinite(L=w(L))?f(L+l):this.getAttribute("transform")}),k.attr("opacity",qi).attr("transform",function(L){var A=this.parentNode.__axis;return f((A&&isFinite(A=A(L))?A:w(L))+l)})),F.remove(),D.attr("d",t===Ue||t===dr?s?"M"+u*s+","+y+"H"+l+"V"+m+"H"+u*s:"M"+l+","+y+"V"+m:s?"M"+y+","+u*s+"V"+l+"H"+m+"V"+u*s:"M"+y+","+l+"H"+m),_.attr("opacity",1).attr("transform",function(L){return f(w(L)+l)}),M.attr(h+"2",u*a),$.attr(h,u*p).text(S),b.filter(Cc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===dr?"start":t===Ue?"end":"middle"),b.each(function(){this.__axis=w})}return d.scale=function(g){return arguments.length?(e=g,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),d):n.slice()},d.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),d):r&&r.slice()},d.tickFormat=function(g){return arguments.length?(i=g,d):i},d.tickSize=function(g){return arguments.length?(a=s=+g,d):a},d.tickSizeInner=function(g){return arguments.length?(a=+g,d):a},d.tickSizeOuter=function(g){return arguments.length?(s=+g,d):s},d.tickPadding=function(g){return arguments.length?(o=+g,d):o},d.offset=function(g){return arguments.length?(l=+g,d):l},d}function Pn(t){return Va(Sr,t)}function Wr(t){return Va(Ue,t)}function ke(t){return function(){return t}}const Er=Math.PI,Nr=2*Er,oe=1e-6,Tc=Nr-oe;function Xa(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xa;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ic{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xa:Fc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,h=s-e,f=o-n,d=h*h+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>oe)if(!(Math.abs(f*l-u*h)>oe)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,x=i-o,S=l*l+u*u,p=g*g+x*x,v=Math.sqrt(S),y=Math.sqrt(d),m=a*Math.tan((Er-Math.acos((S+d-p)/(2*v*y)))/2),w=m/y,b=m/v;Math.abs(w-1)>oe&&this._append`L${e+w*h},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*g>h*x)},${this._x1=e+b*l},${this._y1=n+b*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,h=n+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>oe||Math.abs(this._y1-h)>oe)&&this._append`L${u},${h}`,r&&(d<0&&(d=d%Nr+Nr),d>Tc?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=h}`:d>oe&&this._append`A${r},${r},0,${+(d>=Er)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Rc(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ic(e)}function Dc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ya(t){this._context=t}Ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Pc(t){return new Ya(t)}function zc(t){return t[0]}function qc(t){return t[1]}function Lc(t,e){var n=ke(!0),r=null,i=Pc,a=null,s=Rc(o);t=typeof t=="function"?t:t===void 0?zc:ke(t),e=typeof e=="function"?e:e===void 0?qc:ke(e);function o(l){var u,h=(l=Dc(l)).length,f,d=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=h;++u)!(u<h&&n(f=l[u],u,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:ke(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ke(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}var Bc={value:()=>{}};function Kr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new vn(n)}function vn(t){this._=t}function Oc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}vn.prototype=Kr.prototype={constructor:vn,on:function(t,e){var n=this._,r=Oc(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Hc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Li(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Li(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Hc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Li(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const Cr={capture:!0,passive:!1};function Tr(t){t.preventDefault(),t.stopImmediatePropagation()}function Vc(t){var e=t.document.documentElement,n=Z(t).on("dragstart.drag",Tr,Cr);"onselectstart"in e?n.on("selectstart.drag",Tr,Cr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xc(t,e){var n=t.document.documentElement,r=Z(t).on("dragstart.drag",null);e&&(r.on("click.drag",Tr,Cr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Fe=0,Ge=0,Ye=0,Ua=1e3,Nn,We,Cn=0,he=0,zn=0,tn=typeof performance=="object"&&performance.now?performance:Date,Ga=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qr(){return he||(Ga(Yc),he=tn.now()+zn)}function Yc(){he=0}function Tn(){this._call=this._time=this._next=null}Tn.prototype=Wa.prototype={constructor:Tn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qr():+n)+(e==null?0:+e),!this._next&&We!==this&&(We?We._next=this:Nn=this,We=this),this._call=t,this._time=n,Fr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fr())}};function Wa(t,e,n){var r=new Tn;return r.restart(t,e,n),r}function Uc(){Qr(),++Fe;for(var t=Nn,e;t;)(e=he-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fe}function Bi(){he=(Cn=tn.now())+zn,Fe=Ge=0;try{Uc()}finally{Fe=0,Wc(),he=0}}function Gc(){var t=tn.now(),e=t-Cn;e>Ua&&(zn-=e,Cn=t)}function Wc(){for(var t,e=Nn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nn=n);We=t,Fr(r)}function Fr(t){if(!Fe){Ge&&(Ge=clearTimeout(Ge));var e=t-he;e>24?(t<1/0&&(Ge=setTimeout(Bi,t-tn.now()-zn)),Ye&&(Ye=clearInterval(Ye))):(Ye||(Cn=tn.now(),Ye=setInterval(Gc,Ua)),Fe=1,Ga(Bi))}}function Oi(t,e,n){var r=new Tn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Kc=Kr("start","end","cancel","interrupt"),Qc=[],Ka=0,Hi=1,Ir=2,yn=3,Vi=4,Rr=5,xn=6;function qn(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Zc(t,n,{name:e,index:r,group:i,on:Kc,tween:Qc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ka})}function Zr(t,e){var n=Xt(t,e);if(n.state>Ka)throw new Error("too late; already scheduled");return n}function Qt(t,e){var n=Xt(t,e);if(n.state>yn)throw new Error("too late; already running");return n}function Xt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Wa(a,0,n.time);function a(u){n.state=Hi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var h,f,d,g;if(n.state!==Hi)return l();for(h in r)if(g=r[h],g.name===n.name){if(g.state===yn)return Oi(s);g.state===Vi?(g.state=xn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[h]):+h<e&&(g.state=xn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[h])}if(Oi(function(){n.state===yn&&(n.state=Vi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Ir,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ir){for(n.state=yn,i=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(g=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function o(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Rr,1),f=-1,d=i.length;++f<d;)i[f].call(t,h);n.state===Rr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=xn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Dr(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>Ir&&r.state<Rr,r.state=xn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function Jc(t){return this.each(function(){Dr(this,t)})}function jc(t,e){var n,r;return function(){var i=Qt(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function tf(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Qt(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function ef(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Xt(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?jc:tf)(n,t,e))}function Jr(t,e,n){var r=t._id;return t.each(function(){var i=Qt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Xt(i,r).value[e]}}function Qa(t,e){var n;return(typeof e=="number"?Ot:e instanceof ce?$n:(n=ce(e))?(e=n,$n):Da)(t,e)}function nf(t){return function(){this.removeAttribute(t)}}function rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function af(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function sf(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function of(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function lf(t,e,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function uf(t,e){var n=Rn(t),r=n==="transform"?nc:Qa;return this.attrTween(t,typeof e=="function"?(n.local?lf:of)(n,r,Jr(this,"attr."+t,e)):e==null?(n.local?rf:nf)(n):(n.local?sf:af)(n,r,e))}function cf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ff(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hf(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ff(t,a)),n}return i._value=e,i}function df(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cf(t,a)),n}return i._value=e,i}function pf(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Rn(t);return this.tween(n,(r.local?hf:df)(r,e))}function gf(t,e){return function(){Zr(this,t).delay=+e.apply(this,arguments)}}function mf(t,e){return e=+e,function(){Zr(this,t).delay=e}}function vf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gf:mf)(e,t)):Xt(this.node(),e).delay}function yf(t,e){return function(){Qt(this,t).duration=+e.apply(this,arguments)}}function xf(t,e){return e=+e,function(){Qt(this,t).duration=e}}function bf(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?yf:xf)(e,t)):Xt(this.node(),e).duration}function _f(t,e){if(typeof e!="function")throw new Error;return function(){Qt(this,t).ease=e}}function wf(t){var e=this._id;return arguments.length?this.each(_f(e,t)):Xt(this.node(),e).ease}function kf(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qt(this,t).ease=n}}function Af(t){if(typeof t!="function")throw new Error;return this.each(kf(this._id,t))}function Mf(t){typeof t!="function"&&(t=pa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new te(r,this._parents,this._name,this._id)}function $f(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=n[o],h=l.length,f=s[o]=new Array(h),d,g=0;g<h;++g)(d=l[g]||u[g])&&(f[g]=d);for(;o<r;++o)s[o]=e[o];return new te(s,this._parents,this._name,this._id)}function Sf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ef(t,e,n){var r,i,a=Sf(e)?Zr:Qt;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function Nf(t,e){var n=this._id;return arguments.length<2?Xt(this.node(),n).on.on(t):this.each(Ef(n,t,e))}function Cf(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Tf(){return this.on("end.remove",Cf(this._id))}function Ff(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Hr(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),h,f,d=0;d<l;++d)(h=o[d])&&(f=t.call(h,h.__data__,d,o))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,qn(u[d],e,n,d,u,Xt(h,n)));return new te(a,this._parents,e,n)}function If(t){var e=this._name,n=this._id;typeof t!="function"&&(t=da(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=t.call(h,h.__data__,f,l),g,x=Xt(h,n),S=0,p=d.length;S<p;++S)(g=d[S])&&qn(g,e,n,S,d,x);a.push(d),s.push(h)}return new te(a,s,e,n)}var Rf=Pe.prototype.constructor;function Df(){return new Rf(this._groups,this._parents)}function Pf(t,e){var n,r,i;return function(){var a=Ne(this,t),s=(this.style.removeProperty(t),Ne(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Za(t){return function(){this.style.removeProperty(t)}}function zf(t,e,n){var r,i=n+"",a;return function(){var s=Ne(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function qf(t,e,n){var r,i,a;return function(){var s=Ne(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Ne(this,t))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function Lf(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var l=Qt(this,t),u=l.on,h=l.value[a]==null?o||(o=Za(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(s,i=h),l.on=r}}function Bf(t,e,n){var r=(t+="")=="transform"?ec:Qa;return e==null?this.styleTween(t,Pf(t,r)).on("end.style."+t,Za(t)):typeof e=="function"?this.styleTween(t,qf(t,r,Jr(this,"style."+t,e))).each(Lf(this._id,t)):this.styleTween(t,zf(t,r,e),n).on("end.style."+t,null)}function Of(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Hf(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Of(t,s,n)),r}return a._value=e,a}function Vf(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hf(t,e,n??""))}function Xf(t){return function(){this.textContent=t}}function Yf(t){return function(){var e=t(this);this.textContent=e??""}}function Uf(t){return this.tween("text",typeof t=="function"?Yf(Jr(this,"text",t)):Xf(t==null?"":t+""))}function Gf(t){return function(e){this.textContent=t.call(this,e)}}function Wf(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Gf(i)),e}return r._value=t,r}function Kf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wf(t))}function Qf(){for(var t=this._name,e=this._id,n=Ja(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var h=Xt(l,e);qn(l,t,n,u,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new te(r,this._parents,t,n)}function Zf(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=Qt(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&a()})}var Jf=0;function te(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Pr(t){return Pe().transition(t)}function Ja(){return++Jf}var Zt=Pe.prototype;te.prototype=Pr.prototype={constructor:te,select:Ff,selectAll:If,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:Mf,merge:$f,selection:Df,transition:Qf,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:Nf,attr:uf,attrTween:pf,style:Bf,styleTween:Vf,text:Uf,textTween:Kf,remove:Tf,tween:ef,delay:vf,duration:bf,ease:wf,easeVarying:Af,end:Zf,[Symbol.iterator]:Zt[Symbol.iterator]};function jf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var th={time:null,delay:0,duration:250,ease:jf};function eh(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nh(t){var e,n;t instanceof te?(e=t._id,t=t._name):(e=Ja(),(n=th).time=Qr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&qn(l,t,e,u,s,n||eh(l,e));return new te(r,this._parents,t,e)}Pe.prototype.interrupt=Jc;Pe.prototype.transition=nh;const pr=t=>()=>t;function rh(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ih(t){t.stopImmediatePropagation()}function gr(t){t.preventDefault(),t.stopImmediatePropagation()}var Xi={name:"drag"},mr={name:"space"},Ae={name:"handle"},Me={name:"center"};const{abs:Yi,max:wt,min:kt}=Math;function Ui(t){return[+t[0],+t[1]]}function Gi(t){return[Ui(t[0]),Ui(t[1])]}var bn={name:"x",handles:["w","e"].map(zr),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},vr={},Jt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ki={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ah={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sh={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function zr(t){return{type:t}}function oh(t){return!t.ctrlKey&&!t.button}function lh(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function yr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ch(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function fh(){return hh(bn)}function hh(t){var e=lh,n=oh,r=uh,i=!0,a=Kr("start","brush","end"),s=6,o;function l(p){var v=p.property("__brush",S).selectAll(".overlay").data([zr("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jt.overlay).merge(v).each(function(){var m=yr(this).extent;Z(this).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1])}),p.selectAll(".selection").data([zr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=p.selectAll(".handle").data(t.handles,function(m){return m.type});y.exit().remove(),y.enter().append("rect").attr("class",function(m){return"handle handle--"+m.type}).attr("cursor",function(m){return Jt[m.type]}),p.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(p,v,y){p.tween?p.on("start.brush",function(m){h(this,arguments).beforestart().start(m)}).on("interrupt.brush end.brush",function(m){h(this,arguments).end(m)}).tween("brush",function(){var m=this,w=m.__brush,b=h(m,arguments),D=w.selection,_=t.input(typeof v=="function"?v.apply(this,arguments):v,w.extent),F=nn(D,_);function k(M){w.selection=M===1&&_===null?null:F(M),u.call(m),b.brush()}return D!==null&&_!==null?k:k(1)}):p.each(function(){var m=this,w=arguments,b=m.__brush,D=t.input(typeof v=="function"?v.apply(m,w):v,b.extent),_=h(m,w).beforestart();Dr(m),b.selection=D===null?null:D,u.call(m),_.start(y).brush(y).end(y)})},l.clear=function(p,v){l.move(p,null,v)};function u(){var p=Z(this),v=yr(this).selection;v?(p.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?v[1][0]-s/2:v[0][0]-s/2}).attr("y",function(y){return y.type[0]==="s"?v[1][1]-s/2:v[0][1]-s/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?v[1][0]-v[0][0]+s:s}).attr("height",function(y){return y.type==="e"||y.type==="w"?v[1][1]-v[0][1]+s:s})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(p,v,y){var m=p.__brush.emitter;return m&&(!y||!m.clean)?m:new f(p,v,y)}function f(p,v,y){this.that=p,this.args=v,this.state=p.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,v){return this.starting?(this.starting=!1,this.emit("start",p,v)):this.emit("brush",p),this},brush:function(p,v){return this.emit("brush",p,v),this},end:function(p,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,v)),this},emit:function(p,v,y){var m=Z(this.that).datum();a.call(p,this.that,new rh(p,{sourceEvent:v,target:l,selection:t.output(this.state.selection),mode:y,dispatch:a}),m)}};function d(p){if(o&&!p.touches||!n.apply(this,arguments))return;var v=this,y=p.target.__data__.type,m=(i&&p.metaKey?y="overlay":y)==="selection"?Xi:i&&p.altKey?Me:Ae,w=t===vr?null:ah[y],b=t===bn?null:sh[y],D=yr(v),_=D.extent,F=D.selection,k=_[0][0],M,$,L=_[0][1],A,N,K=_[1][0],R,B,U=_[1][1],O,Y,I=0,V=0,nt,gt=w&&b&&i&&p.shiftKey,ht,J,rt=Array.from(p.touches||[p],z=>{const j=z.identifier;return z=bi(z,v),z.point0=z.slice(),z.identifier=j,z});Dr(v);var ot=h(v,arguments,!0).beforestart();if(y==="overlay"){F&&(nt=!0);const z=[rt[0],rt[1]||rt[0]];D.selection=F=[[M=t===vr?k:kt(z[0][0],z[1][0]),A=t===bn?L:kt(z[0][1],z[1][1])],[R=t===vr?K:wt(z[0][0],z[1][0]),O=t===bn?U:wt(z[0][1],z[1][1])]],rt.length>1&&q(p)}else M=F[0][0],A=F[0][1],R=F[1][0],O=F[1][1];$=M,N=A,B=R,Y=O;var ft=Z(v).attr("pointer-events","none"),yt=ft.selectAll(".overlay").attr("cursor",Jt[y]);if(p.touches)ot.moved=Yt,ot.ended=xt;else{var At=Z(p.view).on("mousemove.brush",Yt,!0).on("mouseup.brush",xt,!0);i&&At.on("keydown.brush",pt,!0).on("keyup.brush",tt,!0),Vc(p.view)}u.call(v),ot.start(p,m.name);function Yt(z){for(const j of z.changedTouches||[z])for(const dt of rt)dt.identifier===j.identifier&&(dt.cur=bi(j,v));if(gt&&!ht&&!J&&rt.length===1){const j=rt[0];Yi(j.cur[0]-j[0])>Yi(j.cur[1]-j[1])?J=!0:ht=!0}for(const j of rt)j.cur&&(j[0]=j.cur[0],j[1]=j.cur[1]);nt=!0,gr(z),q(z)}function q(z){const j=rt[0],dt=j.point0;var G;switch(I=j[0]-dt[0],V=j[1]-dt[1],m){case mr:case Xi:{w&&(I=wt(k-M,kt(K-R,I)),$=M+I,B=R+I),b&&(V=wt(L-A,kt(U-O,V)),N=A+V,Y=O+V);break}case Ae:{rt[1]?(w&&($=wt(k,kt(K,rt[0][0])),B=wt(k,kt(K,rt[1][0])),w=1),b&&(N=wt(L,kt(U,rt[0][1])),Y=wt(L,kt(U,rt[1][1])),b=1)):(w<0?(I=wt(k-M,kt(K-M,I)),$=M+I,B=R):w>0&&(I=wt(k-R,kt(K-R,I)),$=M,B=R+I),b<0?(V=wt(L-A,kt(U-A,V)),N=A+V,Y=O):b>0&&(V=wt(L-O,kt(U-O,V)),N=A,Y=O+V));break}case Me:{w&&($=wt(k,kt(K,M-I*w)),B=wt(k,kt(K,R+I*w))),b&&(N=wt(L,kt(U,A-V*b)),Y=wt(L,kt(U,O+V*b)));break}}B<$&&(w*=-1,G=M,M=R,R=G,G=$,$=B,B=G,y in Wi&&yt.attr("cursor",Jt[y=Wi[y]])),Y<N&&(b*=-1,G=A,A=O,O=G,G=N,N=Y,Y=G,y in Ki&&yt.attr("cursor",Jt[y=Ki[y]])),D.selection&&(F=D.selection),ht&&($=F[0][0],B=F[1][0]),J&&(N=F[0][1],Y=F[1][1]),(F[0][0]!==$||F[0][1]!==N||F[1][0]!==B||F[1][1]!==Y)&&(D.selection=[[$,N],[B,Y]],u.call(v),ot.brush(z,m.name))}function xt(z){if(ih(z),z.touches){if(z.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Xc(z.view,nt),At.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ft.attr("pointer-events","all"),yt.attr("cursor",Jt.overlay),D.selection&&(F=D.selection),ch(F)&&(D.selection=null,u.call(v)),ot.end(z,m.name)}function pt(z){switch(z.keyCode){case 16:{gt=w&&b;break}case 18:{m===Ae&&(w&&(R=B-I*w,M=$+I*w),b&&(O=Y-V*b,A=N+V*b),m=Me,q(z));break}case 32:{(m===Ae||m===Me)&&(w<0?R=B-I:w>0&&(M=$-I),b<0?O=Y-V:b>0&&(A=N-V),m=mr,yt.attr("cursor",Jt.selection),q(z));break}default:return}gr(z)}function tt(z){switch(z.keyCode){case 16:{gt&&(ht=J=gt=!1,q(z));break}case 18:{m===Me&&(w<0?R=B:w>0&&(M=$),b<0?O=Y:b>0&&(A=N),m=Ae,q(z));break}case 32:{m===mr&&(z.altKey?(w&&(R=B-I*w,M=$+I*w),b&&(O=Y-V*b,A=N+V*b),m=Me):(w<0?R=B:w>0&&(M=$),b<0?O=Y:b>0&&(A=N),m=Ae),yt.attr("cursor",Jt[y]),q(z));break}default:return}gr(z)}}function g(p){h(this,arguments).moved(p)}function x(p){h(this,arguments).ended(p)}function S(){var p=this.__brush||{selection:null};return p.extent=Gi(e.apply(this,arguments)),p.dim=t,p}return l.extent=function(p){return arguments.length?(e=typeof p=="function"?p:pr(Gi(p)),l):e},l.filter=function(p){return arguments.length?(n=typeof p=="function"?p:pr(!!p),l):n},l.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:pr(!!p),l):r},l.handleSize=function(p){return arguments.length?(s=+p,l):s},l.keyModifiers=function(p){return arguments.length?(i=!!p,l):i},l.on=function(){var p=a.on.apply(a,arguments);return p===a?l:p},l}var dh=lt('<div class="age-range-indicator svelte-mbf8ep"><span> </span> <button class="clear-btn svelte-mbf8ep">Clear filter</button></div>'),ph=lt('<span class="hint svelte-mbf8ep">Up through the 40-to-50 age range, female cases slightly outnumber males—likely reflecting a higher volume of elective and gynecologic‐related procedures in middle-aged women. After age 60, male surgical cases begin to exceed female, which may be driven by increased cardiovascular and oncologic interventions in older men.</span>'),gh=lt('<div class="age-distribution svelte-mbf8ep"><input type="checkbox" name="showBySexInternal" style="display: none;"/> <!> <div class="chart svelte-mbf8ep"><svg class="h-auto w-full"></svg></div> <div class="insights svelte-mbf8ep"><p class="insight-text svelte-mbf8ep"> <!></p></div></div>');function mh(t,e){de(e,!1);const n=X(),r=X();let i=Pt(e,"data",24,()=>[]),a=Pt(e,"showPercentage",8,!1),s=X(),o=X(!0),l=X([null,null]);const u=Qi();function h(_){const F=[..._].sort((A,N)=>A-N),k=mn(F)||0,M=Ze(F,.25)||0,$=Ze(F,.75)||0,L=$-M;return{median:k,q1:M,q3:$,iqr:L}}function f(){if(!i().length)return;Z(c(s)).selectAll("*").remove();const _={top:30,right:30,bottom:60,left:50},F=600-_.left-_.right,k=350-_.top-_.bottom,M=c(n).filter(q=>q.age!==void 0&&!isNaN(q.age)),$=M.map(q=>q.age),L=h($),A=i().filter(q=>q.age!==void 0&&!isNaN(q.age)).map(q=>q.age),N=fe().domain(gn(A)).nice().range([0,F]),K=wu().domain(N.domain()).thresholds(N.ticks(20));let R,B;const U=K($),O=M.length,Y=q=>a()?q.length/O*100:q.length,I=Wt(U,q=>Y(q))||0,V=M.filter(q=>q.sex==="M").map(q=>q.age),nt=M.filter(q=>q.sex==="F").map(q=>q.age),gt=K(V),ht=K(nt),J=Math.max(Wt(gt,q=>Y(q))||0,Wt(ht,q=>Y(q))||0),rt=Math.max(I,J);c(o)?R={male:gt,female:ht}:R=U,B=rt;const ot=fe().domain([0,B*1.1]).range([k,0]);Z("body").selectAll(".age-tooltip").data([0]).enter().append("div").attr("class","age-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","12px").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)");const ft=Z(c(s)).attr("viewBox",`0 0 ${F+_.left+_.right} ${k+_.top+_.bottom}`).append("g").attr("transform",`translate(${_.left},${_.top})`);if(c(o)){const q=Dn().domain(["Male","Female"]).range(["#4682b4","#db7093"]),xt=R,pt=Pr().duration(500),tt=ft.append("g").selectAll(".bar-male").data(xt.male).enter().append("rect").attr("class","bar-male").attr("x",G=>N(G.x0)).attr("width",G=>Math.max(0,N(G.x1)-N(G.x0)-1)).attr("y",k).attr("height",0).attr("fill",q("Male")).attr("opacity",.7).attr("stroke",q("Male")).attr("stroke-width",1);tt.transition(pt).attr("y",G=>ot(Y(G))).attr("height",G=>k-ot(Y(G)));const z=Z("body").select(".age-tooltip");tt.on("mouseover",function(G,Q){const bt=Q.length,qt=(bt/V.length*100).toFixed(1),Mt=`${Q.x0}-${Q.x1}`;z.transition().duration(200).style("opacity",.9),z.html(`
                            <strong>Age: ${Mt}</strong><br/>
                            <strong>Male</strong><br/>
                            Count: ${bt}<br/>
                            Percentage: ${qt}%
                        `).style("left",G.pageX+10+"px").style("top",G.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){z.transition().duration(500).style("opacity",0),Z(this).attr("stroke",q("Male")).attr("stroke-width",1)});const j=ft.append("g").selectAll(".bar-female").data(xt.female).enter().append("rect").attr("class","bar-female").attr("x",G=>N(G.x0)).attr("width",G=>Math.max(0,N(G.x1)-N(G.x0)-1)).attr("y",k).attr("height",0).attr("fill",q("Female")).attr("opacity",.7).attr("stroke",q("Female")).attr("stroke-width",1);j.transition(pt).attr("y",G=>ot(Y(G))).attr("height",G=>k-ot(Y(G))),j.on("mouseover",function(G,Q){const bt=Q.length,qt=(bt/nt.length*100).toFixed(1),Mt=`${Q.x0}-${Q.x1}`;z.transition().duration(200).style("opacity",.9),z.html(`
                            <strong>Age: ${Mt}</strong><br/>
                            <strong>Female</strong><br/>
                            Count: ${bt}<br/>
                            Percentage: ${qt}%
                        `).style("left",G.pageX+10+"px").style("top",G.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){z.transition().duration(500).style("opacity",0),Z(this).attr("stroke",q("Female")).attr("stroke-width",1)});const dt=ft.append("g").attr("class","legend").attr("transform",`translate(${F-100}, 10)`);["Male","Female"].forEach((G,Q)=>{dt.append("rect").attr("x",0).attr("y",Q*20).attr("width",15).attr("height",15).attr("fill",q(G)),dt.append("text").attr("x",20).attr("y",Q*20+12).text(G).style("font-size","12px")})}else{const q=Pr().duration(500),xt=ft.append("g").selectAll("rect").data(R).enter().append("rect").attr("x",tt=>N(tt.x0)).attr("width",tt=>Math.max(0,N(tt.x1)-N(tt.x0)-1)).attr("y",k).attr("height",0).attr("fill","steelblue").attr("stroke","white").attr("stroke-width",.5);xt.transition(q).attr("y",tt=>ot(Y(tt))).attr("height",tt=>k-ot(Y(tt)));const pt=Z("body").select(".age-tooltip");xt.on("mouseover",function(tt,z){const j=z.length,dt=(j/O*100).toFixed(1),G=`${z.x0}-${z.x1}`;pt.transition().duration(200).style("opacity",.9),pt.html(`
                        <strong>Age: ${G}</strong><br/>
                        Count: ${j}<br/>
                        Percentage: ${dt}%
                    `).style("left",tt.pageX+10+"px").style("top",tt.pageY-28+"px"),Z(this).attr("stroke","black").attr("stroke-width",2)}).on("mouseout",function(){pt.transition().duration(500).style("opacity",0),Z(this).attr("stroke","white").attr("stroke-width",.5)})}ft.append("g").attr("transform",`translate(0,${k})`).call(Pn(N).tickFormat(q=>`${q}`)).style("font-size","12px"),ft.append("g").call(Wr(ot)).style("font-size","12px"),ft.append("text").attr("x",F/2).attr("y",k+40).attr("text-anchor","middle").text(c(o)?"Age (years)":"Number of Cases").style("font-size","14px"),ft.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-35).attr("text-anchor","middle").text(a()?"Percentage of Cases (%)":"Number of Cases").style("font-size","14px"),ft.append("text").attr("x",F/2).attr("y",-10).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Age Distribution of Surgical Cases");const yt=N(L.median);ft.append("line").attr("x1",yt).attr("x2",yt).attr("y1",k).attr("y2",10).attr("stroke","red").attr("stroke-width",2).attr("stroke-dasharray","5,5"),ft.append("rect").attr("x",N(L.q1)).attr("width",N(L.q3)-N(L.q1)).attr("y",k+5).attr("height",10).attr("fill","rgba(255,0,0,0.3)"),ft.append("text").attr("x",yt).attr("y",5).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").text(`Median: ${Ct(".1f")(L.median)}`),ft.append("text").attr("x",(N(L.q1)+N(L.q3))/2).attr("y",k+25).attr("text-anchor","middle").style("font-size","12px").text(`IQR: ${Ct(".1f")(L.q1)} - ${Ct(".1f")(L.q3)}`),L.median>60&&ft.append("text").attr("x",F*.75).attr("y",k*.25).attr("text-anchor","middle").style("font-size","13px").style("font-style","italic").style("fill","#555").text("Aging patient population");const At=fh().extent([[0,0],[F,k]]).on("start brush",q=>{var xt,pt;if(q.selection){const[tt,z]=q.selection.map(dt=>Math.round(N.invert(dt))),j=Z("body").select(".age-tooltip");j.transition().duration(0).style("opacity",.9),j.html(`
                        <strong>Selecting Ages: ${tt} - ${z}</strong>
                    `).style("left",((xt=q.sourceEvent)==null?void 0:xt.pageX)+10+"px").style("top",((pt=q.sourceEvent)==null?void 0:pt.pageY)-28+"px")}}).on("end",q=>{if(Z("body").select(".age-tooltip").style("opacity",0),!q.selection){c(l)[0]!==null&&(P(l,[null,null]),setTimeout(()=>f(),0));return}const[xt,pt]=q.selection.map(z=>N.invert(z)),tt=[Math.round(xt),Math.round(pt)];(c(l)[0]!==tt[0]||c(l)[1]!==tt[1])&&(P(l,tt),setTimeout(()=>f(),0))}),Yt=ft.append("g").attr("class","brush").call(At);c(l)[0]!==null&&c(l)[1]!==null&&Yt.call(At.move,[N(c(l)[0]),N(c(l)[1])])}Re(()=>(f(),()=>{Z("body").selectAll(".age-tooltip").remove()})),Zi(f),at(()=>(c(l),mt(i())),()=>{P(n,c(l)[0]!==null&&c(l)[1]!==null?i().filter(_=>_.age!==void 0&&_.age>=c(l)[0]&&_.age<=c(l)[1]):i())}),at(()=>(c(n),mn),()=>{P(r,c(n).length&&mn(c(n).filter(_=>_.age!==void 0&&!isNaN(_.age)).map(_=>_.age))||0)}),at(()=>(c(l),c(n),mt(i())),()=>{c(l)[0]!==null?u("filter",{ageRange:c(l),data:c(n)}):c(n)===i()&&c(l)[0]===null&&u("filter",{ageRange:null,data:i()})}),De(),Ie();var d=gh(),g=C(d);_t(g);var x=T(g,2);{var S=_=>{var F=dh(),k=C(F),M=C(k);E(k);var $=T(k,2);E(F),Vt(()=>ct(M,`Age range: ${c(l)[0]??""}–${c(l)[1]??""}`)),ae("click",$,()=>{Z("body").select(".age-tooltip").style("opacity",0),P(l,[null,null]),setTimeout(()=>f(),0)}),st(_,F)};Nt(x,_=>{c(l)[0]!==null&&_(S)})}var p=T(x,2),v=C(p);In(v,_=>P(s,_),()=>c(s)),E(p);var y=T(p,2),m=C(y),w=C(m),b=T(w);{var D=_=>{var F=ph();st(_,F)};Nt(b,_=>{c(o)&&_(D)})}E(m),E(y),E(d),Vt(_=>ct(w,`Our surgical cases span six decades of life. The median age of ${_??""}
            suggests an aging population, with implications for surgical risk and recovery considerations. `),[()=>c(r).toFixed(1)],ie),$e(g,()=>c(o),_=>P(o,_)),ae("change",g,()=>{Z("body").select(".age-tooltip").style("opacity",0),f()}),st(t,d),pe()}var vh=lt('<div class="filter-notice svelte-8tboq5"><p class="svelte-8tboq5"><span class="filter-badge svelte-8tboq5">Filtered</span> Viewing <strong> </strong> cases only <button class="clear-filter svelte-8tboq5">Clear filter ×</button></p></div>'),yh=lt('<div class="insight-box svelte-8tboq5"><p class="insight-text svelte-8tboq5">Our patients span six decades, but <strong>95% of them cluster in just two surgical departments</strong>, setting the stage for wildly different baseline risks.</p></div>'),xh=lt('<div class="department-distribution svelte-8tboq5"><div class="chart svelte-8tboq5"><svg class="h-auto w-full"></svg></div> <!></div>');function bh(t,e){de(e,!1);let n=Pt(e,"data",24,()=>[]),r=Pt(e,"filteredDepartment",12,null),i=Pt(e,"showPercentage",8,!1),a=X(),s="Department Distribution of Surgical Cases";const o=Qi();function l(){if(!n().length)return;Z(c(a)).selectAll("*").remove();const p={top:30,right:30,bottom:60,left:60},v=600-p.left-p.right,y=350-p.top-p.bottom,m=fu(n(),A=>A.length,A=>A.department),w=Array.from(m,([A,N])=>({key:A,value:N})).sort((A,N)=>Aa(A.value,N.value)),b=Mu(w,A=>A.value),D=w.map(A=>({...A,percent:A.value/b*100})),_=D.slice(0,2);_.reduce((A,N)=>A+N.percent,0);const F=Ta().domain(w.map(A=>A.key)).range([0,v]).padding(.2),k=fe().domain([0,i()?Wt(D,A=>A.percent):Wt(w,A=>A.value)]).nice().range([y,0]),M=Z(c(a)).attr("viewBox",`0 0 ${v+p.left+p.right} ${y+p.top+p.bottom}`).append("g").attr("transform",`translate(${p.left},${p.top})`);M.append("text").attr("x",v/2).attr("y",-15).attr("text-anchor","middle").attr("class","chart-title").style("font-size","16px").style("font-weight","bold").text(s);const $=new Map;w.forEach(A=>{const N=n().filter(nt=>nt.department===A.key),K=N.filter(nt=>nt.sex==="M").length,R=N.filter(nt=>nt.sex==="F").length,B=K/A.value*100,U=R/A.value*100,O=N.filter(nt=>nt.age!==void 0&&!isNaN(nt.age)).map(nt=>nt.age),Y=O.length&&mn(O)||0,I=O.length&&Ze(O,.25)||0,V=O.length&&Ze(O,.75)||0;$.set(A.key,{maleCount:K,femaleCount:R,malePercent:B,femalePercent:U,medianAge:Y,q1:I,q3:V})});const L=Z("body").selectAll(".dept-tooltip").data([0]).enter().append("div").attr("class","dept-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("border-radius","5px").style("padding","10px").style("box-shadow","0 2px 5px rgba(0,0,0,0.2)").style("pointer-events","none").style("font-size","12px").style("z-index","10");M.append("g").selectAll("rect").data(D).enter().append("rect").attr("x",A=>F(A.key)).attr("y",A=>i()?k(A.percent):k(A.value)).attr("width",F.bandwidth()).attr("height",A=>i()?y-k(A.percent):y-k(A.value)).attr("fill",A=>r()===A.key?"#ff7f50":_.includes(A)?"#2a6d7c":"#5eb1c6").attr("stroke","#fff").attr("stroke-width",1).attr("class","dept-bar").style("cursor","pointer").on("mouseover",function(A,N){Z(this).transition().duration(200).attr("fill","#ff7f50");const K=$.get(N.key);L.html(`
					<div style="font-weight: bold; margin-bottom: 5px; color: #2a6d7c;">${N.key}</div>
					<div>Total cases: <b>${N.value}</b> (${Ct(".1f")(N.percent)}% of all)</div>
					${i()?`<div style="font-weight: bold; color: #2a6d7c; margin-top: 3px;">
							Showing as percentage: ${Ct(".1f")(N.percent)}%
						</div>`:""}
					<div style="margin-top: 5px;">
						<div>Sex ratio: <b>${Ct(".0f")(K.malePercent)}% M / ${Ct(".0f")(K.femalePercent)}% F</b></div>
						<div>Median age: <b>${Ct(".1f")(K.medianAge)}</b> years</div>
						<div>IQR: <b>${Ct(".1f")(K.q1)} - ${Ct(".1f")(K.q3)}</b></div>
					</div>
					<div style="margin-top: 5px; font-size: 10px; color: #666;">Click to filter dashboard by department</div>
				`).style("visibility","visible").style("left",A.pageX+15+"px").style("top",A.pageY-10+"px")}).on("mousemove",function(A){L.style("left",A.pageX+15+"px").style("top",A.pageY-10+"px")}).on("mouseout",function(){const A=Z(this).datum();Z(this).transition().duration(200).attr("fill",r()===A.key?"#ff7f50":_.includes(A)?"#2a6d7c":"#5eb1c6"),L.style("visibility","hidden")}).on("click",function(A,N){A.stopPropagation();const K=r()===N.key?null:N.key;o("filter",{department:K,name:N.key}),Z(c(a)).selectAll(".dept-bar").transition().duration(300).attr("fill",R=>R.key===K?"#ff7f50":_.includes(R)?"#2a6d7c":"#5eb1c6"),r(K)}),M.append("g").attr("transform",`translate(0,${y})`).call(Pn(F)).selectAll("text").attr("transform","rotate(-45)").attr("text-anchor","end").style("font-size","12px"),M.append("g").call(Wr(k).tickFormat(A=>i()?Ct(".1f")(A)+"%":Ct(",.0f")(A))).style("font-size","12px"),M.append("text").attr("x",v/2).attr("y",y+75).attr("text-anchor","middle").style("font-size","14px").text("Surgical Department"),M.append("text").attr("transform","rotate(-90)").attr("x",-260/2).attr("y",-50).attr("text-anchor","middle").style("font-size","14px").text(i()?"Percentage of Cases":"Number of Cases")}function u(){r()&&(r(null),o("filter",{department:null}),l())}Re(()=>{l();const p=c(a);return p&&p.addEventListener("click",u),()=>{p&&p.removeEventListener("click",u),Z("body").selectAll(".dept-tooltip").remove()}}),Zi(l),at(()=>c(a),()=>{c(a)&&l()}),at(()=>(c(a),mt(n())),()=>{c(a)&&n()&&l()}),De(),Ie();var h=xh(),f=C(h),d=C(f);In(d,p=>P(a,p),()=>c(a)),E(f);var g=T(f,2);{var x=p=>{var v=vh(),y=C(v),m=T(C(y),2),w=C(m,!0);E(m);var b=T(m,2);E(y),E(v),Vt(()=>ct(w,r())),ae("click",b,u),st(p,v)},S=p=>{var v=yh();st(p,v)};Nt(g,p=>{r()?p(x):p(S,!1)})}E(h),st(t,h),pe()}function _h(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const wh=t=>Yu(t[t.length-1]);var kh=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_h);const Ah=wh(kh);function Ke(t,e,n){this.k=t,this.x=e,this.y=n}Ke.prototype={constructor:Ke,scale:function(t){return t===1?this:new Ke(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ke(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ke.prototype;var Mh=lt("<option> </option>"),$h=lt('<div class="no-data-message svelte-1nsvb8e">No cases match the selected criteria.</div>'),Sh=lt('<div class="timeline-container svelte-1nsvb8e"><div class="filter-controls svelte-1nsvb8e"><div class="filter-group svelte-1nsvb8e"><label for="group-select" class="svelte-1nsvb8e">Group By:</label> <select id="group-select" class="svelte-1nsvb8e"><option>Surgery Type</option><option>Department</option></select></div> <div class="filter-group svelte-1nsvb8e"><label for="group-value" class="svelte-1nsvb8e">Filter Value:</label> <select id="group-value" class="svelte-1nsvb8e"><option>All</option><!></select></div> <div class="filter-group svelte-1nsvb8e"><label class="svelte-1nsvb8e">Age Range:</label> <div class="age-inputs svelte-1nsvb8e"><input type="number" min="0" max="120" class="svelte-1nsvb8e"/> <span>to</span> <input type="number" min="0" max="120" class="svelte-1nsvb8e"/></div></div></div> <div class="timeline-visualization svelte-1nsvb8e"></div> <!></div>');function Eh(t,e){de(e,!1);const n=X();let r=Pt(e,"cases",24,()=>[]),i=Pt(e,"groupBy",12,"optype"),a=Pt(e,"ageRange",28,()=>[0,120]),s=Pt(e,"selectedDepartment",8,null),o=X(null),l=X(),u=X([]);const h=[{label:"Case Start",key:"casestart"},{label:"Anesthesia Start",key:"anestart"},{label:"Operation Start",key:"opstart"},{label:"Operation End",key:"opend"},{label:"Anesthesia End",key:"aneend"},{label:"Case End",key:"caseend"}];function f(R){return R.length?h.map(({label:B,key:U})=>{const O=U,Y=R.map(J=>{const rt=J[O],ot=J.casestart;return typeof rt=="number"&&typeof ot=="number"?rt-ot:NaN}).filter(J=>!isNaN(J));if(!Y.length)return{label:B,key:U,mean:null,min:null,max:null};const I=365*24*60*60,V=Y.filter(J=>Math.abs(J)<I);if(V.length===0)return{label:B,key:U,mean:null,min:null,max:null};const nt=ku(V),gt=kr(V),ht=Wt(V);return{label:B,key:U,mean:nt,min:gt,max:ht}}):h.map(({label:B,key:U})=>({label:B,key:U,mean:null,min:null,max:null}))}let d=X([]),g=X(!1);function x(){if(!c(l)||(ee(l,c(l).innerHTML=""),!c(d).length))return;const R=c(l).clientWidth||800,B=280,U=200,O=30,Y=c(d).filter(Q=>Q.mean!==null),I=Y.map(Q=>Q.mean),V=Math.min(...I),nt=Math.max(...I),gt=10,ht=Math.floor(V/60)-gt,J=Math.ceil(nt/60)+gt,rt=[ht,J],ot=(J-ht)/7,ft=Array.from({length:8},(Q,bt)=>Math.round((ht+bt*ot)/5)*5),yt=fe().domain(rt).range([U+O,R-O]),At=Z(c(l)).append("svg").attr("width","100%").attr("height",B).attr("viewBox",`0 0 ${R} ${B}`),Yt=["#52796F","#B08968","#7B6D8D","#A3A380","#8C6A57","#68829E"],q=Dn().domain(h.map(Q=>Q.label)).range(Yt),xt=Pn(yt).tickValues(ft).tickFormat(Q=>`${Math.round(Q)} min`),pt=At.append("g").attr("transform",`translate(0,${B/2})`).call(xt);pt.selectAll("text").style("font-size","12px").attr("transform",null).style("text-anchor","middle"),pt.selectAll(".tick line").remove(),pt.select(".domain").attr("x1",U+O),pt.selectAll(".tick").append("line").attr("y1",0).attr("y2",-280/2).attr("stroke","#eee").attr("stroke-dasharray","2,2");const tt=Z(c(l)).append("div").attr("class","timeline-tooltip").style("position","absolute").style("padding","8px 12px").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("opacity",0);At.selectAll(".event-group").data(Y).enter().append("g").attr("class","event-group").each(function(Q){const bt=Z(this),qt=yt(Q.mean/60);bt.append("line").attr("x1",()=>qt).attr("x2",()=>qt).attr("y1",()=>B/2-20).attr("y2",()=>B/2+20).attr("stroke",()=>q(Q.label)).attr("stroke-width",2),bt.append("line").attr("x1",()=>{const Mt=yt(Q.min/60),ze=U+O;return Math.max(Mt,ze)}).attr("x2",()=>{const Mt=yt(Q.max/60),ze=R-O;return Math.min(Mt,ze)}).attr("y1",()=>B/2).attr("y2",()=>B/2).attr("stroke",()=>"#000").attr("stroke-width",1),bt.append("circle").attr("cx",()=>qt).attr("cy",()=>B/2).attr("r",6).attr("fill",()=>q(Q.label)).on("mouseover",Mt=>{tt.transition().duration(200).style("opacity",1),tt.html(`
							<strong>${Q.label}</strong><br>
							Mean: ${(Q.mean/60).toFixed(1)} min<br>
							Range: ${(Q.min/60).toFixed(1)} - ${(Q.max/60).toFixed(1)} min
						`)}).on("mousemove",Mt=>{tt.style("left",`${Mt.pageX+10}px`).style("top",`${Mt.pageY-30}px`)}).on("mouseout",()=>{tt.transition().duration(200).style("opacity",0)})}),At.append("g").attr("class","event-legend").attr("transform","translate(20, 40)").selectAll("g").data(h).enter().append("g").attr("transform",(Q,bt)=>`translate(0, ${bt*25})`).each(function(Q){const bt=Z(this);bt.append("circle").attr("r",6).attr("cy",0).attr("fill",()=>q(Q.label)),bt.append("text").attr("x",16).attr("y",4).attr("font-size",13).attr("fill","#222").text(Q.label)});let dt="";c(o)&&(dt+=`${i()==="optype"?"Surgery Type":"Department"}: ${c(o)}`),s()&&(dt+=dt?`, Department: ${s()}`:`Department: ${s()}`),(a()[0]>0||a()[1]<120)&&(dt+=dt?`, Age: ${a()[0]}-${a()[1]}`:`Age: ${a()[0]}-${a()[1]}`),dt&&At.append("text").attr("x",U+O).attr("y",20).attr("font-size",12).attr("fill","#666").text(dt),At.append("text").attr("x",R-O).attr("y",20).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`n = ${c(n).length} cases`);const G=rt[1]-rt[0];At.append("text").attr("x",R-O).attr("y",B-10).attr("text-anchor","end").attr("font-size",12).attr("fill","#666").text(`Total duration: ${Math.round(G)} min`)}Re(()=>{c(l)&&x()}),at(()=>(mt(r()),c(o),mt(i()),mt(s()),mt(a())),()=>{P(n,r().filter(R=>(!c(o)||R[i()]===c(o))&&(!s()||R.department===s())&&R.age>=a()[0]&&R.age<=a()[1]))}),at(()=>(mt(r()),mt(i())),()=>{P(u,Array.from(new Set(r().map(R=>R[i()]))).filter(Boolean))}),at(()=>c(n),()=>{c(n)&&(P(d,f(c(n))),P(g,!0))}),at(()=>(c(g),c(l)),()=>{c(g)&&c(l)&&(x(),P(g,!1))}),De(),Ie();var S=Sh(),p=C(S),v=C(p),y=T(C(v),2);Vt(()=>{i(),fi(()=>{})});var m=C(y);m.value=m.__value="optype";var w=T(m);w.value=w.__value="department",E(y),E(v);var b=T(v,2),D=T(C(b),2);Vt(()=>{c(o),fi(()=>{c(u)})});var _=C(D);_.value=(_.__value=null)??"";var F=T(_);oa(F,1,()=>c(u),sa,(R,B)=>{var U=Mh(),O={},Y=C(U,!0);E(U),Vt(()=>{O!==(O=c(B))&&(U.value=(U.__value=c(B))??""),ct(Y,c(B))}),st(R,U)}),E(D),E(b);var k=T(b,2),M=T(C(k),2),$=C(M);_t($);var L=T($,4);_t(L),E(M),E(k),E(p);var A=T(p,2);In(A,R=>P(l,R),()=>c(l));var N=T(A,2);{var K=R=>{var B=$h();st(R,B)};Nt(N,R=>{c(n).length===0&&R(K)})}E(S),gi(y,i),gi(D,()=>c(o),R=>P(o,R)),jt($,()=>a()[0],R=>a(a()[0]=R,!0)),jt(L,()=>a()[1],R=>a(a()[1]=R,!0)),st(t,S),pe()}function Nh(t,e){return Ch(t)||Th(t,e)||Fh()}function Ch(t){if(Array.isArray(t))return t}function Th(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}function Fh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ja(t,e,n,r){for(var i=0,a=0,s=t.length;a<s;a++){var o=t[a],l=+e(o,a,t),u=+n(o,a,t);l!=null&&isFinite(l)&&u!=null&&isFinite(u)&&r(l,u,i++)}}function Ih(t,e,n,r,i){var a=0,s=0;return ja(t,e,n,function(o,l){var u=l-i(o),h=l-r;a+=u*u,s+=h*h}),1-a/s}function Rh(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,s=e-a*t;return[s,a]}function Dh(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,s=0,o=0,l=0,u=0,h=n?+n[0]:1/0,f=n?+n[1]:-1/0;ja(i,t,e,function(y,m){++a,s+=(y-s)/a,o+=(m-o)/a,l+=(y*m-l)/a,u+=(y*y-u)/a,n||(y<h&&(h=y),y>f&&(f=y))});var d=Rh(s,o,l,u),g=Nh(d,2),x=g[0],S=g[1],p=function(m){return S*m+x},v=[[h,p(h)],[f,p(f)]];return v.a=S,v.b=x,v.predict=p,v.rSquared=Ih(i,t,e,o,p),v}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var Ph=lt('<div class="mb-4 flex gap-6 text-sm"><label><input type="radio"/> <span class="ml-1">Elective</span></label> <label><input type="radio"/> <span class="ml-1">Emergency</span></label> <label><input type="radio"/> <span class="ml-1">All</span></label></div> <svg style="width: 100%; height: auto;" class="svelte-1pqg8op"></svg>',1);function zh(t,e){de(e,!1);const n=[];let r=Pt(e,"patients",24,()=>[]),i=X("elective"),a=X([]),s=X();const o=640,l=320,u=48,h=Ha(Ah).domain([5,0]);function f(b){if(!c(s))return;const D=Z(c(s)).attr("viewBox",`0 0 ${o} ${l}`).html("");if(!b.length){D.append("text").attr("x",o/2).attr("y",l/2).attr("text-anchor","middle").attr("fill","#888").attr("font-size","16px").text("No cases with albumin in this view");return}const _=[...b].sort((I,V)=>+I.preop_alb-+V.preop_alb),F=[];for(let I=0;I<_.length;I+=5){const V=_.slice(I,I+5);if(V.length>0){const nt=V.reduce((ht,J)=>ht+ +J.preop_alb,0)/V.length,gt=V.reduce((ht,J)=>ht+(J.icu_days||0),0)/V.length;F.push({albumin:nt,icuDays:gt,count:V.length,cases:V})}}const k=fe().domain([2,Wt(F,I=>I.albumin)||6]).nice().range([u,o-u]),M=fe().domain([0,Wt(F,I=>I.icuDays)||5]).nice().range([l-u,u]),$=D.append("g");M.ticks(5).forEach(I=>{$.append("line").attr("x1",u).attr("x2",o-u).attr("y1",M(I)).attr("y2",M(I)).attr("stroke","#e5e7eb").attr("stroke-width",1)}),k.ticks(6).forEach(I=>{$.append("line").attr("x1",k(I)).attr("x2",k(I)).attr("y1",u).attr("y2",l-u).attr("stroke","#e5e7eb").attr("stroke-width",1)}),$.append("line").attr("x1",k(3.5)).attr("x2",k(3.5)).attr("y1",u).attr("y2",l-u).attr("stroke","#ef4444").attr("stroke-width",2).attr("stroke-dasharray","4,4"),$.append("text").attr("x",k(3.5)).attr("y",u+16).attr("text-anchor","middle").attr("font-size","12px").attr("fill","#ef4444").attr("font-weight","500").text("Albumin Cliff (3.5 g/dL)");const L=Dh().x(I=>I.albumin).y(I=>I.icuDays).domain(k.domain())(F),A=Lc().x(I=>k(I[0])).y(I=>M(I[1]));D.append("path").datum(L).attr("fill","none").attr("stroke","#4b5563").attr("stroke-width",2).attr("d",I=>A(I)),D.append("g").selectAll("circle").data(F).enter().append("circle").attr("cx",I=>k(I.albumin)).attr("cy",I=>M(I.icuDays)).attr("r",I=>Math.sqrt(I.count)*2).attr("fill",I=>h(Math.min(I.icuDays,5))).attr("stroke","#374151").attr("stroke-opacity",.15).append("title").text(I=>`Average Albumin: ${I.albumin.toFixed(2)} g/dL
Average ICU Stay: ${I.icuDays.toFixed(1)} days
Number of Cases: ${I.count}`);const N=Pn(k).ticks(6).tickFormat(I=>I+" g/dL");D.append("g").attr("transform",`translate(0, ${l-u})`).call(N).selectAll("text").attr("font-size","13px").attr("fill","#374151");const K=Wr(M).ticks(5).tickFormat(I=>I+" days");D.append("g").attr("transform",`translate(${u}, 0)`).call(K).selectAll("text").attr("font-size","13px").attr("fill","#374151"),D.append("text").attr("x",o/2).attr("y",l-u+36).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Pre-operative Albumin (g/dL)"),D.append("text").attr("transform",`translate(${u-36}, ${l/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","14px").attr("fill","#374151").text("Average ICU Stay (days)"),D.append("text").attr("x",o/2).attr("y",u-16).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","600").attr("fill","#1f2937").text("Hidden Risk Factor — The Albumin Cliff");const R=o-u-120,B=u,U=D.append("g").attr("transform",`translate(${R}, ${B})`),O=[0,1,2,3,4,5],Y=15;U.selectAll("rect").data(O).enter().append("rect").attr("x",(I,V)=>V*(Y+2)).attr("y",0).attr("width",Y).attr("height",10).attr("fill",I=>h(I)),U.append("text").attr("x",0).attr("y",24).attr("font-size","12px").attr("fill","#374151").text("ICU ≥ 5d"),U.append("text").attr("x",(Y+2)*5+4).attr("y",24).attr("text-anchor","end").attr("font-size","12px").attr("fill","#374151").text("0–1d")}Re(()=>{c(s)&&f(c(a))}),at(()=>(mt(r()),c(i)),()=>{r()?P(a,r().filter(b=>{const D=+b.preop_alb;return!Number.isFinite(D)||D<=0?!1:c(i)==="elective"?b.emop===0&&b.ane_type==="General":c(i)==="emergency"?b.emop===1:!0})):P(a,[])}),at(()=>(c(s),c(a)),()=>{c(s)&&f(c(a))}),De(),Ie();var d=Ph(),g=Or(d),x=C(g),S=C(x);_t(S),S.value=S.__value="elective",Dt(2),E(x);var p=T(x,2),v=C(p);_t(v),v.value=v.__value="emergency",Dt(2),E(p);var y=T(p,2),m=C(y);_t(m),m.value=m.__value="all",Dt(2),E(y),E(g);var w=T(g,2);In(w,b=>P(s,b),()=>c(s)),rr(n,[],S,()=>c(i),b=>P(i,b)),rr(n,[],v,()=>c(i),b=>P(i,b)),rr(n,[],m,()=>c(i),b=>P(i,b)),st(t,d),pe()}var qh=lt(`<div class="mt-4 rounded bg-red-100 p-4 text-red-800"><h4 class="font-bold mb-2">⚠️ No Matching Cases Found</h4> <p>There are no historical cases that match your current patient profile. Consider:</p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some of your filters</li> <li>Adjusting the patient's characteristics to more common values</li> <li>Using a broader range for age, BMI, or ASA score</li></ul></div>`),Lh=lt('<div class="mt-4 rounded bg-yellow-100 p-4 text-yellow-800"><h4 class="font-bold mb-2">⚠️ Limited Data Available</h4> <p> </p> <ul class="list-disc ml-6 mt-2"><li>Relaxing some filters to get more comparable cases</li> <li>Adjusting the patient profile to match more common characteristics</li></ul></div>'),Bh=lt('<button class="rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Make a Guess</button>'),Oh=lt('<button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600">Back</button>'),Hh=lt('<div class="mt-6 space-y-4"><h3 class="text-lg font-semibold">Make Your Predictions</h3> <div class="grid gap-4"><div><label class="block text-sm text-gray-600">Predicted ICU Stay (days)</label> <input type="number" min="0" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Mortality (%)</label> <input type="number" min="0" max="100" step="0.1" class="mt-1 w-full rounded border p-2"/></div> <div><label class="block text-sm text-gray-600">Predicted Blood Loss (mL)</label> <input type="number" min="0" step="1" class="mt-1 w-full rounded border p-2"/></div></div></div>'),Vh=lt(`<p class="mt-2 text-red-600">Your predictions were quite far from the actual outcomes. Consider reviewing the patient's risk factors more carefully.</p>`),Xh=lt('<p class="mt-2 text-orange-600">Your predictions were somewhat off. Try to consider how different factors might interact to affect outcomes.</p>'),Yh=lt(`<p class="mt-2 text-yellow-600">Good predictions! You're getting better at understanding how patient characteristics influence outcomes.</p>`),Uh=lt('<p class="mt-2 text-green-600">Excellent predictions! You have a strong understanding of how patient factors correlate with surgical outcomes.</p>'),Gh=lt('<div class="mt-4 rounded bg-yellow-50 p-3 text-sm text-yellow-800"> <!></div>'),Wh=lt('<h3 class="mt-6 text-lg font-semibold">Outcomes from Similar Cases</h3> <div class="grid grid-cols-3 gap-4"><div><p class="text-sm text-gray-600">Average ICU Stay</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div> <div><p class="text-sm text-gray-600">Mortality Rate</p> <div class="h-2 w-full rounded-full" style="background: linear-gradient(to right, #22c55e, #ef4444)"></div> <p class="font-medium"> </p></div> <div><p class="text-sm text-gray-600">Average Blood Loss</p> <p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></div> <!>',1),Kh=lt('<div class="space-y-6 rounded-lg bg-gray-50 p-4"><div class="flex gap-8"><div class="flex-1 space-y-6"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold">Adjust Patient Profile</h3> <div class="flex items-center gap-2 text-sm text-gray-600"><span> </span></div></div> <div class="grid grid-cols-2 gap-4"><label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Age Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">Height Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">BMI Filter</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded border-gray-300"/> <span class="text-sm">ASA Filter</span></label></div> <div class="space-y-6"><div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" step="0.1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div> <div><label class="block text-sm text-gray-600"> </label> <input type="range" min="1" max="5" step="1" class="w-full"/> <p class="text-xs text-gray-500"> </p></div></div></div> <div class="flex flex-1 items-center justify-center"><svg class="h-full w-full" style="min-height: 350px; max-height: 500px;"><circle cx="100" cy="30" r="20"></circle><line x1="100" y1="50" x2="100"></line><ellipse cx="100"></ellipse><line x1="100" y1="80"></line><line x1="100" y1="80"></line><line x1="100" x2="70"></line><line x1="100" x2="130"></line><path d="M80,20 Q100,0 120,20" fill="none"></path></svg></div></div> <div class="mt-4 rounded bg-blue-50 p-3 text-sm text-blue-800"> </div> <!> <div class="mt-4 flex space-x-4"><!> <button class="rounded bg-gray-500 px-4 py-2 text-white hover:bg-gray-600"> </button></div> <!> <!></div>');function Qh(t,e){de(e,!1);const n=X(),r=X(),i=X(),a=X(),s=X(),o=X(),l=X(),u=X(),h=X(),f=X(),d=X(),g=X(),x=X(),S=X();let p=Pt(e,"predictors",12),v=Pt(e,"cases",24,()=>[]),y=X(!1),m=X({icuDays:0,mortality:0,bloodLoss:0}),w=X(!1),b=X(0),D=X(!1),_=X({age:!0,height:!0,bmi:!0,asa:!0});function F(H){const et=H/2.54,$t=Math.floor(et/12),vt=Math.round(et%12);return{feet:$t,inches:vt}}function k(H,et){return Math.round((H*12+et)*2.54)}const M={min:{feet:4,inches:5},max:{feet:7,inches:5}};let $=X(0),L=X(0),A=X(0),N=X(0),K=X({q1:0,q3:0}),R=X({q1:0,q3:0});function B(H,et,$t){if(et===0&&H===0)return 1;if(et===0||H===0)return 0;const vt=Math.abs(H-et)/Math.max(et,1);return Math.exp(-vt)}function U(){P(y,!0),P(w,!1),P(D,!1),P(m,{icuDays:0,mortality:0,bloodLoss:0})}const O={1:"#22c55e",2:"#a3e635",3:"#eab308",4:"#f97316",5:"#ef4444"};at(()=>{},()=>{P(n,{min:k(M.min.feet,M.min.inches),max:k(M.max.feet,M.max.inches)})}),at(()=>mt(v()),()=>{P(r,v().length>0?{min:Math.min(...v().map(H=>H.age)),max:Math.max(...v().map(H=>H.age))}:{min:0,max:0})}),at(()=>mt(v()),()=>{P(i,v().length>0?{min:Math.min(...v().map(H=>H.bmi)),max:Math.max(...v().map(H=>H.bmi))}:{min:0,max:0})}),at(()=>mt(v()),()=>{P(a,v().length>0?[...new Set(v().map(H=>H.asa))].sort():[])}),at(()=>(mt(v()),c(_),mt(p()),c($),c(L),c(A),c(y),c(w),c(m)),()=>{if(v().length>0){const H=c(_).age?v().filter(ut=>Math.abs(ut.age-p().age)<=5):v(),et=c(_).bmi?v().filter(ut=>Math.abs(ut.bmi-p().bmi)<=5):v(),$t=c(_).height?v().filter(ut=>Math.abs(ut.height-p().height)<=5.08):v(),vt=c(_).asa?v().filter(ut=>Math.abs(ut.asa-p().asa)<=2):v(),St=H.filter(ut=>et.includes(ut)).filter(ut=>$t.includes(ut)).filter(ut=>vt.includes(ut));if(P(N,St.length),St.length>0){const ut=St.map(it=>Number(it.icu_days)).filter(it=>!isNaN(it)).sort((it,Rt)=>it-Rt);P($,ut.reduce((it,Rt)=>it+Rt,0)/ut.length),P(K,{q1:ut[Math.floor(ut.length*.25)],q3:ut[Math.floor(ut.length*.75)]}),P(L,St.reduce((it,Rt)=>it+(Rt.death_inhosp||0),0)/St.length);const It=St.map(it=>Number(it.intraop_ebl)).filter(it=>!isNaN(it)).sort((it,Rt)=>it-Rt);if(P(A,It.reduce((it,Rt)=>it+Rt,0)/It.length),P(R,{q1:It[Math.floor(It.length*.25)],q3:It[Math.floor(It.length*.75)]}),c(y)&&c(w)){const it=B(c(m).icuDays,c($)),Rt=B(c(m).mortality,c(L)*100,St.map(Le=>Le.death_inhosp*100)),on=B(c(m).bloodLoss,c(A));P(b,it*.4+Rt*.3+on*.3)}}else P($,0),P(L,0),P(A,0),P(K,{q1:0,q3:0}),P(R,{q1:0,q3:0})}}),at(()=>(mt(p()),c(n)),()=>{P(s,(p().height-c(n).min)/(c(n).max-c(n).min))}),at(()=>c(s),()=>{P(o,250+c(s)*150)}),at(()=>(mt(p()),c(i)),()=>{P(l,2+(p().bmi-c(i).min)/(c(i).max-c(i).min)*4)}),at(()=>(mt(p()),c(i)),()=>{P(u,(p().bmi-c(i).min)/(c(i).max-c(i).min))}),at(()=>c(u),()=>{P(h,10+c(u)*25)}),at(()=>c(o),()=>{P(f,c(o)*.2)}),at(()=>(mt(p()),c(r)),()=>{P(d,`rgb(${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255}, ${(p().age-c(r).min)/(c(r).max-c(r).min)*255})`)}),at(()=>mt(p()),()=>{P(g,O[p().asa]||O[1])}),at(()=>c(_),()=>{P(x,Object.values(c(_)).filter(Boolean).length)}),at(()=>c(x),()=>{P(S,c(x)===4?"all filters":`${c(x)} filter${c(x)===1?"":"s"}`)}),De(),Ie();var Y=Kh(),I=C(Y),V=C(I),nt=C(V),gt=T(C(nt),2),ht=C(gt),J=C(ht);E(ht),E(gt),E(nt);var rt=T(nt,2),ot=C(rt),ft=C(ot);_t(ft),Dt(2),E(ot);var yt=T(ot,2),At=C(yt);_t(At),Dt(2),E(yt);var Yt=T(yt,2),q=C(Yt);_t(q),Dt(2),E(Yt);var xt=T(Yt,2),pt=C(xt);_t(pt),Dt(2),E(xt),E(rt);var tt=T(rt,2),z=C(tt),j=C(z),dt=C(j);E(j);var G=T(j,2);_t(G);var Q=T(G,2),bt=C(Q);E(Q),E(z);var qt=T(z,2),Mt=C(qt),ze=C(Mt);E(Mt);var ge=T(Mt,2);_t(ge);var jr=T(ge,2),ts=C(jr);E(jr),E(qt);var rn=T(qt,2),Ln=C(rn),es=C(Ln);E(Ln);var me=T(Ln,2);_t(me);var ti=T(me,2),ns=C(ti);E(ti),E(rn);var Bn=T(rn,2),On=C(Bn),rs=C(On);E(On);var an=T(On,2);_t(an);var ei=T(an,2),is=C(ei);E(ei),E(Bn),E(tt),E(V);var ni=T(V,2),Hn=C(ni),sn=C(Hn),qe=T(sn),se=T(qe),ve=T(se),ye=T(ve),xe=T(ye),be=T(xe),Vn=T(be);E(Hn),E(ni),E(I);var Xn=T(I,2),as=C(Xn);E(Xn);var ri=T(Xn,2);{var ss=H=>{var et=qh();st(H,et)},os=(H,et)=>{{var $t=vt=>{var Ft=Lh(),Bt=T(C(Ft),2),St=C(Bt);E(Bt),Dt(2),E(Ft),Vt(()=>ct(St,`Only ${c(N)??""} cases match your current filters. The predictions may not be reliable. Consider:`)),st(vt,Ft)};Nt(H,vt=>{c(N)<10&&vt($t)},et)}};Nt(ri,H=>{c(N)===0?H(ss):H(os,!1)})}var Yn=T(ri,2),ii=C(Yn);{var ls=H=>{var et=Bh();ae("click",et,U),st(H,et)},us=H=>{var et=Oh();ae("click",et,()=>{P(y,!1),P(w,!1),P(D,!1)}),st(H,et)};Nt(ii,H=>{c(y)?H(us,!1):H(ls)})}var Un=T(ii,2),cs=C(Un,!0);E(Un),E(Yn);var ai=T(Yn,2);{var fs=H=>{var et=Hh(),$t=T(C(et),2),vt=C($t),Ft=T(C(vt),2);_t(Ft),E(vt);var Bt=T(vt,2),St=T(C(Bt),2);_t(St),E(Bt);var ut=T(Bt,2),It=T(C(ut),2);_t(It),E(ut),E($t),E(et),jt(Ft,()=>c(m).icuDays,it=>ee(m,c(m).icuDays=it)),jt(St,()=>c(m).mortality,it=>ee(m,c(m).mortality=it)),jt(It,()=>c(m).bloodLoss,it=>ee(m,c(m).bloodLoss=it)),st(H,et)};Nt(ai,H=>{c(y)&&H(fs)})}var hs=T(ai,2);{var ds=H=>{var et=Wh(),$t=T(Or(et),2),vt=C($t),Ft=T(C(vt),2),Bt=C(Ft);E(Ft);var St=T(Ft,2),ut=C(St);E(St),E(vt);var It=T(vt,2),it=T(C(It),4),Rt=C(it);E(it),E(It);var on=T(It,2),Le=T(C(on),2),ps=C(Le);E(Le);var si=T(Le,2),gs=C(si);E(si),E(on),E($t);var ms=T($t,2);{var vs=Be=>{var Oe=Gh(),ln=C(Oe),Gn=T(ln);{var Wn=Ut=>{var Qn=Vh();st(Ut,Qn)},Kn=(Ut,Qn)=>{{var ys=_e=>{var Zn=Xh();st(_e,Zn)},xs=(_e,Zn)=>{{var bs=we=>{var Jn=Yh();st(we,Jn)},_s=we=>{var Jn=Uh();st(we,Jn)};Nt(_e,we=>{c(b)<=.75?we(bs):we(_s,!1)},Zn)}};Nt(Ut,_e=>{c(b)<=.5?_e(ys):_e(xs,!1)},Qn)}};Nt(Gn,Ut=>{c(b)<=.25?Ut(Wn):Ut(Kn,!1)})}E(Oe),Vt(Ut=>ct(ln,`Your guess was ${Ut??""}% accurate! `),[()=>(c(b)*100).toFixed(1)],ie),st(Be,Oe)};Nt(ms,Be=>{c(y)&&c(w)&&Be(vs)})}Vt((Be,Oe,ln,Gn,Wn,Kn,Ut)=>{ct(Bt,`${Be??""} days`),ct(ut,`IQR: ${Oe??""} - ${ln??""} days`),ct(Rt,`${Gn??""}%`),ct(ps,`${Wn??""} mL`),ct(gs,`IQR: ${Kn??""} - ${Ut??""} mL`)},[()=>c($).toFixed(1),()=>c(K).q1.toFixed(1),()=>c(K).q3.toFixed(1),()=>(c(L)*100).toFixed(1),()=>c(A).toFixed(0),()=>c(R).q1.toFixed(0),()=>c(R).q3.toFixed(0)],ie),st(H,et)};Nt(hs,H=>{(!c(y)||c(w))&&c(D)&&H(ds)})}E(Y),Vt((H,et,$t,vt,Ft,Bt)=>{ct(J,`Active: ${c(S)??""}`),un(z,1,cn(c(_).age?"":"opacity-50")),ct(dt,`Age: ${p().age??""} years`),W(G,"min",c(r).min),W(G,"max",c(r).max),G.disabled=!c(_).age,ct(bt,`Range: ${c(r).min??""} - ${c(r).max??""} years`),un(qt,1,cn(c(_).height?"":"opacity-50")),ct(ze,`Height: ${H??""}' ${et??""}"`),W(ge,"min",c(n).min),W(ge,"max",c(n).max),ge.disabled=!c(_).height,ct(ts,`Range: ${M.min.feet}'${M.min.inches}" - ${M.max.feet}'${M.max.inches}"`),un(rn,1,cn(c(_).bmi?"":"opacity-50")),ct(es,`BMI: ${p().bmi??""}`),W(me,"min",c(i).min),W(me,"max",c(i).max),me.disabled=!c(_).bmi,ct(ns,`Range: ${$t??""} - ${vt??""}`),un(Bn,1,cn(c(_).asa?"":"opacity-50")),ct(rs,`ASA Score: ${p().asa??""}`),an.disabled=!c(_).asa,ct(is,`ASA ${p().asa??""}: ${p().asa===1?"Healthy patient":p().asa===2?"Mild systemic disease":p().asa===3?"Severe systemic disease":p().asa===4?"Severe systemic disease that is a constant threat to life":"Moribund patient not expected to survive without the operation"}`),W(Hn,"viewBox",`0 0 200 ${c(o)??""}`),W(sn,"fill",c(g)),W(sn,"stroke-width",c(l)),W(sn,"opacity",c(_).asa?1:.5),W(qe,"y2",c(o)*.6),W(qe,"stroke",c(g)),W(qe,"stroke-width",c(l)),W(qe,"opacity",c(_).asa?1:.5),W(se,"cy",c(o)*.45),W(se,"rx",c(h)),W(se,"ry",c(f)),W(se,"fill",c(g)),W(se,"stroke-width",c(l)),W(se,"opacity",c(_).bmi?1:.5),W(ve,"x2",Ft),W(ve,"y2",c(o)*.4),W(ve,"stroke",c(g)),W(ve,"stroke-width",c(l)),W(ve,"opacity",c(_).asa?1:.5),W(ye,"x2",Bt),W(ye,"y2",c(o)*.4),W(ye,"stroke",c(g)),W(ye,"stroke-width",c(l)),W(ye,"opacity",c(_).asa?1:.5),W(xe,"y1",c(o)*.6),W(xe,"y2",c(o)*.9),W(xe,"stroke",c(g)),W(xe,"stroke-width",c(l)),W(xe,"opacity",c(_).asa?1:.5),W(be,"y1",c(o)*.6),W(be,"y2",c(o)*.9),W(be,"stroke",c(g)),W(be,"stroke-width",c(l)),W(be,"opacity",c(_).asa?1:.5),W(Vn,"stroke",c(d)),W(Vn,"stroke-width",c(l)*1.5),W(Vn,"opacity",c(_).age?1:.5),ct(as,`Found ${c(N)??""} historical patients with similar characteristics`),ct(cs,c(D)?"Hide Outcomes":"Show Outcomes")},[()=>F(p().height).feet,()=>F(p().height).inches,()=>c(i).min.toFixed(1),()=>c(i).max.toFixed(1),()=>60-Math.max(0,c(h)-20),()=>140+Math.max(0,c(h)-20)],ie),$e(ft,()=>c(_).age,H=>ee(_,c(_).age=H)),$e(At,()=>c(_).height,H=>ee(_,c(_).height=H)),$e(q,()=>c(_).bmi,H=>ee(_,c(_).bmi=H)),$e(pt,()=>c(_).asa,H=>ee(_,c(_).asa=H)),jt(G,()=>p().age,H=>p(p().age=H,!0)),jt(ge,()=>p().height,H=>p(p().height=H,!0)),jt(me,()=>p().bmi,H=>p(p().bmi=H,!0)),jt(an,()=>p().asa,H=>p(p().asa=H,!0)),ae("click",Un,()=>{P(D,!c(D)),c(y)&&P(w,!0)}),st(t,Y),pe()}var Zh=lt('<p class="py-16 text-center text-lg">Loading VitalDB dataset …</p>'),Jh=lt(`<article class="prose mx-auto space-y-20 py-10"><section class="space-y-6 text-center"><h1 class="text-4xl leading-tight font-semibold md:text-5xl">Vitals&nbsp;Unveiled:<br/> <span class="text-indigo-600">Why Some "Routine" Surgeries Aren't</span></h1> <p class="mx-auto max-w-2xl text-lg md:text-xl">Every morning an OR schedule hums like clockwork. <strong>6 388</strong> patients arrive,
				expecting a smooth ride through anesthesia and stitched-up certainty. Yet buried in those
				charts are <em>blood-loss spikes, surprise ICU transfers, and silent tragedies</em> that no checklist
				predicted. What separates the happy recoveries from the heart-stopping detours?</p> <p class="mx-auto max-w-2xl text-lg md:text-xl">Scroll on 👇 as we crack open the VitalDB dataset to follow every heartbeat, incision, and
				lab value—then build <strong>interactive risk profiles</strong> that may one day warn us before
				routine turns to critical.</p> <!></section> <section><h2>Who Steps Into the OR?</h2> <p class="mb-4 max-w-xl">Let's start by meeting our patients. The charts below reveal a striking pattern: while our
				patients span six decades, <strong>70% cluster in just two surgical departments</strong>. This concentration—combined
				with age and sex differences—creates wildly different baseline risks before the first
				incision. Click any department bar or select an age range to filter the dashboard and see how demographics shift
				across specialties.</p> <style>/* Ensure both charts have the same height */
				.visualization-grid > :global(div) {
					display: flex;
					flex-direction: column;
					min-height: 500px; /* Set a minimum height for both chart containers */
				}
				
				.visualization-grid > :global(div) > :global(.chart) {
					flex: 1;
					display: flex;
					flex-direction: column;
				}
				
				.visualization-grid > :global(div) > :global(.chart) > :global(svg) {
					flex: 1;
					min-height: 350px; /* Ensure SVG has minimum height */
				}</style> <div class="controls-container mb-4"><div class="flex flex-wrap gap-4"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox"/> Show percentages</label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox"/> Split by sex</label> <p class="text-xs italic text-gray-600"><i>Tip: Click and drag on the age chart to filter by age range. Click on department bars to filter by department.</i></p></div></div> <div class="grid gap-8 md:grid-cols-2 visualization-grid"><!> <!></div></section> <section><h2 class="text-left text-3xl font-bold mb-1 pb-2">Time on the Table</h2> <p class="mb-4 max-w-9xl mx-auto">Each dot marks a key moment in surgery. The visualization shows <strong>mean, min, and max durations</strong> across our 6,388 cases. 
				Try the filters above—switch between department and surgery type to see how <strong>different procedures have their own rhythm</strong>. 
				For instance, breast surgeries average just <strong>34 minutes</strong> from anesthesia to incision, while transplantations take nearly twice as long, <strong>at 70 minutes</strong>. 
				This pre-incision time matters, as longer anesthesia exposure before surgery increases risk of complications. If you're facing surgery, 
				use these filters to see typical timing patterns for your procedure—knowledge that can help you understand and prepare for your own surgical journey. 
				Hover over dots for exact timing stats.</p> <div><!></div></section> <section><h2>Hidden Risk Factor — The Albumin Cliff</h2> <p>Albumin is a blood protein that reflects nutritional reserve and overall physiological
				resilience. In the pre-operative setting, low albumin levels often signal that a patient's
				body may struggle to recover. By highlighting albumin, we remind viewers that a seemingly
				"routine" lab value—often checked before surgery—can quietly predict who sails through the
				OR and who may end up in the ICU. It's the kind of hidden detail that turns "routine" into
				"unexpected" when no one is watching.</p> <br/> <p><strong>x-axis</strong> = pre-operative albumin (g/dL). <strong>Dot colour</strong> = post-op ICU stay (<span style="color:#a50026">red ≈ ≥ 3 days</span>, <span style="color:#3288bd">deep-blue ≈ 0–1 day</span>). Use the radio buttons to flip
				between routine <b>elective</b>, urgent <b>emergency</b>, or <b>all</b> cases. Below a certain threshold, the
				risk of prolonged ICU stay climbs sharply—our so-called "Albumin Cliff."</p> <br/> <!> <h3>What we actually see</h3> <ul class="list-inside list-disc space-y-1"><li><strong>In elective cases, a pronounced shift appears near 3 g/dL.</strong> Patients with
					albumin just under 3 g/dL begin to light up orange and red, whereas above 3 g/dL most stay
					deep-blue. <span class="font-semibold">Median ICU stay below 3 g/dL is about 2.1 days (IQR 1–4),</span> compared to <span class="font-semibold">0.7 days (IQR 0–1) above 3 g/dL</span>. A few low-albumin blue
					outliers exist, but long-stayers (amber & red) become nearly three times more common once
					you cross that cliff.</li> <li><strong>In emergencies, the "cliff" shifts upward to around 3.5 g/dL.</strong> Because
					urgent cases already carry extra risk, the median albumin threshold where ICU stays spike
					is higher. Below ~3.5 g/dL, <span class="font-semibold">the chance of ≥ 3-day ICU stay more than doubles</span> compared
					to those with albumin above 3.5 g/dL. The spread of dots is wider, but the colour gradient
					still tilts toward red as albumin drops.</li> <li>High-albumin (> 4 g/dL) patients rarely linger, anchoring the schedule "clockwork" we saw
					in the opening hook.</li></ul> <p><b>Take-away&nbsp;→</b> Albumin isn't a guarantee of trouble, but a <em>silent gravity well</em>: the lower it drops, the harder it is to climb off the ICU
				track. Even in apparently routine electives, nutrition can tip the balance from day-case
				discharge to days of critical care.</p></section>   <section><h2>Interactive Risk Builder</h2> <p class="mb-4 max-w-xl">Now it's your turn. Build a patient profile using the sliders below. Watch how tiny shifts—a
				single ASA notch or clicking 'Emergency'—can triple the mortality risk instantly. We'll show
				you how many similar historical cases we found, so you can trust the predictions. Try the
				"Make a Guess" mode to test your intuition against the data.</p> <!></section> <section class="text-center"><div class="mx-auto max-w-2xl rounded-lg bg-indigo-50 p-8"><h2 class="mb-4 text-2xl font-semibold text-indigo-900">The Takeaway</h2> <p class="text-lg text-indigo-800">The data reveals three critical insights: First, pre-op albumin levels—easily measured and
					often correctable—strongly predict ICU stays. Second, emergency status and ASA score
					interact in ways that standard checklists miss. And third, while we can't change age, we
					can optimize timing, prepare blood products, and adjust recovery expectations based on
					these risk factors. The data tells us where to look—before the knife ever touches skin.</p></div></section></article>`);function od(t,e){de(e,!1);let n=X([]),r=X(!0),i=X([]),a=X(null),s=X(null),o=X(!1);function l(y){const{department:m}=y.detail;P(a,m),f()}function u(y){P(o,y.detail.showPercentage)}function h(y){const{ageRange:m}=y.detail;P(s,m),f()}function f(){let y=[...c(n)];c(a)&&(y=y.filter(m=>m.department===c(a))),c(s)&&(y=y.filter(m=>m.age!==void 0&&m.age>=c(s)[0]&&m.age<=c(s)[1])),P(i,y)}function d(y){return y==null||y.trim()===""?"":/^[+\-]?\d+(\.\d+)?$/.test(y)?+y:y}Re(async()=>{const y=`${Ks}/cases.csv`;P(n,await vo(y,m=>{const w={};for(const b in m)w[b]=d(m[b]);return w})),P(r,!1)});let g=X({age:60,bmi:25,asa:2,emergency:0});at(()=>c(n),()=>{if(c(n).length>0){let F=function(k,M){const $=k.avgWait;k.count++,k.avgWait=($*(k.count-1)+M)/k.count,k.stdDev=Math.sqrt(((k.count-2)*k.stdDev*k.stdDev+(M-$)*(M-k.avgWait))/(k.count-1))};const y=c(n).filter(k=>k.emop===1&&(k.preop_alb??0)<3),m=c(n).filter(k=>k.emop===0&&(k.preop_alb??0)>3.5),w=y.length>0?y.reduce((k,M)=>k+(M.death_inhosp??0),0)/y.length:0,b=m.length>0?m.reduce((k,M)=>k+(M.death_inhosp??0),0)/m.length:0;console.log("Emergency Low Alb Mortality:",(w*100).toFixed(1)+"%"),console.log("Elective High Alb Mortality:",(b*100).toFixed(1)+"%"),console.log("Ratio:",(w/(b||.001)).toFixed(1)+"x");const D=new Map,_=new Map;c(n).forEach(k=>{if(k.department&&k.optype&&k.anestart&&k.opstart){const M=(k.opstart-k.anestart)/60;D.has(k.department)||D.set(k.department,{count:0,avgWait:0,stdDev:0}),F(D.get(k.department),M),_.has(k.optype)||_.set(k.optype,{count:0,avgWait:0,stdDev:0}),F(_.get(k.optype),M)}}),console.log(`
Department Timing Patterns (sorted by case count):`),Array.from(D.entries()).sort((k,M)=>M[1].count-k[1].count).forEach(([k,M])=>{console.log(`${k}: ${M.count} cases, avg wait ${M.avgWait.toFixed(1)} ± ${M.stdDev.toFixed(1)} min`)}),console.log(`
Surgery Type Timing Patterns (top 10 by case count):`),Array.from(_.entries()).sort((k,M)=>M[1].count-k[1].count).slice(0,10).forEach(([k,M])=>{console.log(`${k}: ${M.count} cases, avg wait ${M.avgWait.toFixed(1)} ± ${M.stdDev.toFixed(1)} min`)})}}),De(),Ie();var x=ws(),S=Or(x);{var p=y=>{var m=Zh();st(y,m)},v=y=>{var m=Jh(),w=C(m),b=T(C(w),6);const D=ie(()=>[{label:"Total Surgeries",value:c(n).length},{label:"ICU Transfers",value:c(n).filter(J=>(J.icu_days??0)>0).length},{label:"In-hospital Deaths",value:c(n).filter(J=>J.death_inhosp==1).length}]);ko(b,{get stats(){return c(D)}}),E(w);var _=T(w,2),F=T(C(_),6),k=C(F),M=C(k),$=C(M);_t($),Dt(),E(M);var L=T(M,2),A=C(L);Dt(),E(L),Dt(2),E(k),E(F);var N=T(F,2),K=C(N);const R=ie(()=>c(a)?c(i):c(n));mh(K,{get data(){return c(R)},get showPercentage(){return c(o)},set showPercentage(J){P(o,J)},$$events:{percentageChange:u,filter:h},$$legacy:!0});var B=T(K,2);const U=ie(()=>c(s)?c(i):c(n));bh(B,{get data(){return c(U)},get filteredDepartment(){return c(a)},get showPercentage(){return c(o)},$$events:{filter:l}}),E(N),E(_);var O=T(_,2),Y=T(C(O),4),I=C(Y);Eh(I,{get cases(){return c(n)}}),E(Y),E(O);var V=T(O,2),nt=T(C(V),10);zh(nt,{get patients(){return c(n)}}),Dt(6),E(V);var gt=T(V,2),ht=T(C(gt),4);Qh(ht,{get cases(){return c(n)},get predictors(){return c(g)},set predictors(J){P(g,J)},$$legacy:!0}),E(gt),Dt(2),E(m),$e($,()=>c(o),J=>P(o,J)),ae("change",$,()=>{u({detail:{showPercentage:c(o)}})}),ae("change",A,J=>{const rt=J.target.checked,ot=document.querySelector('input[name="showBySexInternal"]');ot&&(ot.checked=rt,ot.dispatchEvent(new Event("change")))}),st(y,m)};Nt(S,y=>{c(r)?y(p):y(v,!1)})}st(t,x),pe()}export{od as component};
